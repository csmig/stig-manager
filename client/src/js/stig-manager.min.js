window.undefined=window.undefined,Ext={version:"3.4.1.1",versionDetail:{major:3,minor:4,patch:1.1},apply:function(t,e,i){if(i&&Ext.apply(t,i),t&&e&&"object"==typeof e)for(var s in e)t[s]=e[s];return t}},function(){function t(t){return t.test(r)}function o(){var t=o.caller.caller;return t.$owner.prototype[t.$name].apply(this,arguments)}var e,i,a,s=0,n=Object.prototype.toString,r=navigator.userAgent.toLowerCase(),l=document,d=l.documentMode,h="CSS1Compat"==l.compatMode,c=t(/opera/),u=t(/\bchrome\b/),f=t(/webkit/),p=!u&&t(/safari/),m=p&&t(/applewebkit\/4/),g=p&&t(/version\/3/),x=p&&t(/version\/4/),E=!c&&t(/msie/),v=E&&(t(/msie 7/)&&8!=d&&9!=d&&10!=d||7==d),y=E&&(t(/msie 8/)&&7!=d&&9!=d&&10!=d||8==d),b=E&&(t(/msie 9/)&&7!=d&&8!=d&&10!=d||9==d),w=E&&(t(/msie 10/)&&7!=d&&8!=d&&9!=d||10==d),C=E&&t(/msie 6/),S=E&&(C||v||y||b),T=!f&&t(/gecko/),I=T&&t(/rv:1\.8/),k=T&&t(/rv:1\.9/),M=S&&!h,D=t(/windows|win32/),A=t(/macintosh|mac os x/),R=t(/adobeair/),N=t(/linux/),F=/^https/i.test(window.location.protocol),P=[],O=[],L=Ext.emptyFn,d=Ext.apply({},{constructor:L,toString:L,valueOf:L});function B(){}if(d.constructor!==L&&O.push("constructor"),d.toString!==L&&O.push("toString"),d.valueOf!==L&&O.push("valueOf"),O.length||(O=null),Ext.apply(B,{$isClass:!0,callParent:function(t){var e;return(e=this.callParent.caller)&&(e.$previous||(e=e.$owner?e:e.caller)&&e.$owner.superclass.self[e.$name]).apply(this,t||P)}}),B.prototype={constructor:function(){},callParent:function(t){var e;return((e=this.callParent.caller)&&(e.$previous||(e=e.$owner?e:e.caller)&&e.$owner.superclass[e.$name])).apply(this,t||P)}},C)try{l.execCommand("BackgroundImageCache",!1,!0)}catch(t){}function _(t){for(var e in t)this[e]=t[e]}Ext.apply(Ext,{SSL_SECURE_URL:F&&E?'javascript:""':"about:blank",isStrict:h,isSecure:F,isReady:!1,enableForcedBoxModel:!1,enableGarbageCollector:!0,enableListenerCollection:!1,enableNestedListenerRemoval:!1,USE_NATIVE_JSON:!1,applyIf:function(t,e){if(t)for(var i in e)Ext.isDefined(t[i])||(t[i]=e[i]);return t},id:function(t,e){return(t=Ext.getDom(t,!0)||{}).id||(t.id=(e||"ext-gen")+ ++s),t.id},extend:(a=Object.prototype.constructor,function(e,t,i){"object"==typeof t&&(i=t,t=e,e=i.constructor!=a?i.constructor:function(){t.apply(this,arguments)});function s(){}var n,r=t.prototype;return s.prototype=r,(((n=e.prototype=new s).constructor=e).superclass=r).constructor==a&&(r.constructor=t),e.override=function(t){Ext.override(e,t)},n.superclass=n.supr=function(){return r},n.override=_,Ext.override(e,i),e.extend=function(t){return Ext.extend(e,t)},e}),global:function(){return this}(),Base:B,namespaceCache:{},createNamespace:function(t,e){var i,s,n,r,o,a=Ext.namespaceCache,t=e?t.substring(0,t.lastIndexOf(".")):t,l=a[t];if(!l&&(l=Ext.global,t))for(o=[],i=0,s=(r=t.split(".")).length;i<s;++i)l=l[n=r[i]]||(l[n]={}),o.push(n),a[o.join(".")]=l;return l},getClassByName:function(t){for(var e=t.split("."),i=Ext.global,s=e.length,n=0;i&&n<s;++n)i=i[e[n]];return i||null},addMembers:function(t,e,i,s){var n,r,o;for(r in i)i.hasOwnProperty(r)&&("function"==typeof(o=i[r])&&(o.$owner=t,o.$name=r),e[r]=o);if(s&&O)for(n=O.length;0<n--;)r=O[n],i.hasOwnProperty(r)&&("function"==typeof(o=i[r])&&(o.$owner=t,o.$name=r),e[r]=o)},define:function(t,e,i){var s,n,r,o=e.override;return o?(delete e.override,s=Ext.getClassByName(o),Ext.override(s,e)):(t&&(r=Ext.createNamespace(t,!0),n=t.substring(t.lastIndexOf(".")+1)),s=function(){this.constructor.apply(this,arguments)},t&&(s.displayName=t),s.$isClass=!0,s.callParent=Ext.Base.callParent,(o=(e="function"==typeof e?e(s):e).extend)?(delete e.extend,"string"==typeof o&&(o=Ext.getClassByName(o))):o=B,Ext.extend(s,o,e),s.prototype.constructor===s&&delete s.prototype.constructor,s.prototype.$isClass||Ext.applyIf(s.prototype,B.prototype),s.prototype.self=s,e.xtype&&Ext.reg(e.xtype,s),s=e.singleton?new s:s,t&&(r[n]=s)),i&&i.call(s),s},override:function(t,e){var i;if(e)if(t.$isClass)(i=e.statics)&&delete e.statics,Ext.addMembers(t,t.prototype,e,!0),i&&Ext.addMembers(t,t,i);else if("function"==typeof t)i=t.prototype,Ext.apply(i,e),Ext.isIE&&e.hasOwnProperty("toString")&&(i.toString=e.toString);else{var s,n,r=t.self;if(r&&r.$isClass)for(s in e)e.hasOwnProperty(s)&&("function"==typeof(n=e[s])&&(r.$className&&(n.displayName=r.$className+"#"+s),n.$name=s,n.$owner=r,n.$previous=t.hasOwnProperty(s)?t[s]:o),t[s]=n);else Ext.apply(t,e),t.constructor.$isClass||(t.constructor.prototype.callParent=B.prototype.callParent,t.constructor.callParent=B.callParent)}},namespace:function(){for(var t,e,i,s,n,r=arguments.length,o=0;o<r;++o)for(i=arguments[o].split("."),void 0===(n=window[i[0]])&&(n=window[i[0]]={}),t=(s=i.slice(1)).length,e=0;e<t;++e)n=n[s[e]]=n[s[e]]||{};return n},urlEncode:function(t,e){var i,s=[],n=encodeURIComponent;return Ext.iterate(t,function(e,t){i=Ext.isEmpty(t),Ext.each(i?e:t,function(t){s.push("&",n(e),"=",Ext.isEmpty(t)||t==e&&i?"":Ext.isDate(t)?Ext.encode(t).replace(/"/g,""):n(t))})}),e||(s.shift(),e=""),e+s.join("")},urlDecode:function(t,e){if(Ext.isEmpty(t))return{};var i,s,n={},t=t.split("&"),r=decodeURIComponent;return Ext.each(t,function(t){t=t.split("="),i=r(t[0]),s=r(t[1]),n[i]=e||!n[i]?s:[].concat(n[i]).concat(s)}),n},urlAppend:function(t,e){return Ext.isEmpty(e)?t:t+(-1===t.indexOf("?")?"?":"&")+e},toArray:E?function(t,e,i,s){s=[];for(var n=0,r=t.length;n<r;n++)s.push(t[n]);return s.slice(e||0,i||s.length)}:function(t,e,i){return Array.prototype.slice.call(t,e||0,i||t.length)},isIterable:function(t){return!(!Ext.isArray(t)&&!t.callee)||(!!/NodeList|HTMLCollection/.test(n.call(t))||(void 0!==t.nextNode||t.item)&&Ext.isNumber(t.length))},each:function(t,e,i){if(!Ext.isEmpty(t,!0))for(var s=0,n=(t=!Ext.isIterable(t)||Ext.isPrimitive(t)?[t]:t).length;s<n;s++)if(!1===e.call(i||t[s],t[s],s,t))return s},iterate:function(t,e,i){if(!Ext.isEmpty(t))if(Ext.isIterable(t))Ext.each(t,e,i);else if("object"==typeof t)for(var s in t)if(t.hasOwnProperty(s)&&!1===e.call(i||t,s,t[s],t))return},getDom:function(t,e){if(!t||!l)return null;if(t.dom)return t.dom;if("string"!=typeof t)return t;var i=l.getElementById(t);return!(i&&E&&e)||t==i.getAttribute("id")?i:null},getBody:function(){return Ext.get(l.body||l.documentElement)},getHead:function(){return i=null==i?Ext.get(l.getElementsByTagName("head")[0]):i},removeNode:E&&!y?function(t){t&&"BODY"!=t.tagName&&(Ext.enableNestedListenerRemoval?Ext.EventManager.purgeElement(t,!0):Ext.EventManager.removeAll(t),(e=e||l.createElement("div")).appendChild(t),e.innerHTML="",delete Ext.elCache[t.id])}:function(t){t&&t.parentNode&&"BODY"!=t.tagName&&(Ext.enableNestedListenerRemoval?Ext.EventManager.purgeElement(t,!0):Ext.EventManager.removeAll(t),t.parentNode.removeChild(t),delete Ext.elCache[t.id])},isEmpty:function(t,e){return null==t||Ext.isArray(t)&&!t.length||!e&&""===t},isArray:function(t){return"[object Array]"===n.apply(t)},isDate:function(t){return"[object Date]"===n.apply(t)},isObject:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)},isPrimitive:function(t){return Ext.isString(t)||Ext.isNumber(t)||Ext.isBoolean(t)},isFunction:function(t){return"[object Function]"===n.apply(t)},isNumber:function(t){return"number"==typeof t&&isFinite(t)},isString:function(t){return"string"==typeof t},isBoolean:function(t){return"boolean"==typeof t},isElement:function(t){return!!t&&!!t.tagName},isDefined:function(t){return void 0!==t},isOpera:c,isWebKit:f,isChrome:u,isSafari:p,isSafari3:g,isSafari4:x,isSafari2:m,isIE:E,isIE6:C,isIE7:v,isIE8:y,isIE9:b,isIE10:w,isIE9m:S,isIE10p:E&&!(C||v||y||b),isIEQuirks:E&&!h&&(C||v||y||b),isGecko:T,isGecko2:I,isGecko3:k,isBorderBox:M,isLinux:N,isWindows:D,isMac:A,isAir:R}),Ext.ns=Ext.namespace}(),Ext.ns("Ext.util","Ext.lib","Ext.data","Ext.supports"),Ext.elCache={},Ext.apply(Function.prototype,{createInterceptor:function(e,i){var s=this;return Ext.isFunction(e)?function(){var t=arguments;return e.target=this,e.method=s,!1!==e.apply(i||this||window,t)?s.apply(this||window,t):null}:this},createCallback:function(){var t=arguments,e=this;return function(){return e.apply(window,t)}},createDelegate:function(i,s,n){var r=this;return function(){var t,e=s||arguments;return!0===n?e=(e=Array.prototype.slice.call(arguments,0)).concat(s):Ext.isNumber(n)&&(e=Array.prototype.slice.call(arguments,0),t=[n,0].concat(s),Array.prototype.splice.apply(e,t)),r.apply(i||window,e)}},defer:function(t,e,i,s){s=this.createDelegate(e,i,s);return 0<t?setTimeout(s,t):(s(),0)}}),Ext.applyIf(String,{format:function(t){var i=Ext.toArray(arguments,1);return t.replace(/\{(\d+)\}/g,function(t,e){return i[e]})}}),Ext.applyIf(Array.prototype,{indexOf:function(t,e){var i=this.length;for(e=e||0,e+=e<0?i:0;e<i;++e)if(this[e]===t)return e;return-1},remove:function(t){t=this.indexOf(t);return-1!=t&&this.splice(t,1),this}}),Ext.util.TaskRunner=function(e){e=e||10;function i(){var t=a.length,e=(new Date).getTime();if(0<t){for(var i=0;i<t;i++)o.remove(a[i]);if(a=[],o.length<1)return void l()}for(var s,n,i=0,r=o.length;i<r;++i){if(n=e-(s=o[i]).taskRunTime,s.interval<=n&&(n=s.run.apply(s.scope||s,s.args||[++s.taskRunCount]),s.taskRunTime=e,!1===n||s.taskRunCount===s.repeat))return void d(s);s.duration&&s.duration<=e-s.taskStartTime&&d(s)}}var o=[],a=[],s=0,n=!1,l=function(){n=!1,clearInterval(s),s=0},d=function(t){a.push(t),t.onStop&&t.onStop.apply(t.scope||t)};this.start=function(t){return o.push(t),t.taskStartTime=(new Date).getTime(),t.taskRunTime=0,t.taskRunCount=0,n||(n=!0,s=setInterval(i,e)),t},this.stop=function(t){return d(t),t},this.stopAll=function(){l();for(var t=0,e=o.length;t<e;t++)o[t].onStop&&o[t].onStop();o=[],a=[]}},Ext.TaskMgr=new Ext.util.TaskRunner,function(){var e,u,t,i,f,p,a,l,d,h,c,m,g,x,s,n,r,E,o,v,y,b,w,C,S,T,I,k,M,D,A,R,N,F,P,O,L,B;function _(t){return(e=e||new Ext.Element.Flyweight).dom=t,e}function H(t){return!function(t,e){if(t&&t.firstChild)for(;e;){if(e===t)return!0;(e=e.parentNode)&&1!=e.nodeType&&(e=null)}return!1}(t.currentTarget,w.getRelatedTarget(t))}function z(){var t,e,i,s,n=!1,r=[],o=!l||0<h;if(!m){for(m=!0,e=0;e<c.length;++e)(i=c[e])&&(t=x.getElementById(i.id))&&(!i.checkReady||l||t.nextSibling||x&&x.body?(t=(s=i.override)?!0===s?i.obj:s:t,i.fn.call(t,i.obj),c.remove(i),--e):r.push(i));h=0===r.length?0:h-1,o?V():(clearInterval(a),a=null),n=!(m=!1)}return n}function V(){a||(a=setInterval(function(){z()},s))}function G(t,e){var i,s=(t=t.browserEvent||t)["page"+e];return s||0===s||(s=t["client"+e]||0,Ext.isIE&&(s+=(i=x.documentElement,t=x.body,(i&&(i[r]||i[n])?[i[n],i[r]]:t?[t[n],t[r]]:[0,0])["X"==e?0:1]))),s}function W(t){var i,e=t.conn,t={};Ext.apply(t,T.headers,T.defaultHeaders),function(t,e){for(i in e)e.hasOwnProperty(i)&&t.setRequestHeader(i,e[i])}(e,t),delete T.headers}function j(t,e){(T.headers=T.headers||{})[t]=e}function U(t,e){var i,s,n,r={},o=t.conn,a=1223==o.status;try{i=t.conn.getAllResponseHeaders(),Ext.each(i.replace(/\r\n/g,"\n").split("\n"),function(t){0<=(s=t.indexOf(":"))&&(n=t.substr(0,s).toLowerCase()," "==t.charAt(s+1)&&++s,r[n]=t.substr(s+1))})}catch(t){}return{tId:t.tId,status:a?204:o.status,statusText:a?"No Content":o.statusText,getResponseHeader:function(t){return r[t.toLowerCase()]},getAllResponseHeaders:function(){return i},responseText:o.responseText,responseXML:o.responseXML,argument:e}}function q(t){t.tId&&(T.conn[t.tId]=null),t.conn=null}function X(t,e,i,s){if(e){var n,r,o,a;try{n=void 0!==t.conn.status&&0!=t.conn.status?t.conn.status:13030}catch(t){n=13030}if(200<=n&&n<300||Ext.isIE&&1223==n)r=U(t,e.argument),e.success&&(e.scope?e.success.apply(e.scope,[r]):e.success(r));else switch(n){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:a=t.tId,o=e.argument,r={tId:a,status:(a=i||!1)?-1:0,statusText:a?"transaction aborted":"communication failure",isAbort:a,isTimeout:s,argument:o},e.failure&&(e.scope?e.failure.apply(e.scope,[r]):e.failure(r));break;default:r=U(t,e.argument),e.failure&&(e.scope?e.failure.apply(e.scope,[r]):e.failure(r))}q(t)}else q(t)}function Y(t,e){var i=t.conn,s=t.tId,n=T.poll,r=(e=e||{}).timeout||null;r&&(T.conn[s]=i,T.timeout[s]=setTimeout(function(t,e){T.abort(t,e,!0)}.createCallback(t,e),r)),n[s]=setInterval(function(t,e,i,s,n,r){i&&4==i.readyState&&(clearInterval(n[s]),n[s]=null,r&&(clearTimeout(T.timeout[s]),T.timeout[s]=null),X(t,e))}.createCallback(t,e,i,s,n,r),T.pollInterval)}function $(t,e,i,s){var n=function(){var t;try{(t=function(t){var e;try{e=new XMLHttpRequest}catch(t){for(var i=Ext.isIE6?1:0;i<C.length;++i)try{e=new ActiveXObject(C[i]);break}catch(t){}}finally{return{conn:e,tId:t}}}(T.transactionId))&&T.transactionId++}catch(t){}finally{return t}}()||null;return n&&(n.conn.open(t,e,!0),T.useDefaultXhrHeader&&j("X-Requested-With",T.defaultXhrHeader),!s||!T.useDefaultHeader||T.headers&&T.headers[S]||j(S,T.defaultPostHeader),(T.defaultHeaders||T.headers)&&W(n),Y(n,i),n.conn.send(s||null)),n}function K(t){return void 0!==t}u=document,t="CSS1Compat"==u.compatMode,i=Math.max,f=Math.round,p=parseInt,Ext.lib.Dom={isAncestor:function(t,e){var i=!1;if(t=Ext.getDom(t),e=Ext.getDom(e),t&&e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));for(;e=e.parentNode;)i=e==t||i}return i},getViewWidth:function(t){return t?this.getDocumentWidth():this.getViewportWidth()},getViewHeight:function(t){return t?this.getDocumentHeight():this.getViewportHeight()},getDocumentHeight:function(){return i((t?u.documentElement:u.body).scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return i((t?u.documentElement:u.body).scrollWidth,this.getViewportWidth())},getViewportHeight:function(){return Ext.isIE9m?(Ext.isStrict?u.documentElement:u.body).clientHeight:self.innerHeight},getViewportWidth:function(){return Ext.isStrict||Ext.isOpera?Ext.isIE9m?u.documentElement.clientWidth:self.innerWidth:u.body.clientWidth},getY:function(t){return this.getXY(t)[1]},getX:function(t){return this.getXY(t)[0]},getXY:function(t){var e,i,s,n,r,o,a,l=0,d=0,h=u.body||u.documentElement,c=[0,0];if((t=Ext.getDom(t))!=h)if(t.getBoundingClientRect)s=t.getBoundingClientRect(),o=_(document).getScroll(),c=[f(s.left+o.left),f(s.top+o.top)];else{for(a=_(e=t).isStyle("position","absolute");e;)i=_(e),l+=e.offsetLeft,d+=e.offsetTop,a=a||i.isStyle("position","absolute"),Ext.isGecko&&(d+=n=p(i.getStyle("borderTopWidth"),10)||0,l+=r=p(i.getStyle("borderLeftWidth"),10)||0,e==t||i.isStyle("overflow","visible")||(l+=r,d+=n)),e=e.offsetParent;for(Ext.isSafari&&a&&(l-=h.offsetLeft,d-=h.offsetTop),Ext.isGecko&&!a&&(o=_(h),l+=p(o.getStyle("borderLeftWidth"),10)||0,d+=p(o.getStyle("borderTopWidth"),10)||0),e=t.parentNode;e&&e!=h;)Ext.isOpera&&("TR"==e.tagName||_(e).isStyle("display","inline"))||(l-=e.scrollLeft,d-=e.scrollTop),e=e.parentNode;c=[l,d]}return c},setXY:function(t,e){(t=Ext.fly(t,"_setXY")).position();var i,s=t.translatePoints(e),n=t.dom.style;for(i in s)isNaN(s[i])||(n[i]=s[i]+"px")},setX:function(t,e){this.setXY(t,[e,!1])},setY:function(t,e){this.setXY(t,[!1,e])}},Ext.lib.Event=(l=!1,d={},h=0,m=!(c=[]),g=window,x=document,s=20,n="scrollLeft",r="scrollTop",E="unload",o="mouseover",v="mouseout",y=g.addEventListener?function(t,e,i,s){return"mouseenter"==e?(i=i.createInterceptor(H),t.addEventListener(o,i,s)):"mouseleave"==e?(i=i.createInterceptor(H),t.addEventListener(v,i,s)):t.addEventListener(e,i,s),i}:g.attachEvent?function(t,e,i,s){return t.attachEvent("on"+e,i),i}:function(){},b=g.removeEventListener?function(t,e,i,s){"mouseenter"==e?e=o:"mouseleave"==e&&(e=v),t.removeEventListener(e,i,s)}:g.detachEvent?function(t,e,i){t.detachEvent("on"+e,i)}:function(){},(w={extAdapter:!0,onAvailable:function(t,e,i,s){c.push({id:t,fn:e,obj:i,override:s,checkReady:!1}),h=200,V()},addListener:function(t,e,i){return!(!(t=Ext.getDom(t))||!i)&&(e==E?(void 0===d[t.id]&&(d[t.id]=[]),d[t.id].push([e,i]),i):y(t,e,i,!1))},removeListener:function(t,e,i){var s,n,r,o;if((t=Ext.getDom(t))&&i)if(e!=E)b(t,e,i,!1);else if(void 0!==(o=d[t.id]))for(s=0,n=o.length;s<n;s++)(r=o[s])&&r[0]==e&&r[1]==i&&d[t.id].splice(s,1)},getTarget:function(t){return t=t.browserEvent||t,this.resolveTextNode(t.target||t.srcElement)},resolveTextNode:Ext.isGecko?function(t){if(t){var e=HTMLElement.prototype.toString.call(t);if("[xpconnect wrapped native prototype]"!=e&&"[object XULElement]"!=e)return 3==t.nodeType?t.parentNode:t}}:function(t){return t&&3==t.nodeType?t.parentNode:t},getRelatedTarget:function(t){return t=t.browserEvent||t,this.resolveTextNode(t.relatedTarget||(/(mouseout|mouseleave)/.test(t.type)?t.toElement:/(mouseover|mouseenter)/.test(t.type)?t.fromElement:null))},getPageX:function(t){return G(t,"X")},getPageY:function(t){return G(t,"Y")},getXY:function(t){return[this.getPageX(t),this.getPageY(t)]},stopEvent:function(t){this.stopPropagation(t),this.preventDefault(t)},stopPropagation:function(t){(t=t.browserEvent||t).stopPropagation?t.stopPropagation():t.cancelBubble=!0},preventDefault:function(t){(t=t.browserEvent||t).preventDefault?t.preventDefault():(t.keyCode&&(t.keyCode=0),t.returnValue=!1)},getEvent:function(t){if(!(t=t||g.event))for(var e=this.getEvent.caller;e&&(!(t=e.arguments[0])||Event!=t.constructor);)e=e.caller;return t},getCharCode:function(t){return(t=t.browserEvent||t).charCode||t.keyCode||0},getListeners:function(t,e){Ext.EventManager.getListeners(t,e)},purgeElement:function(t,e,i){Ext.EventManager.purgeElement(t,e,i)},_load:function(t){l=!0,Ext.isIE9m&&!0!==t&&b(g,"load",arguments.callee)},_unload:function(t){var e,i,s,n,r,o,a=Ext.lib.Event;for(n in d)for(e=0,r=(s=d[n]).length;e<r;e++)if(i=s[e])try{o=i[3]?!0===i[3]?i[2]:i[3]:g,i[1].call(o,a.getEvent(t),i[2])}catch(t){}Ext.EventManager._unload(),b(g,E,a._unload)}}).on=w.addListener,w.un=w.removeListener,x&&x.body?w._load(!0):y(g,"load",w._load),y(g,E,w._unload),z(),w),Ext.lib.Ajax=(C=["Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP"],S="Content-Type",T={request:function(t,e,i,s,n){var r,o,a;return n&&(r=n.xmlData,o=n.jsonData,Ext.applyIf(this,n),(r||o)&&((a=this.headers)&&a[S]||j(S,r?"text/xml":"application/json"),s=r||(Ext.isPrimitive(o)?o:Ext.encode(o)))),$(t||n.method||"POST",e,i,s)},serializeForm:function(t){var e,i,s,t=t.elements||(document.forms[t]||Ext.getDom(t)).elements,n=!1,r=encodeURIComponent,o="";return Ext.each(t,function(t){e=t.name,i=t.type,!t.disabled&&e&&(/select-(one|multiple)/i.test(i)?Ext.each(t.options,function(t){t.selected&&(s=t.hasAttribute?t.hasAttribute("value"):t.getAttributeNode("value").specified,o+=String.format("{0}={1}&",r(e),r(s?t.value:t.text)))}):/file|undefined|reset|button/i.test(i)||/radio|checkbox/i.test(i)&&!t.checked||"submit"==i&&n||(o+=r(e)+"="+r(t.value)+"&",n=/submit/i.test(i)))}),o.substr(0,o.length-1)},useDefaultHeader:!0,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:!0,defaultXhrHeader:"XMLHttpRequest",poll:{},timeout:{},conn:{},pollInterval:50,transactionId:0,abort:function(t,e,i){var s=t.tId,n=!1;return this.isCallInProgress(t)&&(t.conn.abort(),clearInterval(this.poll[s]),this.poll[s]=null,clearTimeout(T.timeout[s]),X(t,e,n=!(this.timeout[s]=null),i)),n},isCallInProgress:function(t){return t.conn&&!{0:!0,4:!0}[t.conn.readyState]}}),I=Ext.lib,k=/width|height|opacity|padding/i,M=/^((width|height)|(top|left))$/,D=/width|height|top$|bottom$|left$|right$/i,A=/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i,R=function(){return new Date},I.Anim={motion:function(t,e,i,s,n,r){return this.run(t,e,i,s,n,r,Ext.lib.Motion)},run:function(t,e,i,s,n,r,o){s=new(o=o||Ext.lib.AnimBase)(t,e,i,s="string"==typeof s?Ext.lib.Easing[s]:s);return s.animateX(function(){Ext.isFunction(n)&&n.call(r)}),s}},I.AnimBase=function(t,e,i,s){t&&this.init(t,e,i,s)},I.AnimBase.prototype={doMethod:function(t,e,i){return this.method(this.curFrame,e,i-e,this.totalFrames)},setAttr:function(t,e,i){k.test(t)&&e<0&&(e=0),Ext.fly(this.el,"_anim").setStyle(t,e+i)},getAttr:function(t){var e=Ext.fly(this.el),i=e.getStyle(t),t=M.exec(t)||[];return"auto"===i||A.test(i)?t[2]||"absolute"==e.getStyle("position")&&t[3]?e.dom["offset"+t[0].charAt(0).toUpperCase()+t[0].substr(1)]:0:parseFloat(i)},getDefaultUnit:function(t){return D.test(t)?"px":""},animateX:function(t,e){function i(){s.onComplete.removeListener(i),Ext.isFunction(t)&&t.call(e||s,s)}var s=this;s.onComplete.addListener(i,s),s.animate()},setRunAttr:function(t){var e=this.attributes[t],i=e.to,s=e.by,n=e.from,r=e.unit,e=this.runAttrs[t]={};if(!K(i)&&!K(s))return!1;var o=K(n)?n:this.getAttr(t);if(K(i))a=i;else if(K(s))if(Ext.isArray(o))for(var a=[],l=0,d=o.length;l<d;l++)a[l]=o[l]+s[l];else a=o+s;Ext.apply(e,{start:o,end:a,unit:K(r)?r:this.getDefaultUnit(t)})},init:function(t,e,i,s){var n=this,r=0,o=I.AnimMgr;Ext.apply(n,{isAnimated:!1,startTime:null,el:Ext.getDom(t),attributes:e||{},duration:i||1,method:s||I.Easing.easeNone,useSec:!0,curFrame:0,totalFrames:o.fps,runAttrs:{},animate:function(){var t=this,e=t.duration;if(t.isAnimated)return!1;t.curFrame=0,t.totalFrames=t.useSec?Math.ceil(o.fps*e):e,o.registerElement(t)},stop:function(t){t&&(this.curFrame=this.totalFrames,this._onTween.fire()),o.stop(this)}});n.onStart=new Ext.util.Event(n),n.onTween=new Ext.util.Event(n),n.onComplete=new Ext.util.Event(n),(n._onStart=new Ext.util.Event(n)).addListener(function(){for(var t in this.onStart.fire(),this.runAttrs={},this.attributes)this.setRunAttr(t);this.isAnimated=!0,this.startTime=R(),r=0}),(n._onTween=new Ext.util.Event(n)).addListener(function(){var t=this;t.onTween.fire({duration:R()-t.startTime,curFrame:t.curFrame});var e,i=t.runAttrs;for(e in i)this.setAttr(e,t.doMethod(e,i[e].start,i[e].end),i[e].unit);++r}),(n._onComplete=new Ext.util.Event(n)).addListener(function(){var t=(R()-this.startTime)/1e3,t={duration:t,frames:r,fps:r/t};this.isAnimated=!1,r=0,this.onComplete.fire(t)})}},Ext.lib.AnimMgr=new function(){var n=this,s=null,r=[],o=0;Ext.apply(n,{fps:1e3,delay:1,registerElement:function(t){r.push(t),++o,t._onStart.fire(),n.start()},unRegister:function(t,e){t._onComplete.fire(),-1!=(e=e||i(t))&&r.splice(e,1),--o<=0&&n.stop()},start:function(){null===s&&(s=setInterval(n.run,n.delay))},stop:function(t){if(t)n.unRegister(t);else{clearInterval(s);for(var e=0,i=r.length;e<i;++e)r[0].isAnimated&&n.unRegister(r[0],0);r=[],s=null,o=0}},run:function(){for(var t,e,i=0,s=r.length;i<s;i++)(e=r[i])&&e.isAnimated&&(t=e.totalFrames,e.curFrame<t||null===t?(++e.curFrame,e.useSec&&a(e),e._onTween.fire()):n.stop(e))}});var i=function(t){for(var e=0,i=r.length;e<i;e++)if(r[e]===t)return e;return-1},a=function(t){var e=t.totalFrames,i=t.curFrame,s=t.duration,n=i*s*1e3/e,r=R()-t.startTime,o=0;0<(o=r<1e3*s?Math.round((r/n-1)*i):e-(i+1))&&isFinite(o)&&(t.curFrame+o>=e&&(o=e-(i+1)),t.curFrame+=o)}},I.Bezier=new function(){this.getPosition=function(t,e){for(var i,s=t.length,n=[],r=1-e,o=0;o<s;++o)n[o]=[t[o][0],t[o][1]];for(i=1;i<s;++i)for(o=0;o<s-i;++o)n[o][0]=r*n[o][0]+e*n[parseInt(o+1,10)][0],n[o][1]=r*n[o][1]+e*n[parseInt(o+1,10)][1];return[n[0][0],n[0][1]]}},I.Easing={easeNone:function(t,e,i,s){return i*t/s+e},easeIn:function(t,e,i,s){return i*(t/=s)*t+e},easeOut:function(t,e,i,s){return-i*(t/=s)*(t-2)+e}},function(){I.Motion=function(t,e,i,s){t&&I.Motion.superclass.constructor.call(this,t,e,i,s)},Ext.extend(I.Motion,Ext.lib.AnimBase);var c=I.Motion.superclass,u=/^points$/i;Ext.apply(I.Motion.prototype,{setAttr:function(t,e,i){var s=c.setAttr;u.test(t)?(s.call(this,"left",e[0],i=i||"px"),s.call(this,"top",e[1],i)):s.call(this,t,e,i)},getAttr:function(t){var e=c.getAttr;return u.test(t)?[e.call(this,"left"),e.call(this,"top")]:e.call(this,t)},doMethod:function(t,e,i){var s=this;return u.test(t)?I.Bezier.getPosition(s.runAttrs[t],s.method(s.curFrame,0,100,s.totalFrames)/100):c.doMethod.call(s,t,e,i)},setRunAttr:function(t){if(u.test(t)){var e,i,s,n,r=this.el,o=this.attributes.points,a=o.control||[],l=o.from,d=o.to,h=o.by,o=I.Dom;if(0<a.length&&!Ext.isArray(a[0])&&(a=[a]),Ext.fly(r,"_anim").position(),o.setXY(r,K(l)?l:o.getXY(r)),e=this.getAttr("points"),K(d))for(s=f.call(this,d,e),i=0,n=a.length;i<n;++i)a[i]=f.call(this,a[i],e);else if(K(h))for(s=[e[0]+h[0],e[1]+h[1]],i=0,n=a.length;i<n;++i)a[i]=[e[0]+a[i][0],e[1]+a[i][1]];h=this.runAttrs[t]=[e],(h=0<a.length?h.concat(a):h)[h.length]=s}else c.setRunAttr.call(this,t)}});var f=function(t,e){var i=I.Dom.getXY(this.el);return[t[0]-i[0]+e[0],t[1]-i[1]+e[1]]}}(),N=Math.abs,F=Math.PI,P=Math.asin,O=Math.pow,L=Math.sin,B=Ext.lib,Ext.apply(B.Easing,{easeBoth:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInStrong:function(t,e,i,s){return i*(t/=s)*t*t*t+e},easeOutStrong:function(t,e,i,s){return-i*((t=t/s-1)*t*t*t-1)+e},easeBothStrong:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},elasticIn:function(t,e,i,s,n,r){return 0==t||1==(t/=s)?0==t?e:e+i:(r=r||.3*s,i=n>=N(i)?r/(2*F)*P(i/n):(n=i,r/4),-(n*O(2,10*--t)*L(2*F*(t*s-i)/r))+e)},elasticOut:function(t,e,i,s,n,r){return 0==t||1==(t/=s)?0==t?e:e+i:(r=r||.3*s,o=n>=N(i)?r/(2*F)*P(i/n):(n=i,r/4),n*O(2,-10*t)*L(2*F*(t*s-o)/r)+i+e);var o},elasticBoth:function(t,e,i,s,n,r){return 0==t||2==(t/=s/2)?0==t?e:e+i:(r=r||s*(.3*1.5),o=n>=N(i)?r/(2*F)*P(i/n):(n=i,r/4),t<1?n*O(2,10*--t)*L(2*F*(t*s-o)/r)*-.5+e:n*O(2,-10*--t)*L(2*F*(t*s-o)/r)*.5+i+e);var o},backIn:function(t,e,i,s,n){return i*(t/=s)*t*(((n=n||1.70158)+1)*t-n)+e},backOut:function(t,e,i,s,n){return i*((t=t/s-1)*t*(((n=n||1.70158)+1)*t+n)+1)+e},backBoth:function(t,e,i,s,n){return n=n||1.70158,(t/=s/2)<1?i/2*(t*t*((1+(n*=1.525))*t-n))+e:i/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},bounceIn:function(t,e,i,s){return i-B.Easing.bounceOut(s-t,0,i,s)+e},bounceOut:function(t,e,i,s){return(t/=s)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},bounceBoth:function(t,e,i,s){return t<s/2?.5*B.Easing.bounceIn(2*t,0,i,s)+e:.5*B.Easing.bounceOut(2*t-s,0,i,s)+.5*i+e}}),function(){var o=Ext.lib;o.Anim.color=function(t,e,i,s,n,r){return o.Anim.run(t,e,i,s,n,r,o.ColorAnim)},o.ColorAnim=function(t,e,i,s){o.ColorAnim.superclass.constructor.call(this,t,e,i,s)},Ext.extend(o.ColorAnim,o.AnimBase);function l(t){return void 0!==t}var d=o.ColorAnim.superclass,h=/color$/i,s=/^transparent|rgba\(0, 0, 0, 0\)$/,t=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,e=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,a=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;function c(i){var s,n,r=parseInt,o=null;return 3==i.length?i:(Ext.each([e,t,a],function(t,e){if(s=e%2==0?16:10,(n=t.exec(i))&&4==n.length)return!(o=[r(n[1],s),r(n[2],s),r(n[3],s)])}),o)}Ext.apply(o.ColorAnim.prototype,{getAttr:function(t){var e,i=this.el;if(h.test(t))for(;i&&s.test(e=Ext.fly(i).getStyle(t));)i=i.parentNode,e="fff";else e=d.getAttr.call(this,t);return e},doMethod:function(t,e,i){var s,n,r,o,a=Math.floor;if(h.test(t)){for(s=[],i=i||[],n=0,r=e.length;n<r;n++)o=e[n],s[n]=d.doMethod.call(this,t,o,i[n]);s="rgb("+a(s[0])+","+a(s[1])+","+a(s[2])+")"}else s=d.doMethod.call(this,t,e,i);return s},setRunAttr:function(t){var e=this.attributes[t],i=e.to,s=e.by;if(d.setRunAttr.call(this,t),e=this.runAttrs[t],h.test(t)){var n=c(e.start),r=c(e.end);if(!l(i)&&l(s))for(var r=c(s),o=0,a=n.length;o<a;o++)r[o]=n[o]+r[o];e.start=n,e.end=r}}})}(),function(){var o=Ext.lib;o.Anim.scroll=function(t,e,i,s,n,r){return o.Anim.run(t,e,i,s,n,r,o.Scroll)},o.Scroll=function(t,e,i,s){t&&o.Scroll.superclass.constructor.call(this,t,e,i,s)},Ext.extend(o.Scroll,o.ColorAnim);var a=o.Scroll.superclass,l="scroll";Ext.apply(o.Scroll.prototype,{doMethod:function(t,e,i){var s=this,n=s.curFrame,r=s.totalFrames,i=t==l?[s.method(n,e[0],i[0]-e[0],r),s.method(n,e[1],i[1]-e[1],r)]:a.doMethod.call(s,t,e,i);return i},getAttr:function(t){return t==l?[this.el.scrollLeft,this.el.scrollTop]:a.getAttr.call(this,t)},setAttr:function(t,e,i){t==l?(this.el.scrollLeft=e[0],this.el.scrollTop=e[1]):a.setAttr.call(this,t,e,i)}})}(),Ext.isIE9m&&window.attachEvent("onunload",function t(){var e=Function.prototype;delete e.createSequence,delete e.defer,delete e.createDelegate,delete e.createCallback,delete e.createInterceptor,window.detachEvent("onunload",t)})}(),function(){var y=Ext.util,i=Ext.each;y.Observable=function(){var t=this,e=t.events;t.listeners&&(t.on(t.listeners),delete t.listeners),t.events=e||{}},y.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var t,e=Array.prototype.slice.call(arguments,0),i=e[0].toLowerCase(),s=this,n=!0,r=s.events[i];if(!0===s.eventsSuspended)(t=s.eventQueue)&&t.push(e);else if("object"==typeof r)if(r.bubble){if(!1===r.fire.apply(r,e.slice(1)))return!1;if((t=s.getBubbleTarget&&s.getBubbleTarget())&&t.enableBubble)return(s=t.events[i])&&"object"==typeof s&&s.bubble||t.enableBubble(i),t.fireEvent.apply(t,e)}else e.shift(),n=r.fire.apply(r,e);return n},addListener:function(t,e,i,s){var n,r,o,a=this;if("object"==typeof t)for(n in s=t)r=s[n],a.filterOptRe.test(n)||a.addListener(n,r.fn||r,r.scope||s.scope,r.fn?r:s);else t=t.toLowerCase(),"boolean"==typeof(o=a.events[t]||!0)&&(a.events[t]=o=new y.Event(a,t)),o.addListener(e,i,"object"==typeof s?s:{})},removeListener:function(t,e,i){t=this.events[t.toLowerCase()];"object"==typeof t&&t.removeListener(e,i)},purgeListeners:function(){var t,e,i=this.events;for(e in i)"object"==typeof(t=i[e])&&t.clearListeners()},addEvents:function(t){var e=this;if(e.events=e.events||{},"string"==typeof t)for(var i=arguments,s=i.length;s--;)e.events[i[s]]=e.events[i[s]]||!0;else Ext.applyIf(e.events,t)},hasListener:function(t){t=this.events[t.toLowerCase()];return"object"==typeof t&&0<t.listeners.length},suspendEvents:function(t){this.eventsSuspended=!0,t&&!this.eventQueue&&(this.eventQueue=[])},resumeEvents:function(){var e=this,t=e.eventQueue||[];e.eventsSuspended=!1,delete e.eventQueue,i(t,function(t){e.fireEvent.apply(e,t)})}};var e=y.Observable.prototype;e.on=e.addListener,e.un=e.removeListener,y.Observable.releaseCapture=function(t){t.fireEvent=e.fireEvent},y.Event=function(t,e){this.name=e,this.obj=t,this.listeners=[]},y.Event.prototype={addListener:function(t,e,i){var s=this;e=e||s.obj,s.isListening(t,e)||(i=s.createListener(t,e,i),s.firing&&(s.listeners=s.listeners.slice(0)),s.listeners.push(i))},createListener:function(t,e,i){var s,n,r,o,a,l,d,h,c,u,f,p,m,g,x,E={fn:t,scope:e=e||this.obj,options:i=i||{}},v=t;return i.target&&(s=v,n=i,r=e,v=function(){n.target==arguments[0]&&s.apply(r,Array.prototype.slice.call(arguments,0))}),i.delay&&(o=v,a=i,l=E,d=e,v=function(){var t=new y.DelayedTask,e=Array.prototype.slice.call(arguments,0);l.tasks||(l.tasks=[]),l.tasks.push(t),t.delay(a.delay||10,function(){l.tasks.remove(t),o.apply(d,e)},d)}),i.single&&(h=v,c=this,u=t,f=e,v=function(){return c.removeListener(u,f),h.apply(f,arguments)}),i.buffer&&(p=v,m=i,x=e,(g=E).task=new y.DelayedTask,v=function(){g.task.delay(m.buffer,p,x,Array.prototype.slice.call(arguments,0))}),E.fireFn=v,E},findListener:function(t,e){var i,s=this.listeners,n=s.length;for(e=e||this.obj;n--;)if((i=s[n])&&i.fn==t&&i.scope==e)return n;return-1},isListening:function(t,e){return-1!=this.findListener(t,e)},removeListener:function(t,e){var i,s,n=this,r=!1;if(-1!=(e=n.findListener(t,e))){if(n.firing&&(n.listeners=n.listeners.slice(0)),(i=n.listeners[e]).task&&(i.task.cancel(),delete i.task),s=i.tasks&&i.tasks.length){for(;s--;)i.tasks[s].cancel();delete i.tasks}n.listeners.splice(e,1),r=!0}return r},clearListeners:function(){for(var t=this.listeners,e=t.length;e--;)this.removeListener(t[e].fn,t[e].scope)},fire:function(){var t,e=this,i=e.listeners,s=i.length,n=0;if(0<s){e.firing=!0;for(var r=Array.prototype.slice.call(arguments,0);n<s;n++)if((t=i[n])&&!1===t.fireFn.apply(t.scope||e.obj||window,r))return e.firing=!1}return!(e.firing=!1)}}}(),Ext.DomHelper=function(){var n,d=null,a=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,h=/^table|tbody|tr|td$/i,l=/tag|children|cn|html$/i,c=/td|tr|tbody/i,s=/([a-z0-9-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,u=/end/i,f="afterbegin",p="afterend",m="beforebegin",g="beforeend",x="<table>",E="</table>",v=x+"<tbody>",y="</tbody>"+E;function r(t,e,i,s){e=n.insertHtml(s,Ext.getDom(t),b(e));return i?Ext.get(e,!0):e}function b(t){var e,i,s,n,r="";if("string"==typeof t)r=t;else if(Ext.isArray(t))for(var o=0;o<t.length;o++)t[o]&&(r+=b(t[o]));else{for(e in r+="<"+(t.tag=t.tag||"div"),t)if(i=t[e],!l.test(e))if("object"==typeof i){for(s in r+=" "+e+'="',i)r+=s+":"+i[s]+";";r+='"'}else r+=" "+({cls:"class",htmlFor:"for"}[e]||e)+'="'+i+'"';a.test(t.tag)?r+="/>":(r+=">",(n=t.children||t.cn)?r+=b(n):t.html&&(r+=t.html),r+="</"+t.tag+">")}return r}function w(t,e,i,s){d.innerHTML=[e,i,s].join("");for(var n,r=-1,o=d;++r<t;)o=o.firstChild;if(o.nextSibling){for(var a=document.createDocumentFragment();o;)n=o.nextSibling,a.appendChild(o),o=n;o=a}return o}function C(t){var e,i,s=document.createElement("div"),n=document.createDocumentFragment(),r=0;for(s.innerHTML=t,e=(i=s.childNodes).length;r<e;r++)n.appendChild(i[r].cloneNode(!0));return n}return n={markup:b,applyStyles:function(t,e){var i;if(e)if(t=Ext.fly(t),"string"==typeof(e="function"==typeof e?e.call():e))for(s.lastIndex=0;i=s.exec(e);)t.setStyle(i[1],i[2]);else"object"==typeof e&&t.setStyle(e)},insertHtml:function(t,e,i){var s,n,r,o,a,l={};if(t=t.toLowerCase(),l[m]=["BeforeBegin","previousSibling"],l[p]=["AfterEnd","nextSibling"],!e.insertAdjacentHTML)return s=e.ownerDocument.createRange(),r="setStart"+(u.test(t)?"After":"Before"),l[t]?(s[r](e),o=s.createContextualFragment?s.createContextualFragment(i):C(i),e.parentNode.insertBefore(o,t==m?e:e.nextSibling),e[(t==m?"previous":"next")+"Sibling"]):(n=(t==f?"first":"last")+"Child",e.firstChild?(s[r](e[n]),o=s.createContextualFragment?s.createContextualFragment(i):C(i),t==f?e.insertBefore(o,e.firstChild):e.appendChild(o)):e.innerHTML=i,e[n]);if(h.test(e.tagName)&&(a=function(t,e,i,s){var n;if(d=d||document.createElement("div"),("td"!=t||e!=f&&e!=g)&&(c.test(t)||e!=m&&e!=p))return n=e==m?i:e==p?i.nextSibling:e==f?i.firstChild:null,e!=m&&e!=p||(i=i.parentNode),s="td"==t||"tr"==t&&(e==g||e==f)?w(4,"<table><tbody><tr>",s,"</tr></tbody></table>"):"tbody"==t&&(e==g||e==f)||"tr"==t&&(e==m||e==p)?w(3,v,s,y):w(2,x,s,E),i.insertBefore(s,n),s}(e.tagName.toLowerCase(),t,e,i)))return a;if(l[f]=["AfterBegin","firstChild"],l[g]=["BeforeEnd","lastChild"],l=l[t])return e.insertAdjacentHTML(l[0],i),e[l[1]];throw'Illegal insertion point -> "'+t+'"'},insertBefore:function(t,e,i){return r(t,e,i,m)},insertAfter:function(t,e,i){return r(t,e,i,p)},insertFirst:function(t,e,i){return r(t,e,i,f)},append:function(t,e,i){return r(t,e,i,g)},overwrite:function(t,e,i){return(t=Ext.getDom(t)).innerHTML=b(e),i?Ext.get(t.firstChild):t.firstChild},createHtml:b}}(),Ext.Template=function(t){var e,i=arguments,s=[];if(Ext.isArray(t))t=t.join("");else if(1<i.length){for(var n=0,r=i.length;n<r;n++)"object"==typeof(e=i[n])?Ext.apply(this,e):s.push(e);t=s.join("")}this.html=t,this.compiled&&this.compile()},Ext.Template.prototype={re:/\{([\w\-]+)\}/g,applyTemplate:function(i){return this.compiled?this.compiled(i):this.html.replace(this.re,function(t,e){return void 0!==i[e]?i[e]:""})},set:function(t,e){return this.html=t,this.compiled=null,e?this.compile():this},compile:function(){var me=this,sep=Ext.isGecko?"+":",";function fn(t,e){return"'"+sep+"("+(e="values['"+e+"']")+" == undefined ? '' : "+e+")"+sep+"'"}return eval("this.compiled = function(values){ return "+(Ext.isGecko?"'":"['")+me.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn)+(Ext.isGecko?"';};":"'].join('');};")),me},insertFirst:function(t,e,i){return this.doInsert("afterBegin",t,e,i)},insertBefore:function(t,e,i){return this.doInsert("beforeBegin",t,e,i)},insertAfter:function(t,e,i){return this.doInsert("afterEnd",t,e,i)},append:function(t,e,i){return this.doInsert("beforeEnd",t,e,i)},doInsert:function(t,e,i,s){e=Ext.getDom(e);i=Ext.DomHelper.insertHtml(t,e,this.applyTemplate(i));return s?Ext.get(i,!0):i},overwrite:function(t,e,i){return(t=Ext.getDom(t)).innerHTML=this.applyTemplate(e),i?Ext.get(t.firstChild,!0):t.firstChild}},Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate,Ext.Template.from=function(t,e){return t=Ext.getDom(t),new Ext.Template(t.value||t.innerHTML,e||"")},Ext.DomQuery=function(){var cache={},simpleCache={},valueCache={},nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w\-\*]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,isIE=!!window.ActiveXObject,key=30803;function child(t,e){for(var i=0,s=t.firstChild;s;){if(1==s.nodeType&&++i==e)return s;s=s.nextSibling}}function next(t){for(;(t=t.nextSibling)&&1!=t.nodeType;);return t}function prev(t){for(;(t=t.previousSibling)&&1!=t.nodeType;);return t}function children(t){for(var e,i=t.firstChild,s=-1;i;)e=i.nextSibling,3!=i.nodeType||nonSpace.test(i.nodeValue)?i.nodeIndex=++s:t.removeChild(i),i=e;return this}function byClassName(t,e){if(!e)return t;for(var i,s=[],n=-1,r=0;i=t[r];r++)-1!=(" "+i.className+" ").indexOf(e)&&(s[++n]=i);return s}function attrValue(t,e){return(t=t.tagName||void 0===t.length?t:t[0])&&("for"==e?t.htmlFor:"class"==e||"className"==e?t.className:t.getAttribute(e)||t[e])}function getNodes(t,e,i){var s=[],n=-1;if(!t)return s;if(i=i||"*",void 0!==t.getElementsByTagName&&(t=[t]),e){if("/"==e||">"==e)for(var r=i.toUpperCase(),o=0;c=t[o];o++)for(var a,l=c.childNodes,d=0;a=l[d];d++)a.nodeName!=r&&a.nodeName!=i&&"*"!=i||(s[++n]=a);else if("+"==e)for(r=i.toUpperCase(),o=0;h=t[o];o++){for(;(h=h.nextSibling)&&1!=h.nodeType;);!h||h.nodeName!=r&&h.nodeName!=i&&"*"!=i||(s[++n]=h)}else if("~"==e)for(var h,r=i.toUpperCase(),o=0;h=t[o];o++)for(;h=h.nextSibling;)h.nodeName!=r&&h.nodeName!=i&&"*"!=i||(s[++n]=h)}else for(var c,o=0;c=t[o];o++)for(var u,f=c.getElementsByTagName(i),d=0;u=f[d];d++)s[++n]=u;return s}function concat(t,e){if(e.slice)return t.concat(e);for(var i=0,s=e.length;i<s;i++)t[t.length]=e[i];return t}function byTag(t,e){if(!t.tagName&&t!=document||(t=[t]),!e)return t;var i=[],s=-1;e=e.toLowerCase();for(var n,r=0;n=t[r];r++)1==n.nodeType&&n.tagName.toLowerCase()==e&&(i[++s]=n);return i}function byId(t,e){if(!t.tagName&&t!=document||(t=[t]),!e)return t;for(var i,s=[],n=-1,r=0;i=t[r];r++)if(i&&i.id==e)return s[++n]=i,s;return s}function byAttribute(t,e,i,s,n){for(var r,o,a,l,d=[],h=-1,c="{"==n,u=Ext.DomQuery.operators[s],f=0;l=t[f];f++)1==l.nodeType&&(a||(o=Ext.DomQuery.isXml(l),a=!0),r=o?l.getAttribute(e):c?Ext.DomQuery.getStyle(l,e):"class"==e||"className"==e?l.className:"for"==e?l.htmlFor:"href"==e?l.getAttribute("href",2):l.getAttribute(e),(u&&u(r,i)||!u&&r)&&(d[++h]=l));return d}function byPseudo(t,e,i){return Ext.DomQuery.pseudos[e](t,i)}function nodupIEXml(t){var e=++key;t[0].setAttribute("_nodup",e);for(var i=[t[0]],s=1,n=t.length;s<n;s++){var r=t[s];!r.getAttribute("_nodup")!=e&&(r.setAttribute("_nodup",e),i[i.length]=r)}for(s=0,n=t.length;s<n;s++)t[s].removeAttribute("_nodup");return i}function nodup(t){if(!t)return[];var e,i,s,n=t.length,r=t,o=-1;if(!n||void 0!==t.nodeType||1==n)return t;if(isIE&&void 0!==t[0].selectSingleNode)return nodupIEXml(t);var a=++key;for(t[0]._nodup=a,i=1;e=t[i];i++){if(e._nodup==a){for(var r=[],l=0;l<i;l++)r[++o]=t[l];for(l=i+1;s=t[l];l++)s._nodup!=a&&(s._nodup=a,r[++o]=s);return r}e._nodup=a}return r}function quickDiffIEXml(t,e){for(var i=++key,s=[],n=0,r=t.length;n<r;n++)t[n].setAttribute("_qdiff",i);for(n=0,r=e.length;n<r;n++)e[n].getAttribute("_qdiff")!=i&&(s[s.length]=e[n]);for(n=0,r=t.length;n<r;n++)t[n].removeAttribute("_qdiff");return s}function quickDiff(t,e){var i=t.length,s=++key,n=[];if(!i)return e;if(isIE&&void 0!==t[0].selectSingleNode)return quickDiffIEXml(t,e);for(var r=0;r<i;r++)t[r]._qdiff=s;for(var r=0,o=e.length;r<o;r++)e[r]._qdiff!=s&&(n[n.length]=e[r]);return n}function quickId(t,e,i,s){return t==i?(i.ownerDocument||i).getElementById(s):byId(t=getNodes(t,e,"*"),s)}return eval("var batch = 30803;"),{getStyle:function(t,e){return Ext.fly(t).getStyle(e)},compile:function(path,type){type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"],mode,lastPath,matchers=Ext.DomQuery.matchers,matchersLn=matchers.length,modeMatch,lmode=path.match(modeRe);for(lmode&&lmode[1]&&(fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";',path=path.replace(lmode[1],""));"/"==path.substr(0,1);)path=path.substr(1);for(;path&&lastPath!=path;){var lastPath=path,tokenMatch=path.match(tagTokenRe);for("select"==type?tokenMatch?("#"==tokenMatch[1]?fn[fn.length]='n = quickId(n, mode, root, "'+tokenMatch[2]+'");':fn[fn.length]='n = getNodes(n, mode, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],"")):"@"!=path.substr(0,1)&&(fn[fn.length]='n = getNodes(n, mode, "*");'):tokenMatch&&("#"==tokenMatch[1]?fn[fn.length]='n = byId(n, "'+tokenMatch[2]+'");':fn[fn.length]='n = byTag(n, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],""));!(modeMatch=path.match(modeRe));){for(var matched=!1,j=0;j<matchersLn;j++){var t=matchers[j],m=path.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(t,e){return m[e]}),path=path.replace(m[0],""),matched=!0;break}}if(!matched)throw'Error parsing selector, parsing failed at "'+path+'"'}modeMatch[1]&&(fn[fn.length]='mode="'+modeMatch[1].replace(trimRe,"")+'";',path=path.replace(modeMatch[1],""))}return fn[fn.length]="return nodup(n);\n}",eval(fn.join("")),f},jsSelect:function(t,e,i){"string"==typeof(e=e||document)&&(e=document.getElementById(e));for(var s=t.split(","),n=[],r=0,o=s.length;r<o;r++){var a=s[r].replace(trimRe,"");if(!cache[a]&&(cache[a]=Ext.DomQuery.compile(a),!cache[a]))throw a+" is not a valid selector";a=cache[a](e);a&&a!=document&&(n=n.concat(a))}return 1<s.length?nodup(n):n},isXml:function(t){t=(t?t.ownerDocument||t:0).documentElement;return!!t&&"HTML"!==t.nodeName},select:document.querySelectorAll?function(t,e,i){if(e=e||document,!Ext.DomQuery.isXml(e))try{var s=e.querySelectorAll(t);return Ext.toArray(s)}catch(t){}return Ext.DomQuery.jsSelect.call(this,t,e,i)}:function(t,e,i){return Ext.DomQuery.jsSelect.call(this,t,e,i)},selectNode:function(t,e){return Ext.DomQuery.select(t,e)[0]},selectValue:function(t,e,i){t=t.replace(trimRe,""),valueCache[t]||(valueCache[t]=Ext.DomQuery.compile(t,"select"));var e=valueCache[t](e);return"function"==typeof(e=e[0]||e).normalize&&e.normalize(),null==(e=e&&e.firstChild?e.firstChild.nodeValue:null)||""===e?i:e},selectNumber:function(t,e,i){i=Ext.DomQuery.selectValue(t,e,i||0);return parseFloat(i)},is:function(t,e){"string"==typeof t&&(t=document.getElementById(t));var i=Ext.isArray(t),e=Ext.DomQuery.filter(i?t:[t],e);return i?e.length==t.length:0<e.length},filter:function(t,e,i){e=e.replace(trimRe,""),simpleCache[e]||(simpleCache[e]=Ext.DomQuery.compile(e,"simple"));e=simpleCache[e](t);return i?quickDiff(e,t):e},matchers:[{re:/^\.([\w\-]+)/,select:'n = byClassName(n, " {1} ");'},{re:/^\:([\w\-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w\-]+)\s?(?:(=|.=)\s?(["']?)(.*?)\4)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{5}", "{3}", "{1}");'},{re:/^#([\w\-]+)/,select:'n = byId(n, "{1}");'},{re:/^@([\w\-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(t,e){return t==e},"!=":function(t,e){return t!=e},"^=":function(t,e){return t&&t.substr(0,e.length)==e},"$=":function(t,e){return t&&t.substr(t.length-e.length)==e},"*=":function(t,e){return t&&-1!==t.indexOf(e)},"%=":function(t,e){return t%e==0},"|=":function(t,e){return t&&(t==e||t.substr(0,e.length+1)==e+"-")},"~=":function(t,e){return t&&-1!=(" "+t+" ").indexOf(" "+e+" ")}},pseudos:{"first-child":function(t){for(var e,i,s=[],n=-1,r=0;i=e=t[r];r++){for(;(e=e.previousSibling)&&1!=e.nodeType;);e||(s[++n]=i)}return s},"last-child":function(t){for(var e,i,s=[],n=-1,r=0;i=e=t[r];r++){for(;(e=e.nextSibling)&&1!=e.nodeType;);e||(s[++n]=i)}return s},"nth-child":function(t,e){for(var i,s=[],n=-1,e=nthRe.exec(("even"==e?"2n":"odd"==e&&"2n+1")||!nthRe2.test(e)&&"n+"+e||e),r=+(e[1]||1),o=+e[2],a=0;i=t[a];a++){var l=i.parentNode;if(batch!=l._batch){for(var d=0,h=l.firstChild;h;h=h.nextSibling)1==h.nodeType&&(h.nodeIndex=++d);l._batch=batch}1==r?0!=o&&i.nodeIndex!=o||(s[++n]=i):(i.nodeIndex+o)%r==0&&(s[++n]=i)}return s},"only-child":function(t){for(var e,i=[],s=-1,n=0;e=t[n];n++)prev(e)||next(e)||(i[++s]=e);return i},empty:function(t){for(var e,i=[],s=-1,n=0;e=t[n];n++){for(var r,o=e.childNodes,a=0,l=!0;r=o[a];)if(++a,1==r.nodeType||3==r.nodeType){l=!1;break}l&&(i[++s]=e)}return i},contains:function(t,e){for(var i,s=[],n=-1,r=0;i=t[r];r++)-1!=(i.textContent||i.innerText||"").indexOf(e)&&(s[++n]=i);return s},nodeValue:function(t,e){for(var i,s=[],n=-1,r=0;i=t[r];r++)i.firstChild&&i.firstChild.nodeValue==e&&(s[++n]=i);return s},checked:function(t){for(var e,i=[],s=-1,n=0;e=t[n];n++)1==e.checked&&(i[++s]=e);return i},not:function(t,e){return Ext.DomQuery.filter(t,e,!0)},any:function(t,e){for(var i,s,n=e.split("|"),r=[],o=-1,a=0;s=t[a];a++)for(var l=0;i=n[l];l++)if(Ext.DomQuery.is(s,i)){r[++o]=s;break}return r},odd:function(t){return this["nth-child"](t,"odd")},even:function(t){return this["nth-child"](t,"even")},nth:function(t,e){return t[e-1]||[]},first:function(t){return t[0]||[]},last:function(t){return t[t.length-1]||[]},has:function(t,e){for(var i,s=Ext.DomQuery.select,n=[],r=-1,o=0;i=t[o];o++)0<s(e,i).length&&(n[++r]=i);return n},next:function(t,e){for(var i,s=Ext.DomQuery.is,n=[],r=-1,o=0;i=t[o];o++){var a=next(i);a&&s(a,e)&&(n[++r]=i)}return n},prev:function(t,e){for(var i,s=Ext.DomQuery.is,n=[],r=-1,o=0;i=t[o];o++){var a=prev(i);a&&s(a,e)&&(n[++r]=i)}return n}}}}(),Ext.query=Ext.DomQuery.select,Ext.util.DelayedTask=function(n,r,o){function a(){clearInterval(l),l=null,n.apply(r,o||[])}var l,d=this;d.delay=function(t,e,i,s){d.cancel(),n=e||n,r=i||r,o=s||o,l=setInterval(a,t)},d.cancel=function(){l&&(clearInterval(l),l=null)}},function(){var s=document;Ext.Element=function(t,e){var i="string"==typeof t?s.getElementById(t):t;return i?(t=i.id,!e&&t&&Ext.elCache[t]?Ext.elCache[t].el:(this.dom=i,void(this.id=t||Ext.id(i)))):null};var r=Ext.DomHelper,n=Ext.Element,o=Ext.elCache;n.prototype={set:function(t,e){var i,s,n=this.dom,e=!1!==e&&!!n.setAttribute;for(i in t)t.hasOwnProperty(i)&&(s=t[i],"style"==i?r.applyStyles(n,s):"cls"==i?n.className=s:e?n.setAttribute(i,s):n[i]=s);return this},defaultUnit:"px",is:function(t){return Ext.DomQuery.is(this.dom,t)},focus:function(t,e){e=e||this.dom;try{Number(t)?this.focus.defer(t,null,[null,e]):e.focus()}catch(t){}return this},blur:function(){try{this.dom.blur()}catch(t){}return this},getValue:function(t){var e=this.dom.value;return t?parseInt(e,10):e},addListener:function(t,e,i,s){return Ext.EventManager.on(this.dom,t,e,i||this,s),this},removeListener:function(t,e,i){return Ext.EventManager.removeListener(this.dom,t,e,i||this),this},removeAllListeners:function(){return Ext.EventManager.removeAll(this.dom),this},purgeAllListeners:function(){return Ext.EventManager.purgeElement(this,!0),this},addUnits:function(t){return""===t||"auto"==t||void 0===t?t=t||"":isNaN(t)&&i.test(t)||(t+=this.defaultUnit||"px"),t},load:function(t,e,i){return Ext.Ajax.request(Ext.apply({params:e,url:t.url||t,callback:i,el:this.dom,indicatorText:t.indicatorText||""},Ext.isObject(t)?t:{})),this},isBorderBox:function(){return Ext.isBorderBox||Ext.isForcedBorderBox||l[(this.dom.tagName||"").toLowerCase()]},remove:function(){var t=this.dom;t&&(delete this.dom,Ext.removeNode(t))},hover:function(t,e,i,s){var n=this;return n.on("mouseenter",t,i||n.dom,s),n.on("mouseleave",e,i||n.dom,s),n},contains:function(t){return!!t&&Ext.lib.Dom.isAncestor(this.dom,t.dom||t)},getAttributeNS:function(t,e){return this.getAttribute(e,t)},getAttribute:function(){var t=document.createElement("table"),n=!1,e="getAttribute"in t,s=/undefined|unknown/;if(e){try{t.getAttribute("ext:qtip")}catch(t){n=!0}return function(t,e){var i,s=this.dom;if(null==(i=s.getAttributeNS?s.getAttributeNS(e,t)||null:i))if(e)if(n&&"TABLE"==s.tagName.toUpperCase())try{i=s.getAttribute(e+":"+t)}catch(t){i=""}else i=s.getAttribute(e+":"+t);else i=s.getAttribute(t)||s[t];return i||""}}return function(t,e){var i=this.om,t=e?(e=i[e+":"+t],s.test(typeof e)?void 0:e):i[t];return t||""}}(),update:function(t){return this.dom&&(this.dom.innerHTML=t),this}};var e=n.prototype;n.addMethods=function(t){Ext.apply(e,t)},e.on=e.addListener,e.un=e.removeListener,e.autoBoxAdjust=!0;var a,i=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i;n.get=function(t){var e,i;return t?"string"==typeof t?(i=s.getElementById(t))?(o[t]&&o[t].el?(e=o[t].el).dom=i:e=n.addToCache(new n(i)),e):null:t.tagName?((i=t.id)||(i=Ext.id(t)),o[i]&&o[i].el?(e=o[i].el).dom=t:e=n.addToCache(new n(t)),e):t instanceof n?(t!=a&&(!Ext.isIE||null!=t.id&&""!=t.id?t.dom=s.getElementById(t.id)||t.dom:t.dom=t.dom),t):t.isComposite?t:Ext.isArray(t)?n.select(t):t==s?(a||((t=function(){}).prototype=n.prototype,(a=new t).dom=s),a):null:null},n.addToCache=function(t,e){return e=e||t.id,o[e]={el:t,data:{},events:{}},t},n.data=function(t,e,i){if(!(t=n.get(t)))return null;var s=o[t.id].data;return 2==arguments.length?s[e]:s[e]=i},n.collectorThreadId=setInterval(function(){if(Ext.enableGarbageCollector){var t,e;for(t in o)(e=o[t]).skipGC?Ext.EventManager.removeFromSpecialCache(e.el):(e=e.el.dom)&&e.parentNode&&(e.offsetParent||s.getElementById(t))||(Ext.enableListenerCollection&&Ext.EventManager.removeAll(e),delete o[t]);if(Ext.isIE){var i={};for(t in o)i[t]=o[t];o=Ext.elCache=i}}else clearInterval(n.collectorThreadId)},3e4);function t(){}t.prototype=n.prototype,n.Flyweight=function(t){this.dom=t},n.Flyweight.prototype=new t,n.Flyweight.prototype.isFlyweight=!0,n._flyweights={},n.fly=function(t,e){var i=null;return e=e||"_global",(t=Ext.getDom(t))&&((n._flyweights[e]=n._flyweights[e]||new n.Flyweight).dom=t,i=n._flyweights[e]),i},Ext.get=n.get,Ext.fly=n.fly;var l=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};(Ext.isIE||Ext.isGecko)&&(l.button=1)}(),Ext.Element.addMethods(function(){var i="parentNode",s="nextSibling",n="previousSibling",a=Ext.DomQuery,l=Ext.get;return{findParent:function(t,e,i){var s,n=this.dom,r=document.body,o=0;if(Ext.isGecko&&"[object XULElement]"==Object.prototype.toString.call(n))return null;for(e=e||50,isNaN(e)&&(s=Ext.getDom(e),e=Number.MAX_VALUE);n&&1==n.nodeType&&o<e&&n!=r&&n!=s;){if(a.is(n,t))return i?l(n):n;o++,n=n.parentNode}return null},findParentNode:function(t,e,i){var s=Ext.fly(this.dom.parentNode,"_internal");return s?s.findParent(t,e,i):null},up:function(t,e){return this.findParentNode(t,e,!0)},select:function(t){return Ext.Element.select(t,this.dom)},query:function(t){return a.select(t,this.dom)},child:function(t,e){t=a.selectNode(t,this.dom);return e?t:l(t)},down:function(t,e){t=a.selectNode(" > "+t,this.dom);return e?t:l(t)},parent:function(t,e){return this.matchNode(i,i,t,e)},next:function(t,e){return this.matchNode(s,s,t,e)},prev:function(t,e){return this.matchNode(n,n,t,e)},first:function(t,e){return this.matchNode(s,"firstChild",t,e)},last:function(t,e){return this.matchNode(n,"lastChild",t,e)},matchNode:function(t,e,i,s){for(var n=this.dom[e];n;){if(1==n.nodeType&&(!i||a.is(n,i)))return s?n:l(n);n=n[t]}return null}}}()),Ext.Element.addMethods(function(){var i=Ext.getDom,s=Ext.get,n=Ext.DomHelper;return{appendChild:function(t){return s(t).appendTo(this)},appendTo:function(t){return i(t).appendChild(this.dom),this},insertBefore:function(t){return(t=i(t)).parentNode.insertBefore(this.dom,t),this},insertAfter:function(t){return(t=i(t)).parentNode.insertBefore(this.dom,t.nextSibling),this},insertFirst:function(t,e){return(t=t||{}).nodeType||t.dom||"string"==typeof t?(t=i(t),this.dom.insertBefore(t,this.dom.firstChild),e?t:s(t)):this.createChild(t,this.dom.firstChild,e)},replace:function(t){return t=s(t),this.insertBefore(t),t.remove(),this},replaceWith:function(t){var e=this;return t.nodeType||t.dom||"string"==typeof t?(t=i(t),e.dom.parentNode.insertBefore(t,e.dom)):t=n.insertBefore(e.dom,t),delete Ext.elCache[e.id],Ext.removeNode(e.dom),e.id=Ext.id(e.dom=t),Ext.Element.addToCache(e.isFlyweight?new Ext.Element(e.dom):e),e},createChild:function(t,e,i){return t=t||{tag:"div"},e?n.insertBefore(e,t,!0!==i):n[this.dom.firstChild?"append":"overwrite"](this.dom,t,!0!==i)},wrap:function(t,e){e=n.insertBefore(this.dom,t||{tag:"div"},!e);return(e.dom||e).appendChild(this.dom),e},insertHtml:function(t,e,i){e=n.insertHtml(t,this.dom,e);return i?Ext.get(e):e}}}()),Ext.Element.addMethods(function(){var n=Ext.supports,e={},i=/(-[a-z])/gi,r=document.defaultView,o=/alpha\(opacity=(.*)\)/i,a=/^\s+|\s+$/g,l=(Ext.Element,/\s+/),d=/\w/g,t="padding",s="margin",h="border",c="-left",u="-right",f="-top",p="-bottom",m="-width",g=Math,x="hidden",E="isClipped",v="overflow",y="overflow-x",b="overflow-y",w="originalClip",C={l:h+c+m,r:h+u+m,t:h+f+m,b:h+p+m},S={l:t+c,r:t+u,t:t+f,b:t+p},T=Ext.Element.data;function I(t,e){return e.charAt(1).toUpperCase()}function k(t){return e[t]||(e[t]="float"==t?n.cssFloat?"cssFloat":"styleFloat":t.replace(i,I))}return{adjustWidth:function(t){var e="number"==typeof t;return e&&this.autoBoxAdjust&&!this.isBorderBox()&&(t-=this.getBorderWidth("lr")+this.getPadding("lr")),e&&t<0?0:t},adjustHeight:function(t){var e="number"==typeof t;return e&&this.autoBoxAdjust&&!this.isBorderBox()&&(t-=this.getBorderWidth("tb")+this.getPadding("tb")),e&&t<0?0:t},addClass:function(t){var e,i,s,n=[];if(Ext.isArray(t)){for(e=0,i=t.length;e<i;e++)"string"==typeof(s=t[e])&&-1==(" "+this.dom.className+" ").indexOf(" "+s+" ")&&n.push(s);n.length&&(this.dom.className+=" "+n.join(" "))}else"string"!=typeof t||this.hasClass(t)||(this.dom.className+=" "+t);return this},removeClass:function(t){var e,i,s,n,r=this;if(Ext.isArray(t)||(t=[t]),r.dom&&r.dom.className){for(n=r.dom.className.replace(a,"").split(l),e=0,i=t.length;e<i;e++)"string"==typeof(s=t[e])&&(s=s.replace(a,""),-1!=(s=n.indexOf(s))&&n.splice(s,1));r.dom.className=n.join(" ")}return r},radioClass:function(t){var e,i,s,n=this.dom.parentNode.childNodes;for(t=Ext.isArray(t)?t:[t],i=0,s=n.length;i<s;i++)(e=n[i])&&1==e.nodeType&&Ext.fly(e,"_internal").removeClass(t);return this.addClass(t)},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},hasClass:function(t){return t&&-1!=(" "+this.dom.className+" ").indexOf(" "+t+" ")},replaceClass:function(t,e){return this.removeClass(t).addClass(e)},isStyle:function(t,e){return this.getStyle(t)==e},getStyle:r&&r.getComputedStyle?function(t){var e,i,s=this.dom;return s==document?null:(t=k(t),e=(e=s.style[t])?e:(i=r.getComputedStyle(s,""))?i[t]:null,"marginRight"!=t||"0px"==e||n.correctRightMargin||(i=s.style.display,s.style.display="inline-block",e=r.getComputedStyle(s,"").marginRight,s.style.display=i),"backgroundColor"!=t||"rgba(0, 0, 0, 0)"!=e||n.correctTransparentColor?e:"transparent")}:function(t){var e,i=this.dom;if(i==document)return null;if("opacity"!=t)return t=k(t),i.style[t]||((e=i.currentStyle)?e[t]:null);if(i.style.filter.match&&(s=i.style.filter.match(o))){var s=parseFloat(s[1]);if(!isNaN(s))return s?s/100:0}return 1},getColor:function(t,e,i){var s,t=this.getStyle(t),n=void 0!==i?i:"#";return!t||/transparent|inherit/.test(t)?e:(/^r/.test(t)?Ext.each(t.slice(4,t.length-1).split(","),function(t){s=parseInt(t,10),n+=(s<16?"0":"")+s.toString(16)}):(t=t.replace("#",""),n+=3==t.length?t.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):t),5<n.length?n.toLowerCase():e)},setStyle:function(t,e){var i,s;for(s in"object"!=typeof t&&((i={})[t]=e,t=i),t)e=t[s],"opacity"==s?this.setOpacity(e):this.dom.style[k(s)]=e;return this},setOpacity:function(t,e){var i,s,n=this,r=n.dom.style;return e&&n.anim?n.anim({opacity:{to:t}},n.preanim(arguments,1),null,.35,"easeIn"):Ext.isIE9m?(i=t<1?"alpha(opacity="+100*t+")":"",s=r.filter.replace(o,"").replace(a,""),r.zoom=1,r.filter=s+(0<s.length?" ":"")+i):r.opacity=t,n},clearOpacity:function(){var t=this.dom.style;return Ext.isIE9m?Ext.isEmpty(t.filter)||(t.filter=t.filter.replace(o,"").replace(a,"")):t.opacity=t["-moz-opacity"]=t["-khtml-opacity"]="",this},getHeight:function(t){var e=this.dom,i=Ext.isIE9m&&this.isStyle("display","none"),e=g.max(e.offsetHeight,i?0:e.clientHeight)||0;return(e=t?e-this.getBorderWidth("tb")-this.getPadding("tb"):e)<0?0:e},getWidth:function(t){var e=this.dom,i=Ext.isIE9m&&this.isStyle("display","none"),e=g.max(e.offsetWidth,i?0:e.clientWidth)||0;return(e=t?e-this.getBorderWidth("lr")-this.getPadding("lr"):e)<0?0:e},setWidth:function(t,e){var i=this;return t=i.adjustWidth(t),e&&i.anim?i.anim({width:{to:t}},i.preanim(arguments,1)):i.dom.style.width=i.addUnits(t),i},setHeight:function(t,e){var i=this;return t=i.adjustHeight(t),e&&i.anim?i.anim({height:{to:t}},i.preanim(arguments,1)):i.dom.style.height=i.addUnits(t),i},getBorderWidth:function(t){return this.addStyles(t,C)},getPadding:function(t){return this.addStyles(t,S)},clip:function(){var t=this,e=t.dom;return T(e,E)||(T(e,E,!0),T(e,w,{o:t.getStyle(v),x:t.getStyle(y),y:t.getStyle(b)}),t.setStyle(v,x),t.setStyle(y,x),t.setStyle(b,x)),t},unclip:function(){var t=this,e=t.dom;return T(e,E)&&(T(e,E,!1),(e=T(e,w)).o&&t.setStyle(v,e.o),e.x&&t.setStyle(y,e.x),e.y&&t.setStyle(b,e.y)),t},addStyles:function(t,e){for(var i,s=0,n=t.match(d),r=n.length,o=0;o<r;o++)(i=(i=n[o])&&parseInt(this.getStyle(e[i]),10))&&(s+=g.abs(i));return s},margins:{l:s+c,r:s+u,t:s+f,b:s+p}}}()),function(){var s=Ext.lib.Dom,a="left",l="top",d="position",h="relative",r="z-index";Ext.Element.addMethods({getX:function(){return s.getX(this.dom)},getY:function(){return s.getY(this.dom)},getXY:function(){return s.getXY(this.dom)},getOffsetsTo:function(t){var e=this.getXY(),t=Ext.fly(t,"_internal").getXY();return[e[0]-t[0],e[1]-t[1]]},setX:function(t,e){return this.setXY([t,this.getY()],this.animTest(arguments,e,1))},setY:function(t,e){return this.setXY([this.getX(),t],this.animTest(arguments,e,1))},setLeft:function(t){return this.setStyle(a,this.addUnits(t)),this},setTop:function(t){return this.setStyle(l,this.addUnits(t)),this},setRight:function(t){return this.setStyle("right",this.addUnits(t)),this},setBottom:function(t){return this.setStyle("bottom",this.addUnits(t)),this},setXY:function(t,e){var i=this;return e&&i.anim?i.anim({points:{to:t}},i.preanim(arguments,1),"motion"):s.setXY(i.dom,t),i},setLocation:function(t,e,i){return this.setXY([t,e],this.animTest(arguments,i,2))},moveTo:function(t,e,i){return this.setXY([t,e],this.animTest(arguments,i,2))},getLeft:function(t){return t?parseInt(this.getStyle(a),10)||0:this.getX()},getRight:function(t){return t?this.getLeft(!0)+this.getWidth()||0:this.getX()+this.getWidth()},getTop:function(t){return t?parseInt(this.getStyle(l),10)||0:this.getY()},getBottom:function(t){return t?this.getTop(!0)+this.getHeight()||0:this.getY()+this.getHeight()},position:function(t,e,i,s){var n=this;!t&&n.isStyle(d,"static")?n.setStyle(d,h):t&&n.setStyle(d,t),e&&n.setStyle(r,e),(i||s)&&n.setXY([i||!1,s||!1])},clearPositioning:function(t){return this.setStyle({left:t=t||"",right:t,top:t,bottom:t,"z-index":"",position:"static"}),this},getPositioning:function(){var t=this.getStyle(a),e=this.getStyle(l);return{position:this.getStyle(d),left:t,right:t?"":this.getStyle("right"),top:e,bottom:e?"":this.getStyle("bottom"),"z-index":this.getStyle(r)}},setPositioning:function(t){var e=this.dom.style;return this.setStyle(t),"auto"==t.right&&(e.right=""),"auto"==t.bottom&&(e.bottom=""),this},translatePoints:function(t,e){e=isNaN(t[1])?e:t[1],t=isNaN(t[0])?t:t[0];var i=this,s=i.isStyle(d,h),n=i.getXY(),r=parseInt(i.getStyle(a),10),o=parseInt(i.getStyle(l),10),r=isNaN(r)?s?0:i.dom.offsetLeft:r,o=isNaN(o)?s?0:i.dom.offsetTop:o;return{left:t-n[0]+r,top:e-n[1]+o}},animTest:function(t,e,i){return!(!e||!this.preanim)&&this.preanim(t,i)}})}(),Ext.Element.addMethods({isScrollable:function(){var t=this.dom;return t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth},scrollTo:function(t,e){return this.dom["scroll"+(/top/i.test(t)?"Top":"Left")]=e,this},getScroll:function(){var t,e=this.dom,i=document,s=i.body,n=i.documentElement,e=e==i||e==s?(n=Ext.isIE&&Ext.isStrict?(t=n.scrollLeft,n.scrollTop):(t=window.pageXOffset,window.pageYOffset),{left:t||(s?s.scrollLeft:0),top:n||(s?s.scrollTop:0)}):{left:e.scrollLeft,top:e.scrollTop};return e}}),Ext.Element.VISIBILITY=1,Ext.Element.DISPLAY=2,Ext.Element.OFFSETS=3,Ext.Element.ASCLASS=4,Ext.Element.visibilityCls="x-hide-nosize",Ext.Element.addMethods(function(){function e(t){var e=c(t,i);return void 0===e&&c(t,i,e=""),e}function r(t){var e=c(t,n);return void 0===e&&c(t,n,e=1),e}var o=Ext.Element,a="visibility",l="display",d="hidden",s="none",i="originalDisplay",n="visibilityMode",h="isVisible",c=o.data;return{originalDisplay:"",visibilityMode:1,setVisibilityMode:function(t){return c(this.dom,n,t),this},animate:function(t,e,i,s,n){return this.anim(t,{duration:e,callback:i,easing:s},n),this},anim:function(t,e,i,s,n,r){i=i||"run",e=e||{};var o=this,n=Ext.lib.Anim[i](o.dom,t,e.duration||s||.35,e.easing||n||"easeOut",function(){r&&r.call(o),e.callback&&e.callback.call(e.scope||o,o,e)},o);return e.anim=n},preanim:function(t,e){return!!t[e]&&("object"==typeof t[e]?t[e]:{duration:t[e+1],callback:t[e+2],easing:t[e+3]})},isVisible:function(){var t=this,e=t.dom,i=c(e,h);return"boolean"==typeof i||(i=!(t.isStyle(a,d)||t.isStyle(l,s)||r(e)==o.ASCLASS&&t.hasClass(t.visibilityCls||o.visibilityCls)),c(e,h,i)),i},setVisible:function(t,e){var i=this,s=i.dom,n=r(s);if("string"==typeof e){switch(e){case l:n=o.DISPLAY;break;case a:n=o.VISIBILITY;break;case"offsets":n=o.OFFSETS;break;case"nosize":case"asclass":n=o.ASCLASS}i.setVisibilityMode(n),e=!1}if(e&&i.anim)t&&(i.setOpacity(.01),i.setVisible(!0)),i.anim({opacity:{to:t?1:0}},i.preanim(arguments,1),null,.35,"easeIn",function(){t||i.setVisible(!1).setOpacity(1)});else if(n==o.ASCLASS)i[t?"removeClass":"addClass"](i.visibilityCls||o.visibilityCls);else{if(n==o.DISPLAY)return i.setDisplayed(t);n==o.OFFSETS?t?(i.applyStyles(i.hideModeStyles||{position:"",top:"",left:""}),delete i.hideModeStyles):(i.hideModeStyles={position:i.getStyle("position"),top:i.getStyle("top"),left:i.getStyle("left")},i.applyStyles({position:"absolute",top:"-10000px",left:"-10000px"})):(i.fixDisplay(),s.style.visibility=t?"visible":d)}return c(s,h,t),i},hasMetrics:function(){var t=this.dom;return this.isVisible()||r(t)==o.VISIBILITY},toggle:function(t){return this.setVisible(!this.isVisible(),this.preanim(arguments,0)),this},setDisplayed:function(t){return"boolean"==typeof t&&(t=t?e(this.dom):s),this.setStyle(l,t),this},fixDisplay:function(){var t=this;t.isStyle(l,s)&&(t.setStyle(a,d),t.setStyle(l,e(this.dom)),t.isStyle(l,s)&&t.setStyle(l,"block"))},hide:function(t){return"string"==typeof t?this.setVisible(!1,t):this.setVisible(!1,this.preanim(arguments,0)),this},show:function(t){return"string"==typeof t?this.setVisible(!0,t):this.setVisible(!0,this.preanim(arguments,0)),this}}}()),function(){function u(t){return e.dom=t,e.id=Ext.id(t),e}function n(t){return i[t]||(i[t]=[]),i[t]}function s(t,e){i[t]=e}var h=null,c="left",f="bottom",p="top",m="right",d="height",g="width",x="points",E="absolute",v="visible",y="motion",b="easeOut",e=new Ext.Element.Flyweight,i={};Ext.enableFx=!0,Ext.Fx={switchStatements:function(t,e,i){return e.apply(this,i[t])},slideIn:function(t,e){e=e||{};var i,s,n,r,o,a,l=this.dom,d=l.style;return t=t||"t",this.queueFx(e,function(){a=u(l).getXY(),u(l).fixDisplay(),i=u(l).getFxRestore(),(s={x:a[0],y:a[1],0:a[0],1:a[1],width:l.offsetWidth,height:l.offsetHeight}).right=s.x+s.width,s.bottom=s.y+s.height,u(l).setWidth(s.width).setHeight(s.height),n=u(l).fxWrap(i.pos,e,"hidden"),d.visibility=v,d.position=E,r={to:[s.x,s.y]},o={to:s.width},a={to:s.height},r=u(l).switchStatements(t.toLowerCase(),function(t,e,i,s,n,r,o,a,l,d,h){var c={};return u(t).setWidth(i).setHeight(s),u(t)[n]&&u(t)[n](r),e[o]=e[a]="0",l&&(c.width=l),d&&(c.height=d),h&&(c.points=h),c},{t:[n,d,s.width,0,h,h,c,f,h,a,h],l:[n,d,0,s.height,h,h,m,p,o,h,h],r:[n,d,s.width,s.height,"setX",s.right,c,p,h,h,r],b:[n,d,s.width,s.height,"setY",s.bottom,c,p,h,a,r],tl:[n,d,0,0,h,h,m,f,o,a,r],bl:[n,d,0,0,"setY",s.y+s.height,m,p,o,a,r],br:[n,d,0,0,"setXY",[s.right,s.bottom],c,p,o,a,r],tr:[n,d,0,0,"setX",s.x+s.width,c,f,o,a,r]}),d.visibility=v,u(n).show(),arguments.callee.anim=u(n).fxanim(r,e,y,.5,b,function(){u(l).fxUnwrap(n,i.pos,e),d.width=i.width,d.height=i.height,u(l).afterFx(e)})}),this},slideOut:function(t,e){e=e||{};var i,s,n,r=this.dom,o=r.style,a=this.getXY(),l={to:0};return t=t||"t",this.queueFx(e,function(){s=u(r).getFxRestore(),(n={x:a[0],y:a[1],0:a[0],1:a[1],width:r.offsetWidth,height:r.offsetHeight}).right=n.x+n.width,n.bottom=n.y+n.height,u(r).setWidth(n.width).setHeight(n.height),i=u(r).fxWrap(s.pos,e,v),o.visibility=v,o.position=E,u(i).setWidth(n.width).setHeight(n.height),n=u(r).switchStatements(t.toLowerCase(),function(t,e,i,s,n,r,o,a,l){var d={};return t[e]=t[i]="0",d[s]=n,r&&(d[r]=o),a&&(d[a]=l),d},{t:[o,c,f,d,l],l:[o,m,p,g,l],r:[o,c,p,g,l,x,{to:[n.right,n.y]}],b:[o,c,p,d,l,x,{to:[n.x,n.bottom]}],tl:[o,m,f,g,l,d,l],bl:[o,m,p,g,l,d,l,x,{to:[n.x,n.bottom]}],br:[o,c,p,g,l,d,l,x,{to:[n.x+n.width,n.bottom]}],tr:[o,c,f,g,l,d,l,x,{to:[n.right,n.y]}]}),arguments.callee.anim=u(i).fxanim(n,e,y,.5,b,function(){e.useDisplay?u(r).setDisplayed(!1):u(r).hide(),u(r).fxUnwrap(i,s.pos,e),o.width=s.width,o.height=s.height,u(r).afterFx(e)})}),this},puff:function(t){t=t||{};var e,i,s,n=this.dom,r=n.style;return this.queueFx(t,function(){e=u(n).getWidth(),i=u(n).getHeight(),u(n).clearOpacity(),u(n).show(),s=u(n).getFxRestore(),arguments.callee.anim=u(n).fxanim({width:{to:u(n).adjustWidth(2*e)},height:{to:u(n).adjustHeight(2*i)},points:{by:[.5*-e,.5*-i]},opacity:{to:0},fontSize:{to:200,unit:"%"}},t,y,.5,b,function(){t.useDisplay?u(n).setDisplayed(!1):u(n).hide(),u(n).clearOpacity(),u(n).setPositioning(s.pos),r.width=s.width,r.height=s.height,r.fontSize="",u(n).afterFx(t)})}),this},switchOff:function(e){e=e||{};var i,s=this.dom,n=s.style;return this.queueFx(e,function(){function t(){e.useDisplay?u(s).setDisplayed(!1):u(s).hide(),u(s).clearOpacity(),u(s).setPositioning(i.pos),n.width=i.width,n.height=i.height,u(s).afterFx(e)}u(s).clearOpacity(),u(s).clip(),i=u(s).getFxRestore(),u(s).fxanim({opacity:{to:.3}},h,h,.1,h,function(){u(s).clearOpacity(),function(){u(s).fxanim({height:{to:1},points:{by:[0,.5*u(s).getHeight()]}},e,y,.3,"easeIn",t)}.defer(100)})}),this},highlight:function(t,e){e=e||{};var i,s=this.dom,n=e.attr||"backgroundColor",r={};return this.queueFx(e,function(){u(s).clearOpacity(),u(s).show(),i=s.style[n],r[n]={from:t||"ffff9c",to:e.endColor||u(s).getColor(n)||"ffffff"},arguments.callee.anim=u(s).fxanim(r,e,"color",1,"easeIn",function(){s.style[n]=i,u(s).afterFx(e)})}),this},frame:function(n,r,o){o=o||{};var a,l,d=this.dom;return this.queueFx(o,function(){6==(n=n||"#C3DAF9").length&&(n="#"+n),r=r||1,u(d).show();var t=u(d).getXY(),e={x:t[0],y:t[1],0:t[0],1:t[1],width:d.offsetWidth,height:d.offsetHeight},i=function(){return(a=u(document.body||document.documentElement).createChild({style:{position:E,"z-index":35e3,border:"0px solid "+n}})).queueFx({},s)};function s(){var t=Ext.isBorderBox?2:1;l=a.anim({top:{from:e.y,to:e.y-20},left:{from:e.x,to:e.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:e.height,to:e.height+20*t},width:{from:e.width,to:e.width+20*t}},{duration:o.duration||1,callback:function(){a.remove(),0<--r?i():u(d).afterFx(o)}}),arguments.callee.anim={isAnimated:!0,stop:function(){l.stop()}}}arguments.callee.anim={isAnimated:!0,stop:function(){r=0,a.stopFx()}},i()}),this},pause:function(t){var e,i=this.dom;return this.queueFx({},function(){e=setTimeout(function(){u(i).afterFx({})},1e3*t),arguments.callee.anim={isAnimated:!0,stop:function(){clearTimeout(e),u(i).afterFx({})}}}),this},fadeIn:function(t){t=t||{};var e=this.dom,i=t.endOpacity||1;return this.queueFx(t,function(){u(e).setOpacity(0),u(e).fixDisplay(),e.style.visibility=v,arguments.callee.anim=u(e).fxanim({opacity:{to:i}},t,h,.5,b,function(){1==i&&u(e).clearOpacity(),u(e).afterFx(t)})}),this},fadeOut:function(t){t=t||{};var e=this.dom,i=e.style,s=t.endOpacity||0;return this.queueFx(t,function(){arguments.callee.anim=u(e).fxanim({opacity:{to:s}},t,h,.5,b,function(){0==s&&(Ext.Element.data(e,"visibilityMode")==Ext.Element.DISPLAY||t.useDisplay?i.display="none":i.visibility="hidden",u(e).clearOpacity()),u(e).afterFx(t)})}),this},scale:function(t,e,i){return this.shift(Ext.apply({},i,{width:t,height:e})),this},shift:function(e){e=e||{};var i=this.dom,s={};return this.queueFx(e,function(){for(var t in e)null!=e[t]&&(s[t]={to:e[t]});s.width&&(s.width.to=u(i).adjustWidth(e.width)),s.height&&(s.height.to=u(i).adjustWidth(e.height)),(s.x||s.y||s.xy)&&(s.points=s.xy||{to:[s.x?s.x.to:u(i).getX(),s.y?s.y.to:u(i).getY()]}),arguments.callee.anim=u(i).fxanim(s,e,y,.35,b,function(){u(i).afterFx(e)})}),this},ghost:function(t,e){e=e||{};var i,s,n,r=this.dom,o=r.style,a={opacity:{to:0},points:{}},l=a.points;return t=t||"b",this.queueFx(e,function(){i=u(r).getFxRestore(),s=u(r).getWidth(),n=u(r).getHeight(),l.by=u(r).switchStatements(t.toLowerCase(),function(t,e){return[t,e]},{t:[0,-n],l:[-s,0],r:[s,0],b:[0,n],tl:[-s,-n],bl:[-s,n],br:[s,n],tr:[s,-n]}),arguments.callee.anim=u(r).fxanim(a,e,y,.5,b,function(){e.useDisplay?u(r).setDisplayed(!1):u(r).hide(),u(r).clearOpacity(),u(r).setPositioning(i.pos),o.width=i.width,o.height=i.height,u(r).afterFx(e)})}),this},syncFx:function(){return this.fxDefaults=Ext.apply(this.fxDefaults||{},{block:!1,concurrent:!0,stopFx:!1}),this},sequenceFx:function(){return this.fxDefaults=Ext.apply(this.fxDefaults||{},{block:!1,concurrent:!1,stopFx:!1}),this},nextFx:function(){var t=n(this.dom.id)[0];t&&t.call(this)},hasActiveFx:function(){return n(this.dom.id)[0]},stopFx:function(t){var e,i=this.dom.id;return!this.hasActiveFx()||(e=n(i)[0])&&e.anim&&(e.anim.isAnimated?(s(i,[e]),e.anim.stop(void 0===t||t)):s(i,[])),this},beforeFx:function(t){return!(this.hasActiveFx()&&!t.concurrent)||!!t.stopFx&&(this.stopFx(),!0)},hasFxBlock:function(){var t=n(this.dom.id);return t&&t[0]&&t[0].block},queueFx:function(t,e){var i,s=u(this.dom);return s.hasFxBlock()||(Ext.applyIf(t,s.fxDefaults),t.concurrent?e.call(s):(i=s.beforeFx(t),e.block=t.block,n(s.dom.id).push(e),i&&s.nextFx())),s},fxWrap:function(t,e,i){var s,n,r=this.dom;return e.wrap&&(s=Ext.getDom(e.wrap))||(e.fixPosition&&(n=u(r).getXY()),(e=document.createElement("div")).style.visibility=i,s=r.parentNode.insertBefore(e,r),u(s).setPositioning(t),u(s).isStyle("position","static")&&u(s).position("relative"),u(r).clearPositioning("auto"),u(s).clip(),s.appendChild(r),n&&u(s).setXY(n)),s},fxUnwrap:function(t,e,i){var s=this.dom;u(s).clearPositioning(),u(s).setPositioning(e),i.wrap||(u(t).dom.parentNode.insertBefore(s,t),u(t).remove())},getFxRestore:function(){var t=this.dom.style;return{pos:this.getPositioning(),width:t.width,height:t.height}},afterFx:function(t){var e=this.dom,i=e.id;t.afterStyle&&u(e).setStyle(t.afterStyle),t.afterCls&&u(e).addClass(t.afterCls),1==t.remove&&u(e).remove(),t.callback&&t.callback.call(t.scope,u(e)),t.concurrent||(n(i).shift(),u(e).nextFx())},fxanim:function(t,e,i,s,n,r){i=i||"run",e=e||{};r=Ext.lib.Anim[i](this.dom,t,e.duration||s||.35,e.easing||n||b,r,this);return e.anim=r}},Ext.Fx.resize=Ext.Fx.scale,Ext.Element.addMethods(Ext.Fx)}(),Ext.CompositeElementLite=function(t,e){this.elements=[],this.add(t,e),this.el=new Ext.Element.Flyweight},Ext.CompositeElementLite.prototype={isComposite:!0,getElement:function(t){var e=this.el;return e.dom=t,e.id=t.id,e},transformElement:function(t){return Ext.getDom(t)},getCount:function(){return this.elements.length},add:function(t,e){var i=this.elements;if(!t)return this;"string"==typeof t?t=Ext.Element.selectorFunction(t,e):t.isComposite?t=t.elements:Ext.isIterable(t)||(t=[t]);for(var s=0,n=t.length;s<n;++s)i.push(this.transformElement(t[s]));return this},invoke:function(t,e){for(var i,s=this.elements,n=s.length,r=0;r<n;r++)(i=s[r])&&Ext.Element.prototype[t].apply(this.getElement(i),e);return this},item:function(t){var e=this.elements[t],t=null;return t=e?this.getElement(e):t},addListener:function(t,e,i,s){for(var n,r=this.elements,o=r.length,a=0;a<o;a++)(n=r[a])&&Ext.EventManager.on(n,t,e,i||n,s);return this},each:function(t,e){for(var i,s=this.elements,n=s.length,r=0;r<n&&(!(i=s[r])||(i=this.getElement(i),!1!==t.call(e||i,i,this,r)));r++);return this},fill:function(t){return this.elements=[],this.add(t),this},filter:function(e){var s=[],n=this,r=Ext.isFunction(e)?e:function(t){return t.is(e)};return n.each(function(t,e,i){!1!==r(t,i)&&(s[s.length]=n.transformElement(t))}),n.elements=s,n},indexOf:function(t){return this.elements.indexOf(this.transformElement(t))},replaceElement:function(t,e,i){t=isNaN(t)?this.indexOf(t):t;return-1<t&&(e=Ext.getDom(e),i&&((i=this.elements[t]).parentNode.insertBefore(e,i),Ext.removeNode(i)),this.elements.splice(t,1,e)),this},clear:function(){this.elements=[]}},Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener,Ext.CompositeElementLite.importElementMethods=function(){var t,e=Ext.Element.prototype,i=Ext.CompositeElementLite.prototype;for(t in e)"function"==typeof e[t]&&!function(t){i[t]=i[t]||function(){return this.invoke(t,arguments)}}.call(i,t)},Ext.CompositeElementLite.importElementMethods(),Ext.DomQuery&&(Ext.Element.selectorFunction=Ext.DomQuery.select),Ext.Element.select=function(t,e){var i;if("string"==typeof t)i=Ext.Element.selectorFunction(t,e);else{if(void 0===t.length)throw"Invalid selector";i=t}return new Ext.CompositeElementLite(i)},Ext.select=Ext.Element.select,function(){var a="beforerequest",c="requestcomplete",s="requestexception",u=window;Ext.data.Connection=function(t){Ext.apply(this,t),this.addEvents(a,c,s),Ext.data.Connection.superclass.constructor.call(this)},Ext.extend(Ext.data.Connection,Ext.util.Observable,{timeout:3e4,autoAbort:!1,disableCaching:!0,disableCachingParam:"_dc",request:function(e){var t=this;if(t.fireEvent(a,t,e)){e.el&&(Ext.isEmpty(e.indicatorText)||(t.indicatorText='<div class="loading-indicator">'+e.indicatorText+"</div>"),t.indicatorText&&(Ext.getDom(e.el).innerHTML=t.indicatorText),e.success=(Ext.isFunction(e.success)?e.success:function(){}).createInterceptor(function(t){Ext.getDom(e.el).innerHTML=t.responseText}));var i,s,n=e.params,r=e.url||t.url,o={success:t.handleResponse,failure:t.handleFailure,scope:t,argument:{options:e},timeout:Ext.num(e.timeout,t.timeout)};if(Ext.isFunction(n)&&(n=n.call(e.scope||u,e)),n=Ext.urlEncode(t.extraParams,Ext.isObject(n)?Ext.urlEncode(n):n),Ext.isFunction(r)&&(r=r.call(e.scope||u,e)),i=Ext.getDom(e.form)){if(r=r||i.action,e.isUpload||/multipart\/form-data/i.test(i.getAttribute("enctype")))return t.doFormUpload.call(t,e,n,r);s=Ext.lib.Ajax.serializeForm(i),n=n?n+"&"+s:s}return("GET"===(i=e.method||t.method||(n||e.xmlData||e.jsonData?"POST":"GET"))&&t.disableCaching&&!1!==e.disableCaching||!0===e.disableCaching)&&(s=e.disableCachingParam||t.disableCachingParam,r=Ext.urlAppend(r,s+"="+(new Date).getTime())),e.headers=Ext.applyIf(e.headers||{},t.defaultHeaders||{}),!0!==e.autoAbort&&!t.autoAbort||t.abort(),("GET"==i||e.xmlData||e.jsonData)&&n&&(r=Ext.urlAppend(r,n),n=""),t.transId=Ext.lib.Ajax.request(i,r,o,n,e)}return e.callback?e.callback.apply(e.scope,[e,void 0,void 0]):null},isLoading:function(t){return t?Ext.lib.Ajax.isCallInProgress(t):!!this.transId},abort:function(t){(t||this.isLoading())&&Ext.lib.Ajax.abort(t||this.transId)},handleResponse:function(t){this.transId=!1;var e=t.argument.options;t.argument=e?e.argument:null,this.fireEvent(c,this,t,e),e.success&&e.success.call(e.scope,t,e),e.callback&&e.callback.call(e.scope,e,!0,t)},handleFailure:function(t,e){this.transId=!1;var i=t.argument.options;t.argument=i?i.argument:null,this.fireEvent(s,this,t,i,e),i.failure&&i.failure.call(i.scope,t,i),i.callback&&i.callback.call(i.scope,i,!1,t)},doFormUpload:function(r,t,e){var i,o=Ext.id(),s=document,a=s.createElement("iframe"),n=Ext.getDom(r.form),l=[],d="multipart/form-data",h={target:n.target,method:n.method,encoding:n.encoding,enctype:n.enctype,action:n.action};Ext.fly(a).set({id:o,name:o,cls:"x-hidden",src:Ext.SSL_SECURE_URL}),s.body.appendChild(a),Ext.isIE&&(document.frames[o].name=o),Ext.fly(n).set({target:o,method:"POST",enctype:d,encoding:d,action:e||h.action}),Ext.iterate(Ext.urlDecode(t,!1),function(t,e){i=s.createElement("input"),Ext.fly(i).set({type:"hidden",value:e,name:t}),n.appendChild(i),l.push(i)}),Ext.EventManager.on(a,"load",function t(){var e,i,s={responseText:"",responseXML:null,argument:r.argument};try{(e=a.contentWindow.document||a.contentDocument||u.frames[o].document)&&(e.body&&(/textarea/i.test((i=e.body.firstChild||{}).tagName)?s.responseText=i.value:s.responseText=e.body.innerHTML),s.responseXML=e.XMLDocument||e)}catch(t){}function n(t,e,i){Ext.isFunction(t)&&t.apply(e,i)}Ext.EventManager.removeListener(a,"load",t,this),this.fireEvent(c,this,s,r),n(r.success,r.scope,[s,r]),n(r.callback,r.scope,[r,!0,s]),this.debugUploads||setTimeout(function(){Ext.removeNode(a)},100)},this),n.submit(),Ext.fly(n).set(h),Ext.each(l,function(t){Ext.removeNode(t)})}})}(),Ext.Ajax=new Ext.data.Connection({autoAbort:!1,serializeForm:function(t){return Ext.lib.Ajax.serializeForm(t)}}),Ext.util.JSON=new function(){var useHasOwn=!!{}.hasOwnProperty,isNative=(bz=null,function(){return bz=null===bz?Ext.USE_NATIVE_JSON&&window.JSON&&"[object JSON]"==JSON.toString():bz}),pad=function(t){return t<10?"0"+t:t},doDecode=function(json){return json?eval("("+json+")"):""},doEncode=function(t){if(Ext.isDefined(t)&&null!==t){if(Ext.isArray(t))return encodeArray(t);if(Ext.isDate(t))return Ext.util.JSON.encodeDate(t);if(Ext.isString(t))return encodeString(t);if("number"==typeof t)return isFinite(t)?String(t):"null";if(Ext.isBoolean(t))return String(t);var e,i,s,n=["{"];for(i in t)if(!t.getElementsByTagName&&(!useHasOwn||t.hasOwnProperty(i)))switch(typeof(s=t[i])){case"undefined":case"function":case"unknown":break;default:e&&n.push(","),n.push(doEncode(i),":",null===s?"null":doEncode(s)),e=!0}return n.push("}"),n.join("")}return"null"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},encodeString=function(t){return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,function(t,e){var i=m[e];return i||(i=e.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})+'"':'"'+t+'"'},encodeArray=function(t){for(var e,i,s=["["],n=t.length,r=0;r<n;r+=1)switch(typeof(i=t[r])){case"undefined":case"function":case"unknown":break;default:e&&s.push(","),s.push(null===i?"null":Ext.util.JSON.encode(i)),e=!0}return s.push("]"),s.join("")},bz,tz,vz;this.encodeDate=function(t){return'"'+t.getFullYear()+"-"+pad(t.getMonth()+1)+"-"+pad(t.getDate())+"T"+pad(t.getHours())+":"+pad(t.getMinutes())+":"+pad(t.getSeconds())+'"'},this.encode=function(t){return(tz=tz||(isNative()?JSON.stringify:doEncode))(t)},this.decode=function(t){return(vz=vz||(isNative()?JSON.parse:doDecode))(t)}},Ext.encode=Ext.util.JSON.encode,Ext.decode=Ext.util.JSON.decode,Ext.EventManager=function(){var s,e,i,n=!1,r=Ext.isGecko||Ext.isWebKit||Ext.isSafari||Ext.isIE10p,k=Ext.lib.Event,M=(Ext.lib.Dom,document),D=window,o="DOMContentLoaded",a="complete",l=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,d=[];function A(t){var e,i=!1,s=0,n=d.length,r=!1;if(t){if(t.getElementById||t.navigator){for(;s<n;++s)if((e=d[s]).el===t){i=e.id;break}i||(i=Ext.id(t),d.push({id:i,el:t}),r=!0)}else i=Ext.id(t);Ext.elCache[i]||(Ext.Element.addToCache(new Ext.Element(t),i),r&&(Ext.elCache[i].skipGC=!0))}return i}function h(t){return!(!Ext.isIE9m||!function(){if(window==top){try{M.documentElement.doScroll("left")}catch(t){return}return f(),1}}())||(M.readyState==a?(f(),!0):(n||(e=setTimeout(arguments.callee,2)),!1))}function c(t){if((i=i||Ext.query("style, link[rel=stylesheet]")).length==M.styleSheets.length)return f(),1;n||(e=setTimeout(arguments.callee,2))}function u(t){M.removeEventListener(o,arguments.callee,!1),c()}function f(t){n||(n=!0,e&&clearTimeout(e),r&&M.removeEventListener(o,f,!1),Ext.isIE9m&&h.bindIE&&M.detachEvent("onreadystatechange",h),k.un(D,"load",arguments.callee)),s&&!Ext.isReady&&(Ext.isReady=!0,s.fire(),s.listeners=[])}function p(t,e,i,s,n){var r,o,a,l,d,h,c,u,f,p,m,g,x,E,v,y,b,w,C,S=i&&"boolean"!=typeof i?i:{},T=Ext.getDom(t);if(s=s||S.fn,n=n||S.scope,!T)throw'Error listening for "'+e+'". Element "'+t+"\" doesn't exist.";function I(t){if(Ext){var e;if(t=Ext.EventObject.setEvent(t),S.delegate){if(!(e=t.getTarget(S.delegate,T)))return}else e=t.target;S.stopEvent&&t.stopEvent(),S.preventDefault&&t.preventDefault(),S.stopPropagation&&t.stopPropagation(),!1===S.normalized&&(t=t.browserEvent),s.call(n||T,t,e,S)}}return S.target&&(r=I,o=S,I=function(){var t=Ext.toArray(arguments);o.target==Ext.EventObject.setEvent(t[0]).target&&r.apply(this,t)}),S.delay&&(a=I,l=S,d=s,I=function(t){var e=new Ext.util.DelayedTask(a);d.tasks||(d.tasks=[]),d.tasks.push(e),e.delay(l.delay||10,a,null,[new Ext.EventObjectImpl(t)])}),S.single&&(h=I,c=T,u=e,f=s,p=n,I=function(t){Ext.EventManager.removeListener(c,u,f,p),h(t)}),S.buffer&&(C=new Ext.util.DelayedTask(I),m=I,g=S,x=C,I=function(t){x.delay(g.buffer,m,null,[new Ext.EventObjectImpl(t)])}),E=T,v=e,y=s,b=C,i=I,t=n,e=A(E=Ext.getDom(E)),C=Ext.elCache[e].events,e=k.on(E,v,i),C[v]=C[v]||[],C[v].push([y,i,t,e,b]),E.addEventListener&&"mousewheel"==v&&(E.addEventListener.apply(E,w=["DOMMouseScroll",i,!1]),Ext.EventManager.addListener(D,"unload",function(){E.removeEventListener.apply(E,w)})),E==M&&"mousedown"==v&&Ext.EventManager.stoppedMouseDownEvent.addListener(i),I}var t={addListener:function(t,e,i,s,n){if("object"==typeof e){var r,o,a=e;for(r in a)o=a[r],l.test(r)||(Ext.isFunction(o)?p(t,r,a,o,a.scope):p(t,r,o))}else p(t,e,n,i,s)},removeListener:function(t,e,i,s){for(var n,r,o,a=A(t=Ext.getDom(t)),l=t&&Ext.elCache[a].events[e]||[],d=0,h=l.length;d<h;d++)if(Ext.isArray(o=l[d])&&o[0]==i&&(!s||o[2]==s)){if(o[4]&&o[4].cancel(),r=i.tasks&&i.tasks.length){for(;r--;)i.tasks[r].cancel();delete i.tasks}for(r in n=o[1],k.un(t,e,k.extAdapter?o[3]:n),n&&t.addEventListener&&"mousewheel"==e&&t.removeEventListener("DOMMouseScroll",n,!1),n&&t==M&&"mousedown"==e&&Ext.EventManager.stoppedMouseDownEvent.removeListener(n),l.splice(d,1),0===l.length&&delete Ext.elCache[a].events[e],Ext.elCache[a].events)return!1;return!(Ext.elCache[a].events={})}},removeAll:function(t){var e,i,s,n,r,o,a,l=A(t=Ext.getDom(t)),d=(Ext.elCache[l]||{}).events||{};for(n in d)if(d.hasOwnProperty(n))for(i=0,s=(e=d[n]).length;i<s;i++){if((r=e[i])[4]&&r[4].cancel(),r[0].tasks&&(o=r[0].tasks.length)){for(;o--;)r[0].tasks[o].cancel();delete r.tasks}a=r[1],k.un(t,n,k.extAdapter?r[3]:a),t.addEventListener&&a&&"mousewheel"==n&&t.removeEventListener("DOMMouseScroll",a,!1),a&&t==M&&"mousedown"==n&&Ext.EventManager.stoppedMouseDownEvent.removeListener(a)}Ext.elCache[l]&&(Ext.elCache[l].events={})},getListeners:function(t,e){t=A(t=Ext.getDom(t)),t=(Ext.elCache[t]||{}).events||{};return t&&t[e]?t[e]:null},removeFromSpecialCache:function(t){for(var e=0,i=d.length;e<i;++e)d[e].el==t&&d.splice(e,1)},purgeElement:function(t,e,i){var s,n,r,o=A(t=Ext.getDom(t)),o=(Ext.elCache[o]||{}).events||{};if(i){if(o&&o.hasOwnProperty(i))for(s=0,r=(n=o[i]).length;s<r;s++)Ext.EventManager.removeListener(t,i,n[s][0])}else Ext.EventManager.removeAll(t);if(e&&t&&t.childNodes)for(s=0,r=t.childNodes.length;s<r;s++)Ext.EventManager.purgeElement(t.childNodes[s],e,i)},_unload:function(){for(var t in Ext.elCache)Ext.EventManager.removeAll(t);delete Ext.elCache,delete Ext.Element._flyweights;var e,i,s=Ext.lib.Ajax,n="object"==typeof s.conn?s.conn:{};for(i in n)(e=n[i])&&s.abort({conn:e,tId:i})},onDocumentReady:function(t,e,i){Ext.isReady?((s=s||new Ext.util.Event).addListener(t,e,i),s.fire(),s.listeners=[]):(s||(s=s||new Ext.util.Event,r&&M.addEventListener(o,f,!1),Ext.isIE9m?h()||(h.bindIE=!0,M.attachEvent("onreadystatechange",h)):Ext.isOpera?M.readyState==a&&c()||M.addEventListener(o,u,!1):Ext.isWebKit&&h(),k.on(D,"load",f)),(i=i||{}).delay=i.delay||1,s.addListener(t,e,i))},fireDocReady:f};return t.on=t.addListener,t.un=t.removeListener,t.stoppedMouseDownEvent=new Ext.util.Event,t}(),Ext.onReady=Ext.EventManager.onDocumentReady,function(){function t(){var t=document.body||document.getElementsByTagName("body")[0];if(!t)return!1;var e,i=[];return Ext.isIE&&(Ext.isIE10p||i.push("ext-ie"),Ext.isIE6?i.push("ext-ie6"):Ext.isIE7?i.push("ext-ie7","ext-ie7m"):Ext.isIE8?i.push("ext-ie8","ext-ie8m"):Ext.isIE9?i.push("ext-ie9","ext-ie9m"):Ext.isIE10&&i.push("ext-ie10")),Ext.isGecko&&(Ext.isGecko2?i.push("ext-gecko2"):i.push("ext-gecko3")),Ext.isOpera&&i.push("ext-opera"),Ext.isWebKit&&i.push("ext-webkit"),Ext.isSafari?i.push("ext-safari "+(Ext.isSafari2?"ext-safari2":Ext.isSafari3?"ext-safari3":"ext-safari4")):Ext.isChrome&&i.push("ext-chrome"),Ext.isMac&&i.push("ext-mac"),Ext.isLinux&&i.push("ext-linux"),!Ext.isStrict&&!Ext.isBorderBox||(e=t.parentNode)&&(Ext.isStrict||(Ext.fly(e,"_internal").addClass("x-quirks"),Ext.isIE9m&&!Ext.isStrict&&(Ext.isIEQuirks=!0)),Ext.fly(e,"_internal").addClass(Ext.isStrict&&Ext.isIE||!Ext.enableForcedBoxModel&&!Ext.isIE?" ext-strict":" ext-border-box")),Ext.enableForcedBoxModel&&!Ext.isIE&&(Ext.isForcedBorderBox=!0,i.push("ext-forced-border-box")),Ext.fly(t,"_internal").addClass(i),!0}t()||Ext.onReady(t)}(),function(){function t(){var t,e,i=document.createElement("div"),s=document;i.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="float:left;background-color:transparent;">',s.body.appendChild(i),e=i.lastChild,(t=s.defaultView)&&("0px"!=t.getComputedStyle(i.firstChild.firstChild,null).marginRight&&(n.correctRightMargin=!1),"transparent"!=t.getComputedStyle(e,null).backgroundColor&&(n.correctTransparentColor=!1)),n.cssFloat=!!e.style.cssFloat,s.body.removeChild(i)}var n=Ext.apply(Ext.supports,{correctRightMargin:!0,correctTransparentColor:!0,cssFloat:!0});Ext.isReady?t():Ext.onReady(t)}(),Ext.EventObject=function(){var i=Ext.lib.Event,s=/(dbl)?click/,e={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},n=Ext.isIE?{1:0,4:1,2:2}:{0:0,1:1,2:2};return Ext.EventObjectImpl=function(t){t&&this.setEvent(t.browserEvent||t)},Ext.EventObjectImpl.prototype={setEvent:function(t){var e=this;return t==e||t&&t.browserEvent?t:((e.browserEvent=t)?(e.button=t.button?n[t.button]:t.which?t.which-1:-1,s.test(t.type)&&-1==e.button&&(e.button=0),e.type=t.type,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey||t.metaKey||!1,e.altKey=t.altKey,e.keyCode=t.keyCode,e.charCode=t.charCode,e.target=i.getTarget(t),e.xy=i.getXY(t)):(e.button=-1,e.shiftKey=!1,e.ctrlKey=!1,e.altKey=!1,e.keyCode=0,e.charCode=0,e.target=null,e.xy=[0,0]),e)},stopEvent:function(){this.browserEvent&&("mousedown"==this.browserEvent.type&&Ext.EventManager.stoppedMouseDownEvent.fire(this),i.stopEvent(this.browserEvent))},preventDefault:function(){this.browserEvent&&i.preventDefault(this.browserEvent)},stopPropagation:function(){this.browserEvent&&("mousedown"==this.browserEvent.type&&Ext.EventManager.stoppedMouseDownEvent.fire(this),i.stopPropagation(this.browserEvent))},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.normalizeKey(this.keyCode||this.charCode)},normalizeKey:function(t){return Ext.isSafari&&e[t]||t},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getXY:function(){return this.xy},getTarget:function(t,e,i){return t?Ext.fly(this.target).findParent(t,e,i):i?Ext.get(this.target):this.target},getRelatedTarget:function(){return this.browserEvent?i.getRelatedTarget(this.browserEvent):null},getWheelDelta:function(){var t=this.browserEvent,e=0;return t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e},within:function(t,e,i){if(t){e=this[e?"getRelatedTarget":"getTarget"]();return e&&(!!i&&e==Ext.getDom(t)||Ext.fly(t).contains(e))}return!1}},new Ext.EventObjectImpl}(),Ext.Loader=Ext.apply({},{load:function(e,t,i,s){var i=i||this,n=document.getElementsByTagName("head")[0],r=document.createDocumentFragment(),o=e.length,a=0,l=this,d=function(t){n.appendChild(l.buildScriptTag(e[t],h))},h=function(){o==++a&&"function"==typeof t?t.call(i):!0===s&&d(a)};!0===s?d.call(this,0):(Ext.each(e,function(t,e){r.appendChild(this.buildScriptTag(t,h))},this),n.appendChild(r))},buildScriptTag:function(t,e){var i=document.createElement("script");return i.type="text/javascript",i.src=t,i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,e())}:i.onload=e,i}}),Ext.ns("Ext.grid","Ext.list","Ext.dd","Ext.tree","Ext.form","Ext.menu","Ext.state","Ext.layout.boxOverflow","Ext.app","Ext.ux","Ext.chart","Ext.direct","Ext.slider"),Ext.apply(Ext,function(){var t=Ext,s=null;return{emptyFn:function(){},BLANK_IMAGE_URL:Ext.isIE6||Ext.isIE7||Ext.isAir?"http://www.extjs.com/s.gif":"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",extendX:function(t,e){return Ext.extend(t,e(t.prototype))},getDoc:function(){return Ext.get(document)},num:function(t,e){return t=Number(Ext.isEmpty(t)||Ext.isArray(t)||"boolean"==typeof t||"string"==typeof t&&0==t.trim().length?NaN:t),isNaN(t)?e:t},value:function(t,e,i){return Ext.isEmpty(t,i)?e:t},escapeRe:function(t){return t.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},sequence:function(t,e,i,s){t[e]=t[e].createSequence(i,s)},addBehaviors:function(t){if(Ext.isReady){var e,i,s,n={};for(i in t)(e=i.split("@"))[1]&&(n[s=e[0]]||(n[s]=Ext.select(s)),n[s].on(e[1],t[i]))}else Ext.onReady(function(){Ext.addBehaviors(t)})},getScrollBarWidth:function(t){return Ext.isReady?(!0!==t&&null!==s||(t=(i=(e=Ext.getBody().createChild('<div class="x-hide-offsets" style="width:100px;height:50px;overflow:hidden;"><div style="height:200px;"></div></div>')).child("div",!0)).offsetWidth,e.setStyle("overflow",Ext.isWebKit||Ext.isGecko?"auto":"scroll"),i=i.offsetWidth,e.remove(),s=t-i+2),s):0;var e,i},combine:function(){for(var t=arguments,e=t.length,i=[],s=0;s<e;s++){var n=t[s];Ext.isArray(n)?i=i.concat(n):void 0===n.length||n.substr?i.push(n):i=i.concat(Array.prototype.slice.call(n,0))}return i},copyTo:function(e,i,t){return"string"==typeof t&&(t=t.split(/[,;\s]/)),Ext.each(t,function(t){i.hasOwnProperty(t)&&(e[t]=i[t])},this),e},destroy:function(){Ext.each(arguments,function(t){t&&(Ext.isArray(t)?this.destroy.apply(this,t):"function"==typeof t.destroy?t.destroy():t.dom&&t.remove())},this)},destroyMembers:function(t,e,i,s){for(var n=1,r=arguments,o=r.length;n<o;n++)Ext.destroy(t[r[n]]),delete t[r[n]]},clean:function(t){var e=[];return Ext.each(t,function(t){t&&e.push(t)}),e},unique:function(t){var e=[],i={};return Ext.each(t,function(t){i[t]||e.push(t),i[t]=!0}),e},flatten:function(t){var i=[];return function e(t){return Ext.each(t,function(t){Ext.isArray(t)?e(t):i.push(t)}),i}(t)},min:function(t,e){var i=t[0];return e=e||function(t,e){return t<e?-1:1},Ext.each(t,function(t){i=-1==e(i,t)?i:t}),i},max:function(t,e){var i=t[0];return e=e||function(t,e){return e<t?1:-1},Ext.each(t,function(t){i=1==e(i,t)?i:t}),i},mean:function(t){return 0<t.length?Ext.sum(t)/t.length:void 0},sum:function(t){var e=0;return Ext.each(t,function(t){e+=t}),e},partition:function(t,s){var n=[[],[]];return Ext.each(t,function(t,e,i){n[s&&s(t,e,i)||!s&&t?0:1].push(t)}),n},invoke:function(t,i){var s=[],n=Array.prototype.slice.call(arguments,2);return Ext.each(t,function(t,e){t&&"function"==typeof t[i]?s.push(t[i].apply(t,n)):s.push(void 0)}),s},pluck:function(t,e){var i=[];return Ext.each(t,function(t){i.push(t[e])}),i},zip:function(){for(var t=Ext.partition(arguments,function(t){return"function"!=typeof t}),e=t[0],i=t[1][0],s=Ext.max(Ext.pluck(e,"length")),n=[],r=0;r<s;r++)if(n[r]=[],i)n[r]=i.apply(i,Ext.pluck(e,r));else for(var o=0,a=e.length;o<a;o++)n[r].push(e[o][r]);return n},getCmp:function(t){return Ext.ComponentMgr.get(t)},useShims:t.isIE6||t.isMac&&t.isGecko2,type:function(t){if(null==t)return!1;if(t.htmlElement)return"element";var e=typeof t;if("object"==e&&t.nodeName)switch(t.nodeType){case 1:return"element";case 3:return/\S/.test(t.nodeValue)?"textnode":"whitespace"}if("object"==e||"function"==e){switch(t.constructor){case Array:return"array";case RegExp:return"regexp";case Date:return"date"}if("number"==typeof t.length&&"function"==typeof t.item)return"nodelist"}return e},intercept:function(t,e,i,s){t[e]=t[e].createInterceptor(i,s)},callback:function(t,e,i,s){"function"==typeof t&&(s?t.defer(s,e,i||[]):t.apply(e,i||[]))}}}()),Ext.apply(Function.prototype,{createSequence:function(e,i){var s=this;return"function"!=typeof e?this:function(){var t=s.apply(this||window,arguments);return e.apply(i||this||window,arguments),t}}}),Ext.applyIf(String,{escape:function(t){return t.replace(/('|\\)/g,"\\$1")},leftPad:function(t,e,i){var s=String(t);for(i=i||" ";s.length<e;)s=i+s;return s}}),String.prototype.toggle=function(t,e){return this==t?e:t},String.prototype.trim=function(){var t=/^\s+|\s+$/g;return function(){return this.replace(t,"")}}(),Date.prototype.getElapsed=function(t){return Math.abs((t||new Date).getTime()-this.getTime())},Ext.applyIf(Number.prototype,{constrain:function(t,e){return Math.min(Math.max(this,t),e)}}),Ext.lib.Dom.getRegion=function(t){return Ext.lib.Region.getRegion(t)},Ext.lib.Region=function(t,e,i,s){var n=this;n.top=t,n[1]=t,n.right=e,n.bottom=i,n.left=s,n[0]=s},Ext.lib.Region.prototype={contains:function(t){return t.left>=this.left&&t.right<=this.right&&t.top>=this.top&&t.bottom<=this.bottom},getArea:function(){return(this.bottom-this.top)*(this.right-this.left)},intersect:function(t){var e=Math.max(this.top,t.top),i=Math.min(this.right,t.right),s=Math.min(this.bottom,t.bottom),t=Math.max(this.left,t.left);if(e<=s&&t<=i)return new Ext.lib.Region(e,i,s,t)},union:function(t){var e=Math.min(this.top,t.top),i=Math.max(this.right,t.right),s=Math.max(this.bottom,t.bottom),t=Math.min(this.left,t.left);return new Ext.lib.Region(e,i,s,t)},constrainTo:function(t){var e=this;return e.top=e.top.constrain(t.top,t.bottom),e.bottom=e.bottom.constrain(t.top,t.bottom),e.left=e.left.constrain(t.left,t.right),e.right=e.right.constrain(t.left,t.right),e},adjust:function(t,e,i,s){var n=this;return n.top+=t,n.left+=e,n.right+=s,n.bottom+=i,n}},Ext.lib.Region.getRegion=function(t){var e=Ext.lib.Dom.getXY(t),i=e[1],s=e[0]+t.offsetWidth,t=e[1]+t.offsetHeight,e=e[0];return new Ext.lib.Region(i,s,t,e)},Ext.lib.Point=function(t,e){Ext.isArray(t)&&(e=t[1],t=t[0]);var i=this;i.x=i.right=i.left=i[0]=t,i.y=i.top=i.bottom=i[1]=e},Ext.lib.Point.prototype=new Ext.lib.Region,Ext.apply(Ext.DomHelper,function(){var a,d=/tag|children|cn|html$/i;function s(t,e,i,s,n,r){var o;return t=Ext.getDom(t),a.useDom?(o=h(e,null),r?t.appendChild(o):("firstChild"==n?t:t.parentNode).insertBefore(o,t[n]||t)):o=Ext.DomHelper.insertHtml(s,t,Ext.DomHelper.createHtml(e)),i?Ext.get(o,!0):o}function h(t,e){var i,s,n=document;if(Ext.isArray(t))for(var r=n.createDocumentFragment(),o=0,a=t.length;o<a;o++)h(t[o],r);else if("string"==typeof t)r=n.createTextNode(t);else{for(var l in i=!!(r=n.createElement(t.tag||"div")).setAttribute,t)d.test(l)||(s=t[l],"cls"==l?r.className=s:i?r.setAttribute(l,s):r[l]=s);Ext.DomHelper.applyStyles(r,t.style),(n=t.children||t.cn)?h(n,r):t.html&&(r.innerHTML=t.html)}return e&&e.appendChild(r),r}return a={createTemplate:function(t){t=Ext.DomHelper.createHtml(t);return new Ext.Template(t)},useDom:!1,insertBefore:function(t,e,i){return s(t,e,i,"beforebegin")},insertAfter:function(t,e,i){return s(t,e,i,"afterend","nextSibling")},insertFirst:function(t,e,i){return s(t,e,i,"afterbegin","firstChild")},append:function(t,e,i){return s(t,e,i,"beforeend","",!0)},createDom:h}}()),Ext.apply(Ext.Template.prototype,{disableFormats:!1,re:/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,argsRe:/^\s*['"](.*)["']\s*$/,compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,applyTemplate:function(a){var l=this,d=!0!==l.disableFormats,h=Ext.util.Format,c=l;return l.compiled?l.compiled(a):l.html.replace(l.re,function(t,e,i,s){if(i&&d){if("this."==i.substr(0,5))return c.call(i.substr(5),a[e],a);if(s){for(var n=l.argsRe,r=0,o=(s=s.split(",")).length;r<o;r++)s[r]=s[r].replace(n,"$1");s=[a[e]].concat(s)}else s=[a[e]];return h[i].apply(h,s)}return void 0!==a[e]?a[e]:""})},compile:function(){var me=this,fm=Ext.util.Format,useF=!0!==me.disableFormats,sep=Ext.isGecko?"+":",",body;function fn(t,e,i,s){return i&&useF?(s=s?","+s:"","this."!=i.substr(0,5)?i="fm."+i+"(":(i='this.call("'+i.substr(5)+'", ',s=", values")):(s="",i="(values['"+e+"'] == undefined ? '' : "),"'"+sep+i+"values['"+e+"']"+s+")"+sep+"'"}return body=Ext.isGecko?"this.compiled = function(values){ return '"+me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn)+"';};":(body=["this.compiled = function(values){ return ['"],body.push(me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn)),body.push("'].join('');};"),body.join("")),eval(body),me},call:function(t,e,i){return this[t](e,i)}}),Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate,Ext.util.Functions={createInterceptor:function(e,i,s){return Ext.isFunction(i)?function(){var t=arguments;return i.target=this,i.method=e,!1!==i.apply(s||this||window,t)?e.apply(this||window,t):null}:e},createDelegate:function(i,s,n,r){return Ext.isFunction(i)?function(){var t,e=n||arguments;return!0===r?e=(e=Array.prototype.slice.call(arguments,0)).concat(n):Ext.isNumber(r)&&(e=Array.prototype.slice.call(arguments,0),t=[r,0].concat(n),Array.prototype.splice.apply(e,t)),i.apply(s||window,e)}:i},defer:function(t,e,i,s,n){return t=Ext.util.Functions.createDelegate(t,i,s,n),0<e?setTimeout(t,e):(t(),0)},createSequence:function(e,i,s){return Ext.isFunction(i)?function(){var t=e.apply(this||window,arguments);return i.apply(s||this||window,arguments),t}:e}},Ext.defer=Ext.util.Functions.defer,Ext.createInterceptor=Ext.util.Functions.createInterceptor,Ext.createSequence=Ext.util.Functions.createSequence,Ext.createDelegate=Ext.util.Functions.createDelegate,Ext.apply(Ext.util.Observable.prototype,function(){function s(t){var n,r,o,a,l=(this.methodEvents=this.methodEvents||{})[t],d=this;return l||(this.methodEvents[t]=l={},l.originalFn=this[t],l.methodName=t,l.before=[],l.after=[],a=function(t,e,i){void 0!==(r=t.apply(e||d,i))&&("object"==typeof r?(n=void 0!==r.returnValue?r.returnValue:r,o=!!r.cancel):!1===r?o=!0:n=r)},this[t]=function(){var t,e=Array.prototype.slice.call(arguments,0);n=r=void 0,o=!1;for(var i=0,s=l.before.length;i<s;i++)if(t=l.before[i],a(t.fn,t.scope,e),o)return n;void 0!==(r=l.originalFn.apply(d,e))&&(n=r);for(i=0,s=l.after.length;i<s;i++)if(t=l.after[i],a(t.fn,t.scope,e),o)return n;return n}),l}return{beforeMethod:function(t,e,i){s.call(this,t).before.push({fn:e,scope:i})},afterMethod:function(t,e,i){s.call(this,t).after.push({fn:e,scope:i})},removeMethodListener:function(t,e,i){for(var s=this.getMethodEvent(t),n=0,r=s.before.length;n<r;n++)if(s.before[n].fn==e&&s.before[n].scope==i)return void s.before.splice(n,1);for(n=0,r=s.after.length;n<r;n++)if(s.after[n].fn==e&&s.after[n].scope==i)return void s.after.splice(n,1)},relayEvents:function(t,e){var i=this;for(var s=0,n=e.length;s<n;s++){var r=e[s];i.events[r]=i.events[r]||!0,t.on(r,function(t){return function(){return i.fireEvent.apply(i,[t].concat(Array.prototype.slice.call(arguments,0)))}}(r),i)}},enableBubble:function(t){if(!Ext.isEmpty(t))for(var e=0,i=(t=Ext.isArray(t)?t:Array.prototype.slice.call(arguments,0)).length;e<i;e++){var s=(s=t[e]).toLowerCase(),n=this.events[s]||!0;"boolean"==typeof n&&(n=new Ext.util.Event(this,s),this.events[s]=n),n.bubble=!0}}}}()),Ext.util.Observable.capture=function(t,e,i){t.fireEvent=t.fireEvent.createInterceptor(e,i)},Ext.util.Observable.observeClass=function(t,e){if(t)return t.fireEvent||(Ext.apply(t,new Ext.util.Observable),Ext.util.Observable.capture(t.prototype,t.fireEvent,t)),"object"==typeof e&&t.on(e),t},Ext.apply(Ext.EventManager,function(){var s,n,r,o,i=Ext.lib.Dom,t=Ext.EventManager._unload,a=0,l=0,e=Ext.isWebKit?525<=Ext.num(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1]):!(Ext.isGecko&&!Ext.isWindows||Ext.isOpera);return{_unload:function(){Ext.EventManager.un(window,"resize",this.fireWindowResize,this),t.call(Ext.EventManager)},doResizeEvent:function(){var t=i.getViewHeight(),e=i.getViewWidth();l==t&&a==e||s.fire(a=e,l=t)},onWindowResize:function(t,e,i){s||(s=new Ext.util.Event,n=new Ext.util.DelayedTask(this.doResizeEvent),Ext.EventManager.on(window,"resize",this.fireWindowResize,this)),s.addListener(t,e,i)},fireWindowResize:function(){s&&n.delay(100)},onTextResize:function(t,e,i){var s;r||(r=new Ext.util.Event,(s=new Ext.Element(document.createElement("div"))).dom.className="x-text-resize",s.dom.innerHTML="X",s.appendTo(document.body),o=s.dom.offsetHeight,setInterval(function(){s.dom.offsetHeight!=o&&r.fire(o,o=s.dom.offsetHeight)},this.textResizeInterval)),r.addListener(t,e,i)},removeResizeListener:function(t,e){s&&s.removeListener(t,e)},fireResize:function(){s&&s.fire(i.getViewWidth(),i.getViewHeight())},textResizeInterval:50,ieDeferSrc:!1,getKeyEvent:function(){return e?"keydown":"keypress"},useKeydown:e}}()),Ext.EventManager.on=Ext.EventManager.addListener,Ext.apply(Ext.EventObjectImpl.prototype,{BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGEUP:33,PAGE_DOWN:34,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,isNavKeyPress:function(){var t=this.normalizeKey(this.keyCode);return 33<=t&&t<=40||t==this.RETURN||t==this.TAB||t==this.ESC},isSpecialKey:function(){var t=this.normalizeKey(this.keyCode);return"keypress"==this.type&&this.ctrlKey||this.isNavKeyPress()||t==this.BACKSPACE||16<=t&&t<=20||44<=t&&t<=46},getPoint:function(){return new Ext.lib.Point(this.xy[0],this.xy[1])},hasModifier:function(){return this.ctrlKey||this.altKey||this.shiftKey}}),Ext.Element.addMethods({swallowEvent:function(t,e){var i=this;function s(t){t.stopPropagation(),e&&t.preventDefault()}return Ext.isArray(t)?Ext.each(t,function(t){i.on(t,s)}):i.on(t,s),i},relayEvent:function(e,i){this.on(e,function(t){i.fireEvent(e,t)})},clean:function(t){var e=this.dom,i=e.firstChild,s=-1;if(Ext.Element.data(e,"isCleaned")&&!0!==t)return this;for(;i;){var n=i.nextSibling;3!=i.nodeType||/\S/.test(i.nodeValue)?i.nodeIndex=++s:e.removeChild(i),i=n}return Ext.Element.data(e,"isCleaned",!0),this},load:function(){var t=this.getUpdater();return t.update.apply(t,arguments),this},getUpdater:function(){return this.updateManager||(this.updateManager=new Ext.Updater(this))},update:function(h,t,c){if(!this.dom)return this;if(h=h||"",!0!==t)return this.dom.innerHTML=h,"function"==typeof c&&c(),this;var u=Ext.id(),t=this.dom;return h+='<span id="'+u+'"></span>',Ext.lib.Event.onAvailable(u,function(){for(var t,e,i,s,n,r=document,o=r.getElementsByTagName("head")[0],a=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/gi,l=/\ssrc=([\'\"])(.*?)\1/i,d=/\stype=([\'\"])(.*?)\1/i;t=a.exec(h);)(e=!!(i=t[1])&&i.match(l))&&e[2]?((n=r.createElement("script")).src=e[2],(i=i.match(d))&&i[2]&&(n.type=i[2]),o.appendChild(n)):t[2]&&0<t[2].length&&(window.execScript?window.execScript(t[2]):window.eval(t[2]));(s=r.getElementById(u))&&Ext.removeNode(s),"function"==typeof c&&c()}),t.innerHTML=h.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,""),this},removeAllListeners:function(){return this.removeAnchor(),Ext.EventManager.removeAll(this.dom),this},createProxy:function(t,e,i){t="object"==typeof t?t:{tag:"div",cls:t};t=e?Ext.DomHelper.append(e,t,!0):Ext.DomHelper.insertBefore(this.dom,t,!0);return i&&this.setBox&&this.getBox&&t.setBox(this.getBox()),t}}),Ext.Element.prototype.getUpdateManager=Ext.Element.prototype.getUpdater,Ext.Element.addMethods({getAnchorXY:function(t,e,i){t=(t||"tl").toLowerCase(),i=i||{};var s=this,n=s.dom==document.body||s.dom==document,r=i.width||n?Ext.lib.Dom.getViewWidth():s.getWidth(),o=i.height||n?Ext.lib.Dom.getViewHeight():s.getHeight(),a=Math.round,l=s.getXY(),i=s.getScroll(),s=n?i.left:e?0:l[0],l=n?i.top:e?0:l[1],t={c:[a(.5*r),a(.5*o)],t:[a(.5*r),0],l:[0,a(.5*o)],r:[r,a(.5*o)],b:[a(.5*r),o],tl:[0,0],bl:[0,o],br:[r,o],tr:[r,0]}[t];return[t[0]+s,t[1]+l]},anchorTo:function(t,e,i,s,n,r){function o(){Ext.fly(a).alignTo(t,e,i,s),Ext.callback(r,Ext.fly(a))}var a=this.dom,l=!Ext.isEmpty(n),d=this.getAnchor();return this.removeAnchor(),Ext.apply(d,{fn:o,scroll:l}),Ext.EventManager.onWindowResize(o,null),l&&Ext.EventManager.on(window,"scroll",o,null,{buffer:isNaN(n)?50:n}),o.call(this),this},removeAnchor:function(){var t=this.getAnchor();return t&&t.fn&&(Ext.EventManager.removeResizeListener(t.fn),t.scroll&&Ext.EventManager.un(window,"scroll",t.fn),delete t.fn),this},getAnchor:function(){var t=Ext.Element.data,e=this.dom;if(e)return t(e,"_anchor")||t(e,"_anchor",{})},getAlignToXY:function(t,e,i){if(!(t=Ext.get(t))||!t.dom)throw"Element.alignToXY with an element that doesn't exist";i=i||[0,0],e=(e&&"?"!=e?/-/.test(e)||""===e?e||"tl-bl":"tl-"+e:"tl-bl?").toLowerCase();this.dom;var s=Ext.lib.Dom.getViewWidth()-10,n=Ext.lib.Dom.getViewHeight()-10,r=document,o=r.documentElement,a=r.body,l=(o.scrollLeft||a.scrollLeft||0)+5,d=(o.scrollTop||a.scrollTop||0)+5,h="",c="",u=e.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!u)throw"Element.alignTo with an invalid alignment "+e;return h=u[1],c=u[2],r=!!u[3],o=this.getAnchorXY(h,!0),e=(a=t.getAnchorXY(c,!1))[0]-o[0]+i[0],u=a[1]-o[1]+i[1],r&&(a=this.getWidth(),o=this.getHeight(),i=t.getRegion(),r=h.charAt(0),t=h.charAt(h.length-1),h=c.charAt(0),c=c.charAt(c.length-1),h="t"==r&&"b"==h||"b"==r&&"t"==h,c="r"==t&&"l"==c||"l"==t&&"r"==c,(e=s+l<e+a?c?i.left-a:s+l-a:e)<l&&(e=c?i.right:l),(u=n+d<u+o?h?i.top-o:n+d-o:u)<d&&(u=h?i.bottom:d)),[e,u]},alignTo:function(t,e,i,s){return this.setXY(this.getAlignToXY(t,e,i),!(!this.preanim||!s)&&this.preanim(arguments,3))},adjustForConstraints:function(t,e,i){return this.getConstrainToXY(e||document,!1,i,t)||t},getConstrainToXY:function(){var d={top:0,left:0,bottom:0,right:0};return function(t,e,i,s){t=Ext.get(t),i=i?Ext.applyIf(i,d):d;var n=0,r=0;t.dom==document.body||t.dom==document?(a=Ext.lib.Dom.getViewWidth(),l=Ext.lib.Dom.getViewHeight()):(a=t.dom.clientWidth,l=t.dom.clientHeight,e||(n=(o=t.getXY())[0],r=o[1]));var o=t.getScroll();n+=i.left+o.left,r+=i.top+o.top;var t=n+(a-=i.right),o=r+(l-=i.bottom),a=s||(e?[this.getLeft(!0),this.getTop(!0)]:this.getXY()),i=a[0],l=a[1],s=this.getConstrainOffset(),e=this.dom.offsetWidth+s,a=this.dom.offsetHeight+s,s=!1;return t<i+e&&(i=t-e,s=!0),o<l+a&&(l=o-a,s=!0),i<n&&(i=n,s=!0),l<r&&(l=r,s=!0),!!s&&[i,l]}}(),getConstrainOffset:function(){return 0},getCenterXY:function(){return this.getAlignToXY(document,"c-c")},center:function(t){return this.alignTo(t||document,"c-c")}}),Ext.Element.addMethods({select:function(t,e){return Ext.Element.select(t,e,this.dom)}}),Ext.apply(Ext.Element.prototype,function(){var a=Ext.getDom,l=Ext.get,d=Ext.DomHelper;return{insertSibling:function(t,e,i){var s,n,r=this,o="after"==(e||"before").toLowerCase();return Ext.isArray(t)?(n=r,Ext.each(t,function(t){s=Ext.fly(n,"_internal").insertSibling(t,e,i),o&&(n=s)})):(t=t||{}).nodeType||t.dom?(s=r.dom.parentNode.insertBefore(a(t),o?r.dom.nextSibling:r.dom),i||(s=l(s))):s=o&&!r.dom.nextSibling?d.append(r.dom.parentNode,t,!i):d[o?"insertAfter":"insertBefore"](r.dom,t,!i),s}}}()),Ext.Element.boxMarkup='<div class="{0}-tl"><div class="{0}-tr"><div class="{0}-tc"></div></div></div><div class="{0}-ml"><div class="{0}-mr"><div class="{0}-mc"></div></div></div><div class="{0}-bl"><div class="{0}-br"><div class="{0}-bc"></div></div></div>',Ext.Element.addMethods(function(){var n="_internal";return{applyStyles:function(t){return Ext.DomHelper.applyStyles(this.dom,t),this},getStyles:function(){var e={};return Ext.each(arguments,function(t){e[t]=this.getStyle(t)},this),e},setOverflow:function(t){var e=this.dom;"auto"==t&&Ext.isMac&&Ext.isGecko2?(e.style.overflow="hidden",function(){e.style.overflow="auto"}.defer(1)):e.style.overflow=t},boxWrap:function(t){t=t||"x-box";var e=Ext.get(this.insertHtml("beforeBegin","<div class='"+t+"'>"+String.format(Ext.Element.boxMarkup,t)+"</div>"));return Ext.DomQuery.selectNode("."+t+"-mc",e.dom).appendChild(this.dom),e},setSize:function(t,e,i){var s=this;return"object"==typeof t&&(e=t.height,t=t.width),t=s.adjustWidth(t),e=s.adjustHeight(e),i&&s.anim?s.anim({width:{to:t},height:{to:e}},s.preanim(arguments,2)):(s.dom.style.width=s.addUnits(t),s.dom.style.height=s.addUnits(e)),s},getComputedHeight:function(){var t=this,e=Math.max(t.dom.offsetHeight,t.dom.clientHeight);return e||(e=parseFloat(t.getStyle("height"))||0,t.isBorderBox()||(e+=t.getFrameWidth("tb"))),e},getComputedWidth:function(){var t=Math.max(this.dom.offsetWidth,this.dom.clientWidth);return t||(t=parseFloat(this.getStyle("width"))||0,this.isBorderBox()||(t+=this.getFrameWidth("lr"))),t},getFrameWidth:function(t,e){return e&&this.isBorderBox()?0:this.getPadding(t)+this.getBorderWidth(t)},addClassOnOver:function(t){return this.hover(function(){Ext.fly(this,n).addClass(t)},function(){Ext.fly(this,n).removeClass(t)}),this},addClassOnFocus:function(t){return this.on("focus",function(){Ext.fly(this,n).addClass(t)},this.dom),this.on("blur",function(){Ext.fly(this,n).removeClass(t)},this.dom),this},addClassOnClick:function(i){var s=this.dom;return this.on("mousedown",function(){Ext.fly(s,n).addClass(i);function t(){Ext.fly(s,n).removeClass(i),e.removeListener("mouseup",t)}var e=Ext.getDoc();e.on("mouseup",t)}),this},getViewSize:function(){var t=document,e=this.dom;if(e!=t&&e!=t.body)return{width:e.clientWidth,height:e.clientHeight};e=Ext.lib.Dom;return{width:e.getViewWidth(),height:e.getViewHeight()}},getStyleSize:function(){var t,e,i=this,s=document,n=this.dom,s=n==s||n==s.body,n=n.style;if(s){s=Ext.lib.Dom;return{width:s.getViewWidth(),height:s.getViewHeight()}}return n.width&&"auto"!=n.width&&(t=parseFloat(n.width),i.isBorderBox()&&(t-=i.getFrameWidth("lr"))),n.height&&"auto"!=n.height&&(e=parseFloat(n.height),i.isBorderBox()&&(e-=i.getFrameWidth("tb"))),{width:t||i.getWidth(!0),height:e||i.getHeight(!0)}},getSize:function(t){return{width:this.getWidth(t),height:this.getHeight(t)}},repaint:function(){var t=this.dom;return this.addClass("x-repaint"),setTimeout(function(){Ext.fly(t).removeClass("x-repaint")},1),this},unselectable:function(){return this.dom.unselectable="on",this.swallowEvent("selectstart",!0).addClass("x-unselectable")},getMargins:function(t){var e,i=this,s={t:"top",l:"left",r:"right",b:"bottom"},n={};if(t)return i.addStyles.call(i,t,i.margins);for(e in i.margins)n[s[e]]=parseFloat(i.getStyle(i.margins[e]))||0;return n}}}()),Ext.Element.addMethods({setBox:function(t,e,i){var s=this,n=t.width,r=t.height;return!e||s.autoBoxAdjust||s.isBorderBox()||(n-=s.getBorderWidth("lr")+s.getPadding("lr"),r-=s.getBorderWidth("tb")+s.getPadding("tb")),s.setBounds(t.x,t.y,n,r,s.animTest.call(s,arguments,i,2)),s},getBox:function(t,e){var i=this,s=i.getBorderWidth,n=i.getPadding,r=e?[parseInt(i.getStyle("left"),10)||0,parseInt(i.getStyle("top"),10)||0]:i.getXY(),o=i.dom,a=o.offsetWidth,l=o.offsetHeight,l=t?(e=s.call(i,"l")+n.call(i,"l"),o=s.call(i,"r")+n.call(i,"r"),t=s.call(i,"t")+n.call(i,"t"),i=s.call(i,"b")+n.call(i,"b"),{x:r[0]+e,y:r[1]+t,0:r[0]+e,1:r[1]+t,width:a-(e+o),height:l-(t+i)}):{x:r[0],y:r[1],0:r[0],1:r[1],width:a,height:l};return l.right=l.x+l.width,l.bottom=l.y+l.height,l},move:function(t,e,i){var s=this.getXY(),n=s[0],r=s[1],o=[n-e,r],a=[n+e,r],s=[n,r-e],r=[n,r+e],r={l:o,left:o,r:a,right:a,t:s,top:s,up:s,b:r,bottom:r,down:r};t=t.toLowerCase(),this.moveTo(r[t][0],r[t][1],this.animTest.call(this,arguments,i,2))},setLeftTop:function(t,e){var i=this.dom.style;return i.left=this.addUnits(t),i.top=this.addUnits(e),this},getRegion:function(){return Ext.lib.Dom.getRegion(this.dom)},setBounds:function(t,e,i,s,n){var r=this;return n&&r.anim?r.anim({points:{to:[t,e]},width:{to:r.adjustWidth(i)},height:{to:r.adjustHeight(s)}},r.preanim(arguments,4),"motion"):(r.setSize(i,s),r.setLocation(t,e)),r},setRegion:function(t,e){return this.setBounds(t.left,t.top,t.right-t.left,t.bottom-t.top,this.animTest.call(this,arguments,e,1))}}),Ext.Element.addMethods({scrollTo:function(t,e,i){var s,n=/top/i.test(t),r=this,o=r.dom;return i&&r.anim?(s="scroll"+(n?"Left":"Top"),r.anim({scroll:{to:n?[o[s],e]:[e,o[s]]}},r.preanim(arguments,2),"scroll")):o[s="scroll"+(n?"Top":"Left")]=e,r},scrollIntoView:function(t,e){var i=Ext.getDom(t)||Ext.getBody().dom,s=this.dom,n=this.getOffsetsTo(i),r=n[0]+i.scrollLeft,o=n[1]+i.scrollTop,a=o+s.offsetHeight,l=r+s.offsetWidth,d=i.clientHeight,h=parseInt(i.scrollTop,10),c=parseInt(i.scrollLeft,10),t=h+d,n=c+i.clientWidth;return s.offsetHeight>d||o<h?i.scrollTop=o:t<a&&(i.scrollTop=a-d),i.scrollTop=i.scrollTop,!1!==e&&(s.offsetWidth>i.clientWidth||r<c?i.scrollLeft=r:n<l&&(i.scrollLeft=l-i.clientWidth),i.scrollLeft=i.scrollLeft),this},scrollChildIntoView:function(t,e){Ext.fly(t,"_scrollChildIntoView").scrollIntoView(this,e)},scroll:function(t,e,i){if(!this.isScrollable())return!1;var s=this.dom,n=s.scrollLeft,r=s.scrollTop,o=s.scrollWidth,a=s.scrollHeight,l=s.clientWidth,d=s.clientHeight,s=!1,d={l:Math.min(n+e,o-l),r:Math.max(n-e,0),t:Math.max(r-e,0),b:Math.min(r+e,a-d)};return d.d=d.b,d.u=d.t,-1<(d=d[t=t.substr(0,1)])&&(s=!0,this.scrollTo("l"==t||"r"==t?"left":"top",d,this.preanim(arguments,2))),s}}),Ext.Element.addMethods(function(){var s="display",a="x-masked",l="x-masked-relative",d=Ext.Element.data;return{isVisible:function(t){var e=!this.isStyle("visibility","hidden")&&!this.isStyle(s,"none"),i=this.dom.parentNode;if(!0!==t||!e)return e;for(;i&&!/^body/i.test(i.tagName);){if(!Ext.fly(i,"_isVisible").isVisible())return!1;i=i.parentNode}return!0},isDisplayed:function(){return!this.isStyle(s,"none")},enableDisplayMode:function(t){return this.setVisibilityMode(Ext.Element.DISPLAY),Ext.isEmpty(t)||d(this.dom,"originalDisplay",t),this},mask:function(t,e){var i,s=this,n=s.dom,r=Ext.DomHelper,o="ext-el-mask-msg";return/^body/i.test(n.tagName)||"static"!=s.getStyle("position")||s.addClass(l),(i=d(n,"maskMsg"))&&i.remove(),(i=d(n,"mask"))&&i.remove(),i=r.append(n,{cls:"ext-el-mask"},!0),d(n,"mask",i),s.addClass(a),i.setDisplayed(!0),"string"==typeof t&&(r=r.append(n,{cls:o,cn:{tag:"div"}},!0),d(n,"maskMsg",r),r.dom.className=e?o+" "+e:o,r.dom.firstChild.innerHTML=t,r.setDisplayed(!0),r.center(s)),!Ext.isIE||Ext.isIE7&&Ext.isStrict||"auto"!=s.getStyle("height")||i.setSize(void 0,s.getHeight()),i},unmask:function(){var t=this.dom,e=d(t,"mask"),i=d(t,"maskMsg");e&&(i&&(i.remove(),d(t,"maskMsg",void 0)),e.remove(),d(t,"mask",void 0),this.removeClass([a,l]))},isMasked:function(){var t=d(this.dom,"mask");return t&&t.isVisible()},createShim:function(){var t=document.createElement("iframe");return t.frameBorder="0",t.className="ext-shim",t.src=Ext.SSL_SECURE_URL,(t=Ext.get(this.dom.parentNode.insertBefore(t,this.dom))).autoBoxAdjust=!1,t}}}()),Ext.Element.addMethods({addKeyListener:function(t,e,i){i="object"!=typeof t||Ext.isArray(t)?{key:t,fn:e,scope:i}:{key:t.key,shift:t.shift,ctrl:t.ctrl,alt:t.alt,fn:e,scope:i};return new Ext.KeyMap(this,i)},addKeyMap:function(t){return new Ext.KeyMap(this,t)}}),Ext.CompositeElementLite.importElementMethods(),Ext.apply(Ext.CompositeElementLite.prototype,{addElements:function(t,e){if(!t)return this;"string"==typeof t&&(t=Ext.Element.selectorFunction(t,e));var i=this.elements;return Ext.each(t,function(t){i.push(Ext.get(t))}),this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(t){return-1!=this.indexOf(t)},removeElement:function(t,e){var i,s=this,n=this.elements;return Ext.each(t,function(t){(i=n[t]||n[t=s.indexOf(t)])&&(e&&(i.dom?i.remove():Ext.removeNode(i)),n.splice(t,1))}),this}}),Ext.CompositeElement=Ext.extend(Ext.CompositeElementLite,{constructor:function(t,e){this.elements=[],this.add(t,e)},getElement:function(t){return t},transformElement:function(t){return Ext.get(t)}}),Ext.Element.select=function(t,e,i){var s;if("string"==typeof t)s=Ext.Element.selectorFunction(t,i);else{if(void 0===t.length)throw"Invalid selector";s=t}return new(!0===e?Ext.CompositeElement:Ext.CompositeElementLite)(s)},Ext.select=Ext.Element.select,Ext.UpdateManager=Ext.Updater=Ext.extend(Ext.util.Observable,function(){var a="beforeupdate",s="update",n="failure";function l(t){var e=this;if(e.transaction=null,t.argument.form&&t.argument.reset)try{t.argument.form.reset()}catch(t){}e.loadScripts?e.renderer.render(e.el,t,e,i.createDelegate(e,[t])):(e.renderer.render(e.el,t,e),i.call(e,t))}function i(t,e,i){this.fireEvent(e||s,this.el,t),Ext.isFunction(t.argument.callback)&&t.argument.callback.call(t.argument.scope,this.el,!!Ext.isEmpty(i),t,t.argument.options)}function d(t){i.call(this,t,n,!!(this.transaction=null))}return{constructor:function(t,e){var i=this;if(t=Ext.get(t),!e&&t.updateManager)return t.updateManager;i.el=t,i.defaultUrl=null,i.addEvents(a,s,n),Ext.apply(i,Ext.Updater.defaults),i.transaction=null,i.refreshDelegate=i.refresh.createDelegate(i),i.updateDelegate=i.update.createDelegate(i),i.formUpdateDelegate=(i.formUpdate||function(){}).createDelegate(i),i.renderer=i.renderer||i.getDefaultRenderer(),Ext.Updater.superclass.constructor.call(i)},setRenderer:function(t){this.renderer=t},getRenderer:function(){return this.renderer},getDefaultRenderer:function(){return new Ext.Updater.BasicRenderer},setDefaultUrl:function(t){this.defaultUrl=t},getEl:function(){return this.el},update:function(t,e,i,s){var n,r,o=this;!1!==o.fireEvent(a,o.el,t,e)&&(Ext.isObject(t)&&(t=(r=t).url,e=e||r.params,i=i||r.callback,s=s||r.discardUrl,n=r.scope,Ext.isEmpty(r.nocache)||(o.disableCaching=r.nocache),Ext.isEmpty(r.text)||(o.indicatorText='<div class="loading-indicator">'+r.text+"</div>"),Ext.isEmpty(r.scripts)||(o.loadScripts=r.scripts),Ext.isEmpty(r.timeout)||(o.timeout=r.timeout)),o.showLoading(),s||(o.defaultUrl=t),Ext.isFunction(t)&&(t=t.call(o)),r=Ext.apply({},{url:t,params:Ext.isFunction(e)&&n?e.createDelegate(n):e,success:l,failure:d,scope:o,callback:void 0,timeout:1e3*o.timeout,disableCaching:o.disableCaching,argument:{options:r,url:t,form:null,callback:i,scope:n||window,params:e}},r),o.transaction=Ext.Ajax.request(r))},formUpdate:function(t,e,i,s){var n=this;!1!==n.fireEvent(a,n.el,t,e)&&(Ext.isFunction(e)&&(e=e.call(n)),t=Ext.getDom(t),n.transaction=Ext.Ajax.request({form:t,url:e,success:l,failure:d,scope:n,timeout:1e3*n.timeout,argument:{url:e,form:t,callback:s,reset:i}}),n.showLoading.defer(1,n))},startAutoRefresh:function(t,e,i,s,n){var r=this;n&&r.update(e||r.defaultUrl,i,s,!0),r.autoRefreshProcId&&clearInterval(r.autoRefreshProcId),r.autoRefreshProcId=setInterval(r.update.createDelegate(r,[e||r.defaultUrl,i,s,!0]),1e3*t)},stopAutoRefresh:function(){this.autoRefreshProcId&&(clearInterval(this.autoRefreshProcId),delete this.autoRefreshProcId)},isAutoRefreshing:function(){return!!this.autoRefreshProcId},showLoading:function(){this.showLoadIndicator&&(this.el.dom.innerHTML=this.indicatorText)},abort:function(){this.transaction&&Ext.Ajax.abort(this.transaction)},isUpdating:function(){return!!this.transaction&&Ext.Ajax.isLoading(this.transaction)},refresh:function(t){this.defaultUrl&&this.update(this.defaultUrl,null,t,!0)}}}()),Ext.Updater.defaults={timeout:30,disableCaching:!1,showLoadIndicator:!0,indicatorText:'<div class="loading-indicator">Loading...</div>',loadScripts:!1,sslBlankUrl:Ext.SSL_SECURE_URL},Ext.Updater.updateElement=function(t,e,i,s){t=Ext.get(t).getUpdater();Ext.apply(t,s),t.update(e,i,s?s.callback:null)},Ext.Updater.BasicRenderer=function(){},Ext.Updater.BasicRenderer.prototype={render:function(t,e,i,s){t.update(e.responseText,i.loadScripts,s)}},function(){function d(t){var i=Array.prototype.slice.call(arguments,1);return t.replace(/\{(\d+)\}/g,function(t,e){return i[e]})}Date.useStrict=!1,Date.formatCodeToRegex=function(t,e){var i=Date.parseCodes[t];return i&&(i="function"==typeof i?i():i,Date.parseCodes[t]=i),i?Ext.applyIf({c:i.c&&d(i.c,e||"{0}")},i):{g:0,c:null,s:Ext.escapeRe(t)}};var h,e,i,c=Date.formatCodeToRegex;Ext.apply(Date,{parseFunctions:{M$:function(t,e){var i=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),i=(t||"").match(i);return i?new Date(+((i[1]||"")+i[2])):null}},parseRegexes:[],formatFunctions:{M$:function(){return"\\/Date("+this.getTime()+")\\/"}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},getShortMonthName:function(t){return Date.monthNames[t].substring(0,3)},getShortDayName:function(t){return Date.dayNames[t].substring(0,3)},getMonthNumber:function(t){return Date.monthNumbers[t.substring(0,1).toUpperCase()+t.substring(1,3).toLowerCase()]},formatContainsHourInfo:(e=/(\\.)/g,i=/([gGhHisucUOPZ]|M\$)/,function(t){return i.test(t.replace(e,""))}),formatCodes:{d:"String.leftPad(this.getDate(), 2, '0')",D:"Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"this.getSuffix()",w:"this.getDay()",z:"this.getDayOfYear()",W:"String.leftPad(this.getWeekOfYear(), 2, '0')",F:"Date.monthNames[this.getMonth()]",m:"String.leftPad(this.getMonth() + 1, 2, '0')",M:"Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"this.getDaysInMonth()",L:"(this.isLeapYear() ? 1 : 0)",o:"(this.getFullYear() + (this.getWeekOfYear() == 1 && this.getMonth() > 0 ? +1 : (this.getWeekOfYear() >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"String.leftPad(this.getHours(), 2, '0')",i:"String.leftPad(this.getMinutes(), 2, '0')",s:"String.leftPad(this.getSeconds(), 2, '0')",u:"String.leftPad(this.getMilliseconds(), 3, '0')",O:"this.getGMTOffset()",P:"this.getGMTOffset(true)",T:"this.getTimezone()",Z:"(this.getTimezoneOffset() * -60)",c:function(){for(var t="Y-m-dTH:i:sP",e=[],i=0,s=t.length;i<s;++i){var n=t.charAt(i);e.push("T"==n?"'T'":Date.getFormatCode(n))}return e.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(t,e,i,s,n,r,o){s=s||0,n=n||0,r=r||0,o=o||0;var a=new Date(t<100?100:t,e-1,i,s,n,r,o).add(Date.YEAR,t<100?t-100:0);return t==a.getFullYear()&&e==a.getMonth()+1&&i==a.getDate()&&s==a.getHours()&&n==a.getMinutes()&&r==a.getSeconds()&&o==a.getMilliseconds()},parseDate:function(t,e,i){var s=Date.parseFunctions;return null==s[e]&&Date.createParser(e),s[e](t,Ext.isDefined(i)?i:Date.useStrict)},getFormatCode:function(t){var e=Date.formatCodes[t];return e&&(e="function"==typeof e?e():e,Date.formatCodes[t]=e),e||"'"+String.escape(t)+"'"},createFormat:function(t){for(var e,i=[],s=!1,n=0;n<t.length;++n)e=t.charAt(n),s||"\\"!=e?s?(s=!1,i.push("'"+String.escape(e)+"'")):i.push(Date.getFormatCode(e)):s=!0;Date.formatFunctions[t]=new Function("return "+i.join("+"))},createParser:(h=["var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,","def = Date.defaults,","results = String(input).match(Date.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = (new Date()).clearTime();","y = Ext.num(y, Ext.num(def.y, dt.getFullYear()));","m = Ext.num(m, Ext.num(def.m - 1, dt.getMonth()));","d = Ext.num(d, Ext.num(def.d, dt.getDate()));","h  = Ext.num(h, Ext.num(def.h, dt.getHours()));","i  = Ext.num(i, Ext.num(def.i, dt.getMinutes()));","s  = Ext.num(s, Ext.num(def.s, dt.getSeconds()));","ms = Ext.num(ms, Ext.num(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (v.isLeapYear() && z <= 365))? v.add(Date.DAY, z) : null);","}else if(strict === true && !Date.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","v = new Date(y < 100 ? 100 : y, m, d, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);","}","}","}","if(v){","if(zz != null){","v = v.add(Date.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = v.add(Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n"),function(t){for(var e,i,s=Date.parseRegexes.length,n=1,r=[],o=[],a=!1,l=0;l<t.length;++l)e=t.charAt(l),a||"\\"!=e?a?(a=!1,o.push(String.escape(e))):(n+=(e=c(e,n)).g,o.push(e.s),e.g&&e.c&&(e.calcLast?i=e.c:r.push(e.c))):a=!0;i&&r.push(i),Date.parseRegexes[s]=new RegExp("^"+o.join("")+"$","i"),Date.parseFunctions[t]=new Function("input","strict",d(h,s,r.join("")))}),parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},D:function(){for(var t=[],e=0;e<7;t.push(Date.getShortDayName(e)),++e);return{g:0,c:null,s:"(?:"+t.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:0,c:null,s:"(?:\\d{2})"},F:function(){return{g:1,c:"m = parseInt(Date.getMonthNumber(results[{0}]), 10);\n",s:"("+Date.monthNames.join("|")+")"}},M:function(){for(var t=[],e=0;e<12;t.push(Date.getShortMonthName(e)),++e);return Ext.applyIf({s:"("+t.join("|")+")"},c("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{2})"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{1,2})"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:function(){return c("Y")},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:function(){return c("A")},A:{calcLast:!0,g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)"},g:function(){return c("G")},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},h:function(){return c("H")},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,4}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){for(var t=[],e=[c("Y",1),c("m",2),c("d",3),c("h",4),c("i",5),c("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",c("P",8).c,"}else{",c("O",8).c,"}","}"].join("\n")}],i=0,s=e.length;i<s;++i)t.push(e[i].c);return{g:1,c:t.join(""),s:[e[0].s,"(?:","-",e[1].s,"(?:","-",e[2].s,"(?:","(?:T| )?",e[3].s,":",e[4].s,"(?::",e[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}}})}(),Ext.apply(Date.prototype,{dateFormat:function(t){return null==Date.formatFunctions[t]&&Date.createFormat(t),Date.formatFunctions[t].call(this)},getTimezone:function(){return this.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(t){return(0<this.getTimezoneOffset()?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+(t?":":"")+String.leftPad(Math.abs(this.getTimezoneOffset()%60),2,"0")},getDayOfYear:function(){var t=0,e=this.clone(),i=this.getMonth(),s=0;for(e.setDate(1),e.setMonth(0);s<i;e.setMonth(++s))t+=e.getDaysInMonth();return t+this.getDate()-1},getWeekOfYear:function(){var t=Date.UTC(this.getFullYear(),this.getMonth(),this.getDate()+3)/864e5,e=Math.floor(t/7),t=new Date(6048e5*e).getUTCFullYear();return e-Math.floor(Date.UTC(t,0,7)/6048e5)+1},isLeapYear:function(){var t=this.getFullYear();return!(0!=(3&t)||!(t%100||t%400==0&&t))},getFirstDayOfMonth:function(){var t=(this.getDay()-(this.getDate()-1))%7;return t<0?7+t:t},getLastDayOfMonth:function(){return this.getLastDateOfMonth().getDay()},getFirstDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),1)},getLastDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),this.getDaysInMonth())},getDaysInMonth:function(){var e=[31,28,31,30,31,30,31,31,30,31,30,31];return function(){var t=this.getMonth();return 1==t&&this.isLeapYear()?29:e[t]}}(),getSuffix:function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(){return new Date(this.getTime())},isDST:function(){return new Date(this.getFullYear(),0,1).getTimezoneOffset()!=this.getTimezoneOffset()},clearTime:function(t){if(t)return this.clone().clearTime();var e=this.getDate();if(this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this.getDate()!=e){for(var i=1,s=this.add(Date.HOUR,i);s.getDate()!=e;i++,s=this.add(Date.HOUR,i));this.setDate(e),this.setHours(s.getHours())}return this},add:function(t,e){var i=this.clone();if(!t||0===e)return i;switch(t.toLowerCase()){case Date.MILLI:i.setMilliseconds(this.getMilliseconds()+e);break;case Date.SECOND:i.setSeconds(this.getSeconds()+e);break;case Date.MINUTE:i.setMinutes(this.getMinutes()+e);break;case Date.HOUR:i.setHours(this.getHours()+e);break;case Date.DAY:i.setDate(this.getDate()+e);break;case Date.MONTH:var s=this.getDate();28<s&&(s=Math.min(s,this.getFirstDateOfMonth().add("mo",e).getLastDateOfMonth().getDate())),i.setDate(s),i.setMonth(this.getMonth()+e);break;case Date.YEAR:i.setFullYear(this.getFullYear()+e)}return i},between:function(t,e){var i=this.getTime();return t.getTime()<=i&&i<=e.getTime()}}),Date.prototype.format=Date.prototype.dateFormat,Ext.isSafari&&(navigator.userAgent.match(/WebKit\/(\d+)/)[1]||NaN)<420&&Ext.apply(Date.prototype,{_xMonth:Date.prototype.setMonth,_xDate:Date.prototype.setDate,setMonth:function(t){if(t<=-1){var e=Math.ceil(-t),i=Math.ceil(e/12),e=e%12?12-e%12:0;return this.setFullYear(this.getFullYear()-i),this._xMonth(e)}return this._xMonth(t)},setDate:function(t){return this.setTime(this.getTime()-864e5*(this.getDate()-t))}}),Ext.util.MixedCollection=function(t,e){this.items=[],this.map={},this.keys=[],this.length=0,this.addEvents("clear","add","replace","remove","sort"),this.allowFunctions=!0===t,e&&(this.getKey=e),Ext.util.MixedCollection.superclass.constructor.call(this)},Ext.extend(Ext.util.MixedCollection,Ext.util.Observable,{allowFunctions:!1,add:function(t,e){if(1==arguments.length&&(e=arguments[0],t=this.getKey(e)),null!=t){if(void 0!==this.map[t])return this.replace(t,e);this.map[t]=e}return this.length++,this.items.push(e),this.keys.push(t),this.fireEvent("add",this.length-1,e,t),e},getKey:function(t){return t.id},replace:function(t,e){1==arguments.length&&(e=arguments[0],t=this.getKey(e));var i=this.map[t];if(null==t||void 0===i)return this.add(t,e);var s=this.indexOfKey(t);return this.items[s]=e,this.map[t]=e,this.fireEvent("replace",t,i,e),e},addAll:function(t){if(1<arguments.length||Ext.isArray(t))for(var e=1<arguments.length?arguments:t,i=0,s=e.length;i<s;i++)this.add(e[i]);else for(var n in t)!this.allowFunctions&&"function"==typeof t[n]||this.add(n,t[n])},each:function(t,e){for(var i=[].concat(this.items),s=0,n=i.length;s<n&&!1!==t.call(e||i[s],i[s],s,n);s++);},eachKey:function(t,e){for(var i=0,s=this.keys.length;i<s;i++)t.call(e||window,this.keys[i],this.items[i],i,s)},find:function(t,e){for(var i=0,s=this.items.length;i<s;i++)if(t.call(e||window,this.items[i],this.keys[i]))return this.items[i];return null},insert:function(t,e,i){return 2==arguments.length&&(i=arguments[1],e=this.getKey(i)),this.containsKey(e)&&(this.suspendEvents(),this.removeKey(e),this.resumeEvents()),t>=this.length?this.add(e,i):(this.length++,this.items.splice(t,0,i),null!=e&&(this.map[e]=i),this.keys.splice(t,0,e),this.fireEvent("add",t,i,e),i)},remove:function(t){return this.removeAt(this.indexOf(t))},removeAt:function(t){if(t<this.length&&0<=t){this.length--;var e=this.items[t];this.items.splice(t,1);var i=this.keys[t];return void 0!==i&&delete this.map[i],this.keys.splice(t,1),this.fireEvent("remove",e,i),e}return!1},removeKey:function(t){return this.removeAt(this.indexOfKey(t))},getCount:function(){return this.length},indexOf:function(t){return this.items.indexOf(t)},indexOfKey:function(t){return this.keys.indexOf(t)},item:function(t){var e=this.map[t],t=void 0!==e?e:"number"==typeof t?this.items[t]:void 0;return"function"!=typeof t||this.allowFunctions?t:null},itemAt:function(t){return this.items[t]},key:function(t){return this.map[t]},contains:function(t){return-1!=this.indexOf(t)},containsKey:function(t){return void 0!==this.map[t]},clear:function(){this.length=0,this.items=[],this.keys=[],this.map={},this.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(s,t,n){var e,i,r="DESC"==String(t).toUpperCase()?-1:1,o=[],a=this.keys,l=this.items;for(n=n||function(t,e){return t-e},e=0,i=l.length;e<i;e++)o[o.length]={key:a[e],value:l[e],index:e};for(o.sort(function(t,e){var i=n(t[s],e[s])*r;return i=0===i?t.index<e.index?-1:1:i}),e=0,i=o.length;e<i;e++)l[e]=o[e].value,a[e]=o[e].key;this.fireEvent("sort",this)},sort:function(t,e){this._sort("value",t,e)},reorder:function(t){this.suspendEvents();var e,i=this.items,s=0,n=i.length,r=[],o=[];for(e in t)r[t[e]]=i[e];for(s=0;s<n;s++)null==t[s]&&o.push(i[s]);for(s=0;s<n;s++)null==r[s]&&(r[s]=o.shift());this.clear(),this.addAll(r),this.resumeEvents(),this.fireEvent("sort",this)},keySort:function(t,e){this._sort("key",t,e||function(t,e){t=String(t).toUpperCase(),e=String(e).toUpperCase();return e<t?1:t<e?-1:0})},getRange:function(t,e){var i=this.items;if(i.length<1)return[];var s,n=[];if((t=t||0)<=(e=Math.min(void 0===e?this.length-1:e,this.length-1)))for(s=t;s<=e;s++)n[n.length]=i[s];else for(s=t;e<=s;s--)n[n.length]=i[s];return n},filter:function(e,i,t,s){return Ext.isEmpty(i,!1)?this.clone():(i=this.createValueMatcher(i,t,s),this.filterBy(function(t){return t&&i.test(t[e])}))},filterBy:function(t,e){var i=new Ext.util.MixedCollection;i.getKey=this.getKey;for(var s=this.keys,n=this.items,r=0,o=n.length;r<o;r++)t.call(e||this,n[r],s[r])&&i.add(s[r],n[r]);return i},findIndex:function(e,i,t,s,n){return Ext.isEmpty(i,!1)?-1:(i=this.createValueMatcher(i,s,n),this.findIndexBy(function(t){return t&&i.test(t[e])},null,t))},findIndexBy:function(t,e,i){for(var s=this.keys,n=this.items,r=i||0,o=n.length;r<o;r++)if(t.call(e||this,n[r],s[r]))return r;return-1},createValueMatcher:function(t,e,i,s){var n;return t.exec||(n=Ext.escapeRe,t=String(t),!0===e?t=n(t):(t="^"+n(t),!0===s&&(t+="$")),t=new RegExp(t,i?"":"i")),t},clone:function(){for(var t=new Ext.util.MixedCollection,e=this.keys,i=this.items,s=0,n=i.length;s<n;s++)t.add(e[s],i[s]);return t.getKey=this.getKey,t}}),Ext.util.MixedCollection.prototype.get=Ext.util.MixedCollection.prototype.item,Ext.AbstractManager=Ext.extend(Object,{typeName:"type",constructor:function(t){Ext.apply(this,t||{}),this.all=new Ext.util.MixedCollection,this.types={}},get:function(t){return this.all.get(t)},register:function(t){this.all.add(t)},unregister:function(t){this.all.remove(t)},registerType:function(t,e){(this.types[t]=e)[this.typeName]=t},isRegistered:function(t){return void 0!==this.types[t]},create:function(t,e){var i=t[this.typeName]||t.type||e,e=this.types[i];if(null==e)throw new Error(String.format("The '{0}' type has not been registered with this manager",i));return new e(t)},onAvailable:function(i,s,n){var r=this.all;r.on("add",function(t,e){e.id==i&&(s.call(n||e,e),r.un("add",s,n))})}}),Ext.util.Format=function(){var trimRe=/^\s+|\s+$/g,stripTagsRE=/<\/?[^>]+>/gi,stripScriptsRe=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,nl2brRe=/\r?\n/g,YT;return{ellipsis:function(t,e,i){if(t&&t.length>e){if(i){var s=t.substr(0,e-2),i=Math.max(s.lastIndexOf(" "),s.lastIndexOf("."),s.lastIndexOf("!"),s.lastIndexOf("?"));return-1==i||i<e-15?t.substr(0,e-3)+"...":s.substr(0,i)+"..."}return t.substr(0,e-3)+"..."}return t},undef:function(t){return void 0!==t?t:""},defaultValue:function(t,e){return e||0===e||(e=""),void 0!==t&&""!==t?t:e},htmlEncode:function(t){return t&&String(t).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},htmlDecode:function(t){return t&&String(t).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},trim:function(t){return String(t).replace(trimRe,"")},substr:function(t,e,i){return String(t).substr(e,i)},lowercase:function(t){return String(t).toLowerCase()},uppercase:function(t){return String(t).toUpperCase()},capitalize:function(t){return t&&t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()},call:function(value,fn){if(2<arguments.length){var args=Array.prototype.slice.call(arguments,2);return args.unshift(value),eval(fn).apply(window,args)}return eval(fn).call(window,value)},usMoney:function(t){t=(t=Math.round(100*+t)/100)==Math.floor(t)?t+".00":10*t==Math.floor(10*t)?t+"0":t;for(var e=(t=String(t)).split("."),i=e[0],e=e[1]?"."+e[1]:".00",s=/(\d+)(\d{3})/;s.test(i);)i=i.replace(s,"$1,$2");return"-"==(t=i+e).charAt(0)?"-$"+t.substr(1):"$"+t},date:function(t,e){return t?(t=!Ext.isDate(t)?new Date(Date.parse(t)):t).dateFormat(e||"m/d/Y"):""},dateRenderer:function(e){return function(t){return Ext.util.Format.date(t,e)}},stripTags:function(t){return t&&String(t).replace(stripTagsRE,"")},stripScripts:function(t){return t&&String(t).replace(stripScriptsRe,"")},fileSize:function(t){return t<1024?t+" bytes":t<1048576?Math.round(10*t/1024)/10+" KB":Math.round(10*t/1048576)/10+" MB"},math:(YT={},function(t,e){return YT[e]||(YT[e]=new Function("v","return v "+e+";")),YT[e](t)}),round:function(t,e){var i=Number(t);return"number"==typeof e&&(e=Math.pow(10,e),i=Math.round(t*e)/e),i},number:function(t,e){if(!e)return t;if(t=Ext.num(t,NaN),isNaN(t))return"";var i=",",s=".",n=!1,r=t<0;t=Math.abs(t),"/i"==e.substr(e.length-2)&&(e=e.substr(0,e.length-2),n=!0,i=".",s=",");var o=-1!=e.indexOf(i);if(1<(n=(n?e.replace(/[^\d\,]/g,""):e.replace(/[^\d\.]/g,"")).split(s)).length)t=t.toFixed(n[1].length);else{if(2<n.length)throw"NumberFormatException: invalid format, formats should have no more than 1 period: "+e;t=t.toFixed(0)}t=t.toString(),n=t.split(".");if(o){for(var a=n[0],l=[],d=a.length,h=(Math.floor(d/3),a.length%3||3),c=0;c<d;c+=h)l[l.length]=a.substr(c,h=0!=c?3:h),0;t=l.join(i),n[1]&&(t+=s+n[1])}else n[1]&&(t=n[0]+s+n[1]);return(r?"-":"")+e.replace(/[\d,?\.?]+/,t)},numberRenderer:function(e){return function(t){return Ext.util.Format.number(t,e)}},plural:function(t,e,i){return t+" "+(1==t?e:i||e+"s")},nl2br:function(t){return Ext.isEmpty(t)?"":t.replace(nl2brRe,"<br/>")}}}(),Ext.XTemplate=function(){Ext.XTemplate.superclass.constructor.apply(this,arguments);for(var t,e=/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/,i=/^<tpl\b[^>]*?for="(.*?)"/,s=/^<tpl\b[^>]*?if="(.*?)"/,n=/^<tpl\b[^>]*?exec="(.*?)"/,r=0,o=[],a="values",l="parent",d="return ",h="with(values){ ",c=["<tpl>",c=this.html,"</tpl>"].join("");t=c.match(e);){var u=t[0].match(i),f=t[0].match(s),p=t[0].match(n),m=null,g=null,x=null,E=u&&u[1]?u[1]:"";if(f&&(m=f&&f[1]?f[1]:null)&&(g=new Function(a,l,"xindex","xcount",h+d+Ext.util.Format.htmlDecode(m)+"; }")),p&&(m=p&&p[1]?p[1]:null)&&(x=new Function(a,l,"xindex","xcount",h+Ext.util.Format.htmlDecode(m)+"; }")),E)switch(E){case".":E=new Function(a,l,h+d+a+"; }");break;case"..":E=new Function(a,l,h+d+l+"; }");break;default:E=new Function(a,l,h+d+E+"; }")}o.push({id:r,target:E,exec:x,test:g,body:t[1]||""}),c=c.replace(t[0],"{xtpl"+r+"}"),++r}for(var v=o.length-1;0<=v;--v)this.compileTpl(o[v]);this.master=o[o.length-1],this.tpls=o},Ext.extend(Ext.XTemplate,Ext.Template,{re:/\{([\w\-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\\]\s?[\d\.\+\-\*\\\(\)]+)?\}/g,codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,applySubTemplate:function(t,e,i,s,n){var r,o=this,a=o.tpls[t],l=[];if(a.test&&!a.test.call(o,e,i,s,n)||a.exec&&a.exec.call(o,e,i,s,n))return"";if((r=a.target?a.target.call(o,e,i):e).length,i=a.target?e:i,a.target&&Ext.isArray(r)){for(var d=0,h=r.length;d<h;d++)l[l.length]=a.compiled.call(o,r[d],i,d+1,h);return l.join("")}return a.compiled.call(o,r,i,s,n)},compileTpl:function(tpl){var fm=Ext.util.Format,useF=!0!==this.disableFormats,sep=Ext.isGecko?"+":",",body;function fn(t,e,i,s,n){if("xtpl"==e.substr(0,4))return"'"+sep+"this.applySubTemplate("+e.substr(4)+", values, parent, xindex, xcount)"+sep+"'";e="."===e?"values":"#"===e?"xindex":-1!=e.indexOf(".")?e:"values['"+e+"']";return n&&(e="("+e+n+")"),i&&useF?(s=s?","+s:"","this."!=i.substr(0,5)?i="fm."+i+"(":(i='this.call("'+i.substr(5)+'", ',s=", values")):(s="",i="("+e+" === undefined ? '' : "),"'"+sep+i+e+s+")"+sep+"'"}function codeFn(t,e){return"'"+sep+"("+e.replace(/\\'/g,"'")+")"+sep+"'"}return body=Ext.isGecko?"tpl.compiled = function(values, parent, xindex, xcount){ return '"+tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)+"';};":(body=["tpl.compiled = function(values, parent, xindex, xcount){ return ['"],body.push(tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)),body.push("'].join('');};"),body.join("")),eval(body),this},applyTemplate:function(t){return this.master.compiled.call(this,t,{},1,1)},compile:function(){return this}}),Ext.XTemplate.prototype.apply=Ext.XTemplate.prototype.applyTemplate,Ext.XTemplate.from=function(t){return t=Ext.getDom(t),new Ext.XTemplate(t.value||t.innerHTML)},Ext.util.CSS=function(){function r(t,e){return e.charAt(1).toUpperCase()}var n=null,o=document,a=/(-[a-z])/gi;return{createStyleSheet:function(e,t){var i,s=o.getElementsByTagName("head")[0],n=o.createElement("style");if(n.setAttribute("type","text/css"),t&&n.setAttribute("id",t),Ext.isIE)s.appendChild(n),(i=n.styleSheet).cssText=e;else{try{n.appendChild(o.createTextNode(e))}catch(t){n.cssText=e}s.appendChild(n),i=n.styleSheet||n.sheet||o.styleSheets[o.styleSheets.length-1]}return this.cacheStyleSheet(i),i},removeStyleSheet:function(t){t=o.getElementById(t);t&&t.parentNode.removeChild(t)},swapStyleSheet:function(t,e){this.removeStyleSheet(t);var i=o.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("id",t),i.setAttribute("href",e),o.getElementsByTagName("head")[0].appendChild(i)},refreshCache:function(){return this.getRules(!0)},cacheStyleSheet:function(t){n=n||{};try{for(var e=t.cssRules||t.rules,i=e.length-1;0<=i;--i)n[e[i].selectorText.toLowerCase()]=e[i]}catch(t){}},getRules:function(t){if(null===n||t){n={};for(var e=o.styleSheets,i=0,s=e.length;i<s;i++)try{this.cacheStyleSheet(e[i])}catch(t){}}return n},getRule:function(t,e){var i=this.getRules(e);if(!Ext.isArray(t))return i[t.toLowerCase()];for(var s=0;s<t.length;s++)if(i[t[s]])return i[t[s].toLowerCase()];return null},updateRule:function(t,e,i){if(Ext.isArray(t)){for(var s=0;s<t.length;s++)if(this.updateRule(t[s],e,i))return!0}else{var n=this.getRule(t);if(n)return n.style[e.replace(a,r)]=i,!0}return!1}}}(),Ext.util.ClickRepeater=Ext.extend(Ext.util.Observable,{constructor:function(t,e){this.el=Ext.get(t),this.el.unselectable(),Ext.apply(this,e),this.addEvents("mousedown","click","mouseup"),this.disabled||(this.disabled=!0,this.enable()),this.handler&&this.on("click",this.handler,this.scope||this),Ext.util.ClickRepeater.superclass.constructor.call(this)},interval:20,delay:250,preventDefault:!0,stopDefault:!1,timer:0,enable:function(){this.disabled&&(this.el.on("mousedown",this.handleMouseDown,this),Ext.isIE&&this.el.on("dblclick",this.handleDblClick,this),(this.preventDefault||this.stopDefault)&&this.el.on("click",this.eventOptions,this)),this.disabled=!1},disable:function(t){!t&&this.disabled||(clearTimeout(this.timer),this.pressClass&&this.el.removeClass(this.pressClass),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.el.removeAllListeners()),this.disabled=!0},setDisabled:function(t){this[t?"disable":"enable"]()},eventOptions:function(t){this.preventDefault&&t.preventDefault(),this.stopDefault&&t.stopEvent()},destroy:function(){this.disable(!0),Ext.destroy(this.el),this.purgeListeners()},handleDblClick:function(t){clearTimeout(this.timer),this.el.blur(),this.fireEvent("mousedown",this,t),this.fireEvent("click",this,t)},handleMouseDown:function(t){clearTimeout(this.timer),this.el.blur(),this.pressClass&&this.el.addClass(this.pressClass),this.mousedownTime=new Date,Ext.getDoc().on("mouseup",this.handleMouseUp,this),this.el.on("mouseout",this.handleMouseOut,this),this.fireEvent("mousedown",this,t),this.fireEvent("click",this,t),this.accelerate&&(this.delay=400),this.timer=this.click.defer(this.delay||this.interval,this,[t])},click:function(t){this.fireEvent("click",this,t),this.timer=this.click.defer(this.accelerate?this.easeOutExpo(this.mousedownTime.getElapsed(),400,-390,12e3):this.interval,this,[t])},easeOutExpo:function(t,e,i,s){return t==s?e+i:i*(1-Math.pow(2,-10*t/s))+e},handleMouseOut:function(){clearTimeout(this.timer),this.pressClass&&this.el.removeClass(this.pressClass),this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn,this),this.pressClass&&this.el.addClass(this.pressClass),this.click()},handleMouseUp:function(t){clearTimeout(this.timer),this.el.un("mouseover",this.handleMouseReturn,this),this.el.un("mouseout",this.handleMouseOut,this),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.el.removeClass(this.pressClass),this.fireEvent("mouseup",this,t)}}),Ext.KeyNav=function(t,e){this.el=Ext.get(t),Ext.apply(this,e),this.disabled||(this.disabled=!0,this.enable())},Ext.KeyNav.prototype={disabled:!1,defaultEventAction:"stopEvent",forceKeyDown:!1,relay:function(t){var e=t.getKey(),e=this.keyToHandler[e];e&&this[e]&&!0!==this.doRelay(t,this[e],e)&&t[this.defaultEventAction]()},doRelay:function(t,e,i){return e.call(this.scope||this,t,i)},enter:!1,left:!1,right:!1,up:!1,down:!1,tab:!1,esc:!1,pageUp:!1,pageDown:!1,del:!1,home:!1,end:!1,space:!1,keyToHandler:{37:"left",39:"right",38:"up",40:"down",33:"pageUp",34:"pageDown",46:"del",36:"home",35:"end",13:"enter",27:"esc",9:"tab",32:"space"},stopKeyUp:function(t){var e=t.getKey();37<=e&&e<=40&&t.stopEvent()},destroy:function(){this.disable()},enable:function(){this.disabled&&(Ext.isSafari2&&this.el.on("keyup",this.stopKeyUp,this),this.el.on(this.isKeydown()?"keydown":"keypress",this.relay,this),this.disabled=!1)},disable:function(){this.disabled||(Ext.isSafari2&&this.el.un("keyup",this.stopKeyUp,this),this.el.un(this.isKeydown()?"keydown":"keypress",this.relay,this),this.disabled=!0)},setDisabled:function(t){this[t?"disable":"enable"]()},isKeydown:function(){return this.forceKeyDown||Ext.EventManager.useKeydown}},Ext.KeyMap=function(t,e,i){this.el=Ext.get(t),this.eventName=i||"keydown",this.bindings=[],e&&this.addBinding(e),this.enable()},Ext.KeyMap.prototype={stopEvent:!1,addBinding:function(n){if(Ext.isArray(n))Ext.each(n,function(t){this.addBinding(t)},this);else{var r=n.key,o=n.fn||n.handler,a=n.scope;if(n.stopEvent&&(this.stopEvent=n.stopEvent),"string"==typeof r){for(var t=[],e=r.toUpperCase(),i=0,s=e.length;i<s;i++)t.push(e.charCodeAt(i));r=t}var l=Ext.isArray(r);this.bindings.push(function(t){if(this.checkModifiers(n,t)){var e=t.getKey();if(l){for(var i=0,s=r.length;i<s;i++)if(r[i]==e)return this.stopEvent&&t.stopEvent(),void o.call(a||window,e,t)}else e==r&&(this.stopEvent&&t.stopEvent(),o.call(a||window,e,t))}})}},checkModifiers:function(t,e){for(var i,s,n=["shift","ctrl","alt"],r=0,o=n.length;r<o;++r)if(void 0!==(i=t[s=n[r]])&&i!==e[s+"Key"])return!1;return!0},on:function(t,e,i){var s,n,r,o;"object"!=typeof t||Ext.isArray(t)?s=t:(s=t.key,n=t.shift,r=t.ctrl,o=t.alt),this.addBinding({key:s,shift:n,ctrl:r,alt:o,fn:e,scope:i})},handleKeyDown:function(t){if(this.enabled)for(var e=this.bindings,i=0,s=e.length;i<s;i++)e[i].call(this,t)},isEnabled:function(){return this.enabled},enable:function(){this.enabled||(this.el.on(this.eventName,this.handleKeyDown,this),this.enabled=!0)},disable:function(){this.enabled&&(this.el.removeListener(this.eventName,this.handleKeyDown,this),this.enabled=!1)},setDisabled:function(t){this[t?"disable":"enable"]()}},Ext.util.TextMetrics=function(){var s;return{measure:function(t,e,i){return(s=s||Ext.util.TextMetrics.Instance(t,i)).bind(t),s.setFixedWidth(i||"auto"),s.getSize(e)},createInstance:function(t,e){return Ext.util.TextMetrics.Instance(t,e)}}}(),Ext.util.TextMetrics.Instance=function(t,e){var i=new Ext.Element(document.createElement("div"));document.body.appendChild(i.dom),i.position("absolute"),i.setLeftTop(-1e3,-1e3),i.hide(),e&&i.setWidth(e);e={getSize:function(t){i.update(t);t=i.getSize();return i.update(""),t},bind:function(t){i.setStyle(Ext.fly(t).getStyles("font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"))},setFixedWidth:function(t){i.setWidth(t)},getWidth:function(t){return i.dom.style.width="auto",this.getSize(t).width},getHeight:function(t){return this.getSize(t).height}};return e.bind(t),e},Ext.Element.addMethods({getTextWidth:function(t,e,i){return Ext.util.TextMetrics.measure(this.dom,Ext.value(t,this.dom.innerHTML,!0)).width.constrain(e||0,i||1e6)}}),Ext.util.Cookies={set:function(t,e){var i=arguments,s=arguments.length,n=2<s?i[2]:null,r=3<s?i[3]:"/",o=4<s?i[4]:null,i=5<s&&i[5];document.cookie=t+"="+escape(e)+(null===n?"":"; expires="+n.toGMTString())+(null===r?"":"; path="+r)+(null===o?"":"; domain="+o)+(!0===i?"; secure":"")},get:function(t){for(var e,i=t+"=",s=i.length,n=document.cookie.length,r=0;r<n;){if(e=r+s,document.cookie.substring(r,e)==i)return Ext.util.Cookies.getCookieVal(e);if(0===(r=document.cookie.indexOf(" ",r)+1))break}return null},clear:function(t){Ext.util.Cookies.get(t)&&(document.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT")},getCookieVal:function(t){var e=document.cookie.indexOf(";",t);return-1==e&&(e=document.cookie.length),unescape(document.cookie.substring(t,e))}},Ext.handleError=function(t){throw t},Ext.Error=function(t){this.message=this.lang[t]||t},Ext.Error.prototype=new Error,Ext.apply(Ext.Error.prototype,{lang:{},name:"Ext.Error",getName:function(){return this.name},getMessage:function(){return this.message},toJson:function(){return Ext.encode(this)}}),Ext.ComponentMgr=function(){var r=new Ext.util.MixedCollection,i={},s={};return{register:function(t){r.add(t)},unregister:function(t){r.remove(t)},get:function(t){return r.get(t)},onAvailable:function(i,s,n){r.on("add",function(t,e){e.id==i&&(s.call(n||e,e),r.un("add",s,n))})},all:r,types:i,ptypes:s,isRegistered:function(t){return void 0!==i[t]},isPluginRegistered:function(t){return void 0!==s[t]},registerType:function(t,e){(i[t]=e).xtype=t},create:function(t,e){return t.render?t:new i[t.xtype||e](t)},registerPlugin:function(t,e){(s[t]=e).ptype=t},createPlugin:function(t,e){e=s[t.ptype||e];return e.init?e:new e(t)}}}(),Ext.reg=Ext.ComponentMgr.registerType,Ext.preg=Ext.ComponentMgr.registerPlugin,Ext.create=Ext.ComponentMgr.create,Ext.Component=function(t){if((t=t||{}).initialConfig?(t.isAction&&(this.baseAction=t),t=t.initialConfig):(t.tagName||t.dom||Ext.isString(t))&&(t={applyTo:t,id:t.id||t}),this.initialConfig=t,Ext.apply(this,t),this.addEvents("added","disable","enable","beforeshow","show","beforehide","hide","removed","beforerender","render","afterrender","beforedestroy","destroy","beforestaterestore","staterestore","beforestatesave","statesave"),this.getId(),Ext.ComponentMgr.register(this),Ext.Component.superclass.constructor.call(this),this.baseAction&&this.baseAction.addComponent(this),this.initComponent(),this.plugins)if(Ext.isArray(this.plugins))for(var e=0,i=this.plugins.length;e<i;e++)this.plugins[e]=this.initPlugin(this.plugins[e]);else this.plugins=this.initPlugin(this.plugins);!1!==this.stateful&&this.initState(),this.applyTo?(this.applyToMarkup(this.applyTo),delete this.applyTo):this.renderTo&&(this.render(this.renderTo),delete this.renderTo)},Ext.Component.AUTO_ID=1e3,Ext.extend(Ext.Component,Ext.util.Observable,{disabled:!1,hidden:!1,autoEl:"div",disabledClass:"x-item-disabled",allowDomMove:!0,autoShow:!1,hideMode:"display",hideParent:!1,rendered:!1,tplWriteMode:"overwrite",bubbleEvents:[],ctype:"Ext.Component",actionMode:"el",getActionEl:function(){return this[this.actionMode]},initPlugin:function(t){return t.ptype&&!Ext.isFunction(t.init)?t=Ext.ComponentMgr.createPlugin(t):Ext.isString(t)&&(t=Ext.ComponentMgr.createPlugin({ptype:t})),t.init(this),t},initComponent:function(){this.listeners&&(this.on(this.listeners),delete this.listeners),this.enableBubble(this.bubbleEvents)},render:function(t,e){return this.rendered||!1===this.fireEvent("beforerender",this)||(!t&&this.el&&(this.el=Ext.get(this.el),t=this.el.dom.parentNode,this.allowDomMove=!1),this.container=Ext.get(t),this.ctCls&&this.container.addClass(this.ctCls),this.rendered=!0,void 0!==e&&(e=Ext.isNumber(e)?this.container.dom.childNodes[e]:Ext.getDom(e)),this.onRender(this.container,e||null),this.autoShow&&this.el.removeClass(["x-hidden","x-hide-"+this.hideMode]),this.cls&&(this.el.addClass(this.cls),delete this.cls),this.style&&(this.el.applyStyles(this.style),delete this.style),this.overCls&&this.el.addClassOnOver(this.overCls),this.fireEvent("render",this),t=this.getContentTarget(),this.html&&(t.update(Ext.DomHelper.markup(this.html)),delete this.html),this.contentEl&&(e=Ext.getDom(this.contentEl),Ext.fly(e).removeClass(["x-hidden","x-hide-display"]),t.appendChild(e)),this.tpl&&(this.tpl.compile||(this.tpl=new Ext.XTemplate(this.tpl)),this.data&&(this.tpl[this.tplWriteMode](t,this.data),delete this.data)),this.afterRender(this.container),this.hidden&&this.doHide(),this.disabled&&this.disable(!0),!1!==this.stateful&&this.initStateEvents(),this.fireEvent("afterrender",this)),this},update:function(t,e,i){var s=this.getContentTarget();this.tpl&&"string"!=typeof t?this.tpl[this.tplWriteMode](s,t||{}):(t=Ext.isObject(t)?Ext.DomHelper.markup(t):t,s.update(t,e,i))},onAdded:function(t,e){this.ownerCt=t,this.initRef(),this.fireEvent("added",this,t,e)},onRemoved:function(){this.removeRef(),this.fireEvent("removed",this,this.ownerCt),delete this.ownerCt},initRef:function(){if(this.ref&&!this.refOwner){for(var t=this.ref.split("/"),e=t.length,i=0,s=this;s&&i<e;)s=s.ownerCt,++i;s&&((s[this.refName=t[--i]]=this).refOwner=s)}},removeRef:function(){this.refOwner&&this.refName&&(delete this.refOwner[this.refName],delete this.refOwner)},initState:function(){var t;Ext.state.Manager&&(!(t=this.getStateId())||(t=Ext.state.Manager.get(t))&&!1!==this.fireEvent("beforestaterestore",this,t)&&(this.applyState(Ext.apply({},t)),this.fireEvent("staterestore",this,t)))},getStateId:function(){return this.stateId||(/^(ext-comp-|ext-gen)/.test(String(this.id))?null:this.id)},initStateEvents:function(){if(this.stateEvents)for(var t,e=0;t=this.stateEvents[e];e++)this.on(t,this.saveState,this,{delay:100})},applyState:function(t){t&&Ext.apply(this,t)},getState:function(){return null},saveState:function(){var t,e;!Ext.state.Manager||!1===this.stateful||(t=this.getStateId())&&(e=this.getState(),!1!==this.fireEvent("beforestatesave",this,e)&&(Ext.state.Manager.set(t,e),this.fireEvent("statesave",this,e)))},applyToMarkup:function(t){this.allowDomMove=!1,this.el=Ext.get(t),this.render(this.el.dom.parentNode)},addClass:function(t){return this.el?this.el.addClass(t):this.cls=this.cls?this.cls+" "+t:t,this},removeClass:function(t){return this.el?this.el.removeClass(t):this.cls&&(this.cls=this.cls.split(" ").remove(t).join(" ")),this},onRender:function(t,e){var i;!this.el&&this.autoEl&&(Ext.isString(this.autoEl)?this.el=document.createElement(this.autoEl):(i=document.createElement("div"),Ext.DomHelper.overwrite(i,this.autoEl),this.el=i.firstChild),this.el.id||(this.el.id=this.getId())),this.el&&(this.el=Ext.get(this.el),!1!==this.allowDomMove&&(t.dom.insertBefore(this.el.dom,e),i&&Ext.removeNode(i)))},getAutoCreate:function(){var t=Ext.isObject(this.autoCreate)?this.autoCreate:Ext.apply({},this.defaultAutoCreate);return this.id&&!t.id&&(t.id=this.id),t},afterRender:Ext.emptyFn,destroy:function(){this.isDestroyed||!1!==this.fireEvent("beforedestroy",this)&&(this.destroying=!0,this.beforeDestroy(),this.ownerCt&&this.ownerCt.remove&&this.ownerCt.remove(this,!1),this.rendered&&(this.el.remove(),"container"!=this.actionMode&&"container"!=this.removeMode||this.container.remove()),this.focusTask&&this.focusTask.cancel&&this.focusTask.cancel(),this.onDestroy(),Ext.ComponentMgr.unregister(this),this.fireEvent("destroy",this),this.purgeListeners(),this.destroying=!1,this.isDestroyed=!0)},deleteMembers:function(){for(var t=arguments,e=0,i=t.length;e<i;++e)delete this[t[e]]},beforeDestroy:Ext.emptyFn,onDestroy:Ext.emptyFn,getEl:function(){return this.el},getContentTarget:function(){return this.el},getId:function(){return this.id||(this.id="ext-comp-"+ ++Ext.Component.AUTO_ID)},getItemId:function(){return this.itemId||this.getId()},focus:function(t,e){return e?(this.focusTask=new Ext.util.DelayedTask(this.focus,this,[t,!1]),this.focusTask.delay(Ext.isNumber(e)?e:10)):this.rendered&&!this.isDestroyed&&(this.el.focus(),!0===t&&this.el.dom.select()),this},blur:function(){return this.rendered&&this.el.blur(),this},disable:function(t){return this.rendered&&this.onDisable(),(this.disabled=!0)!==t&&this.fireEvent("disable",this),this},onDisable:function(){this.getActionEl().addClass(this.disabledClass),this.el.dom.disabled=!0},enable:function(){return this.rendered&&this.onEnable(),this.disabled=!1,this.fireEvent("enable",this),this},onEnable:function(){this.getActionEl().removeClass(this.disabledClass),this.el.dom.disabled=!1},setDisabled:function(t){return this[t?"disable":"enable"]()},show:function(){return!1!==this.fireEvent("beforeshow",this)&&(this.hidden=!1,this.autoRender&&this.render(Ext.isBoolean(this.autoRender)?Ext.getBody():this.autoRender),this.rendered&&this.onShow(),this.fireEvent("show",this)),this},onShow:function(){this.getVisibilityEl().removeClass("x-hide-"+this.hideMode)},hide:function(){return!1!==this.fireEvent("beforehide",this)&&(this.doHide(),this.fireEvent("hide",this)),this},doHide:function(){this.hidden=!0,this.rendered&&this.onHide()},onHide:function(){this.getVisibilityEl().addClass("x-hide-"+this.hideMode)},getVisibilityEl:function(){return this.hideParent?this.container:this.getActionEl()},setVisible:function(t){return this[t?"show":"hide"]()},isVisible:function(){return this.rendered&&this.getVisibilityEl().isVisible()},cloneConfig:function(t){var e=(t=t||{}).id||Ext.id(),t=Ext.applyIf(t,this.initialConfig);return t.id=e,new this.constructor(t)},getXType:function(){return this.constructor.xtype},isXType:function(t,e){return Ext.isFunction(t)?t=t.xtype:Ext.isObject(t)&&(t=t.constructor.xtype),e?this.constructor.xtype==t:-1!=("/"+this.getXTypes()+"/").indexOf("/"+t+"/")},getXTypes:function(){var t=this.constructor;if(!t.xtypes){for(var e=[],i=this;i&&i.constructor.xtype;)e.unshift(i.constructor.xtype),i=i.constructor.superclass;t.xtypeChain=e,t.xtypes=e.join("/")}return t.xtypes},findParentBy:function(t){for(var e=this.ownerCt;null!=e&&!t(e,this);e=e.ownerCt);return e||null},findParentByType:function(e,i){return this.findParentBy(function(t){return t.isXType(e,i)})},bubble:function(t,e,i){for(var s=this;s&&!1!==t.apply(e||s,i||[s]);)s=s.ownerCt;return this},getPositionEl:function(){return this.positionEl||this.el},purgeListeners:function(){Ext.Component.superclass.purgeListeners.call(this),this.mons&&this.on("beforedestroy",this.clearMons,this,{single:!0})},clearMons:function(){Ext.each(this.mons,function(t){t.item.un(t.ename,t.fn,t.scope)},this),this.mons=[]},createMons:function(){this.mons||(this.mons=[],this.on("beforedestroy",this.clearMons,this,{single:!0}))},mon:function(t,e,i,s,n){if(this.createMons(),Ext.isObject(e)){var r,o=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,a=e;for(r in a)o.test(r)||(Ext.isFunction(a[r])?(this.mons.push({item:t,ename:r,fn:a[r],scope:a.scope}),t.on(r,a[r],a.scope,a)):(this.mons.push({item:t,ename:r,fn:a[r],scope:a.scope}),t.on(r,a[r])))}else this.mons.push({item:t,ename:e,fn:i,scope:s}),t.on(e,i,s,n)},mun:function(t,e,i,s){var n,r;this.createMons();for(var o=0,a=this.mons.length;o<a;++o)if(t===(r=this.mons[o]).item&&e==r.ename&&i===r.fn&&s===r.scope){this.mons.splice(o,1),t.un(e,i,s),n=!0;break}return n},nextSibling:function(){if(this.ownerCt){var t=this.ownerCt.items.indexOf(this);if(-1!=t&&t+1<this.ownerCt.items.getCount())return this.ownerCt.items.itemAt(t+1)}return null},previousSibling:function(){if(this.ownerCt){var t=this.ownerCt.items.indexOf(this);if(0<t)return this.ownerCt.items.itemAt(t-1)}return null},getBubbleTarget:function(){return this.ownerCt}}),Ext.reg("component",Ext.Component),Ext.Action=Ext.extend(Object,{constructor:function(t){this.initialConfig=t,this.itemId=t.itemId=t.itemId||t.id||Ext.id(),this.items=[]},isAction:!0,setText:function(t){this.initialConfig.text=t,this.callEach("setText",[t])},getText:function(){return this.initialConfig.text},setIconClass:function(t){this.initialConfig.iconCls=t,this.callEach("setIconClass",[t])},getIconClass:function(){return this.initialConfig.iconCls},setDisabled:function(t){this.initialConfig.disabled=t,this.callEach("setDisabled",[t])},enable:function(){this.setDisabled(!1)},disable:function(){this.setDisabled(!0)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(t){this.initialConfig.hidden=t,this.callEach("setVisible",[!t])},show:function(){this.setHidden(!1)},hide:function(){this.setHidden(!0)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(t,e){this.initialConfig.handler=t,this.initialConfig.scope=e,this.callEach("setHandler",[t,e])},each:function(t,e){Ext.each(this.items,t,e)},callEach:function(t,e){for(var i=this.items,s=0,n=i.length;s<n;s++)i[s][t].apply(i[s],e)},addComponent:function(t){this.items.push(t),t.on("destroy",this.removeComponent,this)},removeComponent:function(t){this.items.remove(t)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||window,arguments)}}),function(){Ext.Layer=function(t,e){t=t||{};var i=Ext.DomHelper,s=t.parentEl,s=s?Ext.getDom(s):document.body;e&&(this.dom=Ext.getDom(e)),this.dom||(e=t.dh||{tag:"div",cls:"x-layer"},this.dom=i.append(s,e)),t.cls&&this.addClass(t.cls),this.constrain=!1!==t.constrain,this.setVisibilityMode(Ext.Element.VISIBILITY),t.id?this.id=this.dom.id=t.id:this.id=Ext.id(this.dom),this.zindex=t.zindex||this.getZIndex(),this.position("absolute",this.zindex),t.shadow?(this.shadowOffset=t.shadowOffset||4,this.shadow=new Ext.Shadow({offset:this.shadowOffset,mode:t.shadow})):this.shadowOffset=0,this.useShim=!1!==t.shim&&Ext.useShims,this.useDisplay=t.useDisplay,this.hide()};var h=Ext.Element.prototype,i=[];Ext.extend(Ext.Layer,Ext.Element,{getZIndex:function(){return this.zindex||parseInt((this.getShim()||this).getStyle("z-index"),10)||11e3},getShim:function(){if(!this.useShim)return null;if(this.shim)return this.shim;var t=i.shift();t||((t=this.createShim()).enableDisplayMode("block"),t.dom.style.display="none",t.dom.style.visibility="visible");var e=this.dom.parentNode;return t.dom.parentNode!=e&&e.insertBefore(t.dom,this.dom),t.setStyle("z-index",this.getZIndex()-2),this.shim=t},hideShim:function(){this.shim&&(this.shim.setDisplayed(!1),i.push(this.shim),delete this.shim)},disableShadow:function(){this.shadow&&(this.shadowDisabled=!0,this.shadow.hide(),this.lastShadowOffset=this.shadowOffset,this.shadowOffset=0)},enableShadow:function(t){this.shadow&&(this.shadowDisabled=!1,Ext.isDefined(this.lastShadowOffset)&&(this.shadowOffset=this.lastShadowOffset,delete this.lastShadowOffset),t&&this.sync(!0))},sync:function(t){var e,i,s,n,r,o,a,l=this.shadow;!this.updating&&this.isVisible()&&(l||this.useShim)&&(e=this.getShim(),i=this.getWidth(),s=this.getHeight(),n=this.getLeft(!0),r=this.getTop(!0),l&&!this.shadowDisabled?(t&&!l.isVisible()?l.show(this):l.realign(n,r,i,s),e&&(t&&e.show(),o=l.el.getXY(),a=e.dom.style,l=l.el.getSize(),a.left=o[0]+"px",a.top=o[1]+"px",a.width=l.width+"px",a.height=l.height+"px")):e&&(t&&e.show(),e.setSize(i,s),e.setLeftTop(n,r)))},destroy:function(){this.hideShim(),this.shadow&&this.shadow.hide(),this.removeAllListeners(),Ext.removeNode(this.dom),delete this.dom},remove:function(){this.destroy()},beginUpdate:function(){this.updating=!0},endUpdate:function(){this.updating=!1,this.sync(!0)},hideUnders:function(t){this.shadow&&this.shadow.hide(),this.hideShim()},constrainXY:function(){var t,e,i,s,n,r,o,a,l,d;return this.constrain&&(t=Ext.lib.Dom.getViewWidth(),e=Ext.lib.Dom.getViewHeight(),i=Ext.getDoc().getScroll(),n=(s=this.getXY())[0],r=s[1],o=this.shadowOffset,a=this.dom.offsetWidth+o,l=this.dom.offsetHeight+o,d=!1,n+a>t+i.left&&(n=t-a-o,d=!0),r+l>e+i.top&&(r=e-l-o,d=!0),n<i.left&&(n=i.left,d=!0),r<i.top&&(r=i.top,d=!0),d&&(!this.avoidY||r<=(d=this.avoidY)&&d<=r+l&&(r=d-l-5),this.storeXY(s=[n,r]),h.setXY.call(this,s),this.sync())),this},getConstrainOffset:function(){return this.shadowOffset},isVisible:function(){return this.visible},showAction:function(){(this.visible=!0)===this.useDisplay?this.setDisplayed(""):this.lastXY?h.setXY.call(this,this.lastXY):this.lastLT&&h.setLeftTop.call(this,this.lastLT[0],this.lastLT[1])},hideAction:function(){!(this.visible=!1)===this.useDisplay?this.setDisplayed(!1):this.setLeftTop(-1e4,-1e4)},setVisible:function(t,e,i,s,n){var r;return t&&this.showAction(),e&&t?(r=function(){this.sync(!0),s&&s()}.createDelegate(this),h.setVisible.call(this,!0,!0,i,r,n)):(t||this.hideUnders(!0),r=s,e&&(r=function(){this.hideAction(),s&&s()}.createDelegate(this)),h.setVisible.call(this,t,e,i,r,n),t?this.sync(!0):e||this.hideAction()),this},storeXY:function(t){delete this.lastLT,this.lastXY=t},storeLeftTop:function(t,e){delete this.lastXY,this.lastLT=[t,e]},beforeFx:function(){return this.beforeAction(),Ext.Layer.superclass.beforeFx.apply(this,arguments)},afterFx:function(){Ext.Layer.superclass.afterFx.apply(this,arguments),this.sync(this.isVisible())},beforeAction:function(){!this.updating&&this.shadow&&this.shadow.hide()},setLeft:function(t){return this.storeLeftTop(t,this.getTop(!0)),h.setLeft.apply(this,arguments),this.sync(),this},setTop:function(t){return this.storeLeftTop(this.getLeft(!0),t),h.setTop.apply(this,arguments),this.sync(),this},setLeftTop:function(t,e){return this.storeLeftTop(t,e),h.setLeftTop.apply(this,arguments),this.sync(),this},setXY:function(t,e,i,s,n){this.fixDisplay(),this.beforeAction(),this.storeXY(t);s=this.createCB(s);return h.setXY.call(this,t,e,i,s,n),e||s(),this},createCB:function(t){var e=this;return function(){e.constrainXY(),e.sync(!0),t&&t()}},setX:function(t,e,i,s,n){return this.setXY([t,this.getY()],e,i,s,n),this},setY:function(t,e,i,s,n){return this.setXY([this.getX(),t],e,i,s,n),this},setSize:function(t,e,i,s,n,r){this.beforeAction();n=this.createCB(n);return h.setSize.call(this,t,e,i,s,n,r),i||n(),this},setWidth:function(t,e,i,s,n){this.beforeAction();s=this.createCB(s);return h.setWidth.call(this,t,e,i,s,n),e||s(),this},setHeight:function(t,e,i,s,n){this.beforeAction();s=this.createCB(s);return h.setHeight.call(this,t,e,i,s,n),e||s(),this},setBounds:function(t,e,i,s,n,r,o,a){this.beforeAction();o=this.createCB(o);return n?h.setBounds.call(this,t,e,i,s,n,r,o,a):(this.storeXY([t,e]),h.setXY.call(this,[t,e]),h.setSize.call(this,i,s,n,r,o,a),o()),this},setZIndex:function(t){return this.zindex=t,this.setStyle("z-index",t+2),this.shadow&&this.shadow.setZIndex(t+1),this.shim&&this.shim.setStyle("z-index",t),this}})}(),Ext.Shadow=function(t){Ext.apply(this,t),"string"!=typeof this.mode&&(this.mode=this.defaultMode);var e=this.offset,i={h:0},s=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case"drop":i.w=0,i.l=i.t=e,--i.t,Ext.isIE9m&&(i.l-=this.offset+s,i.t-=this.offset+s,i.w-=s,i.h-=s,i.t+=1);break;case"sides":i.w=2*e,i.l=-e,i.t=e-1,Ext.isIE9m&&(i.l-=this.offset-s,i.t-=this.offset+s,i.l+=1,i.w-=2*(this.offset-s),i.w-=s+1,--i.h);break;case"frame":i.w=i.h=2*e,i.l=i.t=-e,i.t+=1,i.h-=2,Ext.isIE9m&&(i.l-=this.offset-s,i.t-=this.offset-s,i.l+=1,i.w-=this.offset+s+1,i.h-=this.offset+s,i.h+=1)}this.adjusts=i},Ext.Shadow.prototype={offset:4,defaultMode:"drop",show:function(t){t=Ext.get(t),this.el||(this.el=Ext.Shadow.Pool.pull(),this.el.dom.nextSibling!=t.dom&&this.el.insertBefore(t)),this.el.setStyle("z-index",this.zIndex||parseInt(t.getStyle("z-index"),10)-1),Ext.isIE9m&&(this.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+this.offset+")"),this.realign(t.getLeft(!0),t.getTop(!0),t.getWidth(),t.getHeight()),this.el.dom.style.display="block"},isVisible:function(){return!!this.el},realign:function(t,e,i,s){var n,r,o,a,l;this.el&&(n=this.adjusts,r=(a=this.el.dom).style,o=(l=i+n.w)+"px",s=(i=s+n.h)+"px",r.left=t+n.l+"px",r.top=e+n.t+"px",r.width==o&&r.height==s||(r.width=o,r.height=s,Ext.isIE9m||(a=a.childNodes,l=Math.max(0,l-12)+"px",a[0].childNodes[1].style.width=l,a[1].childNodes[1].style.width=l,a[2].childNodes[1].style.width=l,a[1].style.height=Math.max(0,i-12)+"px")))},hide:function(){this.el&&(this.el.dom.style.display="none",Ext.Shadow.Pool.push(this.el),delete this.el)},setZIndex:function(t){this.zIndex=t,this.el&&this.el.setStyle("z-index",t)}},Ext.Shadow.Pool=function(){var e=[],i=Ext.isIE9m?'<div class="x-ie-shadow"></div>':'<div class="x-shadow"><div class="xst"><div class="xstl"></div><div class="xstc"></div><div class="xstr"></div></div><div class="xsc"><div class="xsml"></div><div class="xsmc"></div><div class="xsmr"></div></div><div class="xsb"><div class="xsbl"></div><div class="xsbc"></div><div class="xsbr"></div></div></div>';return{pull:function(){var t=e.shift();return t||((t=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,i))).autoBoxAdjust=!1),t},push:function(t){e.push(t)}}}(),Ext.BoxComponent=Ext.extend(Ext.Component,{initComponent:function(){Ext.BoxComponent.superclass.initComponent.call(this),this.addEvents("resize","move")},boxReady:!1,deferHeight:!1,setSize:function(t,e){if("object"==typeof t&&(e=t.height,t=t.width),Ext.isDefined(t)&&Ext.isDefined(this.boxMinWidth)&&t<this.boxMinWidth&&(t=this.boxMinWidth),Ext.isDefined(e)&&Ext.isDefined(this.boxMinHeight)&&e<this.boxMinHeight&&(e=this.boxMinHeight),Ext.isDefined(t)&&Ext.isDefined(this.boxMaxWidth)&&t>this.boxMaxWidth&&(t=this.boxMaxWidth),Ext.isDefined(e)&&Ext.isDefined(this.boxMaxHeight)&&e>this.boxMaxHeight&&(e=this.boxMaxHeight),!this.boxReady)return this.width=t,this.height=e,this;if(!1!==this.cacheSizes&&this.lastSize&&this.lastSize.width==t&&this.lastSize.height==e)return this;this.lastSize={width:t,height:e};var i=this.adjustSize(t,e),s=i.width,n=i.height;return void 0===s&&void 0===n||(i=this.getResizeEl(),this.deferHeight||void 0===s||void 0===n?this.deferHeight||void 0===n?void 0!==s&&i.setWidth(s):i.setHeight(n):i.setSize(s,n),this.onResize(s,n,t,e),this.fireEvent("resize",this,s,n,t,e)),this},setWidth:function(t){return this.setSize(t)},setHeight:function(t){return this.setSize(void 0,t)},getSize:function(){return this.getResizeEl().getSize()},getWidth:function(){return this.getResizeEl().getWidth()},getHeight:function(){return this.getResizeEl().getHeight()},getOuterSize:function(){var t=this.getResizeEl();return{width:t.getWidth()+t.getMargins("lr"),height:t.getHeight()+t.getMargins("tb")}},getPosition:function(t){var e=this.getPositionEl();return!0===t?[e.getLeft(!0),e.getTop(!0)]:this.xy||e.getXY()},getBox:function(t){var e=this.getPosition(t),t=this.getSize();return t.x=e[0],t.y=e[1],t},updateBox:function(t){return this.setSize(t.width,t.height),this.setPagePosition(t.x,t.y),this},getResizeEl:function(){return this.resizeEl||this.el},setAutoScroll:function(t){return this.rendered&&this.getContentTarget().setOverflow(t?"auto":""),this.autoScroll=t,this},setPosition:function(t,e){if(t&&"number"==typeof t[1]&&(e=t[1],t=t[0]),this.x=t,this.y=e,!this.boxReady)return this;var i=this.adjustPosition(t,e),t=i.x,e=i.y,i=this.getPositionEl();return void 0===t&&void 0===e||(void 0!==t&&void 0!==e?i.setLeftTop(t,e):void 0!==t?i.setLeft(t):void 0!==e&&i.setTop(e),this.onPosition(t,e),this.fireEvent("move",this,t,e)),this},setPagePosition:function(t,e){if(t&&"number"==typeof t[1]&&(e=t[1],t=t[0]),this.pageX=t,this.pageY=e,this.boxReady&&void 0!==t&&void 0!==e){e=this.getPositionEl().translatePoints(t,e);return this.setPosition(e.left,e.top),this}},afterRender:function(){Ext.BoxComponent.superclass.afterRender.call(this),this.resizeEl&&(this.resizeEl=Ext.get(this.resizeEl)),this.positionEl&&(this.positionEl=Ext.get(this.positionEl)),this.boxReady=!0,Ext.isDefined(this.autoScroll)&&this.setAutoScroll(this.autoScroll),this.setSize(this.width,this.height),this.x||this.y?this.setPosition(this.x,this.y):(this.pageX||this.pageY)&&this.setPagePosition(this.pageX,this.pageY)},syncSize:function(){return delete this.lastSize,this.setSize(this.autoWidth?void 0:this.getResizeEl().getWidth(),this.autoHeight?void 0:this.getResizeEl().getHeight()),this},onResize:function(t,e,i,s){},onPosition:function(t,e){},adjustSize:function(t,e){return{width:t=this.autoWidth?"auto":t,height:e=this.autoHeight?"auto":e}},adjustPosition:function(t,e){return{x:t,y:e}}}),Ext.reg("box",Ext.BoxComponent),Ext.Spacer=Ext.extend(Ext.BoxComponent,{autoEl:"div"}),Ext.reg("spacer",Ext.Spacer),Ext.SplitBar=function(t,e,i,s,n){this.el=Ext.get(t,!0),this.el.unselectable(),this.resizingEl=Ext.get(e,!0),this.orientation=i||Ext.SplitBar.HORIZONTAL,this.minSize=0,this.maxSize=2e3,this.animate=!1,this.useShim=!1,this.shim=null,this.proxy=n?Ext.get(n).dom:Ext.SplitBar.createProxy(this.orientation),this.dd=new Ext.dd.DDProxy(this.el.dom.id,"XSplitBars",{dragElId:this.proxy.id}),this.dd.b4StartDrag=this.onStartProxyDrag.createDelegate(this),this.dd.endDrag=this.onEndProxyDrag.createDelegate(this),this.dragSpecs={},this.adapter=new Ext.SplitBar.BasicLayoutAdapter,this.adapter.init(this),this.orientation==Ext.SplitBar.HORIZONTAL?(this.placement=s||(this.el.getX()>this.resizingEl.getX()?Ext.SplitBar.LEFT:Ext.SplitBar.RIGHT),this.el.addClass("x-splitbar-h")):(this.placement=s||(this.el.getY()>this.resizingEl.getY()?Ext.SplitBar.TOP:Ext.SplitBar.BOTTOM),this.el.addClass("x-splitbar-v")),this.addEvents("resize","moved","beforeresize","beforeapply"),Ext.SplitBar.superclass.constructor.call(this)},Ext.extend(Ext.SplitBar,Ext.util.Observable,{onStartProxyDrag:function(t,e){this.fireEvent("beforeresize",this),this.overlay=Ext.DomHelper.append(document.body,{cls:"x-drag-overlay",html:"&#160;"},!0),this.overlay.unselectable(),this.overlay.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.overlay.show(),Ext.get(this.proxy).setDisplayed("block");var i=this.adapter.getElementSize(this);this.activeMinSize=this.getMinimumSize(),this.activeMaxSize=this.getMaximumSize();var s=i-this.activeMinSize,n=Math.max(this.activeMaxSize-i,0);this.orientation==Ext.SplitBar.HORIZONTAL?(this.dd.resetConstraints(),this.dd.setXConstraint(this.placement==Ext.SplitBar.LEFT?s:n,this.placement==Ext.SplitBar.LEFT?n:s,this.tickSize),this.dd.setYConstraint(0,0)):(this.dd.resetConstraints(),this.dd.setXConstraint(0,0),this.dd.setYConstraint(this.placement==Ext.SplitBar.TOP?s:n,this.placement==Ext.SplitBar.TOP?n:s,this.tickSize)),this.dragSpecs.startSize=i,this.dragSpecs.startPoint=[t,e],Ext.dd.DDProxy.prototype.b4StartDrag.call(this.dd,t,e)},onEndProxyDrag:function(t){Ext.get(this.proxy).setDisplayed(!1);var t=Ext.lib.Event.getXY(t);this.overlay&&(Ext.destroy(this.overlay),delete this.overlay),t=this.orientation==Ext.SplitBar.HORIZONTAL?this.dragSpecs.startSize+(this.placement==Ext.SplitBar.LEFT?t[0]-this.dragSpecs.startPoint[0]:this.dragSpecs.startPoint[0]-t[0]):this.dragSpecs.startSize+(this.placement==Ext.SplitBar.TOP?t[1]-this.dragSpecs.startPoint[1]:this.dragSpecs.startPoint[1]-t[1]),(t=Math.min(Math.max(t,this.activeMinSize),this.activeMaxSize))!=this.dragSpecs.startSize&&!1!==this.fireEvent("beforeapply",this,t)&&(this.adapter.setElementSize(this,t),this.fireEvent("moved",this,t),this.fireEvent("resize",this,t))},getAdapter:function(){return this.adapter},setAdapter:function(t){this.adapter=t,this.adapter.init(this)},getMinimumSize:function(){return this.minSize},setMinimumSize:function(t){this.minSize=t},getMaximumSize:function(){return this.maxSize},setMaximumSize:function(t){this.maxSize=t},setCurrentSize:function(t){var e=this.animate;this.animate=!1,this.adapter.setElementSize(this,t),this.animate=e},destroy:function(t){Ext.destroy(this.shim,Ext.get(this.proxy)),this.dd.unreg(),t&&this.el.remove(),this.purgeListeners()}}),Ext.SplitBar.createProxy=function(t){var e=new Ext.Element(document.createElement("div"));document.body.appendChild(e.dom),e.unselectable();var i="x-splitbar-proxy";return e.addClass(i+" "+(t==Ext.SplitBar.HORIZONTAL?i+"-h":i+"-v")),e.dom},Ext.SplitBar.BasicLayoutAdapter=function(){},Ext.SplitBar.BasicLayoutAdapter.prototype={init:function(t){},getElementSize:function(t){return t.orientation==Ext.SplitBar.HORIZONTAL?t.resizingEl.getWidth():t.resizingEl.getHeight()},setElementSize:function(t,e,i){t.orientation==Ext.SplitBar.HORIZONTAL?t.animate?t.resizingEl.setWidth(e,!0,.1,i,"easeOut"):(t.resizingEl.setWidth(e),i&&i(t,e)):t.animate?t.resizingEl.setHeight(e,!0,.1,i,"easeOut"):(t.resizingEl.setHeight(e),i&&i(t,e))}},Ext.SplitBar.AbsoluteLayoutAdapter=function(t){this.basic=new Ext.SplitBar.BasicLayoutAdapter,this.container=Ext.get(t)},Ext.SplitBar.AbsoluteLayoutAdapter.prototype={init:function(t){this.basic.init(t)},getElementSize:function(t){return this.basic.getElementSize(t)},setElementSize:function(t,e,i){this.basic.setElementSize(t,e,this.moveSplitter.createDelegate(this,[t]))},moveSplitter:function(t){var e=Ext.SplitBar;switch(t.placement){case e.LEFT:t.el.setX(t.resizingEl.getRight());break;case e.RIGHT:t.el.setStyle("right",this.container.getWidth()-t.resizingEl.getLeft()+"px");break;case e.TOP:t.el.setY(t.resizingEl.getBottom());break;case e.BOTTOM:t.el.setY(t.resizingEl.getTop()-t.el.getHeight())}}},Ext.SplitBar.VERTICAL=1,Ext.SplitBar.HORIZONTAL=2,Ext.SplitBar.LEFT=1,Ext.SplitBar.RIGHT=2,Ext.SplitBar.TOP=3,Ext.SplitBar.BOTTOM=4,Ext.Container=Ext.extend(Ext.BoxComponent,{bufferResize:50,autoDestroy:!0,forceLayout:!1,defaultType:"panel",resizeEvent:"resize",bubbleEvents:["add","remove"],initComponent:function(){Ext.Container.superclass.initComponent.call(this),this.addEvents("afterlayout","beforeadd","beforeremove","add","remove");var t=this.items;t&&(delete this.items,this.add(t))},initItems:function(){this.items||(this.items=new Ext.util.MixedCollection(!1,this.getComponentId),this.getLayout())},setLayout:function(t){this.layout&&this.layout!=t&&this.layout.setContainer(null),this.layout=t,this.initItems(),t.setContainer(this)},afterRender:function(){var t;Ext.Container.superclass.afterRender.call(this),this.layout||(this.layout="auto"),Ext.isObject(this.layout)&&!this.layout.layout&&(this.layoutConfig=this.layout,this.layout=this.layoutConfig.type),Ext.isString(this.layout)&&(this.layout=new Ext.Container.LAYOUTS[this.layout.toLowerCase()](this.layoutConfig)),this.setLayout(this.layout),void 0!==this.activeItem&&this.layout.setActiveItem&&(t=this.activeItem,delete this.activeItem,this.layout.setActiveItem(t)),this.ownerCt||this.doLayout(!1,!0),!0===this.monitorResize&&Ext.EventManager.onWindowResize(this.doLayout,this,[!1])},getLayoutTarget:function(){return this.el},getComponentId:function(t){return t.getItemId()},add:function(t){this.initItems();var e=1<arguments.length;if(e||Ext.isArray(t)){var i=[];return Ext.each(e?arguments:t,function(t){i.push(this.add(t))},this),i}var s=this.lookupComponent(this.applyDefaults(t)),e=this.items.length;return!1!==this.fireEvent("beforeadd",this,s,e)&&!1!==this.onBeforeAdd(s)&&(this.items.add(s),s.onAdded(this,e),this.onAdd(s),this.fireEvent("add",this,s,e)),s},onAdd:function(t){},onAdded:function(t,e){this.ownerCt=t,this.initRef(),this.cascade(function(t){t.initRef()}),this.fireEvent("added",this,t,e)},insert:function(t,e){var i,s=arguments,n=s.length,r=[];if(this.initItems(),2<n){for(i=n-1;1<=i;--i)r.push(this.insert(t,s[i]));return r}return n=this.lookupComponent(this.applyDefaults(e)),t=Math.min(t,this.items.length),!1!==this.fireEvent("beforeadd",this,n,t)&&!1!==this.onBeforeAdd(n)&&(n.ownerCt==this&&this.items.remove(n),this.items.insert(t,n),n.onAdded(this,t),this.onAdd(n),this.fireEvent("add",this,n,t)),n},applyDefaults:function(t){var e=this.defaults;return e&&(Ext.isFunction(e)&&(e=e.call(this,t)),Ext.isString(t)?(t=Ext.ComponentMgr.get(t),Ext.apply(t,e)):t.events?Ext.apply(t,e):Ext.applyIf(t.isAction?t.initialConfig:t,e)),t},onBeforeAdd:function(t){t.ownerCt&&t.ownerCt.remove(t,!1),!0===this.hideBorders&&(t.border=!0===t.border)},remove:function(t,e){this.initItems();t=this.getComponent(t);return t&&!1!==this.fireEvent("beforeremove",this,t)&&(this.doRemove(t,e),this.fireEvent("remove",this,t)),t},onRemove:function(t){},doRemove:function(t,e){var i=this.layout,s=i&&this.rendered;s&&i.onRemove(t),this.items.remove(t),t.onRemoved(),this.onRemove(t),(!0===e||!1!==e&&this.autoDestroy)&&t.destroy(),s&&i.afterRemove(t)},removeAll:function(t){this.initItems();var e,i=[],s=[];this.items.each(function(t){i.push(t)});for(var n=0,r=i.length;n<r;++n)e=i[n],this.remove(e,t),e.ownerCt!==this&&s.push(e);return s},getComponent:function(t){return Ext.isObject(t)&&(t=t.getItemId()),this.items.get(t)},lookupComponent:function(t){return Ext.isString(t)?Ext.ComponentMgr.get(t):t.events?t:this.createComponent(t)},createComponent:function(t,e){if(t.render)return t;e=Ext.create(Ext.apply({ownerCt:this},t),e||this.defaultType);return delete e.initialConfig.ownerCt,delete e.ownerCt,e},canLayout:function(){var t=this.getVisibilityEl();return t&&t.dom&&!t.isStyle("display","none")},doLayout:function(t,e){var i=this.rendered,s=e||this.forceLayout;if(this.collapsed||!this.canLayout()){if(this.deferLayout=this.deferLayout||!t,!s)return;t=t&&!this.deferLayout}else delete this.deferLayout;if(i&&this.layout&&this.layout.layout(),!0!==t&&this.items)for(var n=this.items.items,r=0,o=n.length;r<o;r++){var a=n[r];a.doLayout&&a.doLayout(!1,s)}i&&this.onLayout(t,s),this.hasLayout=!0,delete this.forceLayout},onLayout:Ext.emptyFn,shouldBufferLayout:function(){var t=this.hasLayout;return this.ownerCt?!!t&&!this.hasLayoutPending():t},hasLayoutPending:function(){var e=!1;return this.ownerCt.bubble(function(t){if(t.layoutPending)return!(e=!0)}),e},onShow:function(){Ext.Container.superclass.onShow.call(this),Ext.isDefined(this.deferLayout)&&(delete this.deferLayout,this.doLayout(!0))},getLayout:function(){var t;return this.layout||(t=new Ext.layout.AutoLayout(this.layoutConfig),this.setLayout(t)),this.layout},beforeDestroy:function(){var t;if(this.items)for(;t=this.items.first();)this.doRemove(t,!0);this.monitorResize&&Ext.EventManager.removeResizeListener(this.doLayout,this),Ext.destroy(this.layout),Ext.Container.superclass.beforeDestroy.call(this)},cascade:function(t,e,i){if(!1!==t.apply(e||this,i||[this])&&this.items)for(var s=this.items.items,n=0,r=s.length;n<r;n++)s[n].cascade?s[n].cascade(t,e,i):t.apply(e||s[n],i||[s[n]]);return this},findById:function(e){var i=null,s=this;return this.cascade(function(t){if(s!=t&&t.id===e)return i=t,!1}),i},findByType:function(e,i){return this.findBy(function(t){return t.isXType(e,i)})},find:function(e,i){return this.findBy(function(t){return t[e]===i})},findBy:function(e,i){var s=[],n=this;return this.cascade(function(t){n!=t&&!0===e.call(i||t,t,n)&&s.push(t)}),s},get:function(t){return this.getComponent(t)}}),Ext.Container.LAYOUTS={},Ext.reg("container",Ext.Container),Ext.layout.ContainerLayout=Ext.extend(Object,{monitorResize:!1,activeItem:null,constructor:function(t){this.id=Ext.id(null,"ext-layout-"),Ext.apply(this,t)},type:"container",IEMeasureHack:function(t,e){for(var i,s,n=t.dom.childNodes,r=n.length,o=[],a=0;a<r;a++)i=n[a],(s=Ext.get(i))&&(o[a]=s.getStyle("display"),s.setStyle({display:"none"}));for(e=t?t.getViewSize(e):{},a=0;a<r;a++)i=n[a],(s=Ext.get(i))&&s.setStyle({display:o[a]});return e},getLayoutTargetSize:Ext.EmptyFn,layout:function(){var t=this.container,e=t.getLayoutTarget();this.hasLayout||Ext.isEmpty(this.targetCls)||e.addClass(this.targetCls),this.onLayout(t,e),t.fireEvent("afterlayout",t,this)},onLayout:function(t,e){this.renderAll(t,e)},isValidParent:function(t,e){return e&&t.getPositionEl().dom.parentNode==(e.dom||e)},renderAll:function(t,e){for(var i,s=t.items.items,n=s.length,r=0;r<n;r++)!(i=s[r])||i.rendered&&this.isValidParent(i,e)||this.renderItem(i,r,e)},renderItem:function(t,e,i){t&&(t.rendered?this.isValidParent(t,i)||(Ext.isNumber(e)&&(e=i.dom.childNodes[e]),i.dom.insertBefore(t.getPositionEl().dom,e||null),t.container=i,this.configureItem(t)):(t.render(i,e),this.configureItem(t)))},getRenderedItems:function(t){for(var e,i=t.getLayoutTarget(),s=t.items.items,n=s.length,r=[],o=0;o<n;o++)(e=s[o]).rendered&&this.isValidParent(e,i)&&!1!==e.shouldLayout&&r.push(e);return r},configureItem:function(t){this.extraCls&&(t.getPositionEl?t.getPositionEl():t).addClass(this.extraCls),t.doLayout&&this.forceLayout&&t.doLayout(),this.renderHidden&&t!=this.activeItem&&t.hide()},onRemove:function(t){this.activeItem==t&&delete this.activeItem,t.rendered&&this.extraCls&&(t.getPositionEl?t.getPositionEl():t).removeClass(this.extraCls)},afterRemove:function(t){t.removeRestore&&(t.removeMode="container",delete t.removeRestore)},onResize:function(){var t,e=this.container;e.collapsed||((t=e.bufferResize&&e.shouldBufferLayout())?(this.resizeTask||(this.resizeTask=new Ext.util.DelayedTask(this.runLayout,this),this.resizeBuffer=Ext.isNumber(t)?t:50),e.layoutPending=!0,this.resizeTask.delay(this.resizeBuffer)):this.runLayout())},runLayout:function(){var t=this.container;this.layout(),t.onLayout(),delete t.layoutPending},setContainer:function(t){var e;this.monitorResize&&t!=this.container&&((e=this.container)&&e.un(e.resizeEvent,this.onResize,this),t&&t.on(t.resizeEvent,this.onResize,this)),this.container=t},parseMargins:function(t){var e=(t=Ext.isNumber(t)?t.toString():t).split(" "),t=e.length;return 1==t?e[1]=e[2]=e[3]=e[0]:2==t?(e[2]=e[0],e[3]=e[1]):3==t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0}},fieldTpl:function(){var t=new Ext.Template('<div class="x-form-item {itemCls}" tabIndex="-1">','<label for="{id}" style="{labelStyle}" class="x-form-item-label">{label}{labelSeparator}</label>','<div class="x-form-element" id="x-form-el-{id}" style="{elementStyle}">','</div><div class="{clearCls}"></div>',"</div>");return t.disableFormats=!0,t.compile()}(),destroy:function(){var t;this.resizeTask&&this.resizeTask.cancel&&this.resizeTask.cancel(),this.container&&this.container.un(this.container.resizeEvent,this.onResize,this),Ext.isEmpty(this.targetCls)||(t=this.container.getLayoutTarget())&&t.removeClass(this.targetCls)}}),Ext.layout.AutoLayout=Ext.extend(Ext.layout.ContainerLayout,{type:"auto",monitorResize:!0,onLayout:function(t,e){Ext.layout.AutoLayout.superclass.onLayout.call(this,t,e);for(var i,s=this.getRenderedItems(t),n=s.length,r=0;r<n;r++)(i=s[r]).doLayout&&i.doLayout(!0)}}),Ext.Container.LAYOUTS.auto=Ext.layout.AutoLayout,Ext.layout.FitLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"fit",getLayoutTargetSize:function(){var t=this.container.getLayoutTarget();return t?t.getStyleSize():{}},onLayout:function(t,e){Ext.layout.FitLayout.superclass.onLayout.call(this,t,e),t.collapsed||this.setItemSize(this.activeItem||t.items.itemAt(0),this.getLayoutTargetSize())},setItemSize:function(t,e){t&&0<e.height&&t.setSize(e)}}),Ext.Container.LAYOUTS.fit=Ext.layout.FitLayout,Ext.layout.CardLayout=Ext.extend(Ext.layout.FitLayout,{deferredRender:!1,layoutOnCardChange:!1,renderHidden:!0,type:"card",setActiveItem:function(t){var e=this.activeItem;if((t=this.container.getComponent(t))&&e!=t){if(e){if(e.hide(),!0!==e.hidden)return!1;e.fireEvent("deactivate",e)}e=t.doLayout&&(this.layoutOnCardChange||!t.rendered);delete(this.activeItem=t).deferLayout,t.show(),this.layout(),e&&t.doLayout(),t.fireEvent("activate",t)}},renderAll:function(t,e){this.deferredRender?this.renderItem(this.activeItem,void 0,e):Ext.layout.CardLayout.superclass.renderAll.call(this,t,e)}}),Ext.Container.LAYOUTS.card=Ext.layout.CardLayout,Ext.layout.AnchorLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,getLayoutTargetSize:function(){var t=this.container.getLayoutTarget(),e={};return t&&(e=t.getViewSize(),(e=Ext.isIE9m&&Ext.isStrict&&0==e.width?t.getStyleSize():e).width-=t.getPadding("lr"),e.height-=t.getPadding("tb")),e},onLayout:function(t,e){Ext.layout.AnchorLayout.superclass.onLayout.call(this,t,e);var i,s,n,r,o,a,l,d,h=this.getLayoutTargetSize(),c=h.width,u=h.height,f=e.getStyle("overflow"),p=this.getRenderedItems(t),m=p.length,g=[];if(!(c<20&&u<20)){for(t.anchorSize?"number"==typeof t.anchorSize?s=t.anchorSize:(s=t.anchorSize.width,n=t.anchorSize.height):(s=t.initialConfig.width,n=t.initialConfig.height),l=0;l<m;l++)d=(r=p[l]).getPositionEl(),r.anchor||!r.items||Ext.isNumber(r.width)||Ext.isIE6&&Ext.isStrict||(r.anchor=this.defaultAnchor),r.anchor&&((o=r.anchorSpec)||(a=r.anchor.split(" "),r.anchorSpec=o={right:this.parseAnchor(a[0],r.initialConfig.width,s),bottom:this.parseAnchor(a[1],r.initialConfig.height,n)}),a=o.right?this.adjustWidthAnchor(o.right(c)-d.getMargins("lr"),r):void 0,d=o.bottom?this.adjustHeightAnchor(o.bottom(u)-d.getMargins("tb"),r):void 0,(a||d)&&g.push({component:r,width:a||void 0,height:d||void 0}));for(l=0,m=g.length;l<m;l++)(i=g[l]).component.setSize(i.width,i.height);f&&"hidden"!=f&&!this.adjustmentPass&&((f=this.getLayoutTargetSize()).width==h.width&&f.height==h.height||(this.adjustmentPass=!0,this.onLayout(t,e))),delete this.adjustmentPass}},parseAnchor:function(e,t,i){if(e&&"none"!=e){var s;if(this.parseAnchorRE.test(e)){var n=i-t;return function(t){if(t!==s)return(s=t)-n}}if(-1!=e.indexOf("%")){var r=.01*parseFloat(e.replace("%",""));return function(t){if(t!==s)return s=t,Math.floor(t*r)}}if(e=parseInt(e,10),!isNaN(e))return function(t){if(t!==s)return(s=t)+e}}return!1},adjustWidthAnchor:function(t,e){return t},adjustHeightAnchor:function(t,e){return t}}),Ext.Container.LAYOUTS.anchor=Ext.layout.AnchorLayout,Ext.layout.ColumnLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"column",extraCls:"x-column",scrollOffset:0,targetCls:"x-column-layout-ct",isValidParent:function(t,e){return this.innerCt&&t.getPositionEl().dom.parentNode==this.innerCt.dom},getLayoutTargetSize:function(){var t,e=this.container.getLayoutTarget();return e&&(t=e.getViewSize(),(t=Ext.isIE9m&&Ext.isStrict&&0==t.width?e.getStyleSize():t).width-=e.getPadding("lr"),t.height-=e.getPadding("tb")),t},renderAll:function(t,e){this.innerCt||(this.innerCt=e.createChild({cls:"x-column-inner"}),this.innerCt.createChild({cls:"x-clear"})),Ext.layout.ColumnLayout.superclass.renderAll.call(this,t,this.innerCt)},onLayout:function(t,e){var i,s,n,r=t.items.items,o=r.length,a=[];this.renderAll(t,e);var l=this.getLayoutTargetSize();if(!(Ext.isIE9m&&l.width<1&&l.height<1)){var d=l.width-this.scrollOffset,h=(l.height,d);for(this.innerCt.setWidth(d),s=0;s<o;s++)n=(i=r[s]).getPositionEl().getMargins("lr"),a[s]=n,i.columnWidth||(h-=i.getWidth()+n);for(h=h<0?0:h,s=0;s<o;s++)i=r[s],n=a[s],i.columnWidth&&i.setSize(Math.floor(i.columnWidth*h)-n);Ext.isIE9m&&(s=e.getStyle("overflow")&&"hidden"!=s&&!this.adjustmentPass)&&this.getLayoutTargetSize().width!=l.width&&(this.adjustmentPass=!0,this.onLayout(t,e)),delete this.adjustmentPass}}}),Ext.Container.LAYOUTS.column=Ext.layout.ColumnLayout,Ext.layout.BorderLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,rendered:!1,type:"border",targetCls:"x-border-layout-ct",getLayoutTargetSize:function(){var t=this.container.getLayoutTarget();return t?t.getViewSize():{}},onLayout:function(t,e){var i,s,n,r=t.items.items,o=r.length;if(!this.rendered){for(i=[],s=0;s<o;s++)n=(l=r[s]).region,l.collapsed&&i.push(l),l.collapsed=!1,l.rendered||(l.render(e,s),l.getPositionEl().addClass("x-border-panel")),this[n]=new("center"!=n&&l.split?Ext.layout.BorderLayout.SplitRegion:Ext.layout.BorderLayout.Region)(this,l.initialConfig,n),this[n].render(e,l);this.rendered=!0}var a=this.getLayoutTargetSize();if(a.width<20||a.height<20)i&&(this.restoreCollapsed=i);else{this.restoreCollapsed&&(i=this.restoreCollapsed,delete this.restoreCollapsed);var l,d,h,c,u,f=a.width,p=a.height,m=f,g=p,x=0,E=0,v=this.north,y=this.south,b=this.west,w=this.east;if(!(l=this.center)&&!1!==Ext.layout.BorderLayout.WARN)throw"No center region defined in BorderLayout "+t.id;if(v&&v.isVisible()&&(d=v.getSize(),c=v.getMargins(),d.width=f-(c.left+c.right),d.x=c.left,d.y=c.top,g-=x=d.height+d.y+c.bottom,v.applyLayout(d)),y&&y.isVisible()&&(d=y.getSize(),c=y.getMargins(),d.width=f-(c.left+c.right),d.x=c.left,v=d.height+c.top+c.bottom,d.y=p-v+c.top,g-=v,y.applyLayout(d)),b&&b.isVisible()&&(d=b.getSize(),c=b.getMargins(),d.height=g-(c.top+c.bottom),d.x=c.left,d.y=x+c.top,E+=h=d.width+c.left+c.right,m-=h,b.applyLayout(d)),w&&w.isVisible()&&(d=w.getSize(),c=w.getMargins(),d.height=g-(c.top+c.bottom),h=d.width+c.left+c.right,d.x=f-h+c.left,d.y=x+c.top,m-=h,w.applyLayout(d)),l&&(u={x:E+(c=l.getMargins()).left,y:x+c.top,width:m-(c.left+c.right),height:g-(c.top+c.bottom)},l.applyLayout(u)),i)for(s=0,o=i.length;s<o;s++)i[s].collapse(!1);Ext.isIE9m&&Ext.isStrict&&e.repaint(),(s=e.getStyle("overflow")&&"hidden"!=s&&!this.adjustmentPass)&&((u=this.getLayoutTargetSize()).width==a.width&&u.height==a.height||(this.adjustmentPass=!0,this.onLayout(t,e))),delete this.adjustmentPass}},destroy:function(){for(var t,e=["north","south","east","west"],i=0;i<e.length;i++)(t=this[e[i]])&&(t.destroy?t.destroy():t.split&&t.split.destroy(!0));Ext.layout.BorderLayout.superclass.destroy.call(this)}}),Ext.layout.BorderLayout.Region=function(t,e,i){Ext.apply(this,e),this.layout=t,this.position=i,this.state={},"string"==typeof this.margins&&(this.margins=this.layout.parseMargins(this.margins)),this.margins=Ext.applyIf(this.margins||{},this.defaultMargins),this.collapsible&&("string"==typeof this.cmargins&&(this.cmargins=this.layout.parseMargins(this.cmargins)),"mini"!=this.collapseMode||this.cmargins?this.cmargins=Ext.applyIf(this.cmargins||{},"north"==i||"south"==i?this.defaultNSCMargins:this.defaultEWCMargins):this.cmargins={left:0,top:0,right:0,bottom:0})},Ext.layout.BorderLayout.Region.prototype={collapsible:!1,split:!1,floatable:!0,minWidth:50,minHeight:50,defaultMargins:{left:0,top:0,right:0,bottom:0},defaultNSCMargins:{left:5,top:5,right:5,bottom:5},defaultEWCMargins:{left:5,top:0,right:5,bottom:0},floatingZIndex:100,isCollapsed:!1,render:function(t,e){(this.panel=e).el.enableDisplayMode(),this.targetEl=t,this.el=e.el;var i=e.getState,t=this.position;e.getState=function(){return Ext.apply(i.call(e)||{},this.state)}.createDelegate(this),"center"!=t&&(e.allowQueuedExpand=!1,e.on({beforecollapse:this.beforeCollapse,collapse:this.onCollapse,beforeexpand:this.beforeExpand,expand:this.onExpand,hide:this.onHide,show:this.onShow,scope:this}),(this.collapsible||this.floatable)&&(e.collapseEl="el",e.slideAnchor=this.getSlideAnchor()),e.tools&&e.tools.toggle&&(e.tools.toggle.addClass("x-tool-collapse-"+t),e.tools.toggle.addClassOnOver("x-tool-collapse-"+t+"-over")))},getCollapsedEl:function(){var t;return this.collapsedEl||(this.toolTemplate||((t=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>')).disableFormats=!0,t.compile(),Ext.layout.BorderLayout.Region.prototype.toolTemplate=t),this.collapsedEl=this.targetEl.createChild({cls:"x-layout-collapsed x-layout-collapsed-"+this.position,id:this.panel.id+"-xcollapsed"}),this.collapsedEl.enableDisplayMode("block"),"mini"==this.collapseMode?(this.collapsedEl.addClass("x-layout-cmini-"+this.position),this.miniCollapsedEl=this.collapsedEl.createChild({cls:"x-layout-mini x-layout-mini-"+this.position,html:"&#160;"}),this.miniCollapsedEl.addClassOnOver("x-layout-mini-over"),this.collapsedEl.addClassOnOver("x-layout-collapsed-over"),this.collapsedEl.on("click",this.onExpandClick,this,{stopEvent:!0})):(!1===this.collapsible||this.hideCollapseTool||((t=this.expandToolEl=this.toolTemplate.append(this.collapsedEl.dom,{id:"expand-"+this.position},!0)).addClassOnOver("x-tool-expand-"+this.position+"-over"),t.on("click",this.onExpandClick,this,{stopEvent:!0})),!1===this.floatable&&!this.titleCollapse||(this.collapsedEl.addClassOnOver("x-layout-collapsed-over"),this.collapsedEl.on("click",this[this.floatable?"collapseClick":"onExpandClick"],this)))),this.collapsedEl},onExpandClick:function(t){this.isSlid?this.panel.expand(!1):this.panel.expand()},onCollapseClick:function(t){this.panel.collapse()},beforeCollapse:function(t,e){this.lastAnim=e,this.splitEl&&this.splitEl.hide(),this.getCollapsedEl().show();e=this.panel.getEl();this.originalZIndex=e.getStyle("z-index"),e.setStyle("z-index",100),this.isCollapsed=!0,this.layout.layout()},onCollapse:function(t){this.panel.el.setStyle("z-index",1),!1===this.lastAnim||!1===this.panel.animCollapse?this.getCollapsedEl().dom.style.visibility="visible":this.getCollapsedEl().slideIn(this.panel.slideAnchor,{duration:.2}),this.state.collapsed=!0,this.panel.saveState()},beforeExpand:function(t){this.isSlid&&this.afterSlideIn();var e=this.getCollapsedEl();this.el.show(),"east"==this.position||"west"==this.position?this.panel.setSize(void 0,e.getHeight()):this.panel.setSize(e.getWidth(),void 0),e.hide(),e.dom.style.visibility="hidden",this.panel.el.setStyle("z-index",this.floatingZIndex)},onExpand:function(){this.isCollapsed=!1,this.splitEl&&this.splitEl.show(),this.layout.layout(),this.panel.el.setStyle("z-index",this.originalZIndex),this.state.collapsed=!1,this.panel.saveState()},collapseClick:function(t){this.isSlid?(t.stopPropagation(),this.slideIn()):(t.stopPropagation(),this.slideOut())},onHide:function(){this.isCollapsed?this.getCollapsedEl().hide():this.splitEl&&this.splitEl.hide()},onShow:function(){this.isCollapsed?this.getCollapsedEl().show():this.splitEl&&this.splitEl.show()},isVisible:function(){return!this.panel.hidden},getMargins:function(){return this.isCollapsed&&this.cmargins?this.cmargins:this.margins},getSize:function(){return(this.isCollapsed?this.getCollapsedEl():this.panel).getSize()},setPanel:function(t){this.panel=t},getMinWidth:function(){return this.minWidth},getMinHeight:function(){return this.minHeight},applyLayoutCollapsed:function(t){var e=this.getCollapsedEl();e.setLeftTop(t.x,t.y),e.setSize(t.width,t.height)},applyLayout:function(t){this.isCollapsed?this.applyLayoutCollapsed(t):(this.panel.setPosition(t.x,t.y),this.panel.setSize(t.width,t.height))},beforeSlide:function(){this.panel.beforeEffect()},afterSlide:function(){this.panel.afterEffect()},initAutoHide:function(){!1!==this.autoHide&&(this.autoHideHd||(this.autoHideSlideTask=new Ext.util.DelayedTask(this.slideIn,this),this.autoHideHd={mouseout:function(t){t.within(this.el,!0)||this.autoHideSlideTask.delay(500)},mouseover:function(t){this.autoHideSlideTask.cancel()},scope:this}),this.el.on(this.autoHideHd),this.collapsedEl.on(this.autoHideHd))},clearAutoHide:function(){!1!==this.autoHide&&(this.el.un("mouseout",this.autoHideHd.mouseout),this.el.un("mouseover",this.autoHideHd.mouseover),this.collapsedEl.un("mouseout",this.autoHideHd.mouseout),this.collapsedEl.un("mouseover",this.autoHideHd.mouseover))},clearMonitor:function(){Ext.getDoc().un("click",this.slideInIf,this)},slideOut:function(){var t,e;this.isSlid||this.el.hasActiveFx()||(this.isSlid=!0,(t=this.panel.tools)&&t.toggle&&t.toggle.hide(),this.el.show(),e=this.panel.collapsed,this.panel.collapsed=!1,"east"==this.position||"west"==this.position?(t=this.panel.deferHeight,this.panel.deferHeight=!1,this.panel.setSize(void 0,this.collapsedEl.getHeight()),this.panel.deferHeight=t):this.panel.setSize(this.collapsedEl.getWidth(),void 0),this.panel.collapsed=e,this.restoreLT=[this.el.dom.style.left,this.el.dom.style.top],this.el.alignTo(this.collapsedEl,this.getCollapseAnchor()),this.el.setStyle("z-index",this.floatingZIndex+2),this.panel.el.replaceClass("x-panel-collapsed","x-panel-floating"),!1!==this.animFloat?(this.beforeSlide(),this.el.slideIn(this.getSlideAnchor(),{callback:function(){this.afterSlide(),this.initAutoHide(),Ext.getDoc().on("click",this.slideInIf,this)},scope:this,block:!0})):(this.initAutoHide(),Ext.getDoc().on("click",this.slideInIf,this)))},afterSlideIn:function(){this.clearAutoHide(),this.isSlid=!1,this.clearMonitor(),this.el.setStyle("z-index",""),this.panel.el.replaceClass("x-panel-floating","x-panel-collapsed"),this.el.dom.style.left=this.restoreLT[0],this.el.dom.style.top=this.restoreLT[1];var t=this.panel.tools;t&&t.toggle&&t.toggle.show()},slideIn:function(t){this.isSlid&&!this.el.hasActiveFx()?(this.isSlid=!1)!==this.animFloat?(this.beforeSlide(),this.el.slideOut(this.getSlideAnchor(),{callback:function(){this.el.hide(),this.afterSlide(),this.afterSlideIn(),Ext.callback(t)},scope:this,block:!0})):(this.el.hide(),this.afterSlideIn()):Ext.callback(t)},slideInIf:function(t){t.within(this.el)||this.slideIn()},anchors:{west:"left",east:"right",north:"top",south:"bottom"},sanchors:{west:"l",east:"r",north:"t",south:"b"},canchors:{west:"tl-tr",east:"tr-tl",north:"tl-bl",south:"bl-tl"},getAnchor:function(){return this.anchors[this.position]},getCollapseAnchor:function(){return this.canchors[this.position]},getSlideAnchor:function(){return this.sanchors[this.position]},getAlignAdj:function(){this.cmargins;switch(this.position){case"west":case"east":case"north":case"south":return[0,0]}},getExpandAdj:function(){var t=this.collapsedEl,e=this.cmargins;switch(this.position){case"west":return[-(e.right+t.getWidth()+e.left),0];case"east":return[e.right+t.getWidth()+e.left,0];case"north":return[0,-(e.top+e.bottom+t.getHeight())];case"south":return[0,e.top+e.bottom+t.getHeight()]}},destroy:function(){this.autoHideSlideTask&&this.autoHideSlideTask.cancel&&this.autoHideSlideTask.cancel(),Ext.destroyMembers(this,"miniCollapsedEl","collapsedEl","expandToolEl")}},Ext.layout.BorderLayout.SplitRegion=function(t,e,i){Ext.layout.BorderLayout.SplitRegion.superclass.constructor.call(this,t,e,i),this.applyLayout=this.applyFns[i]},Ext.extend(Ext.layout.BorderLayout.SplitRegion,Ext.layout.BorderLayout.Region,{splitTip:"Drag to resize.",collapsibleSplitTip:"Drag to resize. Double click to hide.",useSplitTips:!1,splitSettings:{north:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.TOP,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},south:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.BOTTOM,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},east:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.RIGHT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"},west:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.LEFT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"}},applyFns:{west:function(t){if(this.isCollapsed)return this.applyLayoutCollapsed(t);var e=this.splitEl.dom,i=e.style;this.panel.setPosition(t.x,t.y);e=e.offsetWidth;i.left=t.x+t.width-e+"px",i.top=t.y+"px",i.height=Math.max(0,t.height)+"px",this.panel.setSize(t.width-e,t.height)},east:function(t){if(this.isCollapsed)return this.applyLayoutCollapsed(t);var e=this.splitEl.dom,i=e.style,e=e.offsetWidth;this.panel.setPosition(t.x+e,t.y),i.left=t.x+"px",i.top=t.y+"px",i.height=Math.max(0,t.height)+"px",this.panel.setSize(t.width-e,t.height)},north:function(t){if(this.isCollapsed)return this.applyLayoutCollapsed(t);var e=this.splitEl.dom,i=e.style,e=e.offsetHeight;this.panel.setPosition(t.x,t.y),i.left=t.x+"px",i.top=t.y+t.height-e+"px",i.width=Math.max(0,t.width)+"px",this.panel.setSize(t.width,t.height-e)},south:function(t){if(this.isCollapsed)return this.applyLayoutCollapsed(t);var e=this.splitEl.dom,i=e.style,e=e.offsetHeight;this.panel.setPosition(t.x,t.y+e),i.left=t.x+"px",i.top=t.y+"px",i.width=Math.max(0,t.width)+"px",this.panel.setSize(t.width,t.height-e)}},render:function(t,e){Ext.layout.BorderLayout.SplitRegion.superclass.render.call(this,t,e);var i=this.position;this.splitEl=t.createChild({cls:"x-layout-split x-layout-split-"+i,html:"&#160;",id:this.panel.id+"-xsplit"}),"mini"==this.collapseMode&&(this.miniSplitEl=this.splitEl.createChild({cls:"x-layout-mini x-layout-mini-"+i,html:"&#160;"}),this.miniSplitEl.addClassOnOver("x-layout-mini-over"),this.miniSplitEl.on("click",this.onCollapseClick,this,{stopEvent:!0}));i=this.splitSettings[i];this.split=new Ext.SplitBar(this.splitEl.dom,e.el,i.orientation),this.split.tickSize=this.tickSize,this.split.placement=i.placement,this.split.getMaximumSize=this[i.maxFn].createDelegate(this),this.split.minSize=this.minSize||this[i.minProp],this.split.on("beforeapply",this.onSplitMove,this),this.split.useShim=!0===this.useShim,this.maxSize=this.maxSize||this[i.maxProp],e.hidden&&this.splitEl.hide(),this.useSplitTips&&(this.splitEl.dom.title=this.collapsible?this.collapsibleSplitTip:this.splitTip),this.collapsible&&this.splitEl.on("dblclick",this.onCollapseClick,this)},getSize:function(){if(this.isCollapsed)return this.collapsedEl.getSize();var t=this.panel.getSize();return"north"==this.position||"south"==this.position?t.height+=this.splitEl.dom.offsetHeight:t.width+=this.splitEl.dom.offsetWidth,t},getHMaxSize:function(){var t=this.maxSize||1e4,e=this.layout.center;return Math.min(t,this.el.getWidth()+e.el.getWidth()-e.getMinWidth())},getVMaxSize:function(){var t=this.maxSize||1e4,e=this.layout.center;return Math.min(t,this.el.getHeight()+e.el.getHeight()-e.getMinHeight())},onSplitMove:function(t,e){var i=this.panel.getSize();return this.lastSplitSize=e,"north"==this.position||"south"==this.position?(this.panel.setSize(i.width,e),this.state.height=e):(this.panel.setSize(e,i.height),this.state.width=e),this.layout.layout(),this.panel.saveState(),!1},getSplitBar:function(){return this.split},destroy:function(){Ext.destroy(this.miniSplitEl,this.split,this.splitEl),Ext.layout.BorderLayout.SplitRegion.superclass.destroy.call(this)}}),Ext.Container.LAYOUTS.border=Ext.layout.BorderLayout,Ext.layout.FormLayout=Ext.extend(Ext.layout.AnchorLayout,{labelSeparator:":",trackLabels:!0,type:"form",onRemove:function(t){Ext.layout.FormLayout.superclass.onRemove.call(this,t),this.trackLabels&&(t.un("show",this.onFieldShow,this),t.un("hide",this.onFieldHide,this));var e=t.getPositionEl(),i=t.getItemCt&&t.getItemCt();t.rendered&&i&&(e&&e.dom&&e.insertAfter(i),Ext.destroy(i),Ext.destroyMembers(t,"label","itemCt"),t.customItemCt&&Ext.destroyMembers(t,"getItemCt","customItemCt"))},setContainer:function(t){var e;Ext.layout.FormLayout.superclass.setContainer.call(this,t),t.labelAlign=t.labelAlign||this.labelAlign,t.labelAlign&&t.addClass("x-form-label-"+t.labelAlign),t.hideLabels||this.hideLabels?Ext.apply(this,{labelStyle:"display:none",elementStyle:"padding-left:0;",labelAdjust:0}):(this.labelSeparator=(Ext.isDefined(t.labelSeparator)?t:this).labelSeparator,t.labelWidth=t.labelWidth||this.labelWidth||100,Ext.isNumber(t.labelWidth)&&(e=t.labelPad||this.labelPad,e=Ext.isNumber(e)?e:5,Ext.apply(this,{labelAdjust:t.labelWidth+e,labelStyle:"width:"+t.labelWidth+"px;",elementStyle:"padding-left:"+(t.labelWidth+e)+"px"})),"top"==t.labelAlign&&Ext.apply(this,{labelStyle:"width:auto;",labelAdjust:0,elementStyle:"padding-left:0;"}))},isHide:function(t){return t.hideLabel||this.container.hideLabels},onFieldShow:function(t){t.getItemCt().removeClass("x-hide-"+t.hideMode),t.isComposite&&t.doLayout()},onFieldHide:function(t){t.getItemCt().addClass("x-hide-"+t.hideMode)},getLabelStyle:function(t){for(var e="",i=[this.labelStyle,t],s=0,n=i.length;s<n;++s)i[s]&&";"!=(e+=i[s]).substr(-1,1)&&(e+=";");return e},renderItem:function(t,e,i){var s;t&&(t.isFormField||t.fieldLabel)&&"hidden"!=t.inputType?(s=this.getTemplateArgs(t),Ext.isNumber(e)&&(e=i.dom.childNodes[e]||null),t.itemCt=e?this.fieldTpl.insertBefore(e,s,!0):this.fieldTpl.append(i,s,!0),t.getItemCt||Ext.apply(t,{getItemCt:function(){return t.itemCt},customItemCt:!0}),t.label=t.getItemCt().child("label.x-form-item-label"),t.rendered?this.isValidParent(t,i)||Ext.fly("x-form-el-"+t.id).appendChild(t.getPositionEl()):t.render("x-form-el-"+t.id),this.trackLabels&&(t.hidden&&this.onFieldHide(t),t.on({scope:this,show:this.onFieldShow,hide:this.onFieldHide})),this.configureItem(t)):Ext.layout.FormLayout.superclass.renderItem.apply(this,arguments)},getTemplateArgs:function(t){var e=!t.fieldLabel||t.hideLabel,i=(t.itemCls||this.container.itemCls||"")+(t.hideLabel?" x-hide-label":"");return Ext.isIE9&&Ext.isIEQuirks&&t instanceof Ext.form.TextField&&(i+=" x-input-wrapper"),{id:t.id,label:t.fieldLabel,itemCls:i,clearCls:t.clearCls||"x-form-clear-left",labelStyle:this.getLabelStyle(t.labelStyle),elementStyle:this.elementStyle||"",labelSeparator:e?"":(Ext.isDefined(t.labelSeparator)?t:this).labelSeparator}},adjustWidthAnchor:function(t,e){if(!e.label||this.isHide(e)||"top"==this.container.labelAlign)return t;e=Ext.isIE6||Ext.isIEQuirks;return t-this.labelAdjust+(e?-3:0)},adjustHeightAnchor:function(t,e){return e.label&&!this.isHide(e)&&"top"==this.container.labelAlign?t-e.label.getHeight():t},isValidParent:function(t,e){return e&&this.container.getEl().contains(t.getPositionEl())}}),Ext.Container.LAYOUTS.form=Ext.layout.FormLayout,Ext.layout.AccordionLayout=Ext.extend(Ext.layout.FitLayout,{fill:!0,autoWidth:!0,titleCollapse:!0,hideCollapseTool:!1,collapseFirst:!1,animate:!1,sequence:!1,activeOnTop:!1,type:"accordion",renderItem:function(t){!1===this.animate&&(t.animCollapse=!1),t.collapsible=!0,this.autoWidth&&(t.autoWidth=!0),this.titleCollapse&&(t.titleCollapse=!0),this.hideCollapseTool&&(t.hideCollapseTool=!0),void 0!==this.collapseFirst&&(t.collapseFirst=this.collapseFirst),this.activeItem||t.collapsed?this.activeItem&&this.activeItem!=t&&(t.collapsed=!0):this.setActiveItem(t,!0),Ext.layout.AccordionLayout.superclass.renderItem.apply(this,arguments),t.header.addClass("x-accordion-hd"),t.on("beforeexpand",this.beforeExpand,this)},onRemove:function(t){Ext.layout.AccordionLayout.superclass.onRemove.call(this,t),t.rendered&&t.header.removeClass("x-accordion-hd"),t.un("beforeexpand",this.beforeExpand,this)},beforeExpand:function(t,e){var i=this.activeItem;if(i)if(this.sequence){if(delete this.activeItem,!i.collapsed)return i.collapse({callback:function(){t.expand(e||!0)},scope:this}),!1}else i.collapse(this.animate);this.setActive(t),this.activeOnTop&&t.el.dom.parentNode.insertBefore(t.el.dom,t.el.dom.parentNode.firstChild),this.layout()},setItemSize:function(t,e){if(this.fill&&t){for(var i,s=0,n=this.getRenderedItems(this.container),r=n.length,o=0;o<r;o++)(i=n[o])==t||i.hidden||(s+=i.header.getHeight());e.height-=s,t.setSize(e)}},setActiveItem:function(t){this.setActive(t,!0)},setActive:function(t,e){var i=this.activeItem;i!=(t=this.container.getComponent(t))&&(t.rendered&&t.collapsed&&e?t.expand():(i&&i.fireEvent("deactivate",i),(this.activeItem=t).fireEvent("activate",t)))}}),Ext.Container.LAYOUTS.accordion=Ext.layout.AccordionLayout,Ext.layout.Accordion=Ext.layout.AccordionLayout,Ext.layout.TableLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!1,type:"table",targetCls:"x-table-layout-ct",tableAttrs:null,setContainer:function(t){Ext.layout.TableLayout.superclass.setContainer.call(this,t),this.currentRow=0,this.currentColumn=0,this.cells=[]},onLayout:function(t,e){t.items.items.length;this.table||(e.addClass("x-table-layout-ct"),this.table=e.createChild(Ext.apply({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},this.tableAttrs),null,!0)),this.renderAll(t,e)},getRow:function(t){t=this.table.tBodies[0].childNodes[t];return t||(t=document.createElement("tr"),this.table.tBodies[0].appendChild(t)),t},getNextCell:function(t){for(var e=this.getNextNonSpan(this.currentColumn,this.currentRow),i=this.currentColumn=e[0],s=this.currentRow=e[1],n=s;n<s+(t.rowspan||1);n++){this.cells[n]||(this.cells[n]=[]);for(var r=i;r<i+(t.colspan||1);r++)this.cells[n][r]=!0}var o=document.createElement("td");t.cellId&&(o.id=t.cellId);e="x-table-layout-cell";return t.cellCls&&(e+=" "+t.cellCls),o.className=e,t.colspan&&(o.colSpan=t.colspan),t.rowspan&&(o.rowSpan=t.rowspan),this.getRow(s).appendChild(o),o},getNextNonSpan:function(t,e){for(var i=this.columns;i&&i<=t||this.cells[e]&&this.cells[e][t];)i&&i<=t?(e++,t=0):t++;return[t,e]},renderItem:function(t,e,i){this.table||(this.table=i.createChild(Ext.apply({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},this.tableAttrs),null,!0)),t&&!t.rendered?(t.render(this.getNextCell(t)),this.configureItem(t)):t&&!this.isValidParent(t,i)&&((i=this.getNextCell(t)).insertBefore(t.getPositionEl().dom,null),t.container=Ext.get(i),this.configureItem(t))},isValidParent:function(t,e){return t.getPositionEl().up("table",5).dom.parentNode===(e.dom||e)},destroy:function(){delete this.table,Ext.layout.TableLayout.superclass.destroy.call(this)}}),Ext.Container.LAYOUTS.table=Ext.layout.TableLayout,Ext.layout.AbsoluteLayout=Ext.extend(Ext.layout.AnchorLayout,{extraCls:"x-abs-layout-item",type:"absolute",onLayout:function(t,e){e.position(),this.paddingLeft=e.getPadding("l"),this.paddingTop=e.getPadding("t"),Ext.layout.AbsoluteLayout.superclass.onLayout.call(this,t,e)},adjustWidthAnchor:function(t,e){return t&&t-e.getPosition(!0)[0]+this.paddingLeft},adjustHeightAnchor:function(t,e){return t&&t-e.getPosition(!0)[1]+this.paddingTop}}),Ext.Container.LAYOUTS.absolute=Ext.layout.AbsoluteLayout,Ext.layout.BoxLayout=Ext.extend(Ext.layout.ContainerLayout,{defaultMargins:{left:0,top:0,right:0,bottom:0},padding:"0",pack:"start",monitorResize:!0,type:"box",scrollOffset:0,extraCls:"x-box-item",targetCls:"x-box-layout-ct",innerCls:"x-box-inner",constructor:function(t){Ext.layout.BoxLayout.superclass.constructor.call(this,t),Ext.isString(this.defaultMargins)&&(this.defaultMargins=this.parseMargins(this.defaultMargins));var e=this.overflowHandler,t="none";(e="string"==typeof e?{type:e}:e)&&null!=e.type&&(t=e.type);t=Ext.layout.boxOverflow[t];t[this.type]&&(t=t[this.type]),this.overflowHandler=new t(this,e)},onLayout:function(t,e){Ext.layout.BoxLayout.superclass.onLayout.call(this,t,e);var i=this.getLayoutTargetSize(),s=this.getVisibleItems(t),n=this.calculateChildBoxes(s,i),r=n.boxes,o=n.meta;0<i.width&&((o=this.overflowHandler[o.tooNarrow?"handleOverflow":"clearOverflow"](n,i))&&(o.targetSize&&(i=o.targetSize),o.recalculate&&(s=this.getVisibleItems(t),r=(n=this.calculateChildBoxes(s,i)).boxes))),this.layoutTargetLastSize=i,this.childBoxCache=n,this.updateInnerCtSize(i,n),this.updateChildBoxes(r),this.handleTargetOverflow(i,t,e)},updateChildBoxes:function(t){for(var e=0,i=t.length;e<i;e++){var s=t[e],n=s.component;s.dirtySize&&n.setSize(s.width,s.height),isNaN(s.left)||isNaN(s.top)||n.setPosition(s.left,s.top)}},updateInnerCtSize:function(t,e){var i,s,n=this.align,r=this.padding,o=t.width,t=t.height;"hbox"==this.type?(s=o,i=e.meta.maxHeight+r.top+r.bottom,"stretch"==n?i=t:"middle"==n&&(i=Math.max(t,i))):(i=t,s=e.meta.maxWidth+r.left+r.right,"stretch"==n?s=o:"center"==n&&(s=Math.max(o,s))),this.innerCt.setSize(s||void 0,i||void 0)},handleTargetOverflow:function(t,e,i){var s=i.getStyle("overflow");s&&"hidden"!=s&&!this.adjustmentPass&&((s=this.getLayoutTargetSize()).width==t.width&&s.height==t.height||(this.adjustmentPass=!0,this.onLayout(e,i))),delete this.adjustmentPass},isValidParent:function(t,e){return this.innerCt&&t.getPositionEl().dom.parentNode==this.innerCt.dom},getVisibleItems:function(t){for(var e,i=(t=t||this.container).getLayoutTarget(),s=t.items.items,n=s.length,r=[],o=0;o<n;o++)(e=s[o]).rendered&&this.isValidParent(e,i)&&!0!==e.hidden&&!0!==e.collapsed&&!1!==e.shouldLayout&&r.push(e);return r},renderAll:function(t,e){this.innerCt||(this.innerCt=e.createChild({cls:this.innerCls}),this.padding=this.parseMargins(this.padding)),Ext.layout.BoxLayout.superclass.renderAll.call(this,t,this.innerCt)},getLayoutTargetSize:function(){var t,e=this.container.getLayoutTarget();return e&&(t=e.getViewSize(),(t=Ext.isIE9m&&Ext.isStrict&&0==t.width?e.getStyleSize():t).width-=e.getPadding("lr"),t.height-=e.getPadding("tb")),t},renderItem:function(t){Ext.isString(t.margins)?t.margins=this.parseMargins(t.margins):t.margins||(t.margins=this.defaultMargins),Ext.layout.BoxLayout.superclass.renderItem.apply(this,arguments)},destroy:function(){Ext.destroy(this.overflowHandler),Ext.layout.BoxLayout.superclass.destroy.apply(this,arguments)}}),Ext.layout.boxOverflow.None=Ext.extend(Object,{constructor:function(t,e){this.layout=t,Ext.apply(this,e||{})},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn}),Ext.layout.boxOverflow.none=Ext.layout.boxOverflow.None,Ext.layout.boxOverflow.Menu=Ext.extend(Ext.layout.boxOverflow.None,{afterCls:"x-strip-right",noItemsMenuText:'<div class="x-toolbar-no-items">(None)</div>',constructor:function(t){Ext.layout.boxOverflow.Menu.superclass.constructor.apply(this,arguments),this.menuItems=[]},createInnerElements:function(){this.afterCt||(this.afterCt=this.layout.innerCt.insertSibling({cls:this.afterCls},"before"))},clearOverflow:function(t,e){var i=e.width+(this.afterCt?this.afterCt.getWidth():0),s=this.menuItems;this.hideTrigger();for(var n=0,r=s.length;n<r;n++)s.pop().component.show();return{targetSize:{height:e.height,width:i}}},showTrigger:function(){this.createMenu(),this.menuTrigger.show()},hideTrigger:function(){null!=this.menuTrigger&&this.menuTrigger.hide()},beforeMenuShow:function(t){function e(t,e){return t.isXType("buttongroup")&&!(e instanceof Ext.Toolbar.Separator)}var i,s,n=this.menuItems,r=n.length;this.clearMenu(),t.removeAll();for(var o=0;o<r;o++)i=n[o].component,s&&(e(i,s)||e(s,i))&&t.add("-"),this.addComponentToMenu(t,i),s=i;t.items.length<1&&t.add(this.noItemsMenuText)},createMenuConfig:function(i,t){var e=Ext.apply({},i.initialConfig),s=i.toggleGroup;return Ext.copyTo(e,i,["iconCls","icon","itemId","disabled","handler","scope","menu"]),Ext.apply(e,{text:i.overflowText||i.text,hideOnClick:t}),(s||i.enableToggle)&&Ext.apply(e,{group:s,checked:i.pressed,listeners:{checkchange:function(t,e){i.toggle(e)}}}),delete e.ownerCt,delete e.xtype,delete e.id,e},addComponentToMenu:function(e,t){t instanceof Ext.Toolbar.Separator?e.add("-"):Ext.isFunction(t.isXType)&&(t.isXType("splitbutton")?e.add(this.createMenuConfig(t,!0)):t.isXType("button")?e.add(this.createMenuConfig(t,!t.menu)):t.isXType("buttongroup")&&t.items.each(function(t){this.addComponentToMenu(e,t)},this))},clearMenu:function(){var t=this.moreMenu;t&&t.items&&t.items.each(function(t){delete t.menu})},createMenu:function(){this.menuTrigger||(this.createInnerElements(),this.menu=new Ext.menu.Menu({ownerCt:this.layout.container,listeners:{scope:this,beforeshow:this.beforeMenuShow}}),this.menuTrigger=new Ext.Button({iconCls:"x-toolbar-more-icon",cls:"x-toolbar-more",menu:this.menu,renderTo:this.afterCt}))},destroy:function(){Ext.destroy(this.menu,this.menuTrigger)}}),Ext.layout.boxOverflow.menu=Ext.layout.boxOverflow.Menu,Ext.layout.boxOverflow.HorizontalMenu=Ext.extend(Ext.layout.boxOverflow.Menu,{constructor:function(){Ext.layout.boxOverflow.HorizontalMenu.superclass.constructor.apply(this,arguments);var l=this,d=l.layout,h=d.calculateChildBoxes;d.calculateChildBoxes=function(t,e){for(var i=h.apply(d,arguments),s=i.meta,n=l.menuItems,r=0,o=0,a=n.length;o<a;o++)r+=n[o].width;return s.minimumWidth+=r,s.tooNarrow=s.minimumWidth>e.width,i}},handleOverflow:function(t,e){this.showTrigger();for(var i=e.width-this.afterCt.getWidth(),s=t.boxes,n=0,r=!1,o=0,a=s.length;o<a;o++)n+=s[o].width;for(var l=i-n,d=0,o=0,a=this.menuItems.length;o<a;o++){var h=this.menuItems[o],c=h.component,h=h.width;if(!(h<l))break;c.show(),l-=h,d++,r=!0}if(r)this.menuItems=this.menuItems.slice(d);else for(var u=s.length-1;0<=u;u--){var f=s[u].component;if(!(i<=s[u].left+s[u].width))break;this.menuItems.unshift({component:f,width:s[u].width}),f.hide()}return 0==this.menuItems.length&&this.hideTrigger(),{targetSize:{height:e.height,width:i},recalculate:r}}}),Ext.layout.boxOverflow.menu.hbox=Ext.layout.boxOverflow.HorizontalMenu,Ext.layout.boxOverflow.Scroller=Ext.extend(Ext.layout.boxOverflow.None,{animateScroll:!0,scrollIncrement:100,wheelIncrement:3,scrollRepeatInterval:400,scrollDuration:.4,beforeCls:"x-strip-left",afterCls:"x-strip-right",scrollerCls:"x-strip-scroller",beforeScrollerCls:"x-strip-scroller-left",afterScrollerCls:"x-strip-scroller-right",createWheelListener:function(){this.layout.innerCt.on({scope:this,mousewheel:function(t){t.stopEvent(),this.scrollBy(t.getWheelDelta()*this.wheelIncrement*-1,!1)}})},handleOverflow:function(t,e){this.createInnerElements(),this.showScrollers()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){this.createScrollers(),this.beforeScroller.show(),this.afterScroller.show(),this.updateScrollButtons()},hideScrollers:function(){null!=this.beforeScroller&&(this.beforeScroller.hide(),this.afterScroller.hide())},createScrollers:function(){var t,e;this.beforeScroller||this.afterScroller||(t=this.beforeCt.createChild({cls:String.format("{0} {1} ",this.scrollerCls,this.beforeScrollerCls)}),e=this.afterCt.createChild({cls:String.format("{0} {1}",this.scrollerCls,this.afterScrollerCls)}),t.addClassOnOver(this.beforeScrollerCls+"-hover"),e.addClassOnOver(this.afterScrollerCls+"-hover"),t.setVisibilityMode(Ext.Element.DISPLAY),e.setVisibilityMode(Ext.Element.DISPLAY),this.beforeRepeater=new Ext.util.ClickRepeater(t,{interval:this.scrollRepeatInterval,handler:this.scrollLeft,scope:this}),this.afterRepeater=new Ext.util.ClickRepeater(e,{interval:this.scrollRepeatInterval,handler:this.scrollRight,scope:this}),this.beforeScroller=t,this.afterScroller=e)},destroy:function(){Ext.destroy(this.beforeScroller,this.afterScroller,this.beforeRepeater,this.afterRepeater,this.beforeCt,this.afterCt)},scrollBy:function(t,e){this.scrollTo(this.getScrollPosition()+t,e)},getItem:function(t){return Ext.isString(t)?t=Ext.getCmp(t):Ext.isNumber(t)&&(t=this.items[t]),t},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var t,e,i,s;null!=this.beforeScroller&&null!=this.afterScroller&&(t=this.atExtremeBefore()?"addClass":"removeClass",e=this.atExtremeAfter()?"addClass":"removeClass",i=this.beforeScrollerCls+"-disabled",s=this.afterScrollerCls+"-disabled",this.beforeScroller[t](i),this.afterScroller[e](s),this.scrolling=!1)},atExtremeBefore:function(){return 0===this.getScrollPosition()},scrollLeft:function(t){this.scrollBy(-this.scrollIncrement,t)},scrollRight:function(t){this.scrollBy(this.scrollIncrement,t)},scrollToItem:function(t,e){var i,s;null!=(t=this.getItem(t))&&((i=this.getItemVisibility(t)).fullyVisible||(t=(s=t.getBox(!0,!0)).x,i.hiddenRight&&(t-=this.layout.innerCt.getWidth()-s.width),this.scrollTo(t,e)))},getItemVisibility:function(t){var e=this.getItem(t).getBox(!0,!0),i=e.x,s=e.x+e.width,t=this.getScrollPosition(),e=this.layout.innerCt.getWidth()+t;return{hiddenLeft:i<t,hiddenRight:e<s,fullyVisible:t<i&&s<e}}}),Ext.layout.boxOverflow.scroller=Ext.layout.boxOverflow.Scroller,Ext.layout.boxOverflow.VerticalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{scrollIncrement:75,wheelIncrement:2,handleOverflow:function(t,e){return Ext.layout.boxOverflow.VerticalScroller.superclass.handleOverflow.apply(this,arguments),{targetSize:{height:e.height-(this.beforeCt.getHeight()+this.afterCt.getHeight()),width:e.width}}},createInnerElements:function(){var t=this.layout.innerCt;this.beforeCt||(this.beforeCt=t.insertSibling({cls:this.beforeCls},"before"),this.afterCt=t.insertSibling({cls:this.afterCls},"after"),this.createWheelListener())},scrollTo:function(t,e){var i=this.getScrollPosition(),t=t.constrain(0,this.getMaxScrollBottom());t==i||this.scrolling||(null==e&&(e=this.animateScroll),this.layout.innerCt.scrollTo("top",t,!!e&&this.getScrollAnim()),e?this.scrolling=!0:(this.scrolling=!1,this.updateScrollButtons()))},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollTop,10)||0},getMaxScrollBottom:function(){return this.layout.innerCt.dom.scrollHeight-this.layout.innerCt.getHeight()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollBottom()}}),Ext.layout.boxOverflow.scroller.vbox=Ext.layout.boxOverflow.VerticalScroller,Ext.layout.boxOverflow.HorizontalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{handleOverflow:function(t,e){return Ext.layout.boxOverflow.HorizontalScroller.superclass.handleOverflow.apply(this,arguments),{targetSize:{height:e.height,width:e.width-(this.beforeCt.getWidth()+this.afterCt.getWidth())}}},createInnerElements:function(){var t=this.layout.innerCt;this.beforeCt||(this.afterCt=t.insertSibling({cls:this.afterCls},"before"),this.beforeCt=t.insertSibling({cls:this.beforeCls},"before"),this.createWheelListener())},scrollTo:function(t,e){var i=this.getScrollPosition(),t=t.constrain(0,this.getMaxScrollRight());t==i||this.scrolling||(null==e&&(e=this.animateScroll),this.layout.innerCt.scrollTo("left",t,!!e&&this.getScrollAnim()),e?this.scrolling=!0:(this.scrolling=!1,this.updateScrollButtons()))},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollLeft,10)||0},getMaxScrollRight:function(){return this.layout.innerCt.dom.scrollWidth-this.layout.innerCt.getWidth()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollRight()}}),Ext.layout.boxOverflow.scroller.hbox=Ext.layout.boxOverflow.HorizontalScroller,Ext.layout.HBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:"top",type:"hbox",calculateChildBoxes:function(t,e){var i,s,n,r,o,a,l,d,h,c=t.length,u=this.padding,f=u.top,p=u.left,m=f+u.bottom,g=p+u.right,x=e.width-this.scrollOffset,u=e.height,E=Math.max(0,u-m),v="start"==this.pack,e="center"==this.pack,u="end"==this.pack,y=0,b=0,w=0,C=0,S=0,T=[];for(R=0;R<c;R++)n=(i=t[R]).height,s=i.width,o=!i.hasLayout&&"function"==typeof i.doLayout,"number"!=typeof s&&(i.flex&&!s?w+=i.flex:(!s&&o&&i.doLayout(),s=(d=i.getSize()).width,n=d.height)),y+=(d=(r=i.margins).left+r.right)+(s||0),C+=d+(i.flex?i.minWidth||0:s),S+=d+(i.minWidth||s||0),"number"!=typeof n&&(o&&i.doLayout(),n=i.getHeight()),b=Math.max(b,n+r.top+r.bottom),T.push({component:i,height:n||void 0,width:s||void 0});var I=C-x,m=x<S,g=Math.max(0,x-y-g);if(m)for(R=0;R<c;R++)T[R].width=t[R].minWidth||t[R].width||T[R].width;else if(0<I){for(var k=[],M=0,D=c;M<D;M++){var A=(N=t[M]).minWidth||0;N.flex?T[M].width=A:k.push({minWidth:A,available:T[M].width-A,index:M})}k.sort(function(t,e){return t.available>e.available?1:-1});for(var R=0,D=k.length;R<D;R++){var N,F,P,O=k[R].index;null!=O&&(N=t[O],P=T[O].width,A=N.minWidth,P=P-(F=Math.max(A,P-Math.ceil(I/(D-R)))),T[O].width=F,I-=P)}}else{var L=g,B=w;for(R=0;R<c;R++)i=t[R],a=T[R],h=(r=i.margins).top+r.bottom,v&&i.flex&&!i.width&&(L-=l=Math.ceil(i.flex/B*L),B-=i.flex,a.width=l,a.dirtySize=!0)}for(e?p+=g/2:u&&(p+=g),R=0;R<c;R++){switch(i=t[R],a=T[R],p+=(r=i.margins).left,h=r.top+r.bottom,a.left=p,a.top=f+r.top,this.align){case"stretch":a.height=(E-h).constrain(i.minHeight||0,i.maxHeight||1e6),a.dirtySize=!0;break;case"stretchmax":a.height=(b-h).constrain(i.minHeight||0,i.maxHeight||1e6),a.dirtySize=!0;break;case"middle":var _=E-a.height-h;0<_&&(a.top=f+h+_/2)}p+=a.width+r.right}return{boxes:T,meta:{maxHeight:b,nonFlexWidth:y,desiredWidth:C,minimumWidth:S,shortfall:C-x,tooNarrow:m}}}}),Ext.Container.LAYOUTS.hbox=Ext.layout.HBoxLayout,Ext.layout.VBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:"left",type:"vbox",calculateChildBoxes:function(t,e){var i,s,n,r,o,a,l,d,h,c=t.length,u=this.padding,f=u.top,p=u.left,m=f+u.bottom,g=p+u.right,x=e.width-this.scrollOffset,u=e.height,E=Math.max(0,x-g),v="start"==this.pack,e="center"==this.pack,x="end"==this.pack,y=0,b=0,w=0,C=0,S=0,T=[];for(R=0;R<c;R++)n=(i=t[R]).height,s=i.width,o=!i.hasLayout&&"function"==typeof i.doLayout,"number"!=typeof n&&(i.flex&&!n?w+=i.flex:(!n&&o&&i.doLayout(),s=(h=i.getSize()).width,n=h.height)),y+=(h=(r=i.margins).top+r.bottom)+(n||0),C+=h+(i.flex?i.minHeight||0:n),S+=h+(i.minHeight||n||0),"number"!=typeof s&&(o&&i.doLayout(),s=i.getWidth()),b=Math.max(b,s+r.left+r.right),T.push({component:i,height:n||void 0,width:s||void 0});var I=C-u,g=u<S,m=Math.max(0,u-y-m);if(g)for(R=0,D=c;R<D;R++)T[R].height=t[R].minHeight||t[R].height||T[R].height;else if(0<I){for(var k=[],M=0,D=c;M<D;M++){var A=(N=t[M]).minHeight||0;N.flex?T[M].height=A:k.push({minHeight:A,available:T[M].height-A,index:M})}k.sort(function(t,e){return t.available>e.available?1:-1});for(var R=0,D=k.length;R<D;R++){var N,F,P,O=k[R].index;null!=O&&(N=t[O],P=T[O].height,A=N.minHeight,P=P-(F=Math.max(A,P-Math.ceil(I/(D-R)))),T[O].height=F,I-=P)}}else{var L=m,B=w;for(R=0;R<c;R++)i=t[R],a=T[R],d=(r=i.margins).left+r.right,v&&i.flex&&!i.height&&(L-=l=Math.ceil(i.flex/B*L),B-=i.flex,a.height=l,a.dirtySize=!0)}for(e?f+=m/2:x&&(f+=m),R=0;R<c;R++){switch(i=t[R],a=T[R],f+=(r=i.margins).top,d=r.left+r.right,a.left=p+r.left,a.top=f,this.align){case"stretch":a.width=(E-d).constrain(i.minWidth||0,i.maxWidth||1e6),a.dirtySize=!0;break;case"stretchmax":a.width=(b-d).constrain(i.minWidth||0,i.maxWidth||1e6),a.dirtySize=!0;break;case"center":var _=E-a.width-d;0<_&&(a.left=p+d+_/2)}f+=a.height+r.bottom}return{boxes:T,meta:{maxWidth:b,nonFlexHeight:y,desiredHeight:C,minimumHeight:S,shortfall:C-u,tooNarrow:g}}}}),Ext.Container.LAYOUTS.vbox=Ext.layout.VBoxLayout,Ext.layout.ToolbarLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"toolbar",triggerWidth:18,noItemsMenuText:'<div class="x-toolbar-no-items">(None)</div>',lastOverflow:!1,tableHTML:['<table cellspacing="0" class="x-toolbar-ct">',"<tbody>","<tr>",'<td class="x-toolbar-left" align="{0}">','<table cellspacing="0">',"<tbody>",'<tr class="x-toolbar-left-row"></tr>',"</tbody>","</table>","</td>",'<td class="x-toolbar-right" align="right">','<table cellspacing="0" class="x-toolbar-right-ct">',"<tbody>","<tr>","<td>",'<table cellspacing="0">',"<tbody>",'<tr class="x-toolbar-right-row"></tr>',"</tbody>","</table>","</td>","<td>",'<table cellspacing="0">',"<tbody>",'<tr class="x-toolbar-extras-row"></tr>',"</tbody>","</table>","</td>","</tr>","</tbody>","</table>","</td>","</tr>","</tbody>","</table>"].join(""),onLayout:function(t,e){var i;this.leftTr||(i="center"==t.buttonAlign?"center":"left",e.addClass("x-toolbar-layout-ct"),e.insertHtml("beforeEnd",String.format(this.tableHTML,i)),this.leftTr=e.child("tr.x-toolbar-left-row",!0),this.rightTr=e.child("tr.x-toolbar-right-row",!0),this.extrasTr=e.child("tr.x-toolbar-extras-row",!0),null==this.hiddenItem&&(this.hiddenItems=[]));for(var s,n,r="right"==t.buttonAlign?this.rightTr:this.leftTr,o=t.items.items,a=0,l=0,d=o.length;l<d;l++,a++)(n=o[l]).isFill?(r=this.rightTr,a=-1):n.rendered?n.xtbHidden||this.isValidParent(n,r.childNodes[a])||((s=this.insertCell(n,r,a)).appendChild(n.getPositionEl().dom),n.container=Ext.get(s)):(n.render(this.insertCell(n,r,a)),this.configureItem(n));this.cleanup(this.leftTr),this.cleanup(this.rightTr),this.cleanup(this.extrasTr),this.fitToSize(e)},cleanup:function(t){for(var e,i=t.childNodes,s=i.length-1;0<=s&&(e=i[s]);s--)e.firstChild||t.removeChild(e)},insertCell:function(t,e,i){var s=document.createElement("td");return s.className="x-toolbar-cell",e.insertBefore(s,e.childNodes[i]||null),s},hideItem:function(t){this.hiddenItems.push(t),t.xtbHidden=!0,t.xtbWidth=t.getPositionEl().dom.parentNode.offsetWidth,t.hide()},unhideItem:function(t){t.show(),t.xtbHidden=!1,this.hiddenItems.remove(t)},getItemWidth:function(t){return t.hidden?t.xtbWidth||0:t.getPositionEl().dom.parentNode.offsetWidth},fitToSize:function(t){if(!1!==this.container.enableOverflow){var e=t.dom.clientWidth,i=t.dom.firstChild.offsetWidth,s=e-this.triggerWidth,n=this.lastWidth||0,r=this.hiddenItems,t=0!=r.length,n=n<=e;if((this.lastWidth=e)<i||t&&n)for(var o,a=this.container.items.items,l=a.length,d=0,h=0;h<l;h++)(o=a[h]).isFill||(s<(d+=this.getItemWidth(o))?o.hidden||o.xtbHidden||this.hideItem(o):o.xtbHidden&&this.unhideItem(o));(t=0!=r.length)?(this.initMore(),this.lastOverflow||(this.container.fireEvent("overflowchange",this.container,!0),this.lastOverflow=!0)):this.more&&(this.clearMenu(),this.more.destroy(),delete this.more,this.lastOverflow&&(this.container.fireEvent("overflowchange",this.container,!1),this.lastOverflow=!1))}},createMenuConfig:function(i,t){var e=Ext.apply({},i.initialConfig),s=i.toggleGroup;return Ext.copyTo(e,i,["iconCls","icon","itemId","disabled","handler","scope","menu"]),Ext.apply(e,{text:i.overflowText||i.text,hideOnClick:t}),(s||i.enableToggle)&&Ext.apply(e,{group:s,checked:i.pressed,listeners:{checkchange:function(t,e){i.toggle(e)}}}),delete e.ownerCt,delete e.xtype,delete e.id,e},addComponentToMenu:function(e,t){t instanceof Ext.Toolbar.Separator?e.add("-"):Ext.isFunction(t.isXType)&&(t.isXType("splitbutton")?e.add(this.createMenuConfig(t,!0)):t.isXType("button")?e.add(this.createMenuConfig(t,!t.menu)):t.isXType("buttongroup")&&t.items.each(function(t){this.addComponentToMenu(e,t)},this))},clearMenu:function(){var t=this.moreMenu;t&&t.items&&t.items.each(function(t){delete t.menu})},beforeMoreShow:function(t){function e(t,e){return t.isXType("buttongroup")&&!(e instanceof Ext.Toolbar.Separator)}var i,s,n=this.container.items.items,r=n.length;this.clearMenu(),t.removeAll();for(var o=0;o<r;o++)(i=n[o]).xtbHidden&&(s&&(e(i,s)||e(s,i))&&t.add("-"),this.addComponentToMenu(t,i),s=i);t.items.length<1&&t.add(this.noItemsMenuText)},initMore:function(){var t;this.more||(this.moreMenu=new Ext.menu.Menu({ownerCt:this.container,listeners:{beforeshow:this.beforeMoreShow,scope:this}}),this.more=new Ext.Button({iconCls:"x-toolbar-more-icon",cls:"x-toolbar-more",menu:this.moreMenu,ownerCt:this.container}),t=this.insertCell(this.more,this.extrasTr,100),this.more.render(t))},destroy:function(){Ext.destroy(this.more,this.moreMenu),delete this.leftTr,delete this.rightTr,delete this.extrasTr,Ext.layout.ToolbarLayout.superclass.destroy.call(this)}}),Ext.Container.LAYOUTS.toolbar=Ext.layout.ToolbarLayout,Ext.layout.MenuLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"menu",setContainer:function(t){this.monitorResize=!t.floating,t.on("autosize",this.doAutoSize,this),Ext.layout.MenuLayout.superclass.setContainer.call(this,t)},renderItem:function(t,e,i){var s;this.itemTpl||(this.itemTpl=Ext.layout.MenuLayout.prototype.itemTpl=new Ext.XTemplate('<li id="{itemId}" class="{itemCls}">','<tpl if="needsIcon">','<img alt="{altText}" src="{icon}" class="{iconCls}"/>',"</tpl>","</li>")),t&&!t.rendered?(Ext.isNumber(e)&&(e=i.dom.childNodes[e]),s=this.getItemArgs(t),t.render(t.positionEl=e?this.itemTpl.insertBefore(e,s,!0):this.itemTpl.append(i,s,!0)),t.positionEl.menuItemId=t.getItemId(),!s.isMenuItem&&s.needsIcon&&t.positionEl.addClass("x-menu-list-item-indent"),this.configureItem(t)):t&&!this.isValidParent(t,i)&&(Ext.isNumber(e)&&(e=i.dom.childNodes[e]),i.dom.insertBefore(t.getActionEl().dom,e||null))},getItemArgs:function(t){var e=t instanceof Ext.menu.Item;return{isMenuItem:e,needsIcon:!(e||t instanceof Ext.menu.Separator)&&(t.icon||t.iconCls),icon:t.icon||Ext.BLANK_IMAGE_URL,iconCls:"x-menu-item-icon "+(t.iconCls||""),itemId:"x-menu-el-"+t.id,itemCls:"x-menu-list-item ",altText:t.altText||""}},isValidParent:function(t,e){return t.el.up("li.x-menu-list-item",5).dom.parentNode===(e.dom||e)},onLayout:function(t,e){Ext.layout.MenuLayout.superclass.onLayout.call(this,t,e),this.doAutoSize()},doAutoSize:function(){var t=this.container,e=t.width;t.floating&&(e?t.setWidth(e):Ext.isIE9m&&(t.setWidth(Ext.isStrict&&(Ext.isIE7||Ext.isIE8||Ext.isIE9)?"auto":t.minWidth),(e=t.getEl()).dom.offsetWidth,t.setWidth(t.getLayoutTarget().getWidth()+e.getFrameWidth("lr"))))}}),Ext.Container.LAYOUTS.menu=Ext.layout.MenuLayout,Ext.Viewport=Ext.extend(Ext.Container,{initComponent:function(){Ext.Viewport.superclass.initComponent.call(this),document.getElementsByTagName("html")[0].className+=" x-viewport",this.el=Ext.getBody(),this.el.setHeight=Ext.emptyFn,this.el.setWidth=Ext.emptyFn,this.el.setSize=Ext.emptyFn,this.el.dom.scroll="no",this.allowDomMove=!1,this.autoWidth=!0,this.autoHeight=!0,Ext.EventManager.onWindowResize(this.fireResize,this),this.renderTo=this.el},fireResize:function(t,e){this.fireEvent("resize",this,t,e,t,e)}}),Ext.reg("viewport",Ext.Viewport),Ext.Panel=Ext.extend(Ext.Container,{baseCls:"x-panel",collapsedCls:"x-panel-collapsed",maskDisabled:!0,animCollapse:Ext.enableFx,headerAsText:!0,buttonAlign:"right",collapsed:!1,collapseFirst:!0,minButtonWidth:75,elements:"body",preventBodyReset:!1,padding:void 0,resizeEvent:"bodyresize",toolTarget:"header",collapseEl:"bwrap",slideAnchor:"t",disabledClass:"",deferHeight:!0,expandDefaults:{duration:.25},collapseDefaults:{duration:.25},initComponent:function(){Ext.Panel.superclass.initComponent.call(this),this.addEvents("bodyresize","titlechange","iconchange","collapse","expand","beforecollapse","beforeexpand","beforeclose","close","activate","deactivate"),this.unstyled&&(this.baseCls="x-plain"),this.toolbars=[],this.tbar&&(this.elements+=",tbar",this.topToolbar=this.createToolbar(this.tbar),this.tbar=null),this.bbar&&(this.elements+=",bbar",this.bottomToolbar=this.createToolbar(this.bbar),this.bbar=null),!0===this.header?(this.elements+=",header",this.header=null):(this.headerCfg||this.title&&!1!==this.header)&&(this.elements+=",header"),!this.footerCfg&&!0!==this.footer||(this.elements+=",footer",this.footer=null),this.buttons&&(this.fbar=this.buttons,this.buttons=null),this.fbar&&this.createFbar(this.fbar),this.autoLoad&&this.on("render",this.doAutoLoad,this,{delay:10})},createFbar:function(t){var e=this.minButtonWidth;this.elements+=",footer",this.fbar=this.createToolbar(t,{buttonAlign:this.buttonAlign,toolbarCls:"x-panel-fbar",enableOverflow:!1,defaults:function(t){return{minWidth:t.minWidth||e}}}),this.fbar.items.each(function(t){t.minWidth=t.minWidth||this.minButtonWidth},this),this.buttons=this.fbar.items.items},createToolbar:function(t,e){e=(t=Ext.isArray(t)?{items:t}:t).events?Ext.apply(t,e):this.createComponent(Ext.apply({},t,e),"toolbar");return this.toolbars.push(e),e},createElement:function(t,e){var i;this[t]?e.appendChild(this[t].dom):"bwrap"!==t&&-1==this.elements.indexOf(t)||(this[t+"Cfg"]?this[t]=Ext.fly(e).createChild(this[t+"Cfg"]):((i=document.createElement("div")).className=this[t+"Cls"],this[t]=Ext.get(e.appendChild(i))),this[t+"CssClass"]&&this[t].addClass(this[t+"CssClass"]),this[t+"Style"]&&this[t].applyStyles(this[t+"Style"]))},onRender:function(t,e){Ext.Panel.superclass.onRender.call(this,t,e),this.createClasses();var i,s,n,t=this.el,e=t.dom;this.collapsible&&!this.hideCollapseTool&&(this.tools=this.tools?this.tools.slice(0):[],this.tools[this.collapseFirst?"unshift":"push"]({id:"toggle",handler:this.toggleCollapse,scope:this})),this.tools&&(i=this.tools,this.elements+=!1!==this.header?",header":""),this.tools={},t.addClass(this.baseCls),e.firstChild&&(this.header=t.down("."+this.headerCls),this.bwrap=t.down("."+this.bwrapCls),n=this.bwrap||t,this.tbar=n.down("."+this.tbarCls),this.body=n.down("."+this.bodyCls),this.bbar=n.down("."+this.bbarCls),this.footer=n.down("."+this.footerCls),this.fromMarkup=!0),!0===this.preventBodyReset&&t.addClass("x-panel-reset"),this.cls&&t.addClass(this.cls),this.buttons&&(this.elements+=",footer"),this.frame?(t.insertHtml("afterBegin",String.format(Ext.Element.boxMarkup,this.baseCls)),this.createElement("header",e.firstChild.firstChild.firstChild),this.createElement("bwrap",e),s=this.bwrap.dom,n=e.childNodes[1],t=e.childNodes[2],s.appendChild(n),s.appendChild(t),t=s.firstChild.firstChild.firstChild,this.createElement("tbar",t),this.createElement("body",t),this.createElement("bbar",t),this.createElement("footer",s.lastChild.firstChild.firstChild),this.footer||(this.bwrap.dom.lastChild.className+=" x-panel-nofooter"),this.ft=Ext.get(this.bwrap.dom.lastChild),this.mc=Ext.get(t)):(this.createElement("header",e),this.createElement("bwrap",e),s=this.bwrap.dom,this.createElement("tbar",s),this.createElement("body",s),this.createElement("bbar",s),this.createElement("footer",s),this.header||(this.body.addClass(this.bodyCls+"-noheader"),this.tbar&&this.tbar.addClass(this.tbarCls+"-noheader"))),Ext.isDefined(this.padding)&&this.body.setStyle("padding",this.body.addUnits(this.padding)),!1===this.border&&(this.el.addClass(this.baseCls+"-noborder"),this.body.addClass(this.bodyCls+"-noborder"),this.header&&this.header.addClass(this.headerCls+"-noborder"),this.footer&&this.footer.addClass(this.footerCls+"-noborder"),this.tbar&&this.tbar.addClass(this.tbarCls+"-noborder"),this.bbar&&this.bbar.addClass(this.bbarCls+"-noborder")),!1===this.bodyBorder&&this.body.addClass(this.bodyCls+"-noborder"),this.bwrap.enableDisplayMode("block"),this.header&&(this.header.unselectable(),this.headerAsText&&(this.header.dom.innerHTML='<span class="'+this.headerTextCls+'">'+this.header.dom.innerHTML+"</span>",this.iconCls&&this.setIconClass(this.iconCls))),this.floating&&this.makeFloating(this.floating),this.collapsible&&this.titleCollapse&&this.header&&(this.mon(this.header,"click",this.toggleCollapse,this),this.header.setStyle("cursor","pointer")),i&&this.addTool.apply(this,i),this.fbar&&(this.footer.addClass("x-panel-btns"),(this.fbar.ownerCt=this).fbar.render(this.footer),this.footer.createChild({cls:"x-clear"})),this.tbar&&this.topToolbar&&(this.topToolbar.ownerCt=this).topToolbar.render(this.tbar),this.bbar&&this.bottomToolbar&&(this.bottomToolbar.ownerCt=this).bottomToolbar.render(this.bbar)},setIconClass:function(t){var e,i,s=this.iconCls;this.iconCls=t,this.rendered&&this.header&&(this.frame?(this.header.addClass("x-panel-icon"),this.header.replaceClass(s,this.iconCls)):(e=(i=this.header).child("img.x-panel-inline-icon"))?Ext.fly(e).replaceClass(s,this.iconCls):(i=i.child("span."+this.headerTextCls))&&Ext.DomHelper.insertBefore(i.dom,{tag:"img",alt:"",src:Ext.BLANK_IMAGE_URL,cls:"x-panel-inline-icon "+this.iconCls})),this.fireEvent("iconchange",this,t,s)},makeFloating:function(t){this.floating=!0,this.el=new Ext.Layer(Ext.apply({},t,{shadow:Ext.isDefined(this.shadow)?this.shadow:"sides",shadowOffset:this.shadowOffset,constrain:!1,shim:!1!==this.shim&&void 0}),this.el)},getTopToolbar:function(){return this.topToolbar},getBottomToolbar:function(){return this.bottomToolbar},getFooterToolbar:function(){return this.fbar},addButton:function(t,e,i){return this.fbar||this.createFbar([]),e&&(Ext.isString(t)&&(t={text:t}),t=Ext.apply({handler:e,scope:i},t)),this.fbar.add(t)},addTool:function(){if(!this.rendered)return this.tools||(this.tools=[]),void Ext.each(arguments,function(t){this.tools.push(t)},this);if(this[this.toolTarget]){var t;this.toolTemplate||((t=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>')).disableFormats=!0,t.compile(),Ext.Panel.prototype.toolTemplate=t);for(var e=0,i=arguments,s=i.length;e<s;e++){var n,r,o=i[e];this.tools[o.id]||(n="x-tool-"+o.id+"-over",r=this.toolTemplate.insertFirst(this[this.toolTarget],o,!0),(this.tools[o.id]=r).enableDisplayMode("block"),this.mon(r,"click",this.createToolHandler(r,o,n,this)),o.on&&this.mon(r,o.on),o.hidden&&r.hide(),o.qtip&&(Ext.isObject(o.qtip)?Ext.QuickTips.register(Ext.apply({target:r.id},o.qtip)):r.dom.qtip=o.qtip),r.addClassOnOver(n))}}},onLayout:function(t,e){Ext.Panel.superclass.onLayout.apply(this,arguments),this.hasLayout&&0<this.toolbars.length&&(Ext.each(this.toolbars,function(t){t.doLayout(void 0,e)}),this.syncHeight())},syncHeight:function(){var t=this.toolbarHeight,e=this.body,i=this.lastSize.height;!this.autoHeight&&Ext.isDefined(i)&&"auto"!=i&&t!=this.getToolbarHeight()&&(t=Math.max(0,i-this.getFrameHeight()),e.setHeight(t),e=e.getSize(),this.toolbarHeight=this.getToolbarHeight(),this.onBodyResize(e.width,e.height))},onShow:function(){if(this.floating)return this.el.show();Ext.Panel.superclass.onShow.call(this)},onHide:function(){if(this.floating)return this.el.hide();Ext.Panel.superclass.onHide.call(this)},createToolHandler:function(e,i,s,n){return function(t){e.removeClass(s),!1!==i.stopEvent&&t.stopEvent(),i.handler&&i.handler.call(i.scope||e,t,e,n,i)}},afterRender:function(){this.floating&&!this.hidden&&this.el.show(),this.title&&this.setTitle(this.title),Ext.Panel.superclass.afterRender.call(this),this.collapsed&&(this.collapsed=!1,this.collapse(!1)),this.initEvents()},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.KeyMap(this.el,this.keys)),this.keyMap},initEvents:function(){this.keys&&this.getKeyMap(),this.draggable&&this.initDraggable(),0<this.toolbars.length&&(Ext.each(this.toolbars,function(t){t.doLayout(),t.on({scope:this,afterlayout:this.syncHeight,remove:this.syncHeight})},this),this.syncHeight())},initDraggable:function(){this.dd=new Ext.Panel.DD(this,Ext.isBoolean(this.draggable)?null:this.draggable)},beforeEffect:function(t){this.floating&&this.el.beforeAction(),!1!==t&&this.el.addClass("x-panel-animated")},afterEffect:function(t){this.syncShadow(),this.el.removeClass("x-panel-animated")},createEffect:function(t,e,i){var s={scope:i,block:!0};return!0===t?(s.callback=e,s):(t.callback?s.callback=function(){e.call(i),Ext.callback(t.callback,t.scope)}:s.callback=e,Ext.applyIf(s,t))},collapse:function(t){if(!this.collapsed&&!this.el.hasFxBlock()&&!1!==this.fireEvent("beforecollapse",this,t)){var e=!0===t||!1!==t&&this.animCollapse;return this.beforeEffect(e),this.onCollapse(e,t),this}},onCollapse:function(t,e){t?this[this.collapseEl].slideOut(this.slideAnchor,Ext.apply(this.createEffect(e||!0,this.afterCollapse,this),this.collapseDefaults)):(this[this.collapseEl].hide(this.hideMode),this.afterCollapse(!1))},afterCollapse:function(t){this.collapsed=!0,this.el.addClass(this.collapsedCls),!1!==t&&this[this.collapseEl].hide(this.hideMode),this.afterEffect(t),this.cascade(function(t){t.lastSize&&(t.lastSize={width:void 0,height:void 0})}),this.fireEvent("collapse",this)},expand:function(t){if(this.collapsed&&!this.el.hasFxBlock()&&!1!==this.fireEvent("beforeexpand",this,t)){var e=!0===t||!1!==t&&this.animCollapse;return this.el.removeClass(this.collapsedCls),this.beforeEffect(e),this.onExpand(e,t),this}},onExpand:function(t,e){t?this[this.collapseEl].slideIn(this.slideAnchor,Ext.apply(this.createEffect(e||!0,this.afterExpand,this),this.expandDefaults)):(this[this.collapseEl].show(this.hideMode),this.afterExpand(!1))},afterExpand:function(t){(this.collapsed=!1)!==t&&this[this.collapseEl].show(this.hideMode),this.afterEffect(t),this.deferLayout&&(delete this.deferLayout,this.doLayout(!0)),this.fireEvent("expand",this)},toggleCollapse:function(t){return this[this.collapsed?"expand":"collapse"](t),this},onDisable:function(){this.rendered&&this.maskDisabled&&this.el.mask(),Ext.Panel.superclass.onDisable.call(this)},onEnable:function(){this.rendered&&this.maskDisabled&&this.el.unmask(),Ext.Panel.superclass.onEnable.call(this)},onResize:function(t,e,i,s){var n=t,r=e;(Ext.isDefined(n)||Ext.isDefined(r))&&(this.collapsed?(this.queuedBodySize={width:n,height:r},this.queuedExpand||!1===this.allowQueuedExpand||(this.queuedExpand=!0,this.on("expand",function(){delete this.queuedExpand,this.onResize(this.queuedBodySize.width,this.queuedBodySize.height)},this,{single:!0}))):(Ext.isNumber(n)?this.body.setWidth(n=this.adjustBodyWidth(n-this.getFrameWidth())):n=("auto"==n?this.body.setWidth("auto"):this.body).dom.offsetWidth,this.tbar&&(this.tbar.setWidth(n),this.topToolbar&&this.topToolbar.setSize(n)),this.bbar&&(this.bbar.setWidth(n),this.bottomToolbar&&(this.bottomToolbar.setSize(n),Ext.isIE9m&&(this.bbar.setStyle("position","static"),this.bbar.setStyle("position","")))),this.footer&&(this.footer.setWidth(n),this.fbar&&this.fbar.setSize(Ext.isIE9m?n-this.footer.getFrameWidth("lr"):"auto")),Ext.isNumber(r)?(r=Math.max(0,r-this.getFrameHeight()),this.body.setHeight(r)):"auto"==r&&this.body.setHeight(r),this.disabled&&this.el._mask&&this.el._mask.setSize(this.el.dom.clientWidth,this.el.getHeight())),this.onBodyResize(n,r)),this.syncShadow(),Ext.Panel.superclass.onResize.call(this,t,e,i,s)},onBodyResize:function(t,e){this.fireEvent("bodyresize",this,t,e)},getToolbarHeight:function(){var e=0;return this.rendered&&Ext.each(this.toolbars,function(t){e+=t.getHeight()},this),e},adjustBodyHeight:function(t){return t},adjustBodyWidth:function(t){return t},onPosition:function(){this.syncShadow()},getFrameWidth:function(){var t,e=this.el.getFrameWidth("lr")+this.bwrap.getFrameWidth("lr");return this.frame&&(t=this.bwrap.dom.firstChild,e+=Ext.fly(t).getFrameWidth("l")+Ext.fly(t.firstChild).getFrameWidth("r"),e+=this.mc.getFrameWidth("lr")),e},getFrameHeight:function(){var t=this.el.getFrameWidth("tb")+this.bwrap.getFrameWidth("tb");return t+=(this.tbar?this.tbar.getHeight():0)+(this.bbar?this.bbar.getHeight():0),this.frame?t+=this.el.dom.firstChild.offsetHeight+this.ft.dom.offsetHeight+this.mc.getFrameWidth("tb"):t+=(this.header?this.header.getHeight():0)+(this.footer?this.footer.getHeight():0),t},getInnerWidth:function(){return this.getSize().width-this.getFrameWidth()},getInnerHeight:function(){return this.body.getHeight()},syncShadow:function(){this.floating&&this.el.sync(!0)},getLayoutTarget:function(){return this.body},getContentTarget:function(){return this.body},setTitle:function(t,e){return this.title=t,this.header&&this.headerAsText&&this.header.child("span").update(t),e&&this.setIconClass(e),this.fireEvent("titlechange",this,t),this},getUpdater:function(){return this.body.getUpdater()},load:function(){var t=this.body.getUpdater();return t.update.apply(t,arguments),this},beforeDestroy:function(){if(Ext.Panel.superclass.beforeDestroy.call(this),this.header&&this.header.removeAllListeners(),this.tools)for(var t in this.tools)Ext.destroy(this.tools[t]);if(0<this.toolbars.length&&Ext.each(this.toolbars,function(t){t.un("afterlayout",this.syncHeight,this),t.un("remove",this.syncHeight,this)},this),Ext.isArray(this.buttons))for(;this.buttons.length;)Ext.destroy(this.buttons[0]);this.rendered&&(Ext.destroy(this.ft,this.header,this.footer,this.tbar,this.bbar,this.body,this.mc,this.bwrap,this.dd),this.fbar&&Ext.destroy(this.fbar,this.fbar.el)),Ext.destroy(this.toolbars)},createClasses:function(){this.headerCls=this.baseCls+"-header",this.headerTextCls=this.baseCls+"-header-text",this.bwrapCls=this.baseCls+"-bwrap",this.tbarCls=this.baseCls+"-tbar",this.bodyCls=this.baseCls+"-body",this.bbarCls=this.baseCls+"-bbar",this.footerCls=this.baseCls+"-footer"},createGhost:function(t,e,i){var s=document.createElement("div");if(s.className="x-panel-ghost "+(t||""),this.header&&s.appendChild(this.el.dom.firstChild.cloneNode(!0)),Ext.fly(s.appendChild(document.createElement("ul"))).setHeight(this.bwrap.getHeight()),s.style.width=this.el.dom.offsetWidth+"px",(i?Ext.getDom(i):this.container.dom).appendChild(s),!1===e||!1===this.el.useShim)return new Ext.Element(s);s=new Ext.Layer({shadow:!1,useDisplay:!0,constrain:!1},s);return s.show(),s},doAutoLoad:function(){var t=this.body.getUpdater();this.renderer&&t.setRenderer(this.renderer),t.update(Ext.isObject(this.autoLoad)?this.autoLoad:{url:this.autoLoad})},getTool:function(t){return this.tools[t]}}),Ext.reg("panel",Ext.Panel),Ext.Editor=function(t,e){t.field?(this.field=Ext.create(t.field,"textfield"),delete(e=Ext.apply({},t)).field):this.field=t,Ext.Editor.superclass.constructor.call(this,e)},Ext.extend(Ext.Editor,Ext.Component,{allowBlur:!0,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:!1,swallowKeys:!0,completeOnEnter:!0,cancelOnEsc:!0,updateEl:!1,initComponent:function(){Ext.Editor.superclass.initComponent.call(this),this.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onRender:function(t,e){this.el=new Ext.Layer({shadow:this.shadow,cls:"x-editor",parentEl:t,shim:this.shim,shadowOffset:this.shadowOffset||4,id:this.id,constrain:this.constrain}),this.zIndex&&this.el.setZIndex(this.zIndex),this.el.setStyle("overflow",Ext.isGecko?"auto":"hidden"),"title"!=this.field.msgTarget&&(this.field.msgTarget="qtip"),this.field.inEditor=!0,this.mon(this.field,{scope:this,blur:this.onBlur,specialkey:this.onSpecialKey}),this.field.grow&&this.mon(this.field,"autosize",this.el.sync,this.el,{delay:1}),this.field.render(this.el).show(),this.field.getEl().dom.name="",this.swallowKeys&&this.field.el.swallowEvent(["keypress","keydown"])},onSpecialKey:function(t,e){var i=e.getKey(),s=this.completeOnEnter&&i==e.ENTER,i=this.cancelOnEsc&&i==e.ESC;(s||i)&&(e.stopEvent(),s?this.completeEdit():this.cancelEdit(),t.triggerBlur&&t.triggerBlur()),this.fireEvent("specialkey",t,e)},startEdit:function(t,e){this.editing&&this.completeEdit(),this.boundEl=Ext.get(t);e=void 0!==e?e:this.boundEl.dom.innerHTML;this.rendered||this.render(this.parentEl||document.body),!1!==this.fireEvent("beforestartedit",this,this.boundEl,e)&&(this.startValue=e,this.field.reset(),this.field.setValue(e),this.realign(!0),this.editing=!0,this.show())},doAutoSize:function(){if(this.autoSize){var t=this.boundEl.getSize(),e=this.field.getSize();switch(this.autoSize){case"width":this.setSize(t.width,e.height);break;case"height":this.setSize(e.width,t.height);break;case"none":this.setSize(e.width,e.height);break;default:this.setSize(t.width,t.height)}}},setSize:function(t,e){delete this.field.lastSize,this.field.setSize(t,e),this.el&&((Ext.isGecko2||Ext.isOpera||Ext.isIE7&&Ext.isStrict)&&this.el.setSize(t,e),this.el.sync())},realign:function(t){!0===t&&this.doAutoSize(),this.el.alignTo(this.boundEl,this.alignment,this.offsets)},completeEdit:function(t){var e;this.editing&&(this.field.assertValue&&this.field.assertValue(),e=this.getValue(),this.field.isValid()?String(e)===String(this.startValue)&&this.ignoreNoChange?this.hideEdit(t):!1!==this.fireEvent("beforecomplete",this,e,this.startValue)&&(e=this.getValue(),this.updateEl&&this.boundEl&&this.boundEl.update(e),this.hideEdit(t),this.fireEvent("complete",this,e,this.startValue)):!1!==this.revertInvalid&&this.cancelEdit(t))},onShow:function(){this.el.show(),!1!==this.hideEl&&this.boundEl.hide(),this.field.show().focus(!1,!0),this.fireEvent("startedit",this.boundEl,this.startValue)},cancelEdit:function(t){var e;this.editing&&(e=this.getValue(),this.setValue(this.startValue),this.hideEdit(t),this.fireEvent("canceledit",this,e,this.startValue))},hideEdit:function(t){!0!==t&&(this.editing=!1,this.hide())},onBlur:function(){!0===this.allowBlur&&this.editing&&!0!==this.selectSameEditor&&this.completeEdit()},onHide:function(){this.editing?this.completeEdit():(this.field.blur(),this.field.collapse&&this.field.collapse(),this.el.hide(),!1!==this.hideEl&&this.boundEl.show())},setValue:function(t){this.field.setValue(t)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){Ext.destroyMembers(this,"field"),delete this.parentEl,delete this.boundEl}}),Ext.reg("editor",Ext.Editor),Ext.ColorPalette=Ext.extend(Ext.Component,{itemCls:"x-color-palette",value:null,clickEvent:"click",ctype:"Ext.ColorPalette",allowReselect:!1,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],initComponent:function(){Ext.ColorPalette.superclass.initComponent.call(this),this.addEvents("select"),this.handler&&this.on("select",this.handler,this.scope,!0)},onRender:function(t,e){this.autoEl={tag:"div",cls:this.itemCls},Ext.ColorPalette.superclass.onRender.call(this,t,e),(this.tpl||new Ext.XTemplate('<tpl for="."><a href="#" class="color-{.}" hidefocus="on"><em><span style="background:#{.}" class="x-unselectable" unselectable="on">&#160;</span></em></a></tpl>')).overwrite(this.el,this.colors),this.mon(this.el,this.clickEvent,this.handleClick,this,{delegate:"a"}),"click"!=this.clickEvent&&this.mon(this.el,"click",Ext.emptyFn,this,{delegate:"a",preventDefault:!0})},afterRender:function(){var t;Ext.ColorPalette.superclass.afterRender.call(this),this.value&&(t=this.value,this.value=null,this.select(t,!0))},handleClick:function(t,e){t.preventDefault(),this.disabled||(e=e.className.match(/(?:^|\s)color-(.{6})(?:\s|$)/)[1],this.select(e.toUpperCase()))},select:function(t,e){var i;(t=t.replace("#",""))==this.value&&!this.allowReselect||(i=this.el,this.value&&i.child("a.color-"+this.value).removeClass("x-color-palette-sel"),i.child("a.color-"+t).addClass("x-color-palette-sel"),this.value=t,!0!==e&&this.fireEvent("select",this,t))}}),Ext.reg("colorpalette",Ext.ColorPalette),Ext.DatePicker=Ext.extend(Ext.BoxComponent,{todayText:"Today",okText:"&#160;OK&#160;",cancelText:"Cancel",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",format:"m/d/y",disabledDaysText:"Disabled",disabledDatesText:"Disabled",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",startDay:0,showToday:!0,focusOnSelect:!0,initHour:12,initComponent:function(){Ext.DatePicker.superclass.initComponent.call(this),this.value=this.value?this.value.clearTime(!0):(new Date).clearTime(),this.addEvents("select"),this.handler&&this.on("select",this.handler,this.scope||this),this.initDisabledDays()},initDisabledDays:function(){var i,s,n;!this.disabledDatesRE&&this.disabledDates&&(i=this.disabledDates,s=i.length-1,n="(?:",Ext.each(i,function(t,e){n+=Ext.isDate(t)?"^"+Ext.escapeRe(t.dateFormat(this.format))+"$":i[e],e!=s&&(n+="|")},this),this.disabledDatesRE=new RegExp(n+")"))},setDisabledDates:function(t){Ext.isArray(t)?(this.disabledDates=t,this.disabledDatesRE=null):this.disabledDatesRE=t,this.initDisabledDays(),this.update(this.value,!0)},setDisabledDays:function(t){this.disabledDays=t,this.update(this.value,!0)},setMinDate:function(t){this.minDate=t,this.update(this.value,!0)},setMaxDate:function(t){this.maxDate=t,this.update(this.value,!0)},setValue:function(t){this.value=t.clearTime(!0),this.update(this.value)},getValue:function(){return this.value},focus:function(){this.update(this.activeDate)},onEnable:function(t){Ext.DatePicker.superclass.onEnable.call(this),this.doDisabled(!1),this.update(t?this.value:this.activeDate),Ext.isIE9m&&this.el.repaint()},onDisable:function(){Ext.DatePicker.superclass.onDisable.call(this),this.doDisabled(!0),Ext.isIE9m&&!Ext.isIE8&&Ext.each([].concat(this.textNodes,this.el.query("th span")),function(t){Ext.fly(t).repaint()})},doDisabled:function(t){this.keyNav.setDisabled(t),this.prevRepeater.setDisabled(t),this.nextRepeater.setDisabled(t),this.showToday&&(this.todayKeyListener.setDisabled(t),this.todayBtn.setDisabled(t))},onRender:function(t,e){for(var i=['<table cellspacing="0">','<tr><td class="x-date-left"><a href="#" title="',this.prevText,'">&#160;</a></td><td class="x-date-middle" align="center"></td><td class="x-date-right"><a href="#" title="',this.nextText,'">&#160;</a></td></tr>','<tr><td colspan="3"><table class="x-date-inner" cellspacing="0"><thead><tr>'],s=this.dayNames,n=0;n<7;n++){var r=this.startDay+n;6<r&&(r-=7),i.push("<th><span>",s[r].substr(0,1),"</span></th>")}for(i[i.length]="</tr></thead><tbody><tr>",n=0;n<42;n++)n%7==0&&0!==n&&(i[i.length]="</tr><tr>"),i[i.length]='<td><a href="#" hidefocus="on" class="x-date-date" tabIndex="1"><em><span></span></em></a></td>';i.push("</tr></tbody></table></td></tr>",this.showToday?'<tr><td colspan="3" class="x-date-bottom" align="center"></td></tr>':"",'</table><div class="x-date-mp"></div>');var o=document.createElement("div");o.className="x-date-picker",o.innerHTML=i.join(""),t.dom.insertBefore(o,e),this.el=Ext.get(o),this.eventEl=Ext.get(o.firstChild),this.prevRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-left a"),{handler:this.showPrevMonth,scope:this,preventDefault:!0,stopDefault:!0}),this.nextRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-right a"),{handler:this.showNextMonth,scope:this,preventDefault:!0,stopDefault:!0}),this.monthPicker=this.el.down("div.x-date-mp"),this.monthPicker.enableDisplayMode("block"),this.keyNav=new Ext.KeyNav(this.eventEl,{left:function(t){t.ctrlKey?this.showPrevMonth():this.update(this.activeDate.add("d",-1))},right:function(t){t.ctrlKey?this.showNextMonth():this.update(this.activeDate.add("d",1))},up:function(t){t.ctrlKey?this.showNextYear():this.update(this.activeDate.add("d",-7))},down:function(t){t.ctrlKey?this.showPrevYear():this.update(this.activeDate.add("d",7))},pageUp:function(t){this.showNextMonth()},pageDown:function(t){this.showPrevMonth()},enter:function(t){return t.stopPropagation(),!0},scope:this}),this.el.unselectable(),this.cells=this.el.select("table.x-date-inner tbody td"),this.textNodes=this.el.query("table.x-date-inner tbody span"),this.mbtn=new Ext.Button({text:"&#160;",tooltip:this.monthYearText,renderTo:this.el.child("td.x-date-middle",!0)}),this.mbtn.el.child("em").addClass("x-btn-arrow"),this.showToday&&(this.todayKeyListener=this.eventEl.addKeyListener(Ext.EventObject.SPACE,this.selectToday,this),o=(new Date).dateFormat(this.format),this.todayBtn=new Ext.Button({renderTo:this.el.child("td.x-date-bottom",!0),text:String.format(this.todayText,o),tooltip:String.format(this.todayTip,o),handler:this.selectToday,scope:this})),this.mon(this.eventEl,"mousewheel",this.handleMouseWheel,this),this.mon(this.eventEl,"click",this.handleDateClick,this,{delegate:"a.x-date-date"}),this.mon(this.mbtn,"click",this.showMonthPicker,this),this.onEnable(!0)},createMonthPicker:function(){if(!this.monthPicker.dom.firstChild){for(var t=['<table border="0" cellspacing="0">'],e=0;e<6;e++)t.push('<tr><td class="x-date-mp-month"><a href="#">',Date.getShortMonthName(e),"</a></td>",'<td class="x-date-mp-month x-date-mp-sep"><a href="#">',Date.getShortMonthName(e+6),"</a></td>",0===e?'<td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-prev"></a></td><td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-next"></a></td></tr>':'<td class="x-date-mp-year"><a href="#"></a></td><td class="x-date-mp-year"><a href="#"></a></td></tr>');t.push('<tr class="x-date-mp-btns"><td colspan="4"><button type="button" class="x-date-mp-ok">',this.okText,'</button><button type="button" class="x-date-mp-cancel">',this.cancelText,"</button></td></tr>","</table>"),this.monthPicker.update(t.join("")),this.mon(this.monthPicker,"click",this.onMonthClick,this),this.mon(this.monthPicker,"dblclick",this.onMonthDblClick,this),this.mpMonths=this.monthPicker.select("td.x-date-mp-month"),this.mpYears=this.monthPicker.select("td.x-date-mp-year"),this.mpMonths.each(function(t,e,i){t.dom.xmonth=(i+=1)%2==0?5+Math.round(.5*i):Math.round(.5*(i-1))})}},showMonthPicker:function(){var t;this.disabled||(this.createMonthPicker(),t=this.el.getSize(),this.monthPicker.setSize(t),this.monthPicker.child("table").setSize(t),this.mpSelMonth=(this.activeDate||this.value).getMonth(),this.updateMPMonth(this.mpSelMonth),this.mpSelYear=(this.activeDate||this.value).getFullYear(),this.updateMPYear(this.mpSelYear),this.monthPicker.slideIn("t",{duration:.2}))},updateMPYear:function(t){this.mpyear=t;for(var e=this.mpYears.elements,i=1;i<=10;i++){var s=e[i-1],n=i%2==0?t+Math.round(.5*i):t-(5-Math.round(.5*i));s.firstChild.innerHTML=n,s.xyear=n,this.mpYears.item(i-1)[n==this.mpSelYear?"addClass":"removeClass"]("x-date-mp-sel")}},updateMPMonth:function(s){this.mpMonths.each(function(t,e,i){t[t.dom.xmonth==s?"addClass":"removeClass"]("x-date-mp-sel")})},selectMPMonth:function(t){},onMonthClick:function(t,e){t.stopEvent();var i,e=new Ext.Element(e);e.is("button.x-date-mp-cancel")?this.hideMonthPicker():e.is("button.x-date-mp-ok")?((i=new Date(this.mpSelYear,this.mpSelMonth,(this.activeDate||this.value).getDate())).getMonth()!=this.mpSelMonth&&(i=new Date(this.mpSelYear,this.mpSelMonth,1).getLastDateOfMonth()),this.update(i),this.hideMonthPicker()):(i=e.up("td.x-date-mp-month",2))?(this.mpMonths.removeClass("x-date-mp-sel"),i.addClass("x-date-mp-sel"),this.mpSelMonth=i.dom.xmonth):(i=e.up("td.x-date-mp-year",2))?(this.mpYears.removeClass("x-date-mp-sel"),i.addClass("x-date-mp-sel"),this.mpSelYear=i.dom.xyear):e.is("a.x-date-mp-prev")?this.updateMPYear(this.mpyear-10):e.is("a.x-date-mp-next")&&this.updateMPYear(this.mpyear+10)},onMonthDblClick:function(t,e){t.stopEvent();t=new Ext.Element(e);(e=t.up("td.x-date-mp-month",2))?(this.update(new Date(this.mpSelYear,e.dom.xmonth,(this.activeDate||this.value).getDate())),this.hideMonthPicker()):(e=t.up("td.x-date-mp-year",2))&&(this.update(new Date(e.dom.xyear,this.mpSelMonth,(this.activeDate||this.value).getDate())),this.hideMonthPicker())},hideMonthPicker:function(t){this.monthPicker&&(!0===t?this.monthPicker.hide():this.monthPicker.slideOut("t",{duration:.2}))},showPrevMonth:function(t){this.update(this.activeDate.add("mo",-1))},showNextMonth:function(t){this.update(this.activeDate.add("mo",1))},showPrevYear:function(){this.update(this.activeDate.add("y",-1))},showNextYear:function(){this.update(this.activeDate.add("y",1))},handleMouseWheel:function(t){t.stopEvent(),this.disabled||(0<(t=t.getWheelDelta())?this.showPrevMonth():t<0&&this.showNextMonth())},handleDateClick:function(t,e){t.stopEvent(),this.disabled||!e.dateValue||Ext.fly(e.parentNode).hasClass("x-date-disabled")||(this.cancelFocus=!1===this.focusOnSelect,this.setValue(new Date(e.dateValue)),delete this.cancelFocus,this.fireEvent("select",this,this.value))},selectToday:function(){this.todayBtn&&!this.todayBtn.disabled&&(this.setValue((new Date).clearTime()),this.fireEvent("select",this,this.value))},update:function(t,e){if(this.rendered){var i=this.activeDate,s=this.isVisible();if(this.activeDate=t,!e&&i&&this.el){var n=t.getTime();if(i.getMonth()==t.getMonth()&&i.getFullYear()==t.getFullYear())return this.cells.removeClass("x-date-selected"),void this.cells.each(function(t){if(t.dom.firstChild.dateValue==n)return t.addClass("x-date-selected"),s&&!this.cancelFocus&&Ext.fly(t.dom.firstChild).focus(50),!1},this)}var r=t.getDaysInMonth(),o=t.getFirstDateOfMonth().getDay()-this.startDay;o<0&&(o+=7),r+=o;var i=t.add("mo",-1),a=i.getDaysInMonth()-o,l=this.cells.elements,d=this.textNodes,h=new Date(i.getFullYear(),i.getMonth(),a,this.initHour),c=(new Date).clearTime().getTime(),u=t.clearTime(!0).getTime(),f=this.minDate?this.minDate.clearTime(!0):Number.NEGATIVE_INFINITY,p=this.maxDate?this.maxDate.clearTime(!0):Number.POSITIVE_INFINITY,m=this.disabledDatesRE,g=this.disabledDatesText,x=!!this.disabledDays&&this.disabledDays.join(""),E=this.disabledDaysText,v=this.format;this.showToday&&(C=(w=(new Date).clearTime())<f||p<w||m&&v&&m.test(w.dateFormat(v))||x&&-1!=x.indexOf(w.getDay()),this.disabled||(this.todayBtn.setDisabled(C),this.todayKeyListener[C?"disable":"enable"]()));function y(t,e){e.title="";var i=h.clearTime(!0).getTime();return(e.firstChild.dateValue=i)==c&&(e.className+=" x-date-today",e.title=t.todayText),i==u&&(e.className+=" x-date-selected",s&&Ext.fly(e.firstChild).focus(50)),i<f?(e.className=" x-date-disabled",void(e.title=t.minText)):p<i?(e.className=" x-date-disabled",void(e.title=t.maxText)):(x&&-1!=x.indexOf(h.getDay())&&(e.title=E,e.className=" x-date-disabled"),void(m&&v&&(t=h.dateFormat(v),m.test(t)&&(e.title=g.replace("%0",t),e.className=" x-date-disabled"))))}for(var b=0;b<o;b++)d[b].innerHTML=++a,h.setDate(h.getDate()+1),l[b].className="x-date-prevday",y(this,l[b]);for(;b<r;b++)d[b].innerHTML=b-o+1,h.setDate(h.getDate()+1),l[b].className="x-date-active",y(this,l[b]);for(var w,C,S=0;b<42;b++)d[b].innerHTML=++S,h.setDate(h.getDate()+1),l[b].className="x-date-nextday",y(this,l[b]);this.mbtn.setText(this.monthNames[t.getMonth()]+" "+t.getFullYear()),this.internalRender||(C=(w=this.el.dom.firstChild).offsetWidth,this.el.setWidth(C+this.el.getBorderWidth("lr")),Ext.fly(w).setWidth(C),this.internalRender=!0,Ext.isOpera&&!this.secondPass&&(w.rows[0].cells[1].style.width=C-(w.rows[0].cells[0].offsetWidth+w.rows[0].cells[2].offsetWidth)+"px",this.secondPass=!0,this.update.defer(10,this,[t])))}},beforeDestroy:function(){this.rendered&&(Ext.destroy(this.keyNav,this.monthPicker,this.eventEl,this.mbtn,this.nextRepeater,this.prevRepeater,this.cells.el,this.todayBtn),delete this.textNodes,delete this.cells.elements)}}),Ext.reg("datepicker",Ext.DatePicker),Ext.LoadMask=function(t,e){this.el=Ext.get(t),Ext.apply(this,e),this.store?(this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.onLoad}),this.removeMask=Ext.value(this.removeMask,!1)):((e=this.el.getUpdater()).showLoadIndicator=!1,e.on({scope:this,beforeupdate:this.onBeforeLoad,update:this.onLoad,failure:this.onLoad}),this.removeMask=Ext.value(this.removeMask,!0))},Ext.LoadMask.prototype={msg:"Loading...",msgCls:"x-mask-loading",disabled:!1,disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},onLoad:function(){this.el.unmask(this.removeMask)},onBeforeLoad:function(){this.disabled||this.el.mask(this.msg,this.msgCls)},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){var t;this.store?(this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("exception",this.onLoad,this)):((t=this.el.getUpdater()).un("beforeupdate",this.onBeforeLoad,this),t.un("update",this.onLoad,this),t.un("failure",this.onLoad,this))}},Ext.slider.Thumb=Ext.extend(Object,{dragging:!1,constructor:function(t){Ext.apply(this,t||{},{cls:"x-slider-thumb",constrain:!1}),Ext.slider.Thumb.superclass.constructor.call(this,t),this.slider.vertical&&Ext.apply(this,Ext.slider.Thumb.Vertical)},render:function(){this.el=this.slider.innerEl.insertFirst({cls:this.cls}),this.initEvents()},enable:function(){this.disabled=!1,this.el.removeClass(this.slider.disabledClass)},disable:function(){this.disabled=!0,this.el.addClass(this.slider.disabledClass)},initEvents:function(){var t=this.el;t.addClassOnOver("x-slider-thumb-over"),this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeDragStart.createDelegate(this),onStart:this.onDragStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onDragEnd.createDelegate(this),tolerance:3,autoStart:300}),this.tracker.initEl(t)},onBeforeDragStart:function(t){return!this.disabled&&(this.slider.promoteThumb(this),!0)},onDragStart:function(t){this.el.addClass("x-slider-thumb-drag"),this.dragging=!0,this.dragStartValue=this.value,this.slider.fireEvent("dragstart",this.slider,t,this)},onDrag:function(t){var e,i,s=this.slider,n=this.index,r=this.getNewValue();this.constrain&&(e=s.thumbs[n+1],null!=(i=s.thumbs[n-1])&&r<=i.value&&(r=i.value),null!=e&&r>=e.value&&(r=e.value)),s.setValue(n,r,!1),s.fireEvent("drag",s,t,this)},getNewValue:function(){var t=this.slider,e=t.innerEl.translatePoints(this.tracker.getXY());return Ext.util.Format.round(t.reverseValue(e.left),t.decimalPrecision)},onDragEnd:function(t){var e=this.slider,i=this.value;this.el.removeClass("x-slider-thumb-drag"),this.dragging=!1,e.fireEvent("dragend",e,t),this.dragStartValue!=i&&e.fireEvent("changecomplete",e,i,this)},destroy:function(){Ext.destroyMembers(this,"tracker","el")}}),Ext.slider.MultiSlider=Ext.extend(Ext.BoxComponent,{vertical:!1,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:!0,animate:!0,constrainThumbs:!0,topThumbZIndex:1e4,initComponent:function(){Ext.isDefined(this.value)||(this.value=this.minValue),this.thumbs=[],Ext.slider.MultiSlider.superclass.initComponent.call(this),this.keyIncrement=Math.max(this.increment,this.keyIncrement),this.addEvents("beforechange","change","changecomplete","dragstart","drag","dragend"),null!=this.values&&!Ext.isEmpty(this.values)||(this.values=[0]);for(var t=this.values,e=0;e<t.length;e++)this.addThumb(t[e]);this.vertical&&Ext.apply(this,Ext.slider.Vertical)},addThumb:function(t){t=new Ext.slider.Thumb({value:t,slider:this,index:this.thumbs.length,constrain:this.constrainThumbs});this.thumbs.push(t),this.rendered&&t.render()},promoteThumb:function(t){for(var e,i,s=this.thumbs,n=0,r=s.length;n<r;n++)e=(i=s[n])==t?this.topThumbZIndex:"",i.el.setStyle("zIndex",e)},onRender:function(){this.autoEl={cls:"x-slider "+(this.vertical?"x-slider-vert":"x-slider-horz"),cn:{cls:"x-slider-end",cn:{cls:"x-slider-inner",cn:[{tag:"a",cls:"x-slider-focus",href:"#",tabIndex:"-1",hidefocus:"on"}]}}},Ext.slider.MultiSlider.superclass.onRender.apply(this,arguments),this.endEl=this.el.first(),this.innerEl=this.endEl.first(),this.focusEl=this.innerEl.child(".x-slider-focus");for(var t=0;t<this.thumbs.length;t++)this.thumbs[t].render();var e=this.innerEl.child(".x-slider-thumb");this.halfThumb=(this.vertical?e.getHeight():e.getWidth())/2,this.initEvents()},initEvents:function(){this.mon(this.el,{scope:this,mousedown:this.onMouseDown,keydown:this.onKeyDown}),this.focusEl.swallowEvent("click",!0)},onMouseDown:function(t){if(!this.disabled){for(var e,i=!1,s=0;s<this.thumbs.length;s++)i=i||t.target==this.thumbs[s].el.dom;this.clickToChange&&!i&&(e=this.innerEl.translatePoints(t.getXY()),this.onClickChange(e)),this.focus()}},onClickChange:function(t){var e;t.top>this.clickRange[0]&&t.top<this.clickRange[1]&&(e=this.getNearest(t,"left").index,this.setValue(e,Ext.util.Format.round(this.reverseValue(t.left),this.decimalPrecision),void 0,!0))},getNearest:function(t,e){for(var e="top"==e?this.innerEl.getHeight()-t[e]:t[e],i=this.reverseValue(e),s=this.maxValue-this.minValue+5,n=null,r=0;r<this.thumbs.length;r++){var o=this.thumbs[r],a=o.value,a=Math.abs(a-i);Math.abs(a<=s)&&(n=o,s=a)}return n},onKeyDown:function(t){var e;if(this.disabled||1!==this.thumbs.length)t.preventDefault();else switch(t.getKey()){case t.UP:case t.RIGHT:t.stopEvent(),e=t.ctrlKey?this.maxValue:this.getValue(0)+this.keyIncrement,this.setValue(0,e,void 0,!0);break;case t.DOWN:case t.LEFT:t.stopEvent(),e=t.ctrlKey?this.minValue:this.getValue(0)-this.keyIncrement,this.setValue(0,e,void 0,!0);break;default:t.preventDefault()}},doSnap:function(t){if(!this.increment||!t)return t;var e=t,i=this.increment,t=t%i;return 0!=t&&(e-=t,i<=2*t?e+=i:2*t<-i&&(e-=i)),e.constrain(this.minValue,this.maxValue)},afterRender:function(){Ext.slider.MultiSlider.superclass.afterRender.apply(this,arguments);for(var t=0;t<this.thumbs.length;t++){var e,i=this.thumbs[t];void 0!==i.value&&((e=this.normalizeValue(i.value))!==i.value?this.setValue(t,e,!1):this.moveThumb(t,this.translateValue(e),!1))}},getRatio:function(){var t=this.innerEl.getWidth(),e=this.maxValue-this.minValue;return 0==e?t:t/e},normalizeValue:function(t){return t=this.doSnap(t),t=(t=Ext.util.Format.round(t,this.decimalPrecision)).constrain(this.minValue,this.maxValue)},setMinValue:function(t){this.minValue=t;for(var e,i=0,s=this.thumbs,n=s.length;i<n;++i)(e=s[i]).value=e.value<t?t:e.value;this.syncThumb()},setMaxValue:function(t){this.maxValue=t;for(var e,i=0,s=this.thumbs,n=s.length;i<n;++i)(e=s[i]).value=e.value>t?t:e.value;this.syncThumb()},setValue:function(t,e,i,s){var n=this.thumbs[t];n.el;(e=this.normalizeValue(e))!==n.value&&!1!==this.fireEvent("beforechange",this,e,n.value,n)&&(n.value=e,this.rendered&&(this.moveThumb(t,this.translateValue(e),!1!==i),this.fireEvent("change",this,e,n),s&&this.fireEvent("changecomplete",this,e,n)))},translateValue:function(t){var e=this.getRatio();return t*e-this.minValue*e-this.halfThumb},reverseValue:function(t){var e=this.getRatio();return(t+this.minValue*e)/e},moveThumb:function(t,e,i){t=this.thumbs[t].el;i&&!1!==this.animate?t.shift({left:e,stopFx:!0,duration:.35}):t.setLeft(e)},focus:function(){this.focusEl.focus(10)},onResize:function(t,e){for(var i=this.thumbs,s=i.length,n=0;n<s;++n)i[n].el.stopFx();Ext.isNumber(t)&&this.innerEl.setWidth(t-(this.el.getPadding("l")+this.endEl.getPadding("r"))),this.syncThumb(),Ext.slider.MultiSlider.superclass.onResize.apply(this,arguments)},onDisable:function(){Ext.slider.MultiSlider.superclass.onDisable.call(this);for(var t=0;t<this.thumbs.length;t++){var e=this.thumbs[t],i=e.el;e.disable(),Ext.isIE&&(e=i.getXY(),i.hide(),this.innerEl.addClass(this.disabledClass).dom.disabled=!0,this.thumbHolder||(this.thumbHolder=this.endEl.createChild({cls:"x-slider-thumb "+this.disabledClass})),this.thumbHolder.show().setXY(e))}},onEnable:function(){Ext.slider.MultiSlider.superclass.onEnable.call(this);for(var t=0;t<this.thumbs.length;t++){var e=this.thumbs[t],i=e.el;e.enable(),Ext.isIE&&(this.innerEl.removeClass(this.disabledClass).dom.disabled=!1,this.thumbHolder&&this.thumbHolder.hide(),i.show(),this.syncThumb())}},syncThumb:function(){if(this.rendered)for(var t=0;t<this.thumbs.length;t++)this.moveThumb(t,this.translateValue(this.thumbs[t].value))},getValue:function(t){return this.thumbs[t].value},getValues:function(){for(var t=[],e=0;e<this.thumbs.length;e++)t.push(this.thumbs[e].value);return t},beforeDestroy:function(){for(var t=this.thumbs,e=0,i=t.length;e<i;++e)t[e].destroy(),t[e]=null;Ext.destroyMembers(this,"endEl","innerEl","focusEl","thumbHolder"),Ext.slider.MultiSlider.superclass.beforeDestroy.call(this)}}),Ext.reg("multislider",Ext.slider.MultiSlider),Ext.slider.SingleSlider=Ext.extend(Ext.slider.MultiSlider,{constructor:function(t){t=t||{},Ext.applyIf(t,{values:[t.value||0]}),Ext.slider.SingleSlider.superclass.constructor.call(this,t)},getValue:function(){return Ext.slider.SingleSlider.superclass.getValue.call(this,0)},setValue:function(t,e){var i=Ext.toArray(arguments),s=i.length;return(1==s||s<=3&&"number"!=typeof e)&&i.unshift(0),Ext.slider.SingleSlider.superclass.setValue.apply(this,i)},syncThumb:function(){return Ext.slider.SingleSlider.superclass.syncThumb.apply(this,[0].concat(arguments))},getNearest:function(){return this.thumbs[0]}}),Ext.Slider=Ext.slider.SingleSlider,Ext.reg("slider",Ext.slider.SingleSlider),Ext.slider.Vertical={onResize:function(t,e){this.innerEl.setHeight(e-(this.el.getPadding("t")+this.endEl.getPadding("b"))),this.syncThumb()},getRatio:function(){return this.innerEl.getHeight()/(this.maxValue-this.minValue)},moveThumb:function(t,e,i){t=this.thumbs[t].el;i&&!1!==this.animate?t.shift({bottom:e,stopFx:!0,duration:.35}):t.setBottom(e)},onClickChange:function(t){var e;t.left>this.clickRange[0]&&t.left<this.clickRange[1]&&(e=this.getNearest(t,"top").index,t=this.minValue+this.reverseValue(this.innerEl.getHeight()-t.top),this.setValue(e,Ext.util.Format.round(t,this.decimalPrecision),void 0,!0))}},Ext.slider.Thumb.Vertical={getNewValue:function(){var t=this.slider,e=t.innerEl,i=e.translatePoints(this.tracker.getXY()),i=e.getHeight()-i.top;return t.minValue+Ext.util.Format.round(i/t.getRatio(),t.decimalPrecision)}},Ext.ProgressBar=Ext.extend(Ext.BoxComponent,{baseCls:"x-progress",animate:!1,waitTimer:null,initComponent:function(){Ext.ProgressBar.superclass.initComponent.call(this),this.addEvents("update")},onRender:function(t,e){var i=new Ext.Template('<div class="{cls}-wrap">','<div class="{cls}-inner">','<div class="{cls}-bar">','<div class="{cls}-text">',"<div>&#160;</div>","</div>","</div>",'<div class="{cls}-text {cls}-text-back">',"<div>&#160;</div>","</div>","</div>","</div>");this.el=e?i.insertBefore(e,{cls:this.baseCls},!0):i.append(t,{cls:this.baseCls},!0),this.id&&(this.el.dom.id=this.id);i=this.el.dom.firstChild;this.progressBar=Ext.get(i.firstChild),this.textEl?(this.textEl=Ext.get(this.textEl),delete this.textTopEl):(this.textTopEl=Ext.get(this.progressBar.dom.firstChild),t=Ext.get(i.childNodes[1]),this.textTopEl.setStyle("z-index",99).addClass("x-hidden"),this.textEl=new Ext.CompositeElement([this.textTopEl.dom.firstChild,t.dom.firstChild]),this.textEl.setWidth(i.offsetWidth)),this.progressBar.setHeight(i.offsetHeight)},afterRender:function(){Ext.ProgressBar.superclass.afterRender.call(this),this.value?this.updateProgress(this.value,this.text):this.updateText(this.text)},updateProgress:function(t,e,i){var s;return this.value=t||0,e&&this.updateText(e),this.rendered&&!this.isDestroyed&&(s=Math.floor(t*this.el.dom.firstChild.offsetWidth),this.progressBar.setWidth(s,!0===i||!1!==i&&this.animate),this.textTopEl&&this.textTopEl.removeClass("x-hidden").setWidth(s)),this.fireEvent("update",this,t,e),this},wait:function(i){return this.waitTimer||(i=i||{},this.updateText(i.text),this.waitTimer=Ext.TaskMgr.start({run:function(t){var e=i.increment||10;this.updateProgress(100/e*((--t+e)%e+1)*.01,null,i.animate)},interval:i.interval||1e3,duration:i.duration,onStop:function(){i.fn&&i.fn.apply(i.scope||this),this.reset()},scope:this})),this},isWaiting:function(){return null!==this.waitTimer},updateText:function(t){return this.text=t||"&#160;",this.rendered&&this.textEl.update(this.text),this},syncProgressBar:function(){return this.value&&this.updateProgress(this.value,this.text),this},setSize:function(t,e){return Ext.ProgressBar.superclass.setSize.call(this,t,e),this.textTopEl&&(e=this.el.dom.firstChild,this.textEl.setSize(e.offsetWidth,e.offsetHeight)),this.syncProgressBar(),this},reset:function(t){return this.updateProgress(0),this.textTopEl&&this.textTopEl.addClass("x-hidden"),this.clearTimer(),!0===t&&this.hide(),this},clearTimer:function(){this.waitTimer&&(this.waitTimer.onStop=null,Ext.TaskMgr.stop(this.waitTimer),this.waitTimer=null)},onDestroy:function(){this.clearTimer(),this.rendered&&(this.textEl.isComposite&&this.textEl.clear(),Ext.destroyMembers(this,"textEl","progressBar","textTopEl")),Ext.ProgressBar.superclass.onDestroy.call(this)}}),Ext.reg("progress",Ext.ProgressBar),function(){var s=Ext.EventManager,n=Ext.lib.Dom;Ext.dd.DragDrop=function(t,e,i){t&&this.init(t,e,i)},Ext.dd.DragDrop.prototype={id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:!1,lock:function(){this.locked=!0},moveOnly:!1,unlock:function(){this.locked=!1},isTarget:!0,padding:null,_domRef:null,__ygDragDrop:!0,constrainX:!1,constrainY:!1,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:!1,xTicks:null,yTicks:null,primaryButtonOnly:!0,available:!1,hasOuterHandles:!1,b4StartDrag:function(t,e){},startDrag:function(t,e){},b4Drag:function(t){},onDrag:function(t){},onDragEnter:function(t,e){},b4DragOver:function(t){},onDragOver:function(t,e){},b4DragOut:function(t){},onDragOut:function(t,e){},b4DragDrop:function(t){},onDragDrop:function(t,e){},onInvalidDrop:function(t){},b4EndDrag:function(t){},endDrag:function(t){},b4MouseDown:function(t){},onMouseDown:function(t){},onMouseUp:function(t){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(t,e,i){e=(e=Ext.isNumber(e)?{left:e,right:e,top:e,bottom:e}:e)||this.defaultPadding;var s=Ext.get(this.getEl()).getBox(),n=Ext.get(t),r=n.getScroll(),t=n.dom;n=t==document.body?{x:r.left,y:r.top,width:Ext.lib.Dom.getViewWidth(),height:Ext.lib.Dom.getViewHeight()}:{x:(o=n.getXY())[0],y:o[1],width:t.clientWidth,height:t.clientHeight};var o=s.y-n.y,t=s.x-n.x;this.resetConstraints(),this.setXConstraint(t-(e.left||0),n.width-t-s.width-(e.right||0),this.xTickSize),this.setYConstraint(o-(e.top||0),n.height-o-s.height-(e.bottom||0),this.yTickSize)},getEl:function(){return this._domRef||(this._domRef=Ext.getDom(this.id)),this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(t,e,i){this.initTarget(t,e,i),s.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(t,e,i){this.config=i||{},this.DDM=Ext.dd.DDM,this.groups={},"string"!=typeof t&&(t=Ext.id(t)),this.id=t,this.addToGroup(e||"default"),this.handleElId=t,this.setDragElId(t),this.invalidHandleTypes={A:"A"},this.invalidHandleIds={},this.invalidHandleClasses=[],this.applyConfig(),this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0],this.isTarget=!1!==this.config.isTarget,this.maintainOffset=this.config.maintainOffset,this.primaryButtonOnly=!1!==this.config.primaryButtonOnly},handleOnAvailable:function(){this.available=!0,this.resetConstraints(),this.onAvailable()},setPadding:function(t,e,i,s){this.padding=e||0===e?i||0===i?[t,e,i,s]:[t,e,t,e]:[t,t,t,t]},setInitPosition:function(t,e){var i=this.getEl();this.DDM.verifyEl(i)&&(t=t||0,e=e||0,i=n.getXY(i),this.initPageX=i[0]-t,this.initPageY=i[1]-e,this.lastPageX=i[0],this.lastPageY=i[1],this.setStartPosition(i))},setStartPosition:function(t){t=t||n.getXY(this.getEl());this.deltaSetXY=null,this.startPageX=t[0],this.startPageY=t[1]},addToGroup:function(t){this.groups[t]=!0,this.DDM.regDragDrop(this,t)},removeFromGroup:function(t){this.groups[t]&&delete this.groups[t],this.DDM.removeDDFromGroup(this,t)},setDragElId:function(t){this.dragElId=t},setHandleElId:function(t){"string"!=typeof t&&(t=Ext.id(t)),this.handleElId=t,this.DDM.regHandle(this.id,t)},setOuterHandleElId:function(t){"string"!=typeof t&&(t=Ext.id(t)),s.on(t,"mousedown",this.handleMouseDown,this),this.setHandleElId(t),this.hasOuterHandles=!0},unreg:function(){s.un(this.id,"mousedown",this.handleMouseDown),this._domRef=null,this.DDM._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return this.DDM.isLocked()||this.locked},handleMouseDown:function(t,e){var i;this.primaryButtonOnly&&0!=t.button||this.isLocked()||(this.DDM.refreshCache(this.groups),i=new Ext.lib.Point(Ext.lib.Event.getPageX(t),Ext.lib.Event.getPageY(t)),(this.hasOuterHandles||this.DDM.isOverTarget(i,this))&&this.clickValidator(t)&&(this.setStartPosition(),this.b4MouseDown(t),this.onMouseDown(t),this.DDM.handleMouseDown(t,this),this.preventDefault||this.stopPropagation?(this.preventDefault&&t.preventDefault(),this.stopPropagation&&t.stopPropagation()):this.DDM.stopEvent(t)))},clickValidator:function(t){t=t.getTarget();return this.isValidHandleChild(t)&&(this.id==this.handleElId||this.DDM.handleWasClicked(t,this.id))},addInvalidHandleType:function(t){t=t.toUpperCase();this.invalidHandleTypes[t]=t},addInvalidHandleId:function(t){"string"!=typeof t&&(t=Ext.id(t)),this.invalidHandleIds[t]=t},addInvalidHandleClass:function(t){this.invalidHandleClasses.push(t)},removeInvalidHandleType:function(t){t=t.toUpperCase();delete this.invalidHandleTypes[t]},removeInvalidHandleId:function(t){"string"!=typeof t&&(t=Ext.id(t)),delete this.invalidHandleIds[t]},removeInvalidHandleClass:function(t){for(var e=0,i=this.invalidHandleClasses.length;e<i;++e)this.invalidHandleClasses[e]==t&&delete this.invalidHandleClasses[e]},isValidHandleChild:function(e){var i,t=!0;try{i=e.nodeName.toUpperCase()}catch(t){i=e.nodeName}for(var t=(t=t&&!this.invalidHandleTypes[i])&&!this.invalidHandleIds[e.id],s=0,n=this.invalidHandleClasses.length;t&&s<n;++s)t=!Ext.fly(e).hasClass(this.invalidHandleClasses[s]);return t},setXTicks:function(t,e){this.xTicks=[],this.xTickSize=e;for(var i={},s=this.initPageX;s>=this.minX;s-=e)i[s]||(i[this.xTicks[this.xTicks.length]=s]=!0);for(s=this.initPageX;s<=this.maxX;s+=e)i[s]||(i[this.xTicks[this.xTicks.length]=s]=!0);this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(t,e){this.yTicks=[],this.yTickSize=e;for(var i={},s=this.initPageY;s>=this.minY;s-=e)i[s]||(i[this.yTicks[this.yTicks.length]=s]=!0);for(s=this.initPageY;s<=this.maxY;s+=e)i[s]||(i[this.yTicks[this.yTicks.length]=s]=!0);this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(t,e,i){this.leftConstraint=t,this.rightConstraint=e,this.minX=this.initPageX-t,this.maxX=this.initPageX+e,i&&this.setXTicks(this.initPageX,i),this.constrainX=!0},clearConstraints:function(){this.constrainX=!1,this.constrainY=!1,this.clearTicks()},clearTicks:function(){this.xTicks=null,this.yTicks=null,this.xTickSize=0,this.yTickSize=0},setYConstraint:function(t,e,i){this.topConstraint=t,this.bottomConstraint=e,this.minY=this.initPageY-t,this.maxY=this.initPageY+e,i&&this.setYTicks(this.initPageY,i),this.constrainY=!0},resetConstraints:function(){var t,e;this.initPageX||0===this.initPageX?(t=this.maintainOffset?this.lastPageX-this.initPageX:0,e=this.maintainOffset?this.lastPageY-this.initPageY:0,this.setInitPosition(t,e)):this.setInitPosition(),this.constrainX&&this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize),this.constrainY&&this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)},getTick:function(t,e){if(e){if(e[0]>=t)return e[0];for(var i=0,s=e.length;i<s;++i){var n=i+1;if(e[n]&&e[n]>=t)return t-e[i]<e[n]-t?e[i]:e[n]}return e[e.length-1]}return t},toString:function(){return"DragDrop "+this.id}}}(),Ext.dd.DragDropMgr||(Ext.dd.DragDropMgr=function(){var i=Ext.EventManager;return{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:!0,stopPropagation:!0,initialized:!1,locked:!1,init:function(){this.initialized=!0},POINT:0,INTERSECT:1,mode:0,notifyOccluded:!1,_execOnAll:function(t,e){for(var i in this.ids)for(var s in this.ids[i]){s=this.ids[i][s];this.isTypeOfDD(s)&&s[t].apply(s,e)}},_onLoad:function(){this.init(),i.on(document,"mouseup",this.handleMouseUp,this,!0),i.on(document,"mousemove",this.handleMouseMove,this,!0),i.on(window,"unload",this._onUnload,this,!0),i.on(window,"resize",this._onResize,this,!0)},_onResize:function(t){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},locationCache:{},useCache:!0,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:!1,clickTimeout:null,startX:0,startY:0,regDragDrop:function(t,e){this.initialized||this.init(),this.ids[e]||(this.ids[e]={}),this.ids[e][t.id]=t},removeDDFromGroup:function(t,e){this.ids[e]||(this.ids[e]={});e=this.ids[e];e&&e[t.id]&&delete e[t.id]},_remove:function(t){for(var e in t.groups)e&&this.ids[e]&&this.ids[e][t.id]&&delete this.ids[e][t.id];delete this.handleIds[t.id]},regHandle:function(t,e){this.handleIds[t]||(this.handleIds[t]={}),this.handleIds[t][e]=e},isDragDrop:function(t){return!!this.getDDById(t)},getRelated:function(t,e){var i,s=[];for(i in t.groups)for(var n in this.ids[i]){n=this.ids[i][n];this.isTypeOfDD(n)&&(e&&!n.isTarget||(s[s.length]=n))}return s},isLegalTarget:function(t,e){for(var i=this.getRelated(t,!0),s=0,n=i.length;s<n;++s)if(i[s].id==e.id)return!0;return!1},isTypeOfDD:function(t){return t&&t.__ygDragDrop},isHandle:function(t,e){return this.handleIds[t]&&this.handleIds[t][e]},getDDById:function(t){for(var e in this.ids)if(this.ids[e][t])return this.ids[e][t];return null},handleMouseDown:function(t,e){Ext.QuickTips&&Ext.QuickTips.ddDisable(),this.dragCurrent&&this.handleMouseUp(t),this.currentTarget=t.getTarget();e=(this.dragCurrent=e).getEl();this.startX=t.getPageX(),this.startY=t.getPageY(),this.deltaX=this.startX-e.offsetLeft,this.deltaY=this.startY-e.offsetTop,this.dragThreshMet=!1,this.clickTimeout=setTimeout(function(){var t=Ext.dd.DDM;t.startDrag(t.startX,t.startY)},this.clickTimeThresh)},startDrag:function(t,e){clearTimeout(this.clickTimeout),this.dragCurrent&&(this.dragCurrent.b4StartDrag(t,e),this.dragCurrent.startDrag(t,e)),this.dragThreshMet=!0},handleMouseUp:function(t){Ext.QuickTips&&Ext.QuickTips.ddEnable(),this.dragCurrent&&(clearTimeout(this.clickTimeout),this.dragThreshMet&&this.fireEvents(t,!0),this.stopDrag(t),this.stopEvent(t))},stopEvent:function(t){this.stopPropagation&&t.stopPropagation(),this.preventDefault&&t.preventDefault()},stopDrag:function(t){this.dragCurrent&&(this.dragThreshMet&&(this.dragCurrent.b4EndDrag(t),this.dragCurrent.endDrag(t)),this.dragCurrent.onMouseUp(t)),this.dragCurrent=null,this.dragOvers={}},handleMouseMove:function(t){return!this.dragCurrent||(Ext.isIE&&0!==t.button&&1!==t.button&&2!==t.button?(this.stopEvent(t),this.handleMouseUp(t)):(this.dragThreshMet||(e=Math.abs(this.startX-t.getPageX()),i=Math.abs(this.startY-t.getPageY()),(e>this.clickPixelThresh||i>this.clickPixelThresh)&&this.startDrag(this.startX,this.startY)),this.dragThreshMet&&(this.dragCurrent.b4Drag(t),this.dragCurrent.onDrag(t),this.dragCurrent.moveOnly||this.fireEvents(t,!1)),this.stopEvent(t),!0));var e,i},fireEvents:function(t,e){var i,s,n,r,o,a,l=this,d=l.dragCurrent,h=t.getPoint(),c=[],u=[],f=[],p=[],m=[],g=[];if(d&&!d.isLocked()){for(r in l.dragOvers)i=l.dragOvers[r],l.isTypeOfDD(i)&&(this.isOverTarget(h,i,l.mode)||f.push(i),u[r]=!0,delete l.dragOvers[r]);for(a in d.groups)if("string"==typeof a)for(r in l.ids[a])i=l.ids[a][r],l.isTypeOfDD(i)&&(s=i.getEl())&&i.isTarget&&!i.isLocked()&&(i!=d||!1===d.ignoreSelf)&&(-1!==(i.zIndex=l.getZIndex(s))&&(n=!0),c.push(i));for(n&&c.sort(l.byZIndex),r=0,o=c.length;r<o&&(i=c[r],!l.isOverTarget(h,i,l.mode)||(e?m.push(i):((u[i.id]?p:g).push(i),l.dragOvers[i.id]=i),l.notifyOccluded));r++);if(l.mode)f.length&&(d.b4DragOut(t,f),d.onDragOut(t,f)),g.length&&d.onDragEnter(t,g),p.length&&(d.b4DragOver(t,p),d.onDragOver(t,p)),m.length&&(d.b4DragDrop(t,m),d.onDragDrop(t,m));else{for(r=0,o=f.length;r<o;++r)d.b4DragOut(t,f[r].id),d.onDragOut(t,f[r].id);for(r=0,o=g.length;r<o;++r)d.onDragEnter(t,g[r].id);for(r=0,o=p.length;r<o;++r)d.b4DragOver(t,p[r].id),d.onDragOver(t,p[r].id);for(r=0,o=m.length;r<o;++r)d.b4DragDrop(t,m[r].id),d.onDragDrop(t,m[r].id)}e&&!m.length&&d.onInvalidDrop(t)}},getZIndex:function(t){var e,i=document.body,s=-1;for(t=Ext.getDom(t);t!==i;)isNaN(e=Number(Ext.fly(t).getStyle("zIndex")))||(s=e),t=t.parentNode;return s},byZIndex:function(t,e){return t.zIndex<e.zIndex},getBestMatch:function(t){var e=null,i=t.length;if(1==i)e=t[0];else for(var s=0;s<i;++s){var n=t[s];if(n.cursorIsOver){e=n;break}(!e||e.overlap.getArea()<n.overlap.getArea())&&(e=n)}return e},refreshCache:function(t){for(var e in t)if("string"==typeof e)for(var i in this.ids[e]){var s=this.ids[e][i];this.isTypeOfDD(s)&&((i=this.getLocation(s))?this.locationCache[s.id]=i:delete this.locationCache[s.id])}},verifyEl:function(t){if(t){var e;if(Ext.isIE)try{e=t.offsetParent}catch(t){}else e=t.offsetParent;if(e)return!0}return!1},getLocation:function(t){if(!this.isTypeOfDD(t))return null;var e,i,s,n=t.getEl();try{i=Ext.lib.Dom.getXY(n)}catch(t){}return i?(s=(e=i[0])+n.offsetWidth,n=(i=i[1])+n.offsetHeight,i=i-t.padding[0],s=s+t.padding[1],n=n+t.padding[2],t=e-t.padding[3],new Ext.lib.Region(i,s,n,t)):null},isOverTarget:function(t,e,i){var s=this.locationCache[e.id];if(s&&this.useCache||(s=this.getLocation(e),this.locationCache[e.id]=s),!s)return!1;e.cursorIsOver=s.contains(t);var n=this.dragCurrent;if(!n||!n.getTargetCoord||!i&&!n.constrainX&&!n.constrainY)return e.cursorIsOver;e.overlap=null;t=n.getTargetCoord(t.x,t.y),n=n.getDragEl(),s=new Ext.lib.Region(t.y,t.x+n.offsetWidth,t.y+n.offsetHeight,t.x).intersect(s);return!!s&&(e.overlap=s,!!i||e.cursorIsOver)},_onUnload:function(t,e){i.removeListener(document,"mouseup",this.handleMouseUp,this),i.removeListener(document,"mousemove",this.handleMouseMove,this),i.removeListener(window,"resize",this._onResize,this),Ext.dd.DragDropMgr.unregAll()},unregAll:function(){for(var t in this.dragCurrent&&(this.stopDrag(),this.dragCurrent=null),this._execOnAll("unreg",[]),this.elementCache)delete this.elementCache[t];this.elementCache={},this.ids={}},elementCache:{},getElWrapper:function(t){var e=this.elementCache[t];return e=!e||!e.el?this.elementCache[t]=new this.ElementWrapper(Ext.getDom(t)):e},getElement:function(t){return Ext.getDom(t)},getCss:function(t){t=Ext.getDom(t);return t?t.style:null},ElementWrapper:function(t){this.el=t||null,this.id=this.el&&t.id,this.css=this.el&&t.style},getPosX:function(t){return Ext.lib.Dom.getX(t)},getPosY:function(t){return Ext.lib.Dom.getY(t)},swapNode:function(t,e){var i,s;t.swapNode?t.swapNode(e):(i=e.parentNode,(s=e.nextSibling)==t?i.insertBefore(t,e):e==t.nextSibling?i.insertBefore(e,t):(t.parentNode.replaceChild(e,t),i.insertBefore(t,s)))},getScroll:function(){var t,e,i=document.documentElement,s=document.body;return i&&(i.scrollTop||i.scrollLeft)?(t=i.scrollTop,e=i.scrollLeft):s&&(t=s.scrollTop,e=s.scrollLeft),{top:t,left:e}},getStyle:function(t,e){return Ext.fly(t).getStyle(e)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(t,e){e=Ext.lib.Dom.getXY(e);Ext.lib.Dom.setXY(t,e)},numericSort:function(t,e){return t-e},_timeoutCount:0,_addListeners:function(){var t=Ext.dd.DDM;Ext.lib.Event&&document?t._onLoad():2e3<t._timeoutCount||(setTimeout(t._addListeners,10),document&&document.body&&(t._timeoutCount+=1))},handleWasClicked:function(t,e){if(this.isHandle(e,t.id))return!0;for(var i=t.parentNode;i;){if(this.isHandle(e,i.id))return!0;i=i.parentNode}return!1}}}(),Ext.dd.DDM=Ext.dd.DragDropMgr,Ext.dd.DDM._addListeners()),Ext.dd.DD=function(t,e,i){t&&this.init(t,e,i)},Ext.extend(Ext.dd.DD,Ext.dd.DragDrop,{scroll:!0,autoOffset:function(t,e){t-=this.startPageX,e-=this.startPageY;this.setDelta(t,e)},setDelta:function(t,e){this.deltaX=t,this.deltaY=e},setDragElPos:function(t,e){var i=this.getDragEl();this.alignElWithMouse(i,t,e)},alignElWithMouse:function(t,e,i){var s=this.getTargetCoord(e,i),e=t.dom?t:Ext.fly(t,"_dd");return this.deltaSetXY?e.setLeftTop(s.x+this.deltaSetXY[0],s.y+this.deltaSetXY[1]):(i=[s.x,s.y],e.setXY(i),i=e.getLeft(!0),e=e.getTop(!0),this.deltaSetXY=[i-s.x,e-s.y]),this.cachePosition(s.x,s.y),this.autoScroll(s.x,s.y,t.offsetHeight,t.offsetWidth),s},cachePosition:function(t,e){t?(this.lastPageX=t,this.lastPageY=e):(e=Ext.lib.Dom.getXY(this.getEl()),this.lastPageX=e[0],this.lastPageY=e[1])},autoScroll:function(t,e,i,s){var n,r,o,a,l,d,h;this.scroll&&(n=Ext.lib.Dom.getViewHeight(),r=Ext.lib.Dom.getViewWidth(),o=this.DDM.getScrollTop(),a=this.DDM.getScrollLeft(),l=s+t,d=n+o-e-this.deltaY,h=r+a-t-this.deltaX,s=document.all?80:30,n<i+e&&d<40&&window.scrollTo(a,o+s),e<o&&0<o&&e-o<40&&window.scrollTo(a,o-s),r<l&&h<40&&window.scrollTo(a+s,o),t<a&&0<a&&t-a<40&&window.scrollTo(a-s,o))},getTargetCoord:function(t,e){t-=this.deltaX,e-=this.deltaY;return this.constrainX&&(t=t<this.minX?this.minX:t)>this.maxX&&(t=this.maxX),this.constrainY&&(e=e<this.minY?this.minY:e)>this.maxY&&(e=this.maxY),{x:t=this.getTick(t,this.xTicks),y:e=this.getTick(e,this.yTicks)}},applyConfig:function(){Ext.dd.DD.superclass.applyConfig.call(this),this.scroll=!1!==this.config.scroll},b4MouseDown:function(t){this.autoOffset(t.getPageX(),t.getPageY())},b4Drag:function(t){this.setDragElPos(t.getPageX(),t.getPageY())},toString:function(){return"DD "+this.id}}),Ext.dd.DDProxy=function(t,e,i){t&&(this.init(t,e,i),this.initFrame())},Ext.dd.DDProxy.dragElId="ygddfdiv",Ext.extend(Ext.dd.DDProxy,Ext.dd.DD,{resizeFrame:!0,centerFrame:!1,createFrame:function(){var t,e,i=this,s=document.body;s&&s.firstChild?(t=this.getDragEl())||((t=document.createElement("div")).id=this.dragElId,(e=t.style).position="absolute",e.visibility="hidden",e.cursor="move",e.border="2px solid #aaa",e.zIndex=999,s.insertBefore(t,s.firstChild)):setTimeout(function(){i.createFrame()},50)},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DDProxy.superclass.applyConfig.call(this),this.resizeFrame=!1!==this.config.resizeFrame,this.centerFrame=this.config.centerFrame,this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(t,e){this.getEl();var i=this.getDragEl(),s=i.style;this._resizeProxy(),this.centerFrame&&this.setDelta(Math.round(parseInt(s.width,10)/2),Math.round(parseInt(s.height,10)/2)),this.setDragElPos(t,e),Ext.fly(i).show()},_resizeProxy:function(){var t;this.resizeFrame&&(t=this.getEl(),Ext.fly(this.getDragEl()).setSize(t.offsetWidth,t.offsetHeight))},b4MouseDown:function(t){var e=t.getPageX(),t=t.getPageY();this.autoOffset(e,t),this.setDragElPos(e,t)},b4StartDrag:function(t,e){this.showFrame(t,e)},b4EndDrag:function(t){Ext.fly(this.getDragEl()).hide()},endDrag:function(t){var e=this.getEl(),i=this.getDragEl();i.style.visibility="",this.beforeMove(),e.style.visibility="hidden",Ext.dd.DDM.moveToEl(e,i),i.style.visibility="hidden",e.style.visibility="",this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return"DDProxy "+this.id}}),Ext.dd.DDTarget=function(t,e,i){t&&this.initTarget(t,e,i)},Ext.extend(Ext.dd.DDTarget,Ext.dd.DragDrop,{getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return"DDTarget "+this.id}}),Ext.dd.DragTracker=Ext.extend(Ext.util.Observable,{active:!1,tolerance:5,autoStart:!1,constructor:function(t){Ext.apply(this,t),this.addEvents("mousedown","mouseup","mousemove","dragstart","dragend","drag"),this.dragRegion=new Ext.lib.Region(0,0,0,0),this.el&&this.initEl(this.el),Ext.dd.DragTracker.superclass.constructor.call(this,t)},initEl:function(t){this.el=Ext.get(t),t.on("mousedown",this.onMouseDown,this,this.delegate?{delegate:this.delegate}:void 0)},destroy:function(){this.el.un("mousedown",this.onMouseDown,this),delete this.el},onMouseDown:function(t,e){!1!==this.fireEvent("mousedown",this,t)&&!1!==this.onBeforeStart(t)&&(this.startXY=this.lastXY=t.getXY(),this.dragTarget=this.delegate?e:this.el.dom,!1!==this.preventDefault&&t.preventDefault(),Ext.getDoc().on({scope:this,mouseup:this.onMouseUp,mousemove:this.onMouseMove,selectstart:this.stopSelect}),this.autoStart&&(this.timer=this.triggerStart.defer(!0===this.autoStart?1e3:this.autoStart,this,[t])))},onMouseMove:function(t,e){var i=Ext.isIE6||Ext.isIE7||Ext.isIE8;if(this.active&&i&&!t.browserEvent.button)return t.preventDefault(),void this.onMouseUp(t);t.preventDefault();var s=t.getXY(),i=this.startXY;if(this.lastXY=s,!this.active){if(!(Math.abs(i[0]-s[0])>this.tolerance||Math.abs(i[1]-s[1])>this.tolerance))return;this.triggerStart(t)}this.fireEvent("mousemove",this,t),this.onDrag(t),this.fireEvent("drag",this,t)},onMouseUp:function(t){var e=Ext.getDoc(),i=this.active;e.un("mousemove",this.onMouseMove,this),e.un("mouseup",this.onMouseUp,this),e.un("selectstart",this.stopSelect,this),t.preventDefault(),this.clearStart(),this.active=!1,delete this.elRegion,this.fireEvent("mouseup",this,t),i&&(this.onEnd(t),this.fireEvent("dragend",this,t))},triggerStart:function(t){this.clearStart(),this.active=!0,this.onStart(t),this.fireEvent("dragstart",this,t)},clearStart:function(){this.timer&&(clearTimeout(this.timer),delete this.timer)},stopSelect:function(t){return t.stopEvent(),!1},onBeforeStart:function(t){},onStart:function(t){},onDrag:function(t){},onEnd:function(t){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getXY:function(t){return t?this.constrainModes[t].call(this,this.lastXY):this.lastXY},getOffset:function(t){var e=this.getXY(t),t=this.startXY;return[t[0]-e[0],t[1]-e[1]]},constrainModes:{point:function(t){this.elRegion||(this.elRegion=this.getDragCt().getRegion());var e=this.dragRegion;return e.left=t[0],e.top=t[1],e.right=t[0],e.bottom=t[1],e.constrainTo(this.elRegion),[e.left,e.top]}}}),Ext.dd.ScrollManager=function(){function i(){d.dragCurrent&&d.refreshCache(d.dragCurrent.groups)}function l(t,e){f(),u.el=t,u.dir=e,e=t.ddScrollConfig?t.ddScrollConfig.ddGroup:void 0,t=(t.ddScrollConfig&&t.ddScrollConfig.frequency?t.ddScrollConfig:Ext.dd.ScrollManager).frequency,void 0!==e&&d.dragCurrent.ddGroup!=e||(u.id=setInterval(s,t))}var d=Ext.dd.DragDropMgr,h={},c=null,u={},s=function(){var t,e;d.dragCurrent&&(t=Ext.dd.ScrollManager,e=(u.el.ddScrollConfig||t).increment,t.animate?u.el.scroll(u.dir,e,!0,t.animDuration,i):u.el.scroll(u.dir,e)&&i())},f=function(){u.id&&clearInterval(u.id),u.id=0,u.el=null,u.dir=""};return d.fireEvents=d.fireEvents.createSequence(function(t,e){if(!e&&d.dragCurrent){var i=Ext.dd.ScrollManager;c&&c==d.dragCurrent||(c=d.dragCurrent,i.refreshCache());var s,t=Ext.lib.Event.getXY(t),n=new Ext.lib.Point(t[0],t[1]);for(s in h){var r=h[s],o=r._region,a=r.ddScrollConfig||i;if(o&&o.contains(n)&&r.isScrollable()){if(o.bottom-n.y<=a.vthresh)return void(u.el!=r&&l(r,"down"));if(o.right-n.x<=a.hthresh)return void(u.el!=r&&l(r,"left"));if(n.y-o.top<=a.vthresh)return void(u.el!=r&&l(r,"up"));if(n.x-o.left<=a.hthresh)return void(u.el!=r&&l(r,"right"))}}f()}},d),d.stopDrag=d.stopDrag.createSequence(function(t){c=null,f()},d),{register:function(t){if(Ext.isArray(t))for(var e=0,i=t.length;e<i;e++)this.register(t[e]);else t=Ext.get(t),h[t.id]=t},unregister:function(t){if(Ext.isArray(t))for(var e=0,i=t.length;e<i;e++)this.unregister(t[e]);else t=Ext.get(t),delete h[t.id]},vthresh:25,hthresh:25,increment:100,frequency:500,animate:!0,animDuration:.4,ddGroup:void 0,refreshCache:function(){for(var t in h)"object"==typeof h[t]&&(h[t]._region=h[t].getRegion())}}}(),Ext.dd.Registry=function(){function r(t,e){if("string"==typeof t)return t;var i=t.id;return i||!1===e||(i="extdd-"+ ++s,t.id=i),i}var o={},a={},s=0;return{register:function(t,e){if(e=e||{},"string"==typeof t&&(t=document.getElementById(t)),e.ddel=t,!1!==(o[r(t)]=e).isHandle&&(a[e.ddel.id]=e),e.handles)for(var i=e.handles,s=0,n=i.length;s<n;s++)a[r(i[s])]=e},unregister:function(t){var e=r(t,!1),t=o[e];if(t&&(delete o[e],t.handles))for(var i=t.handles,s=0,n=i.length;s<n;s++)delete a[r(i[s],!1)]},getHandle:function(t){return"string"!=typeof t&&(t=t.id),a[t]},getHandleFromEvent:function(t){t=Ext.lib.Event.getTarget(t);return t?a[t.id]:null},getTarget:function(t){return"string"!=typeof t&&(t=t.id),o[t]},getTargetFromEvent:function(t){t=Ext.lib.Event.getTarget(t);return t?o[t.id]||a[t.id]:null}}}(),Ext.dd.StatusProxy=function(t){Ext.apply(this,t),this.id=this.id||Ext.id(),this.el=new Ext.Layer({dh:{id:this.id,tag:"div",cls:"x-dd-drag-proxy "+this.dropNotAllowed,children:[{tag:"div",cls:"x-dd-drop-icon"},{tag:"div",cls:"x-dd-drag-ghost"}]},shadow:!t||!1!==t.shadow}),this.ghost=Ext.get(this.el.dom.childNodes[1]),this.dropStatus=this.dropNotAllowed},Ext.dd.StatusProxy.prototype={dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(t){t=t||this.dropNotAllowed,this.dropStatus!=t&&(this.el.replaceClass(this.dropStatus,t),this.dropStatus=t)},reset:function(t){this.el.dom.className="x-dd-drag-proxy "+this.dropNotAllowed,this.dropStatus=this.dropNotAllowed,t&&this.ghost.update("")},update:function(t){"string"==typeof t?this.ghost.update(t):(this.ghost.update(""),t.style.margin="0",this.ghost.dom.appendChild(t));t=this.ghost.dom.firstChild;t&&Ext.fly(t).setStyle("float","none")},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(t){this.el.hide(),t&&this.reset(!0)},stop:function(){this.anim&&this.anim.isAnimated&&this.anim.isAnimated()&&this.anim.stop()},show:function(){this.el.show()},sync:function(){this.el.sync()},repair:function(t,e,i){this.callback=e,this.scope=i,t&&!1!==this.animRepair?(this.el.addClass("x-dd-drag-repair"),this.el.hideUnders(!0),this.anim=this.el.shift({duration:this.repairDuration||.5,easing:"easeOut",xy:t,stopFx:!0,callback:this.afterRepair,scope:this})):this.afterRepair()},afterRepair:function(){this.hide(!0),"function"==typeof this.callback&&this.callback.call(this.scope||this),this.callback=null,this.scope=null},destroy:function(){Ext.destroy(this.ghost,this.el)}},Ext.dd.DragSource=function(t,e){this.el=Ext.get(t),this.dragData||(this.dragData={}),Ext.apply(this,e),this.proxy||(this.proxy=new Ext.dd.StatusProxy),Ext.dd.DragSource.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:!1,isTarget:!1,scroll:!0===this.scroll}),this.dragging=!1},Ext.extend(Ext.dd.DragSource,Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",getDragData:function(t){return this.dragData},onDragEnter:function(t,e){var i,s=Ext.dd.DragDropMgr.getDDById(e);this.cachedTarget=s,!1!==this.beforeDragEnter(s,t,e)&&(s.isNotifyTarget?(i=s.notifyEnter(this,t,this.dragData),this.proxy.setStatus(i)):this.proxy.setStatus(this.dropAllowed),this.afterDragEnter&&this.afterDragEnter(s,t,e))},beforeDragEnter:function(t,e,i){return!0},alignElWithMouse:function(){Ext.dd.DragSource.superclass.alignElWithMouse.apply(this,arguments),this.proxy.sync()},onDragOver:function(t,e){var i,s=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(e);!1!==this.beforeDragOver(s,t,e)&&(s.isNotifyTarget&&(i=s.notifyOver(this,t,this.dragData),this.proxy.setStatus(i)),this.afterDragOver&&this.afterDragOver(s,t,e))},beforeDragOver:function(t,e,i){return!0},onDragOut:function(t,e){var i=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(e);!1!==this.beforeDragOut(i,t,e)&&(i.isNotifyTarget&&i.notifyOut(this,t,this.dragData),this.proxy.reset(),this.afterDragOut&&this.afterDragOut(i,t,e)),this.cachedTarget=null},beforeDragOut:function(t,e,i){return!0},onDragDrop:function(t,e){var i=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(e);!1!==this.beforeDragDrop(i,t,e)&&(!i.isNotifyTarget||i.notifyDrop(this,t,this.dragData)?this.onValidDrop(i,t,e):this.onInvalidDrop(i,t,e),this.afterDragDrop&&this.afterDragDrop(i,t,e)),delete this.cachedTarget},beforeDragDrop:function(t,e,i){return!0},onValidDrop:function(t,e,i){this.hideProxy(),this.afterValidDrop&&this.afterValidDrop(t,e,i)},getRepairXY:function(t,e){return this.el.getXY()},onInvalidDrop:function(t,e,i){this.beforeInvalidDrop(t,e,i),this.cachedTarget&&(this.cachedTarget.isNotifyTarget&&this.cachedTarget.notifyOut(this,e,this.dragData),this.cacheTarget=null),this.proxy.repair(this.getRepairXY(e,this.dragData),this.afterRepair,this),this.afterInvalidDrop&&this.afterInvalidDrop(e,i)},afterRepair:function(){Ext.enableFx&&this.el.highlight(this.hlColor||"c3daf9"),this.dragging=!1},beforeInvalidDrop:function(t,e,i){return!0},handleMouseDown:function(t){var e;this.dragging||(e=this.getDragData(t))&&!1!==this.onBeforeDrag(e,t)&&(this.dragData=e,this.proxy.stop(),Ext.dd.DragSource.superclass.handleMouseDown.apply(this,arguments))},onBeforeDrag:function(t,e){return!0},onStartDrag:Ext.emptyFn,startDrag:function(t,e){this.proxy.reset(),this.dragging=!0,this.proxy.update(""),this.onInitDrag(t,e),this.proxy.show()},onInitDrag:function(t,e){var i=this.el.dom.cloneNode(!0);return i.id=Ext.id(),this.proxy.update(i),this.onStartDrag(t,e),!0},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide(),this.proxy.reset(!0),this.dragging=!1},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(t){},endDrag:function(t){this.onEndDrag(this.dragData,t)},onEndDrag:function(t,e){},autoOffset:function(t,e){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DragSource.superclass.destroy.call(this),Ext.destroy(this.proxy)}}),Ext.dd.DropTarget=Ext.extend(Ext.dd.DDTarget,{constructor:function(t,e){this.el=Ext.get(t),Ext.apply(this,e),this.containerScroll&&Ext.dd.ScrollManager.register(this.el),Ext.dd.DropTarget.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:!0})},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:!0,isNotifyTarget:!0,notifyEnter:function(t,e,i){return this.overClass&&this.el.addClass(this.overClass),this.dropAllowed},notifyOver:function(t,e,i){return this.dropAllowed},notifyOut:function(t,e,i){this.overClass&&this.el.removeClass(this.overClass)},notifyDrop:function(t,e,i){return!1},destroy:function(){Ext.dd.DropTarget.superclass.destroy.call(this),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.el)}}),Ext.dd.DragZone=Ext.extend(Ext.dd.DragSource,{constructor:function(t,e){Ext.dd.DragZone.superclass.constructor.call(this,t,e),this.containerScroll&&Ext.dd.ScrollManager.register(this.el)},getDragData:function(t){return Ext.dd.Registry.getHandleFromEvent(t)},onInitDrag:function(t,e){return this.proxy.update(this.dragData.ddel.cloneNode(!0)),this.onStartDrag(t,e),!0},afterRepair:function(){Ext.enableFx&&Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9"),this.dragging=!1},getRepairXY:function(t){return Ext.Element.fly(this.dragData.ddel).getXY()},destroy:function(){Ext.dd.DragZone.superclass.destroy.call(this),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.el)}}),Ext.dd.DropZone=function(t,e){Ext.dd.DropZone.superclass.constructor.call(this,t,e)},Ext.extend(Ext.dd.DropZone,Ext.dd.DropTarget,{getTargetFromEvent:function(t){return Ext.dd.Registry.getTargetFromEvent(t)},onNodeEnter:function(t,e,i,s){},onNodeOver:function(t,e,i,s){return this.dropAllowed},onNodeOut:function(t,e,i,s){},onNodeDrop:function(t,e,i,s){return!1},onContainerOver:function(t,e,i){return this.dropNotAllowed},onContainerDrop:function(t,e,i){return!1},notifyEnter:function(t,e,i){return this.dropNotAllowed},notifyOver:function(t,e,i){var s=this.getTargetFromEvent(e);return s?(this.lastOverNode!=s&&(this.lastOverNode&&this.onNodeOut(this.lastOverNode,t,e,i),this.onNodeEnter(s,t,e,i),this.lastOverNode=s),this.onNodeOver(s,t,e,i)):(this.lastOverNode&&(this.onNodeOut(this.lastOverNode,t,e,i),this.lastOverNode=null),this.onContainerOver(t,e,i))},notifyOut:function(t,e,i){this.lastOverNode&&(this.onNodeOut(this.lastOverNode,t,e,i),this.lastOverNode=null)},notifyDrop:function(t,e,i){this.lastOverNode&&(this.onNodeOut(this.lastOverNode,t,e,i),this.lastOverNode=null);var s=this.getTargetFromEvent(e);return s?this.onNodeDrop(s,t,e,i):this.onContainerDrop(t,e,i)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}}),Ext.Element.addMethods({initDD:function(t,e,i){e=new Ext.dd.DD(Ext.id(this.dom),t,e);return Ext.apply(e,i)},initDDProxy:function(t,e,i){e=new Ext.dd.DDProxy(Ext.id(this.dom),t,e);return Ext.apply(e,i)},initDDTarget:function(t,e,i){e=new Ext.dd.DDTarget(Ext.id(this.dom),t,e);return Ext.apply(e,i)}}),Ext.data.Api=function(){var i={};return{actions:{create:"create",read:"read",update:"update",destroy:"destroy"},restActions:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"},isAction:function(t){return!!Ext.data.Api.actions[t]},getVerb:function(t){if(i[t])return i[t];for(var e in this.actions)if(this.actions[e]===t){i[t]=e;break}return void 0!==i[t]?i[t]:null},isValid:function(t){var e,i=[],s=this.actions;for(e in t)e in s||i.push(e);return!i.length||i},hasUniqueUrl:function(t,e){var i,s=t.api[e]?t.api[e].url:null,n=!0;for(i in t.api)if(!1==(n=i===e||t.api[i].url!=s))break;return n},prepare:function(t){for(var e in t.api||(t.api={}),this.actions){e=this.actions[e];t.api[e]=t.api[e]||t.url||t.directFn,"string"==typeof t.api[e]&&(t.api[e]={url:t.api[e],method:!0===t.restful?Ext.data.Api.restActions[e]:void 0})}},restify:function(t){for(var e in t.restful=!0,this.restActions)t.api[this.actions[e]].method||(t.api[this.actions[e]].method=this.restActions[e]);t.onWrite=t.onWrite.createInterceptor(function(t,e,i,s){e.reader;var n=new Ext.data.Response({action:t,raw:i});switch(i.status){case 200:return!0;case 201:if(!Ext.isEmpty(n.raw.responseText))return!0;n.success=!0;break;case 204:n.success=!0,n.data=null;break;default:return!0}return!0===n.success?this.fireEvent("write",this,t,n.data,n,s,e.request.arg):this.fireEvent("exception",this,"remote",t,e,n,s),e.request.callback.call(e.request.scope,n.data,n,n.success),!1},t)}}}(),Ext.data.Response=function(t,e){Ext.apply(this,t,{raw:e})},Ext.data.Response.prototype={message:null,success:!1,status:null,root:null,raw:null,getMessage:function(){return this.message},getSuccess:function(){return this.success},getStatus:function(){return this.status},getRoot:function(){return this.root},getRawResponse:function(){return this.raw}},Ext.data.Api.Error=Ext.extend(Ext.Error,{constructor:function(t,e){this.arg=e,Ext.Error.call(this,t)},name:"Ext.data.Api"}),Ext.apply(Ext.data.Api.Error.prototype,{lang:{"action-url-undefined":"No fallback url defined for this action.  When defining a DataProxy api, please be sure to define an url for each CRUD action in Ext.data.Api.actions or define a default url in addition to your api-configuration.",invalid:"received an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions defined in Ext.data.Api.actions","invalid-url":"Invalid url.  Please review your proxy configuration.",execute:'Attempted to execute an unknown action.  Valid API actions are defined in Ext.data.Api.actions"'}}),Ext.data.SortTypes={none:function(t){return t},stripTagsRE:/<\/?[^>]+>/gi,asText:function(t){return String(t).replace(this.stripTagsRE,"")},asUCText:function(t){return String(t).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(t){return String(t).toUpperCase()},asDate:function(t){return t?Ext.isDate(t)?t.getTime():Date.parse(String(t)):0},asFloat:function(t){t=parseFloat(String(t).replace(/,/g,""));return isNaN(t)?0:t},asInt:function(t){t=parseInt(String(t).replace(/,/g,""),10);return isNaN(t)?0:t}},Ext.data.Record=function(t,e){this.id=e||0===e?e:Ext.data.Record.id(this),this.data=t||{}},Ext.data.Record.create=function(t){var e=Ext.extend(Ext.data.Record,{}),i=e.prototype;i.fields=new Ext.util.MixedCollection(!1,function(t){return t.name});for(var s=0,n=t.length;s<n;s++)i.fields.add(new Ext.data.Field(t[s]));return e.getField=function(t){return i.fields.get(t)},e},Ext.data.Record.PREFIX="ext-record",Ext.data.Record.AUTO_ID=1,Ext.data.Record.EDIT="edit",Ext.data.Record.REJECT="reject",Ext.data.Record.COMMIT="commit",Ext.data.Record.id=function(t){return t.phantom=!0,[Ext.data.Record.PREFIX,"-",Ext.data.Record.AUTO_ID++].join("")},Ext.data.Record.prototype={dirty:!1,editing:!1,error:null,modified:null,phantom:!1,join:function(t){this.store=t},set:function(t,e){var i=Ext.isPrimitive(e)?String:Ext.encode;i(this.data[t])!=i(e)&&(this.dirty=!0,this.modified||(this.modified={}),void 0===this.modified[t]&&(this.modified[t]=this.data[t]),this.data[t]=e,this.editing||this.afterEdit())},afterEdit:function(){null!=this.store&&"function"==typeof this.store.afterEdit&&this.store.afterEdit(this)},afterReject:function(){this.store&&this.store.afterReject(this)},afterCommit:function(){this.store&&this.store.afterCommit(this)},get:function(t){return this.data[t]},beginEdit:function(){this.editing=!0,this.modified=this.modified||{}},cancelEdit:function(){this.editing=!1,delete this.modified},endEdit:function(){this.editing=!1,this.dirty&&this.afterEdit()},reject:function(t){var e,i=this.modified;for(e in i)"function"!=typeof i[e]&&(this.data[e]=i[e]);this.dirty=!1,delete this.modified,!(this.editing=!1)!==t&&this.afterReject()},commit:function(t){this.dirty=!1,delete this.modified,!(this.editing=!1)!==t&&this.afterCommit()},getChanges:function(){var t,e=this.modified,i={};for(t in e)e.hasOwnProperty(t)&&(i[t]=this.data[t]);return i},hasError:function(){return null!==this.error},clearError:function(){this.error=null},copy:function(t){return new this.constructor(Ext.apply({},this.data),t||this.id)},isModified:function(t){return!(!this.modified||!this.modified.hasOwnProperty(t))},isValid:function(){return!this.fields.find(function(t){return!(!1!==t.allowBlank||!Ext.isEmpty(this.data[t.name]))},this)},markDirty:function(){this.dirty=!0,this.modified||(this.modified={}),this.fields.each(function(t){this.modified[t.name]=this.data[t.name]},this)}},Ext.StoreMgr=Ext.apply(new Ext.util.MixedCollection,{register:function(){for(var t,e=0;t=arguments[e];e++)this.add(t)},unregister:function(){for(var t,e=0;t=arguments[e];e++)this.remove(this.lookup(t))},lookup:function(t){if(Ext.isArray(t)){var e=["field1"],i=!Ext.isArray(t[0]);if(!i)for(var s=2,n=t[0].length;s<=n;++s)e.push("field"+s);return new Ext.data.ArrayStore({fields:e,data:t,expandData:i,autoDestroy:!0,autoCreated:!0})}return Ext.isObject(t)?t.events?t:Ext.create(t,"store"):this.get(t)},getKey:function(t){return t.storeId}}),Ext.data.Store=Ext.extend(Ext.util.Observable,{writer:void 0,remoteSort:!1,autoDestroy:!1,pruneModifiedRecords:!1,lastOptions:null,autoSave:!0,batch:!0,restful:!1,paramNames:void 0,defaultParamNames:{start:"start",limit:"limit",sort:"sort",dir:"dir"},isDestroyed:!1,hasMultiSort:!1,batchKey:"_ext_batch_",constructor:function(t){this.data=new Ext.util.MixedCollection(!1),this.data.getKey=function(t){return t.id},this.removed=[],t&&t.data&&(this.inlineData=t.data,delete t.data),Ext.apply(this,t),this.baseParams=Ext.isObject(this.baseParams)?this.baseParams:{},this.paramNames=Ext.applyIf(this.paramNames||{},this.defaultParamNames),!this.url&&!this.api||this.proxy||(this.proxy=new Ext.data.HttpProxy({url:this.url,api:this.api})),!0===this.restful&&this.proxy&&(this.batch=!1,Ext.data.Api.restify(this.proxy)),this.reader&&(this.recordType||(this.recordType=this.reader.recordType),this.reader.onMetaChange&&(this.reader.onMetaChange=this.reader.onMetaChange.createSequence(this.onMetaChange,this)),this.writer&&(this.writer instanceof Ext.data.DataWriter==!1&&(this.writer=this.buildWriter(this.writer)),this.writer.meta=this.reader.meta,this.pruneModifiedRecords=!0)),this.recordType&&(this.fields=this.recordType.prototype.fields),this.modified=[],this.addEvents("datachanged","metachange","add","remove","update","clear","exception","beforeload","load","loadexception","beforewrite","write","beforesave","save"),this.proxy&&this.relayEvents(this.proxy,["loadexception","exception"]),this.writer&&this.on({scope:this,add:this.createRecords,remove:this.destroyRecord,update:this.updateRecord,clear:this.onClear}),this.sortToggle={},this.sortField?this.setDefaultSort(this.sortField,this.sortDir):this.sortInfo&&this.setDefaultSort(this.sortInfo.field,this.sortInfo.direction),Ext.data.Store.superclass.constructor.call(this),this.id&&(this.storeId=this.id,delete this.id),this.storeId&&Ext.StoreMgr.register(this),this.inlineData?(this.loadData(this.inlineData),delete this.inlineData):this.autoLoad&&this.load.defer(10,this,["object"==typeof this.autoLoad?this.autoLoad:void 0]),this.batchCounter=0,this.batches={}},buildWriter:function(t){var e=void 0;switch((t.format||"json").toLowerCase()){case"json":e=Ext.data.JsonWriter;break;case"xml":e=Ext.data.XmlWriter;break;default:e=Ext.data.JsonWriter}return new e(t)},destroy:function(){this.isDestroyed||(this.storeId&&Ext.StoreMgr.unregister(this),this.clearData(),this.data=null,Ext.destroy(this.proxy),this.reader=this.writer=null,this.purgeListeners(),this.isDestroyed=!0)},add:function(t){var e,i,s,n;if(!((t=[].concat(t)).length<1)){for(e=0,i=t.length;e<i;e++)(s=t[e]).join(this),(s.dirty||s.phantom)&&this.modified.push(s);n=this.data.length,this.data.addAll(t),this.snapshot&&this.snapshot.addAll(t),this.fireEvent("add",this,t,n)}},addSorted:function(t){var e=this.findInsertIndex(t);this.insert(e,t)},doUpdate:function(t){var e=t.id;this.getById(e).join(null),this.data.replace(e,t),this.snapshot&&this.snapshot.replace(e,t),t.join(this),this.fireEvent("update",this,t,Ext.data.Record.COMMIT)},remove:function(t){var e;Ext.isArray(t)?Ext.each(t,function(t){this.remove(t)},this):(-1<(e=this.data.indexOf(t))&&(t.join(null),this.data.removeAt(e)),this.pruneModifiedRecords&&this.modified.remove(t),this.snapshot&&this.snapshot.remove(t),-1<e&&this.fireEvent("remove",this,t,e))},removeAt:function(t){this.remove(this.getAt(t))},removeAll:function(t){var e=[];this.each(function(t){e.push(t)}),this.clearData(),this.snapshot&&this.snapshot.clear(),this.pruneModifiedRecords&&(this.modified=[]),!0!==t&&this.fireEvent("clear",this,e)},onClear:function(t,e){Ext.each(e,function(t,e){this.destroyRecord(this,t,e)},this)},insert:function(t,e){for(var i,s=0,n=(e=[].concat(e)).length;s<n;s++)i=e[s],this.data.insert(t+s,i),i.join(this),(i.dirty||i.phantom)&&this.modified.push(i);this.snapshot&&this.snapshot.addAll(e),this.fireEvent("add",this,e,t)},indexOf:function(t){return this.data.indexOf(t)},indexOfId:function(t){return this.data.indexOfKey(t)},getById:function(t){return(this.snapshot||this.data).key(t)},getAt:function(t){return this.data.itemAt(t)},getRange:function(t,e){return this.data.getRange(t,e)},storeOptions:function(t){delete(t=Ext.apply({},t)).callback,delete t.scope,this.lastOptions=t},clearData:function(){this.data.each(function(t){t.join(null)}),this.data.clear()},load:function(t){var e;t=Ext.apply({},t),this.storeOptions(t),this.sortInfo&&this.remoteSort&&(e=this.paramNames,t.params=Ext.apply({},t.params),t.params[e.sort]=this.sortInfo.field,t.params[e.dir]=this.sortInfo.direction);try{return this.execute("read",null,t)}catch(t){return this.handleException(t),!1}},updateRecord:function(t,e,i){i==Ext.data.Record.EDIT&&!0===this.autoSave&&(!e.phantom||e.phantom&&e.isValid())&&this.save()},createRecords:function(t,e,i){for(var s,n=this.modified,r=e.length,o=0;o<r;o++)(s=e[o]).phantom&&s.isValid()&&(s.markDirty(),-1==n.indexOf(s)&&n.push(s));!0===this.autoSave&&this.save()},destroyRecord:function(t,e,i){-1!=this.modified.indexOf(e)&&this.modified.remove(e),e.phantom||(this.removed.push(e),e.lastIndex=i,!0===this.autoSave&&this.save())},execute:function(t,e,i,s){if(!Ext.data.Api.isAction(t))throw new Ext.data.Api.Error("execute",t);i=Ext.applyIf(i||{},{params:{}}),void 0!==s&&this.addToBatch(s);var n=!0;return"read"===t?(n=this.fireEvent("beforeload",this,i),Ext.applyIf(i.params,this.baseParams)):(!0===this.writer.listful&&!0!==this.restful?e=Ext.isArray(e)?e:[e]:Ext.isArray(e)&&1==e.length&&(e=e.shift()),!1!==(n=this.fireEvent("beforewrite",this,t,e,i))&&this.writer.apply(i.params,this.baseParams,t,e)),!1!==n&&(this.writer&&this.proxy.url&&!this.proxy.restful&&!Ext.data.Api.hasUniqueUrl(this.proxy,t)&&(i.params.xaction=t),this.proxy.request(Ext.data.Api.actions[t],e,i.params,this.reader,this.createCallback(t,e,s),this,i)),n},save:function(){if(!this.writer)throw new Ext.data.Store.Error("writer-undefined");var t,e,i,s=[],n={};this.removed.length&&s.push(["destroy",this.removed]);var r=[].concat(this.getModifiedRecords());if(r.length){for(var o,a=[],l=r.length-1;0<=l;l--)!0===r[l].phantom?(o=r.splice(l,1).shift()).isValid()&&a.push(o):r[l].isValid()||r.splice(l,1);a.length&&s.push(["create",a]),r.length&&s.push(["update",r])}if(t=s.length){for(i=++this.batchCounter,l=0;l<t;++l)n[(e=s[l])[0]]=e[1];if(!1!==this.fireEvent("beforesave",this,n)){for(l=0;l<t;++l)e=s[l],this.doTransaction(e[0],e[1],i);return i}}return-1},doTransaction:function(e,t,i){function s(t){try{this.execute(e,t,void 0,i)}catch(t){this.handleException(t)}}if(!1===this.batch)for(var n=0,r=t.length;n<r;n++)s.call(this,t[n]);else s.call(this,t)},addToBatch:function(t){var e=this.batches,i=this.batchKey+t,s=e[i];s||(e[i]=s={id:t,count:0,data:{}}),++s.count},removeFromBatch:function(t,e,i){var s,n=this.batches,r=this.batchKey+t,o=n[r];o&&(s=o.data[e]||[],o.data[e]=s.concat(i),1===o.count?(i=o.data,delete n[r],this.fireEvent("save",this,t,i)):--o.count)},createCallback:function(s,n,r){Ext.data.Api.actions;return"read"==s?this.loadRecords:function(t,e,i){this["on"+Ext.util.Format.capitalize(s)+"Records"](i,n,[].concat(t)),!0===i&&this.fireEvent("write",this,s,t,e,n),this.removeFromBatch(r,s,t)}},clearModified:function(t){if(Ext.isArray(t))for(var e=t.length-1;0<=e;e--)this.modified.splice(this.modified.indexOf(t[e]),1);else this.modified.splice(this.modified.indexOf(t),1)},reMap:function(t){if(Ext.isArray(t))for(var e=0,i=t.length;e<i;e++)this.reMap(t[e]);else{delete this.data.map[t._phid],this.data.map[t.id]=t;var s=this.data.keys.indexOf(t._phid);this.data.keys.splice(s,1,t.id),delete t._phid}},onCreateRecords:function(e,i,s){if(!0===e)try{this.reader.realize(i,s)}catch(t){this.handleException(t),Ext.isArray(i)&&this.onCreateRecords(e,i,s)}},onUpdateRecords:function(e,i,s){if(!0===e)try{this.reader.update(i,s)}catch(t){this.handleException(t),Ext.isArray(i)&&this.onUpdateRecords(e,i,s)}},onDestroyRecords:function(t,e,i){for(var s=0,n=(e=e instanceof Ext.data.Record?[e]:[].concat(e)).length;s<n;s++)this.removed.splice(this.removed.indexOf(e[s]),1);if(!1===t)for(s=e.length-1;0<=s;s--)this.insert(e[s].lastIndex,e[s])},handleException:function(t){Ext.handleError(t)},reload:function(t){this.load(Ext.applyIf(t||{},this.lastOptions))},loadRecords:function(t,e,i){if(!0!==this.isDestroyed){if(!t||!1===i)return!1!==i&&this.fireEvent("load",this,[],e),void(e.callback&&e.callback.call(e.scope||this,[],e,!1,t));var s=t.records,t=t.totalRecords||s.length;if(e&&!0===e.add){for(var n,r=[],o=0,a=0,l=s.length;a<l;++a)n=s[a],-1<this.indexOfId(n.id)?this.doUpdate(n):(r.push(n),++o);this.totalLength=Math.max(t,this.data.length+o),this.add(r)}else{for(this.pruneModifiedRecords&&(this.modified=[]),a=0,l=s.length;a<l;a++)s[a].join(this);this.snapshot&&(this.data=this.snapshot,delete this.snapshot),this.clearData(),this.data.addAll(s),this.totalLength=t,this.applySort(),this.fireEvent("datachanged",this)}this.fireEvent("load",this,s,e),e.callback&&e.callback.call(e.scope||this,s,e,!0)}},loadData:function(t,e){t=this.reader.readRecords(t);this.loadRecords(t,{add:e},!0)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalLength||0},getSortState:function(){return this.sortInfo},applySort:function(){!this.sortInfo&&!this.multiSortInfo||this.remoteSort||this.sortData()},sortData:function(){for(var r,t=this.hasMultiSort?this.multiSortInfo:this.sortInfo,e=t.direction||"ASC",i=t.sorters,o=[],s=0,n=(i=!this.hasMultiSort?[{direction:e,field:t.field}]:i).length;s<n;s++)o.push(this.createSortFunction(i[s].field,i[s].direction));0!=o.length&&(r="DESC"==e.toUpperCase()?-1:1,this.data.sort(e,t=function(t,e){var i=o[0].call(this,t,e);if(1<o.length)for(var s=1,n=o.length;s<n;s++)i=i||o[s].call(this,t,e);return r*i}),this.snapshot&&this.snapshot!=this.data&&this.snapshot.sort(e,t))},createSortFunction:function(i,t){var s="DESC"==(t=t||"ASC").toUpperCase()?-1:1,n=this.fields.get(i).sortType;return function(t,e){t=n(t.data[i]),e=n(e.data[i]);return s*(e<t?1:t<e?-1:0)}},setDefaultSort:function(t,e){e=e?e.toUpperCase():"ASC",this.sortInfo={field:t,direction:e},this.sortToggle[t]=e},sort:function(t,e){return Ext.isArray(t)?this.multiSort.call(this,t,e):this.singleSort(t,e)},singleSort:function(t,e){var i=this.fields.get(t);if(!i)return!1;var s=i.name,n=this.sortInfo||null,t=this.sortToggle?this.sortToggle[s]:null;return e=e||(n&&n.field==s?(this.sortToggle[s]||"ASC").toggle("ASC","DESC"):i.sortDir),this.sortToggle[s]=e,this.sortInfo={field:s,direction:e},this.hasMultiSort=!1,this.remoteSort?this.load(this.lastOptions)||(t&&(this.sortToggle[s]=t),n&&(this.sortInfo=n)):(this.applySort(),this.fireEvent("datachanged",this)),!0},multiSort:function(t,e){this.hasMultiSort=!0,e=e||"ASC",this.multiSortInfo&&e==this.multiSortInfo.direction&&(e=e.toggle("ASC","DESC")),this.multiSortInfo={sorters:t,direction:e},this.remoteSort?this.singleSort(t[0].field,t[0].direction):(this.applySort(),this.fireEvent("datachanged",this))},each:function(t,e){this.data.each(t,e)},getModifiedRecords:function(){return this.modified},sum:function(t,e,i){var s=this.data.items,n=0;i=i||0===i?i:s.length-1;for(var r=e=e||0;r<=i;r++)n+=s[r].data[t]||0;return n},createFilterFn:function(e,i,t,s,n){return!Ext.isEmpty(i,!1)&&(i=this.data.createValueMatcher(i,t,s,n),function(t){return i.test(t.data[e])})},createMultipleFilterFn:function(o){return function(t){for(var e=!0,i=0,s=o.length;i<s;i++)var n=o[i],r=n.fn,n=n.scope,e=e&&r.call(n,t);return e}},filter:function(t,e,i,s,n){var r;if(Ext.isObject(t)&&(t=[t]),Ext.isArray(t)){for(var o=[],a=0,l=t.length;a<l;a++){var d=t[a],h=d.fn,c=d.scope||this;Ext.isFunction(h)||(h=this.createFilterFn(d.property,d.value,d.anyMatch,d.caseSensitive,d.exactMatch)),o.push({fn:h,scope:c})}r=this.createMultipleFilterFn(o)}else r=this.createFilterFn(t,e,i,s,n);return r?this.filterBy(r):this.clearFilter()},filterBy:function(t,e){this.snapshot=this.snapshot||this.data,this.data=this.queryBy(t,e||this),this.fireEvent("datachanged",this)},clearFilter:function(t){this.isFiltered()&&(this.data=this.snapshot,delete this.snapshot,!0!==t&&this.fireEvent("datachanged",this))},isFiltered:function(){return!!this.snapshot&&this.snapshot!=this.data},query:function(t,e,i,s){s=this.createFilterFn(t,e,i,s);return s?this.queryBy(s):this.data.clone()},queryBy:function(t,e){return(this.snapshot||this.data).filterBy(t,e||this)},find:function(t,e,i,s,n){n=this.createFilterFn(t,e,s,n);return n?this.data.findIndexBy(n,null,i):-1},findExact:function(e,i,t){return this.data.findIndexBy(function(t){return t.get(e)===i},this,t)},findBy:function(t,e,i){return this.data.findIndexBy(t,e,i)},collect:function(t,e,i){for(var s,n,r=(!0===i&&this.snapshot?this.snapshot:this.data).items,o=[],a={},l=0,d=r.length;l<d;l++)s=r[l].data[t],n=String(s),!e&&Ext.isEmpty(s)||a[n]||(a[n]=!0,o[o.length]=s);return o},afterEdit:function(t){-1==this.modified.indexOf(t)&&this.modified.push(t),this.fireEvent("update",this,t,Ext.data.Record.EDIT)},afterReject:function(t){this.modified.remove(t),this.fireEvent("update",this,t,Ext.data.Record.REJECT)},afterCommit:function(t){this.modified.remove(t),this.fireEvent("update",this,t,Ext.data.Record.COMMIT)},commitChanges:function(){for(var t=this.modified.slice(0),e=t.length,i=0;i<e;i++)t[i].commit();this.modified=[],this.removed=[]},rejectChanges:function(){for(var t=this.modified.slice(0),e=this.removed.slice(0).reverse(),i=t.length,s=e.length,n=0;n<i;n++)t[n].reject();for(n=0;n<s;n++)this.insert(e[n].lastIndex||0,e[n]),e[n].reject();this.modified=[],this.removed=[]},onMetaChange:function(t){this.recordType=this.reader.recordType,this.fields=this.recordType.prototype.fields,delete this.snapshot,this.reader.meta.sortInfo?this.sortInfo=this.reader.meta.sortInfo:this.sortInfo&&!this.fields.get(this.sortInfo.field)&&delete this.sortInfo,this.writer&&(this.writer.meta=this.reader.meta),this.modified=[],this.fireEvent("metachange",this,this.reader.meta)},findInsertIndex:function(t){this.suspendEvents();var e=this.data.clone();this.data.add(t),this.applySort();t=this.data.indexOf(t);return this.data=e,this.resumeEvents(),t},setBaseParam:function(t,e){this.baseParams=this.baseParams||{},this.baseParams[t]=e}}),Ext.reg("store",Ext.data.Store),Ext.data.Store.Error=Ext.extend(Ext.Error,{name:"Ext.data.Store"}),Ext.apply(Ext.data.Store.Error.prototype,{lang:{"writer-undefined":"Attempted to execute a write-action without a DataWriter installed."}}),Ext.data.Field=Ext.extend(Object,{constructor:function(t){Ext.isString(t)&&(t={name:t}),Ext.apply(this,t);var e=Ext.data.Types,t=this.sortType;this.type?Ext.isString(this.type)&&(this.type=Ext.data.Types[this.type.toUpperCase()]||e.AUTO):this.type=e.AUTO,Ext.isString(t)?this.sortType=Ext.data.SortTypes[t]:Ext.isEmpty(t)&&(this.sortType=this.type.sortType),this.convert||(this.convert=this.type.convert)},dateFormat:null,useNull:!1,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC",allowBlank:!0}),Ext.data.DataReader=function(t,e){this.meta=t,this.recordType=Ext.isArray(e)?Ext.data.Record.create(e):e,this.recordType&&this.buildExtractors()},Ext.data.DataReader.prototype={getTotal:Ext.emptyFn,getRoot:Ext.emptyFn,getMessage:Ext.emptyFn,getSuccess:Ext.emptyFn,getId:Ext.emptyFn,buildExtractors:Ext.emptyFn,extractValues:Ext.emptyFn,realize:function(t,e){if(Ext.isArray(t))for(var i=t.length-1;0<=i;i--)Ext.isArray(e)?this.realize(t.splice(i,1).shift(),e.splice(i,1).shift()):this.realize(t.splice(i,1).shift(),e);else{if(Ext.isArray(e)&&1==e.length&&(e=e.shift()),!this.isData(e))throw new Ext.data.DataReader.Error("realize",t);t.phantom=!1,t._phid=t.id,t.id=this.getId(e),t.data=e,t.commit(),t.store.reMap(t)}},update:function(t,e){if(Ext.isArray(t))for(var i=t.length-1;0<=i;i--)Ext.isArray(e)?this.update(t.splice(i,1).shift(),e.splice(i,1).shift()):this.update(t.splice(i,1).shift(),e);else Ext.isArray(e)&&1==e.length&&(e=e.shift()),this.isData(e)&&(t.data=Ext.apply(t.data,e)),t.commit()},extractData:function(t,e){var i=this instanceof Ext.data.JsonReader?"json":"node",s=[];!this.isData(t)||this instanceof Ext.data.XmlReader||(t=[t]);var n=this.recordType.prototype.fields,r=n.items,o=n.length,s=[];if(!0===e)for(var a=this.recordType,l=0;l<t.length;l++){var d=t[l],h=new a(this.extractValues(d,r,o),this.getId(d));h[i]=d,s.push(h)}else for(l=0;l<t.length;l++){var c=this.extractValues(t[l],r,o);c[this.meta.idProperty]=this.getId(t[l]),s.push(c)}return s},isData:function(t){return!(!t||!Ext.isObject(t)||Ext.isEmpty(this.getId(t)))},onMetaChange:function(t){delete this.ef,this.meta=t,this.recordType=Ext.data.Record.create(t.fields),this.buildExtractors()}},Ext.data.DataReader.Error=Ext.extend(Ext.Error,{constructor:function(t,e){this.arg=e,Ext.Error.call(this,t)},name:"Ext.data.DataReader"}),Ext.apply(Ext.data.DataReader.Error.prototype,{lang:{update:"#update received invalid data from server.  Please see docs for DataReader#update and review your DataReader configuration.",realize:"#realize was called with invalid remote-data.  Please see the docs for DataReader#realize and review your DataReader configuration.","invalid-response":"#readResponse received an invalid response from the server."}}),Ext.data.DataWriter=function(t){Ext.apply(this,t)},Ext.data.DataWriter.prototype={writeAllFields:!1,listful:!1,apply:function(t,e,i,s){var n=[],r=i+"Record";Ext.isArray(s)?Ext.each(s,function(t){n.push(this[r](t))},this):s instanceof Ext.data.Record&&(n=this[r](s)),this.render(t,e,n)},render:Ext.emptyFn,updateRecord:Ext.emptyFn,createRecord:Ext.emptyFn,destroyRecord:Ext.emptyFn,toHash:function(t,e){var i,s=t.fields.map,n={},r=!1===this.writeAllFields&&!1===t.phantom?t.getChanges():t.data;return Ext.iterate(r,function(t,e){(i=s[t])&&(n[i.mapping||i.name]=e)}),t.phantom?t.fields.containsKey(this.meta.idProperty)&&Ext.isEmpty(t.data[this.meta.idProperty])&&delete n[this.meta.idProperty]:n[this.meta.idProperty]=t.id,n},toArray:function(t){var i=[];return Ext.iterate(t,function(t,e){i.push({name:t,value:e})},this),i}},Ext.data.DataProxy=function(t){this.api=(t=t||{}).api,this.url=t.url,this.restful=t.restful,this.listeners=t.listeners,this.prettyUrls=t.prettyUrls,this.addEvents("exception","beforeload","load","loadexception","beforewrite","write"),Ext.data.DataProxy.superclass.constructor.call(this);try{Ext.data.Api.prepare(this)}catch(t){t instanceof Ext.data.Api.Error&&t.toConsole()}Ext.data.DataProxy.relayEvents(this,["beforewrite","write","exception"])},Ext.extend(Ext.data.DataProxy,Ext.util.Observable,{restful:!1,setApi:function(){if(1==arguments.length){var t=Ext.data.Api.isValid(arguments[0]);if(!0!==t)throw new Ext.data.Api.Error("invalid",t);this.api=arguments[0]}else if(2==arguments.length){if(!Ext.data.Api.isAction(arguments[0]))throw new Ext.data.Api.Error("invalid",arguments[0]);this.api[arguments[0]]=arguments[1]}Ext.data.Api.prepare(this)},isApiAction:function(t){return!!this.api[t]},request:function(t,e,i,s,n,r,o){if(!this.api[t]&&!this.load)throw new Ext.data.DataProxy.Error("action-undefined",t);i=i||{},(t===Ext.data.Api.actions.read?this.fireEvent("beforeload",this,i):!1!==this.fireEvent("beforewrite",this,t,e,i))?this.doRequest.apply(this,arguments):n.call(r||this,null,o,!1)},load:null,doRequest:function(t,e,i,s,n,r,o){this.load(i,s,n,r,o)},onRead:Ext.emptyFn,onWrite:Ext.emptyFn,buildUrl:function(t,e){e=e||null;var i=(this.conn&&this.conn.url?this.conn:this.api[t]||this).url;if(!i)throw new Ext.data.Api.Error("invalid-url",t);var s=null,t=i.match(/(.*)(\.json|\.xml|\.html)$/);return t&&(s=t[2],i=t[1]),(!0===this.restful||!0===this.prettyUrls)&&e instanceof Ext.data.Record&&!e.phantom&&(i+="/"+e.id),null===s?i:i+s},destroy:function(){this.purgeListeners()}}),Ext.apply(Ext.data.DataProxy,Ext.util.Observable.prototype),Ext.util.Observable.call(Ext.data.DataProxy),Ext.data.DataProxy.Error=Ext.extend(Ext.Error,{constructor:function(t,e){this.arg=e,Ext.Error.call(this,t)},name:"Ext.data.DataProxy"}),Ext.apply(Ext.data.DataProxy.Error.prototype,{lang:{"action-undefined":"DataProxy attempted to execute an API-action but found an undefined url / function.  Please review your Proxy url/api-configuration.","api-invalid":"Recieved an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions from Ext.data.Api.actions."}}),Ext.data.Request=function(t){Ext.apply(this,t)},Ext.data.Request.prototype={action:void 0,rs:void 0,params:void 0,callback:Ext.emptyFn,scope:void 0,reader:void 0},Ext.data.Response=function(t){Ext.apply(this,t)},Ext.data.Response.prototype={action:void 0,success:void 0,message:void 0,data:void 0,raw:void 0,records:void 0},Ext.data.ScriptTagProxy=function(t){Ext.apply(this,t),Ext.data.ScriptTagProxy.superclass.constructor.call(this,t),this.head=document.getElementsByTagName("head")[0]},Ext.data.ScriptTagProxy.TRANS_ID=1e3,Ext.extend(Ext.data.ScriptTagProxy,Ext.data.DataProxy,{timeout:3e4,callbackParam:"callback",nocache:!0,doRequest:function(t,e,i,s,n,r,o){var a=Ext.urlEncode(Ext.apply(i,this.extraParams)),l=this.buildUrl(t,e);if(!l)throw new Ext.data.Api.Error("invalid-url",l);l=Ext.urlAppend(l,a),this.nocache&&(l=Ext.urlAppend(l,"_dc="+(new Date).getTime()));a=++Ext.data.ScriptTagProxy.TRANS_ID,s={id:a,action:t,cb:"stcCallback"+a,scriptId:"stcScript"+a,params:i,arg:o,url:l,callback:n,scope:r,reader:s};window[s.cb]=this.createCallback(t,e,s),l+=String.format("&{0}={1}",this.callbackParam,s.cb),!1!==this.autoAbort&&this.abort(),s.timeoutId=this.handleFailure.defer(this.timeout,this,[s]);e=document.createElement("script");e.setAttribute("src",l),e.setAttribute("type","text/javascript"),e.setAttribute("id",s.scriptId),this.head.appendChild(e),this.trans=s},createCallback:function(e,i,s){var n=this;return function(t){n.trans=!1,n.destroyTrans(s,!0),e===Ext.data.Api.actions.read?n.onRead.call(n,e,s,t):n.onWrite.call(n,e,s,t,i)}},onRead:function(e,i,s){var t;try{t=i.reader.readRecords(s)}catch(t){return this.fireEvent("loadexception",this,i,s,t),this.fireEvent("exception",this,"response",e,i,s,t),void i.callback.call(i.scope||window,null,i.arg,!1)}!1===t.success?(this.fireEvent("loadexception",this,i,s),this.fireEvent("exception",this,"remote",e,i,s,null)):this.fireEvent("load",this,s,i.arg),i.callback.call(i.scope||window,t,i.arg,t.success)},onWrite:function(e,i,t,s){var n=i.reader;try{var r=n.readResponse(e,t)}catch(t){return this.fireEvent("exception",this,"response",e,i,r,t),void i.callback.call(i.scope||window,null,r,!1)}if(!0==!r.success)return this.fireEvent("exception",this,"remote",e,i,r,s),void i.callback.call(i.scope||window,null,r,!1);this.fireEvent("write",this,e,r.data,r,s,i.arg),i.callback.call(i.scope||window,r.data,r,!0)},isLoading:function(){return!!this.trans},abort:function(){this.isLoading()&&this.destroyTrans(this.trans)},destroyTrans:function(t,e){if(this.head.removeChild(document.getElementById(t.scriptId)),clearTimeout(t.timeoutId),e){window[t.cb]=void 0;try{delete window[t.cb]}catch(t){}}else window[t.cb]=function(){window[t.cb]=void 0;try{delete window[t.cb]}catch(t){}}},handleFailure:function(t){this.trans=!1,this.destroyTrans(t,!1),t.action===Ext.data.Api.actions.read&&this.fireEvent("loadexception",this,null,t.arg),this.fireEvent("exception",this,"response",t.action,{response:null,options:t.arg}),t.callback.call(t.scope||window,null,t.arg,!1)},destroy:function(){this.abort(),Ext.data.ScriptTagProxy.superclass.destroy.call(this)}}),Ext.data.HttpProxy=function(t){Ext.data.HttpProxy.superclass.constructor.call(this,t),this.conn=t,this.conn.url=null,this.useAjax=!t||!t.events;var e,i=Ext.data.Api.actions;for(e in this.activeRequest={},i)this.activeRequest[i[e]]=void 0},Ext.extend(Ext.data.HttpProxy,Ext.data.DataProxy,{getConnection:function(){return this.useAjax?Ext.Ajax:this.conn},setUrl:function(t,e){this.conn.url=t,!0===e&&(this.url=t,this.api=null,Ext.data.Api.prepare(this))},doRequest:function(t,e,i,s,n,r,o){s={method:this.api[t]?this.api[t].method:void 0,request:{callback:n,scope:r,arg:o},reader:s,callback:this.createCallback(t,e),scope:this};i.jsonData?s.jsonData=i.jsonData:i.xmlData?s.xmlData=i.xmlData:s.params=i||{},this.conn.url=this.buildUrl(t,e),this.useAjax?(Ext.applyIf(s,this.conn),t==Ext.data.Api.actions.read&&this.activeRequest[t]&&Ext.Ajax.abort(this.activeRequest[t]),this.activeRequest[t]=Ext.Ajax.request(s)):this.conn.request(s),this.conn.url=null},createCallback:function(s,n){return function(t,e,i){if(this.activeRequest[s]=void 0,!e)return s===Ext.data.Api.actions.read&&this.fireEvent("loadexception",this,t,i),this.fireEvent("exception",this,"response",s,t,i),void t.request.callback.call(t.request.scope,null,t.request.arg,!1);s===Ext.data.Api.actions.read?this.onRead(s,t,i):this.onWrite(s,t,i,n)}},onRead:function(e,i,s){var t;try{t=i.reader.read(s)}catch(t){return this.fireEvent("loadexception",this,i,s,t),this.fireEvent("exception",this,"response",e,i,s,t),void i.request.callback.call(i.request.scope,null,i.request.arg,!1)}!1===t.success?(this.fireEvent("loadexception",this,i,s),s=i.reader.readResponse(e,s),this.fireEvent("exception",this,"remote",e,i,s,null)):this.fireEvent("load",this,i,i.request.arg),i.request.callback.call(i.request.scope,t,i.request.arg,t.success)},onWrite:function(e,i,s,t){var n,r=i.reader;try{n=r.readResponse(e,s)}catch(t){return this.fireEvent("exception",this,"response",e,i,s,t),void i.request.callback.call(i.request.scope,null,i.request.arg,!1)}!0===n.success?this.fireEvent("write",this,e,n.data,n,t,i.request.arg):this.fireEvent("exception",this,"remote",e,i,n,t),i.request.callback.call(i.request.scope,n.data,n,n.success)},destroy:function(){if(this.useAjax){if(this.activeRequest){var t,e=Ext.data.Api.actions;for(t in e)this.activeRequest[e[t]]&&Ext.Ajax.abort(this.activeRequest[e[t]])}}else this.conn.abort();Ext.data.HttpProxy.superclass.destroy.call(this)}}),Ext.data.MemoryProxy=function(t){var e={};e[Ext.data.Api.actions.read]=!0,Ext.data.MemoryProxy.superclass.constructor.call(this,{api:e}),this.data=t},Ext.extend(Ext.data.MemoryProxy,Ext.data.DataProxy,{doRequest:function(e,t,i,s,n,r,o){var a;try{a=s.readRecords(this.data)}catch(t){return this.fireEvent("loadexception",this,null,o,t),this.fireEvent("exception",this,"response",e,o,null,t),void n.call(r,null,o,!1)}n.call(r,a,o,!0)}}),Ext.data.Types=new function(){var t=Ext.data.SortTypes;Ext.apply(this,{stripRe:/[\$,%]/g,AUTO:{convert:function(t){return t},sortType:t.none,type:"auto"},STRING:{convert:function(t){return null==t?"":String(t)},sortType:t.asUCString,type:"string"},INT:{convert:function(t){return null!=t&&""!==t?parseInt(String(t).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:t.none,type:"int"},FLOAT:{convert:function(t){return null!=t&&""!==t?parseFloat(String(t).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:t.none,type:"float"},BOOL:{convert:function(t){return!0===t||"true"===t||1==t},sortType:t.none,type:"bool"},DATE:{convert:function(t){var e=this.dateFormat;if(!t)return null;if(Ext.isDate(t))return t;if(e)return"timestamp"==e?new Date(1e3*t):"time"==e?new Date(parseInt(t,10)):Date.parseDate(t,e);t=Date.parse(t);return t?new Date(t):null},sortType:t.asDate,type:"date"}}),Ext.apply(this,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})},Ext.data.JsonWriter=Ext.extend(Ext.data.DataWriter,{encode:!0,encodeDelete:!1,constructor:function(t){Ext.data.JsonWriter.superclass.constructor.call(this,t)},render:function(t,e,i){!0===this.encode?(Ext.apply(t,e),t[this.meta.root]=Ext.encode(i)):((e=Ext.apply({},e))[this.meta.root]=i,t.jsonData=e)},createRecord:function(t){return this.toHash(t)},updateRecord:function(t){return this.toHash(t)},destroyRecord:function(t){if(this.encodeDelete){var e={};return e[this.meta.idProperty]=t.id,e}return t.id}}),Ext.data.JsonReader=function(t,e){t=t||{},Ext.applyIf(t,{idProperty:"id",successProperty:"success",totalProperty:"total"}),Ext.data.JsonReader.superclass.constructor.call(this,t,e||t.fields)},Ext.extend(Ext.data.JsonReader,Ext.data.DataReader,{read:function(t){t=t.responseText,t=Ext.decode(t);if(!t)throw{message:"JsonReader.read: Json object not found"};return this.readRecords(t)},readResponse:function(t,e){var i=void 0!==e.responseText?Ext.decode(e.responseText):e;if(!i)throw new Ext.data.JsonReader.Error("response");var s=this.getRoot(i),n=this.getSuccess(i);if(n&&t===Ext.data.Api.actions.create){e=Ext.isDefined(s);if(e&&Ext.isEmpty(s))throw new Ext.data.JsonReader.Error("root-empty",this.meta.root);if(!e)throw new Ext.data.JsonReader.Error("root-undefined-response",this.meta.root)}i=new Ext.data.Response({action:t,success:n,data:s?this.extractData(s,!1):[],message:this.getMessage(i),raw:i});if(Ext.isEmpty(i.success))throw new Ext.data.JsonReader.Error("successProperty-response",this.meta.successProperty);return i},readRecords:function(t){(this.jsonData=t).metaData&&this.onMetaChange(t.metaData);var e,i=this.meta,s=this.recordType.prototype.fields,n=(s.items,s.length,this.getRoot(t)),r=n.length,s=!0;return i.totalProperty&&(e=parseInt(this.getTotal(t),10),isNaN(e)||(r=e)),i.successProperty&&(!1!==(e=this.getSuccess(t))&&"false"!==e||(s=!1)),{success:s,records:this.extractData(n,!0),totalRecords:r}},buildExtractors:function(){if(!this.ef){var e,t=this.meta,i=(o=this.recordType.prototype.fields).items,s=o.length;t.totalProperty&&(this.getTotal=this.createAccessor(t.totalProperty)),t.successProperty&&(this.getSuccess=this.createAccessor(t.successProperty)),t.messageProperty&&(this.getMessage=this.createAccessor(t.messageProperty)),this.getRoot=t.root?this.createAccessor(t.root):function(t){return t},t.id||t.idProperty?(e=this.createAccessor(t.id||t.idProperty),this.getId=function(t){t=e(t);return void 0===t||""===t?null:t}):this.getId=function(){return null};for(var n=[],r=0;r<s;r++){var o,a=void 0!==(o=i[r]).mapping&&null!==o.mapping?o.mapping:o.name;n.push(this.createAccessor(a))}this.ef=n}},simpleAccess:function(t,e){return t[e]},createAccessor:function(){var i=/[\[\.]/;return function(e){if(Ext.isEmpty(e))return Ext.emptyFn;if(Ext.isFunction(e))return e;var t=String(e).search(i);return 0<=t?new Function("obj","return obj"+(0<t?".":"")+e):function(t){return t[e]}}}(),extractValues:function(t,e,i){for(var s={},n=0;n<i;n++){var r=e[n],o=this.ef[n](t);s[r.name]=r.convert(void 0!==o?o:r.defaultValue,t)}return s}}),Ext.data.JsonReader.Error=Ext.extend(Ext.Error,{constructor:function(t,e){this.arg=e,Ext.Error.call(this,t)},name:"Ext.data.JsonReader"}),Ext.apply(Ext.data.JsonReader.Error.prototype,{lang:{response:"An error occurred while json-decoding your server response","successProperty-response":'Could not locate your "successProperty" in your server response.  Please review your JsonReader config to ensure the config-property "successProperty" matches the property in your server-response.  See the JsonReader docs.',"root-undefined-config":'Your JsonReader was configured without a "root" property.  Please review your JsonReader config and make sure to define the root property.  See the JsonReader docs.',"idProperty-undefined":'Your JsonReader was configured without an "idProperty"  Please review your JsonReader configuration and ensure the "idProperty" is set (e.g.: "id").  See the JsonReader docs.',"root-empty":'Data was expected to be returned by the server in the "root" property of the response.  Please review your JsonReader configuration to ensure the "root" property matches that returned in the server-response.  See JsonReader docs.'}}),Ext.data.ArrayReader=Ext.extend(Ext.data.JsonReader,{readRecords:function(t){this.arrayData=t;for(var e=this.meta,i=e?Ext.num(e.idIndex,e.id):null,s=this.recordType,n=s.prototype.fields,r=[],o=!0,a=this.getRoot(t),l=0,d=a.length;l<d;l++){for(var h=a[l],c={},u=!i&&0!==i||void 0===h[i]||""===h[i]?null:h[i],f=0,p=n.length;f<p;f++){var m=n.items[f],g=void 0!==m.mapping&&null!==m.mapping?m.mapping:f,x=void 0!==h[g]?h[g]:m.defaultValue;x=m.convert(x,h),c[m.name]=x}u=new s(c,u);u.json=h,r[r.length]=u}var E=r.length;return e.totalProperty&&(x=parseInt(this.getTotal(t),10),isNaN(x)||(E=x)),e.successProperty&&(!1!==(x=this.getSuccess(t))&&"false"!==x||(o=!1)),{success:o,records:r,totalRecords:E}}}),Ext.data.ArrayStore=Ext.extend(Ext.data.Store,{constructor:function(t){Ext.data.ArrayStore.superclass.constructor.call(this,Ext.apply(t,{reader:new Ext.data.ArrayReader(t)}))},loadData:function(t,e){if(!0===this.expandData){for(var i=[],s=0,n=t.length;s<n;s++)i[i.length]=[t[s]];t=i}Ext.data.ArrayStore.superclass.loadData.call(this,t,e)}}),Ext.reg("arraystore",Ext.data.ArrayStore),Ext.data.SimpleStore=Ext.data.ArrayStore,Ext.reg("simplestore",Ext.data.SimpleStore),Ext.data.JsonStore=Ext.extend(Ext.data.Store,{constructor:function(t){Ext.data.JsonStore.superclass.constructor.call(this,Ext.apply(t,{reader:new Ext.data.JsonReader(t)}))}}),Ext.reg("jsonstore",Ext.data.JsonStore),Ext.data.XmlWriter=function(t){Ext.data.XmlWriter.superclass.constructor.apply(this,arguments),this.tpl=("string"==typeof this.tpl?new Ext.XTemplate(this.tpl):this.tpl).compile()},Ext.extend(Ext.data.XmlWriter,Ext.data.DataWriter,{documentRoot:"xrequest",forceDocumentRoot:!1,root:"records",xmlVersion:"1.0",xmlEncoding:"ISO-8859-15",tpl:'<tpl for="."><?xml version="{version}" encoding="{encoding}"?><tpl if="documentRoot"><{documentRoot}><tpl for="baseParams"><tpl for="."><{name}>{value}</{name}></tpl></tpl></tpl><tpl if="records.length&gt;1"><{root}></tpl><tpl for="records"><{parent.record}><tpl for="."><{name}>{value}</{name}></tpl></{parent.record}></tpl><tpl if="records.length&gt;1"></{root}></tpl><tpl if="documentRoot"></{documentRoot}></tpl></tpl>',render:function(t,e,i){e=this.toArray(e),t.xmlData=this.tpl.applyTemplate({version:this.xmlVersion,encoding:this.xmlEncoding,documentRoot:(0<e.length||!0===this.forceDocumentRoot)&&this.documentRoot,record:this.meta.record,root:this.root,baseParams:e,records:Ext.isArray(i[0])?i:[i]})},createRecord:function(t){return this.toArray(this.toHash(t))},updateRecord:function(t){return this.toArray(this.toHash(t))},destroyRecord:function(t){var e={};return e[this.meta.idProperty]=t.id,this.toArray(e)}}),Ext.data.XmlReader=function(t,e){t=t||{},Ext.applyIf(t,{idProperty:t.idProperty||t.idPath||t.id,successProperty:t.successProperty||t.success}),Ext.data.XmlReader.superclass.constructor.call(this,t,e||t.fields)},Ext.extend(Ext.data.XmlReader,Ext.data.DataReader,{read:function(t){t=t.responseXML;if(!t)throw{message:"XmlReader.read: XML Document not available"};return this.readRecords(t)},readRecords:function(t){var e=(this.xmlData=t).documentElement||t,i=Ext.DomQuery,s=0,t=!0;this.meta.totalProperty&&(s=this.getTotal(e,0)),this.meta.successProperty&&(t=this.getSuccess(e));e=this.extractData(i.select(this.meta.record,e),!0);return{success:t,records:e,totalRecords:s||e.length}},readResponse:function(t,e){var i=Ext.DomQuery,s=e.responseXML,e=s.documentElement||s,s=new Ext.data.Response({action:t,success:this.getSuccess(e),message:this.getMessage(e),data:this.extractData(i.select(this.meta.record,e)||i.select(this.meta.root,e),!1),raw:s});if(Ext.isEmpty(s.success))throw new Ext.data.DataReader.Error("successProperty-response",this.meta.successProperty);if(t===Ext.data.Api.actions.create){t=Ext.isDefined(s.data);if(t&&Ext.isEmpty(s.data))throw new Ext.data.JsonReader.Error("root-empty",this.meta.root);if(!t)throw new Ext.data.JsonReader.Error("root-undefined-response",this.meta.root)}return s},getSuccess:function(){return!0},buildExtractors:function(){if(!this.ef){var e,t=this.meta,i=(o=this.recordType.prototype.fields).items,s=o.length;t.totalProperty&&(this.getTotal=this.createAccessor(t.totalProperty)),t.successProperty&&(this.getSuccess=this.createAccessor(t.successProperty)),t.messageProperty&&(this.getMessage=this.createAccessor(t.messageProperty)),this.getRoot=function(t){return Ext.isEmpty(t[this.meta.record])?t[this.meta.root]:t[this.meta.record]},t.idPath||t.idProperty?(e=this.createAccessor(t.idPath||t.idProperty),this.getId=function(t){t=e(t)||t.id;return void 0===t||""===t?null:t}):this.getId=function(){return null};for(var n=[],r=0;r<s;r++){var o,a=void 0!==(o=i[r]).mapping&&null!==o.mapping?o.mapping:o.name;n.push(this.createAccessor(a))}this.ef=n}},createAccessor:function(){var s=Ext.DomQuery;return function(i){if(Ext.isFunction(i))return i;switch(i){case this.meta.totalProperty:return function(t,e){return s.selectNumber(i,t,e)};case this.meta.successProperty:return function(t,e){t=s.selectValue(i,t,!0);return!1!==t&&"false"!==t};default:return function(t,e){return s.selectValue(i,t,e)}}}}(),extractValues:function(t,e,i){for(var s={},n=0;n<i;n++){var r=e[n],o=this.ef[n](t);s[r.name]=r.convert(void 0!==o?o:r.defaultValue,t)}return s}}),Ext.data.XmlStore=Ext.extend(Ext.data.Store,{constructor:function(t){Ext.data.XmlStore.superclass.constructor.call(this,Ext.apply(t,{reader:new Ext.data.XmlReader(t)}))}}),Ext.reg("xmlstore",Ext.data.XmlStore),Ext.data.GroupingStore=Ext.extend(Ext.data.Store,{constructor:function(t){t=t||{},this.hasMultiSort=!0,this.multiSortInfo=this.multiSortInfo||{sorters:[]};var e=this.multiSortInfo.sorters,i=t.groupField||this.groupField,s=t.sortInfo||this.sortInfo,n=t.groupDir||this.groupDir;i&&e.push({field:i,direction:n}),s&&e.push(s),Ext.data.GroupingStore.superclass.constructor.call(this,t),this.addEvents("groupchange"),this.applyGroupField()},remoteGroup:!1,groupOnSort:!1,groupDir:"ASC",clearGrouping:function(){var t;this.groupField=!1,this.remoteGroup?(this.baseParams&&(delete this.baseParams.groupBy,delete this.baseParams.groupDir),(t=this.lastOptions)&&t.params&&(delete t.params.groupBy,delete t.params.groupDir),this.reload()):(this.sort(),this.fireEvent("datachanged",this))},groupBy:function(t,e,i){if(i=i?"DESC"==String(i).toUpperCase()?"DESC":"ASC":this.groupDir,this.groupField!=t||this.groupDir!=i||e){e=this.multiSortInfo.sorters;0<e.length&&e[0].field==this.groupField&&e.shift(),this.groupField=t,this.groupDir=i,this.applyGroupField();function s(){this.fireEvent("groupchange",this,this.getGroupState())}if(this.groupOnSort)return this.sort(t,i),void s.call(this);this.remoteGroup?(this.on("load",s,this,{single:!0}),this.reload()):(this.sort(e),s.call(this))}},sort:function(t,e){if(this.remoteSort)return Ext.data.GroupingStore.superclass.sort.call(this,t,e);var i=[];if(Ext.isArray(t))i=t;else if(null==t)i=this.sortInfo?[this.sortInfo]:[];else{var s=this.fields.get(t);if(!s)return!1;var n=s.name,r=this.sortInfo||null;this.sortToggle&&this.sortToggle[n];e=e||(r&&r.field==n?(this.sortToggle[n]||"ASC").toggle("ASC","DESC"):s.sortDir),this.sortToggle[n]=e,this.sortInfo={field:n,direction:e},i=[this.sortInfo]}return this.groupField&&i.unshift({direction:this.groupDir,field:this.groupField}),this.multiSort.call(this,i,e)},applyGroupField:function(){var t;this.remoteGroup&&(this.baseParams||(this.baseParams={}),Ext.apply(this.baseParams,{groupBy:this.groupField,groupDir:this.groupDir}),(t=this.lastOptions)&&t.params&&(t.params.groupDir=this.groupDir,delete t.params.groupBy))},applyGrouping:function(t){return!1!==this.groupField?(this.groupBy(this.groupField,!0,this.groupDir),!0):(!0===t&&this.fireEvent("datachanged",this),!1)},getGroupState:function(){return this.groupOnSort&&!1!==this.groupField?this.sortInfo?this.sortInfo.field:void 0:this.groupField}}),Ext.reg("groupingstore",Ext.data.GroupingStore),Ext.data.DirectProxy=function(t){Ext.apply(this,t),"string"==typeof this.paramOrder&&(this.paramOrder=this.paramOrder.split(/[\s,|]/)),Ext.data.DirectProxy.superclass.constructor.call(this,t)},Ext.extend(Ext.data.DirectProxy,Ext.data.DataProxy,{paramOrder:void 0,paramsAsHash:!0,directFn:void 0,doRequest:function(t,e,i,s,n,r,o){var a=[],l=this.api[t]||this.directFn;switch(t){case Ext.data.Api.actions.create:a.push(i.jsonData);break;case Ext.data.Api.actions.read:if(0<l.directCfg.method.len)if(this.paramOrder)for(var d=0,h=this.paramOrder.length;d<h;d++)a.push(i[this.paramOrder[d]]);else this.paramsAsHash&&a.push(i);break;case Ext.data.Api.actions.update:case Ext.data.Api.actions.destroy:a.push(i.jsonData)}a.push(this.createCallback(t,e,{params:i||{},request:{callback:n,scope:r,arg:o},reader:s}),this),l.apply(window,a)},createCallback:function(i,s,n){var r=this;return function(t,e){if(!e.status)return i===Ext.data.Api.actions.read&&r.fireEvent("loadexception",r,n,e,null),r.fireEvent("exception",r,"remote",i,n,e,null),void n.request.callback.call(n.request.scope,null,n.request.arg,!1);i===Ext.data.Api.actions.read?r.onRead(i,n,t,e):r.onWrite(i,n,t,e,s)}},onRead:function(e,i,t,s){var n;try{n=i.reader.readRecords(t)}catch(t){return this.fireEvent("loadexception",this,i,s,t),this.fireEvent("exception",this,"response",e,i,s,t),void i.request.callback.call(i.request.scope,null,i.request.arg,!1)}this.fireEvent("load",this,s,i.request.arg),i.request.callback.call(i.request.scope,n,i.request.arg,!0)},onWrite:function(t,e,i,s,n){var r,o=e.reader.extractData(e.reader.getRoot(i),!1);(r=!1!==(r=e.reader.getSuccess(i)))?this.fireEvent("write",this,t,o,s,n,e.request.arg):this.fireEvent("exception",this,"remote",t,e,i,n),e.request.callback.call(e.request.scope,o,s,r)}}),Ext.data.DirectStore=Ext.extend(Ext.data.Store,{constructor:function(t){t=Ext.apply({},{batchTransactions:!1},t);Ext.data.DirectStore.superclass.constructor.call(this,Ext.apply(t,{proxy:Ext.isDefined(t.proxy)?t.proxy:new Ext.data.DirectProxy(Ext.copyTo({},t,"paramOrder,paramsAsHash,directFn,api")),reader:!Ext.isDefined(t.reader)&&t.fields?new Ext.data.JsonReader(Ext.copyTo({},t,"totalProperty,root,idProperty"),t.fields):t.reader}))}}),Ext.reg("directstore",Ext.data.DirectStore),Ext.Direct=Ext.extend(Ext.util.Observable,{exceptions:{TRANSPORT:"xhr",PARSE:"parse",LOGIN:"login",SERVER:"exception"},constructor:function(){this.addEvents("event","exception"),this.transactions={},this.providers={}},addProvider:function(t){var e=arguments;if(!(1<e.length))return(t=!t.events?new Ext.Direct.PROVIDERS[t.type](t):t).id=t.id||Ext.id(),(this.providers[t.id]=t).on("data",this.onProviderData,this),t.on("exception",this.onProviderException,this),t.isConnected()||t.connect(),t;for(var i=0,s=e.length;i<s;i++)this.addProvider(e[i])},getProvider:function(t){return this.providers[t]},removeProvider:function(t){t=t.id?t:this.providers[t];return t.un("data",this.onProviderData,this),t.un("exception",this.onProviderException,this),delete this.providers[t.id],t},addTransaction:function(t){return this.transactions[t.tid]=t},removeTransaction:function(t){return delete this.transactions[t.tid||t],t},getTransaction:function(t){return this.transactions[t.tid||t]},onProviderData:function(t,e){if(Ext.isArray(e))for(var i=0,s=e.length;i<s;i++)this.onProviderData(t,e[i]);else e.name&&"event"!=e.name&&"exception"!=e.name?this.fireEvent(e.name,e):"exception"==e.type&&this.fireEvent("exception",e),this.fireEvent("event",e,t)},createEvent:function(t,e){return new Ext.Direct.eventTypes[t.type](Ext.apply(t,e))}}),Ext.Direct=new Ext.Direct,Ext.Direct.TID=1,Ext.Direct.PROVIDERS={},Ext.Direct.Transaction=function(t){Ext.apply(this,t),this.tid=++Ext.Direct.TID,this.retryCount=0},Ext.Direct.Transaction.prototype={send:function(){this.provider.queueTransaction(this)},retry:function(){this.retryCount++,this.send()},getProvider:function(){return this.provider}},Ext.Direct.Event=function(t){Ext.apply(this,t)},Ext.Direct.Event.prototype={status:!0,getData:function(){return this.data}},Ext.Direct.RemotingEvent=Ext.extend(Ext.Direct.Event,{type:"rpc",getTransaction:function(){return this.transaction||Ext.Direct.getTransaction(this.tid)}}),Ext.Direct.ExceptionEvent=Ext.extend(Ext.Direct.RemotingEvent,{status:!1,type:"exception"}),Ext.Direct.eventTypes={rpc:Ext.Direct.RemotingEvent,event:Ext.Direct.Event,exception:Ext.Direct.ExceptionEvent},Ext.direct.Provider=Ext.extend(Ext.util.Observable,{priority:1,constructor:function(t){Ext.apply(this,t),this.addEvents("connect","disconnect","data","exception"),Ext.direct.Provider.superclass.constructor.call(this,t)},isConnected:function(){return!1},connect:Ext.emptyFn,disconnect:Ext.emptyFn}),Ext.direct.JsonProvider=Ext.extend(Ext.direct.Provider,{parseResponse:function(t){return Ext.isEmpty(t.responseText)?null:"object"==typeof t.responseText?t.responseText:Ext.decode(t.responseText)},getEvents:function(e){var i=null;try{i=this.parseResponse(e)}catch(t){return[new Ext.Direct.ExceptionEvent({data:t,xhr:e,code:Ext.Direct.exceptions.PARSE,message:"Error parsing json response: \n\n "+i})]}var t=[];if(Ext.isArray(i))for(var s=0,n=i.length;s<n;s++)t.push(Ext.Direct.createEvent(i[s]));else t.push(Ext.Direct.createEvent(i));return t}}),Ext.direct.PollingProvider=Ext.extend(Ext.direct.JsonProvider,{priority:3,interval:3e3,constructor:function(t){Ext.direct.PollingProvider.superclass.constructor.call(this,t),this.addEvents("beforepoll","poll")},isConnected:function(){return!!this.pollTask},connect:function(){if(this.url&&!this.pollTask)this.pollTask=Ext.TaskMgr.start({run:function(){!1!==this.fireEvent("beforepoll",this)&&("function"==typeof this.url?this.url(this.baseParams):Ext.Ajax.request({url:this.url,callback:this.onData,scope:this,params:this.baseParams}))},interval:this.interval,scope:this}),this.fireEvent("connect",this);else if(!this.url)throw"Error initializing PollingProvider, no url configured."},disconnect:function(){this.pollTask&&(Ext.TaskMgr.stop(this.pollTask),delete this.pollTask,this.fireEvent("disconnect",this))},onData:function(t,e,i){if(e)for(var s=this.getEvents(i),n=0,r=s.length;n<r;n++){var o=s[n];this.fireEvent("data",this,o)}else{o=new Ext.Direct.ExceptionEvent({data:o,code:Ext.Direct.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:i});this.fireEvent("data",this,o)}}}),Ext.Direct.PROVIDERS.polling=Ext.direct.PollingProvider,Ext.direct.RemotingProvider=Ext.extend(Ext.direct.JsonProvider,{enableBuffer:10,maxRetries:1,timeout:void 0,constructor:function(t){Ext.direct.RemotingProvider.superclass.constructor.call(this,t),this.addEvents("beforecall","call"),this.namespace=Ext.isString(this.namespace)?Ext.ns(this.namespace):this.namespace||window,this.transactions={},this.callBuffer=[]},initAPI:function(){var t,e=this.actions;for(t in e)for(var i=this.namespace[t]||(this.namespace[t]={}),s=e[t],n=0,r=s.length;n<r;n++){var o=s[n];i[o.name]=this.createMethod(t,o)}},isConnected:function(){return!!this.connected},connect:function(){if(this.url)this.initAPI(),this.connected=!0,this.fireEvent("connect",this);else if(!this.url)throw"Error initializing RemotingProvider, no url configured."},disconnect:function(){this.connected&&(this.connected=!1,this.fireEvent("disconnect",this))},onData:function(t,e,i){if(e)for(var s=this.getEvents(i),n=0,r=s.length;n<r;n++){var o=s[n],a=this.getTransaction(o);this.fireEvent("data",this,o),a&&(this.doCallback(a,o,!0),Ext.Direct.removeTransaction(a))}else for(var l=[].concat(t.ts),n=0,r=l.length;n<r;n++)(a=this.getTransaction(l[n]))&&a.retryCount<this.maxRetries?a.retry():(o=new Ext.Direct.ExceptionEvent({data:o,transaction:a,code:Ext.Direct.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:i}),this.fireEvent("data",this,o),a&&(this.doCallback(a,o,!1),Ext.Direct.removeTransaction(a)))},getCallData:function(t){return{action:t.action,method:t.method,data:t.data,type:"rpc",tid:t.tid}},doSend:function(t){var e,i={url:this.url,callback:this.onData,scope:this,ts:t,timeout:this.timeout};if(Ext.isArray(t))for(var s=[],n=0,r=t.length;n<r;n++)s.push(this.getCallData(t[n]));else s=this.getCallData(t);this.enableUrlEncode?((e={})[Ext.isString(this.enableUrlEncode)?this.enableUrlEncode:"data"]=Ext.encode(s),i.params=e):i.jsonData=s,Ext.Ajax.request(i)},combineAndSend:function(){var t=this.callBuffer.length;0<t&&(this.doSend(1==t?this.callBuffer[0]:this.callBuffer),this.callBuffer=[])},queueTransaction:function(t){t.form?this.processForm(t):(this.callBuffer.push(t),this.enableBuffer?(this.callTask||(this.callTask=new Ext.util.DelayedTask(this.combineAndSend,this)),this.callTask.delay(Ext.isNumber(this.enableBuffer)?this.enableBuffer:10)):this.combineAndSend())},doCall:function(t,e,i){var s=null,n=i[e.len],r=i[e.len+1];0!==e.len&&(s=i.slice(0,e.len));n=new Ext.Direct.Transaction({provider:this,args:i,action:t,method:e.name,data:s,cb:r&&Ext.isFunction(n)?n.createDelegate(r):n});!1!==this.fireEvent("beforecall",this,n,e)&&(Ext.Direct.addTransaction(n),this.queueTransaction(n),this.fireEvent("call",this,n,e))},doForm:function(t,e,i,s,n){var r=new Ext.Direct.Transaction({provider:this,action:t,method:e.name,args:[i,s,n],cb:n&&Ext.isFunction(s)?s.createDelegate(n):s,isForm:!0});!1!==this.fireEvent("beforecall",this,r,e)&&(Ext.Direct.addTransaction(r),n="multipart/form-data"==String(i.getAttribute("enctype")).toLowerCase(),t={extTID:r.tid,extAction:t,extMethod:e.name,extType:"rpc",extUpload:String(n)},Ext.apply(r,{form:Ext.getDom(i),isUpload:n,params:s&&Ext.isObject(s.params)?Ext.apply(t,s.params):t}),this.fireEvent("call",this,r,e),this.processForm(r))},processForm:function(t){Ext.Ajax.request({url:this.url,params:t.params,callback:this.onData,scope:this,form:t.form,isUpload:t.isUpload,ts:t})},createMethod:function(s,n){var t=(n.formHandler?function(t,e,i){this.doForm(s,n,t,e,i)}:function(){this.doCall(s,n,Array.prototype.slice.call(arguments,0))}).createDelegate(this);return t.directCfg={action:s,method:n},t},getTransaction:function(t){return t&&t.tid?Ext.Direct.getTransaction(t.tid):null},doCallback:function(t,e){var i,s=e.status?"success":"failure";t&&t.cb&&(i=t.cb,t=Ext.isDefined(e.result)?e.result:e.data,Ext.isFunction(i)?i(t,e):(Ext.callback(i[s],i.scope,[t,e]),Ext.callback(i.callback,i.scope,[t,e])))}}),Ext.Direct.PROVIDERS.remoting=Ext.direct.RemotingProvider,Ext.Resizable=Ext.extend(Ext.util.Observable,{constructor:function(t,e){this.el=Ext.get(t),e&&e.wrap&&(e.resizeChild=this.el,this.el=this.el.wrap("object"==typeof e.wrap?e.wrap:{cls:"xresizable-wrap"}),this.el.id=this.el.dom.id=e.resizeChild.id+"-rzwrap",this.el.setStyle("overflow","hidden"),this.el.setPositioning(e.resizeChild.getPositioning()),e.resizeChild.clearPositioning(),e.width&&e.height||(n=e.resizeChild.getSize(),this.el.setSize(n.width,n.height)),e.pinned&&!e.adjustments&&(e.adjustments="auto")),this.proxy=this.el.createProxy({tag:"div",cls:"x-resizable-proxy",id:this.el.id+"-rzproxy"},Ext.getBody()),this.proxy.unselectable(),this.proxy.enableDisplayMode("block"),Ext.apply(this,e),this.pinned&&(this.disableTrackOver=!0,this.el.addClass("x-resizable-pinned"));var i=this.el.getStyle("position");"absolute"!=i&&"fixed"!=i&&this.el.setStyle("position","relative"),this.handles||(this.handles="s,e,se",this.multiDirectional&&(this.handles+=",n,w")),"all"==this.handles&&(this.handles="n s e w ne nw se sw");for(var s,n,r=this.handles.split(/\s*?[,;]\s*?| /),o=Ext.Resizable.positions,a=0,l=r.length;a<l;a++)r[a]&&o[r[a]]&&(this[s=o[r[a]]]=new Ext.Resizable.Handle(this,s,this.disableTrackOver,this.transparent,this.handleCls));this.corner=this.southeast,-1==this.handles.indexOf("n")&&-1==this.handles.indexOf("w")||(this.updateBox=!0),this.activeHandle=null,this.resizeChild&&("boolean"==typeof this.resizeChild?this.resizeChild=Ext.get(this.el.dom.firstChild,!0):this.resizeChild=Ext.get(this.resizeChild,!0)),"auto"==this.adjustments&&(t=this.resizeChild,n=this.west,e=this.east,i=this.north,r=this.south,t&&(n||i)&&(t.position("relative"),t.setLeft(n?n.el.getWidth():0),t.setTop(i?i.el.getHeight():0)),this.adjustments=[(e?-e.el.getWidth():0)+(n?-n.el.getWidth():0),(i?-i.el.getHeight():0)+(r?-r.el.getHeight():0)-1]),this.draggable&&(this.dd=this.dynamic?this.el.initDD(null):this.el.initDDProxy(null,{dragElId:this.proxy.id}),this.dd.setHandleElId((this.resizeChild||this.el).id),this.constrainTo&&this.dd.constrainTo(this.constrainTo)),this.addEvents("beforeresize","resize"),null!==this.width&&null!==this.height?this.resizeTo(this.width,this.height):this.updateChildSize(),Ext.isIE&&(this.el.dom.style.zoom=1),Ext.Resizable.superclass.constructor.call(this)},adjustments:[0,0],animate:!1,disableTrackOver:!1,draggable:!1,duration:.35,dynamic:!1,easing:"easeOutStrong",enabled:!0,handles:!1,multiDirectional:!1,height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:5,minWidth:5,maxHeight:1e4,maxWidth:1e4,minX:0,minY:0,pinned:!1,preserveRatio:!1,resizeChild:!1,transparent:!1,resizeTo:function(t,e){this.el.setSize(t,e),this.updateChildSize(),this.fireEvent("resize",this,t,e,null)},startSizing:function(t,e){this.fireEvent("beforeresize",this,t),this.enabled&&(this.overlay||(this.overlay=this.el.createProxy({tag:"div",cls:"x-resizable-overlay",html:"&#160;"},Ext.getBody()),this.overlay.unselectable(),this.overlay.enableDisplayMode("block"),this.overlay.on({scope:this,mousemove:this.onMouseMove,mouseup:this.onMouseUp})),this.overlay.setStyle("cursor",e.el.getStyle("cursor")),this.resizing=!0,this.startBox=this.el.getBox(),this.startPoint=t.getXY(),this.offsets=[this.startBox.x+this.startBox.width-this.startPoint[0],this.startBox.y+this.startBox.height-this.startPoint[1]],this.overlay.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.overlay.show(),this.constrainTo&&(t=Ext.get(this.constrainTo),this.resizeRegion=t.getRegion().adjust(t.getFrameWidth("t"),t.getFrameWidth("l"),-t.getFrameWidth("b"),-t.getFrameWidth("r"))),this.proxy.setStyle("visibility","hidden"),this.proxy.show(),this.proxy.setBox(this.startBox),this.dynamic||this.proxy.setStyle("visibility","visible"))},onMouseDown:function(t,e){this.enabled&&(e.stopEvent(),this.activeHandle=t,this.startSizing(e,t))},onMouseUp:function(t){this.activeHandle=null;var e=this.resizeElement();this.resizing=!1,this.handleOut(),this.overlay.hide(),this.proxy.hide(),this.fireEvent("resize",this,e.width,e.height,t)},updateChildSize:function(){var e,i,s,t;this.resizeChild&&(e=this.el,i=this.resizeChild,s=this.adjustments,e.dom.offsetWidth&&(t=e.getSize(!0),i.setSize(t.width+s[0],t.height+s[1])),Ext.isIE9m&&setTimeout(function(){var t;e.dom.offsetWidth&&(t=e.getSize(!0),i.setSize(t.width+s[0],t.height+s[1]))},10))},snap:function(t,e,i){if(!e||!t)return t;var s=t,n=t%e;return 0<n&&(s=e/2<n?t+(e-n):t-n),Math.max(i,s)},resizeElement:function(){var t=this.proxy.getBox();return this.updateBox?this.el.setBox(t,!1,this.animate,this.duration,null,this.easing):this.el.setSize(t.width,t.height,this.animate,this.duration,null,this.easing),this.updateChildSize(),this.dynamic||this.proxy.hide(),this.draggable&&this.constrainTo&&(this.dd.resetConstraints(),this.dd.constrainTo(this.constrainTo)),t},constrain:function(t,e,i,s){return t-e<i?e=t-i:s<t-e&&(e=t-s),e},onMouseMove:function(t){if(this.enabled&&this.activeHandle)try{if(this.resizeRegion&&!this.resizeRegion.contains(t.getPoint()))return;var e,i,s=this.curSize||this.startBox,n=this.startBox.x,r=this.startBox.y,o=s.width,a=s.height,l=o,d=a,h=this.minWidth,c=this.minHeight,u=this.maxWidth,f=this.maxHeight,p=this.widthIncrement,m=this.heightIncrement,g=t.getXY(),x=-(this.startPoint[0]-Math.max(this.minX,g[0])),E=-(this.startPoint[1]-Math.max(this.minY,g[1])),v=this.activeHandle.position;switch(v){case"east":o+=x,o=Math.min(Math.max(h,o),u);break;case"south":a+=E,a=Math.min(Math.max(c,a),f);break;case"southeast":o+=x,a+=E,o=Math.min(Math.max(h,o),u),a=Math.min(Math.max(c,a),f);break;case"north":r+=E=this.constrain(a,E,c,f),a-=E;break;case"west":n+=x=this.constrain(o,x,h,u),o-=x;break;case"northeast":o+=x,o=Math.min(Math.max(h,o),u),r+=E=this.constrain(a,E,c,f),a-=E;break;case"northwest":x=this.constrain(o,x,h,u),r+=E=this.constrain(a,E,c,f),a-=E,n+=x,o-=x;break;case"southwest":x=this.constrain(o,x,h,u),a+=E,a=Math.min(Math.max(c,a),f),n+=x,o-=x}var y=this.snap(o,p,h),b=this.snap(a,m,c);if(y!=o||b!=a){switch(v){case"northeast":case"north":r-=b-a;break;case"southwest":case"west":n-=y-o;break;case"northwest":n-=y-o,r-=b-a}o=y,a=b}if(this.preserveRatio)switch(v){case"southeast":case"east":a=d*(o/l),o=l*((a=Math.min(Math.max(c,a),f))/d);break;case"south":case"northeast":o=l*(a/d),a=d*((o=Math.min(Math.max(h,o),u))/l);break;case"north":e=o,o=l*(a/d),a=d*((o=Math.min(Math.max(h,o),u))/l),n+=(e-o)/2;break;case"southwest":a=d*(o/l),a=Math.min(Math.max(c,a),f),n+=(e=o)-(o=l*(a/d));break;case"west":i=a,a=d*(o/l),r+=(i-(a=Math.min(Math.max(c,a),f)))/2,n+=(e=o)-(o=l*(a/d));break;case"northwest":i=a,a=d*((e=o)/l),r+=i-(a=Math.min(Math.max(c,a),f)),n+=e-(o=l*(a/d))}this.proxy.setBounds(n,r,o,a),this.dynamic&&this.resizeElement()}catch(t){}},handleOver:function(){this.enabled&&this.el.addClass("x-resizable-over")},handleOut:function(){this.resizing||this.el.removeClass("x-resizable-over")},getEl:function(){return this.el},getResizeChild:function(){return this.resizeChild},destroy:function(t){Ext.destroy(this.dd,this.overlay,this.proxy),this.overlay=null,this.proxy=null;var e,i=Ext.Resizable.positions;for(e in i)"function"!=typeof i[e]&&this[i[e]]&&this[i[e]].destroy();t&&(this.el.update(""),Ext.destroy(this.el),this.el=null),this.purgeListeners()},syncHandleHeight:function(){var t=this.el.getHeight(!0);this.west&&this.west.el.setHeight(t),this.east&&this.east.el.setHeight(t)}}),Ext.Resizable.positions={n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},Ext.Resizable.Handle=Ext.extend(Object,{constructor:function(t,e,i,s,n){var r;this.tpl||((r=Ext.DomHelper.createTemplate({tag:"div",cls:"x-resizable-handle x-resizable-handle-{0}"})).compile(),Ext.Resizable.Handle.prototype.tpl=r),this.position=e,this.rz=t,this.el=this.tpl.append(t.el.dom,[this.position],!0),this.el.unselectable(),s&&this.el.setOpacity(0),Ext.isEmpty(n)||this.el.addClass(n),this.el.on("mousedown",this.onMouseDown,this),i||this.el.on({scope:this,mouseover:this.onMouseOver,mouseout:this.onMouseOut})},afterResize:function(t){},onMouseDown:function(t){this.rz.onMouseDown(this,t)},onMouseOver:function(t){this.rz.handleOver(this,t)},onMouseOut:function(t){this.rz.handleOut(this,t)},destroy:function(){Ext.destroy(this.el),this.el=null}}),Ext.Window=Ext.extend(Ext.Panel,{baseCls:"x-window",resizable:!0,draggable:!0,closable:!0,closeAction:"close",constrain:!1,constrainHeader:!1,plain:!1,minimizable:!1,maximizable:!1,minHeight:100,minWidth:200,expandOnShow:!0,showAnimDuration:.25,hideAnimDuration:.25,collapsible:!1,initHidden:void 0,hidden:!0,elements:"header,body",frame:!0,floating:!0,initComponent:function(){this.initTools(),Ext.Window.superclass.initComponent.call(this),this.addEvents("resize","maximize","minimize","restore"),Ext.isDefined(this.initHidden)&&(this.hidden=this.initHidden),!1===this.hidden&&(this.hidden=!0,this.show())},getState:function(){return Ext.apply(Ext.Window.superclass.getState.call(this)||{},this.getBox(!0))},onRender:function(t,e){Ext.Window.superclass.onRender.call(this,t,e),this.plain&&this.el.addClass("x-window-plain"),this.focusEl=this.el.createChild({tag:"a",href:"#",cls:"x-dlg-focus",tabIndex:"-1",html:"&#160;"}),this.focusEl.swallowEvent("click",!0),this.proxy=this.el.createProxy("x-window-proxy"),this.proxy.enableDisplayMode("block"),this.modal&&(this.mask=this.container.createChild({cls:"ext-el-mask"},this.el.dom),this.mask.enableDisplayMode("block"),this.mask.hide(),this.mon(this.mask,"click",this.focus,this)),this.maximizable&&this.mon(this.header,"dblclick",this.toggleMaximize,this)},initEvents:function(){var t;Ext.Window.superclass.initEvents.call(this),this.animateTarget&&this.setAnimateTarget(this.animateTarget),this.resizable&&(this.resizer=new Ext.Resizable(this.el,{minWidth:this.minWidth,minHeight:this.minHeight,handles:this.resizeHandles||"all",pinned:!0,resizeElement:this.resizerAction,handleCls:"x-window-handle"}),(this.resizer.window=this).mon(this.resizer,"beforeresize",this.beforeResize,this)),this.draggable&&this.header.addClass("x-window-draggable"),this.mon(this.el,"mousedown",this.toFront,this),this.manager=this.manager||Ext.WindowMgr,this.manager.register(this),this.maximized&&(this.maximized=!1,this.maximize()),this.closable&&((t=this.getKeyMap()).on(27,this.onEsc,this),t.disable())},initDraggable:function(){this.dd=new Ext.Window.DD(this)},onEsc:function(t,e){this.activeGhost&&this.unghost(),e.stopEvent(),this[this.closeAction]()},beforeDestroy:function(){this.rendered&&(this.hide(),this.clearAnchor(),Ext.destroy(this.focusEl,this.resizer,this.dd,this.proxy,this.mask)),Ext.Window.superclass.beforeDestroy.call(this)},onDestroy:function(){this.manager&&this.manager.unregister(this),Ext.Window.superclass.onDestroy.call(this)},initTools:function(){this.minimizable&&this.addTool({id:"minimize",handler:this.minimize.createDelegate(this,[])}),this.maximizable&&(this.addTool({id:"maximize",handler:this.maximize.createDelegate(this,[])}),this.addTool({id:"restore",handler:this.restore.createDelegate(this,[]),hidden:!0})),this.closable&&this.addTool({id:"close",handler:this[this.closeAction].createDelegate(this,[])})},resizerAction:function(){var t=this.proxy.getBox();return this.proxy.hide(),this.window.handleResize(t),t},beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getFrameHeight()+40),this.resizer.minWidth=Math.max(this.minWidth,this.getFrameWidth()+40),this.resizeBox=this.el.getBox()},updateHandles:function(){Ext.isIE9m&&this.resizer&&(this.resizer.syncHandleHeight(),this.el.repaint())},handleResize:function(t){var e=this.resizeBox;e.x!=t.x||e.y!=t.y?this.updateBox(t):(this.setSize(t),Ext.isIE6&&Ext.isStrict&&this.doLayout()),this.focus(),this.updateHandles(),this.saveState()},focus:function(){var t,e=this.focusEl,i=this.defaultButton;Ext.isDefined(i)&&(t=(e=Ext.isNumber(i)&&this.fbar?this.fbar.items.get(i):Ext.isString(i)?Ext.getCmp(i):i).getEl(),i=Ext.getDom(this.container),t&&i&&i!=document.body&&!Ext.lib.Region.getRegion(i).contains(Ext.lib.Region.getRegion(t.dom)))||(e=e||this.focusEl).focus.defer(10,e)},setAnimateTarget:function(t){t=Ext.get(t),this.animateTarget=t},beforeShow:function(){var t;delete this.el.lastXY,delete this.el.lastLT,void 0!==this.x&&void 0!==this.y||(t=this.el.getAlignToXY(this.container,"c-c"),t=this.el.translatePoints(t[0],t[1]),this.x=void 0===this.x?t.left:this.x,this.y=void 0===this.y?t.top:this.y),this.el.setLeftTop(this.x,this.y),this.expandOnShow&&this.expand(!1),this.modal&&(Ext.getBody().addClass("x-body-masked"),this.mask.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.mask.show())},show:function(t,e,i){return this.rendered||this.render(Ext.getBody()),!1===this.hidden?this.toFront():!1===this.fireEvent("beforeshow",this)||(e&&this.on("show",e,i,{single:!0}),this.hidden=!1,Ext.isDefined(t)&&this.setAnimateTarget(t),this.beforeShow(),this.animateTarget?this.animShow():this.afterShow()),this},afterShow:function(t){if(this.isDestroyed)return!1;this.proxy.hide(),this.el.setStyle("display","block"),this.el.show(),this.maximized&&this.fitContainer(),Ext.isMac&&Ext.isGecko2&&this.cascade(this.setAutoScroll),(this.monitorResize||this.modal||this.constrain||this.constrainHeader)&&Ext.EventManager.onWindowResize(this.onWindowResize,this),this.doConstrain(),this.doLayout(),this.keyMap&&this.keyMap.enable(),this.toFront(),this.updateHandles(),t&&(Ext.isIE||Ext.isWebKit)&&(t=this.getSize(),this.onResize(t.width,t.height)),this.onShow(),this.fireEvent("show",this)},animShow:function(){this.proxy.show(),this.proxy.setBox(this.animateTarget.getBox()),this.proxy.setOpacity(0);var t=this.getBox();this.el.setStyle("display","none"),this.proxy.shift(Ext.apply(t,{callback:this.afterShow.createDelegate(this,[!0],!1),scope:this,easing:"easeNone",duration:this.showAnimDuration,opacity:.5}))},hide:function(t,e,i){return this.hidden||!1===this.fireEvent("beforehide",this)||(e&&this.on("hide",e,i,{single:!0}),this.hidden=!0,void 0!==t&&this.setAnimateTarget(t),this.modal&&(this.mask.hide(),Ext.getBody().removeClass("x-body-masked")),this.animateTarget?this.animHide():(this.el.hide(),this.afterHide())),this},afterHide:function(){this.proxy.hide(),(this.monitorResize||this.modal||this.constrain||this.constrainHeader)&&Ext.EventManager.removeResizeListener(this.onWindowResize,this),this.keyMap&&this.keyMap.disable(),this.onHide(),this.fireEvent("hide",this)},animHide:function(){this.proxy.setOpacity(.5),this.proxy.show();var t=this.getBox(!1);this.proxy.setBox(t),this.el.hide(),this.proxy.shift(Ext.apply(this.animateTarget.getBox(),{callback:this.afterHide,scope:this,duration:this.hideAnimDuration,easing:"easeNone",opacity:0}))},onShow:Ext.emptyFn,onHide:Ext.emptyFn,onWindowResize:function(){this.maximized&&this.fitContainer(),this.modal&&(this.mask.setSize("100%","100%"),this.mask.dom.offsetHeight,this.mask.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0))),this.doConstrain()},doConstrain:function(){var t;(this.constrain||this.constrainHeader)&&(t=this.constrain?{right:this.el.shadowOffset,left:this.el.shadowOffset,bottom:this.el.shadowOffset}:{right:-((t=this.getSize()).width-100),bottom:-(t.height-25+this.el.getConstrainOffset())},(t=this.el.getConstrainToXY(this.container,!0,t))&&this.setPosition(t[0],t[1]))},ghost:function(t){var e=this.createGhost(t),t=this.getBox(!0);return e.setLeftTop(t.x,t.y),e.setWidth(t.width),this.el.hide(),this.activeGhost=e},unghost:function(t,e){this.activeGhost&&(!1!==t&&(this.el.show(),this.focus.defer(10,this),Ext.isMac&&Ext.isGecko2&&this.cascade(this.setAutoScroll)),!1!==e&&this.setPosition(this.activeGhost.getLeft(!0),this.activeGhost.getTop(!0)),this.activeGhost.hide(),this.activeGhost.remove(),delete this.activeGhost)},minimize:function(){return this.fireEvent("minimize",this),this},close:function(){!1!==this.fireEvent("beforeclose",this)&&(this.hidden?this.doClose():this.hide(null,this.doClose,this))},doClose:function(){this.fireEvent("close",this),this.destroy()},maximize:function(){return this.maximized||(this.expand(!1),this.restoreSize=this.getSize(),this.restorePos=this.getPosition(!0),this.maximizable&&(this.tools.maximize.hide(),this.tools.restore.show()),this.maximized=!0,this.el.disableShadow(),this.dd&&this.dd.lock(),this.collapsible&&this.tools.toggle.hide(),this.el.addClass("x-window-maximized"),this.container.addClass("x-window-maximized-ct"),this.setPosition(0,0),this.fitContainer(),this.fireEvent("maximize",this)),this},restore:function(){var t;return this.maximized&&(t=this.tools,this.el.removeClass("x-window-maximized"),t.restore&&t.restore.hide(),t.maximize&&t.maximize.show(),this.setPosition(this.restorePos[0],this.restorePos[1]),this.setSize(this.restoreSize.width,this.restoreSize.height),delete this.restorePos,delete this.restoreSize,this.maximized=!1,this.el.enableShadow(!0),this.dd&&this.dd.unlock(),this.collapsible&&t.toggle&&t.toggle.show(),this.container.removeClass("x-window-maximized-ct"),this.doConstrain(),this.fireEvent("restore",this)),this},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},fitContainer:function(){var t=this.container.getViewSize(!1);this.setSize(t.width,t.height)},setZIndex:function(t){this.modal&&this.mask.setStyle("z-index",t),this.el.setZIndex(++t),t+=5,this.resizer&&this.resizer.proxy.setStyle("z-index",++t),this.lastZIndex=t},alignTo:function(t,e,i){i=this.el.getAlignToXY(t,e,i);return this.setPagePosition(i[0],i[1]),this},anchorTo:function(t,e,i,s){this.clearAnchor(),this.anchorTarget={el:t,alignment:e,offsets:i},Ext.EventManager.onWindowResize(this.doAnchor,this);i=typeof s;return"undefined"!=i&&Ext.EventManager.on(window,"scroll",this.doAnchor,this,{buffer:"number"==i?s:50}),this.doAnchor()},doAnchor:function(){var t=this.anchorTarget;return this.alignTo(t.el,t.alignment,t.offsets),this},clearAnchor:function(){return this.anchorTarget&&(Ext.EventManager.removeResizeListener(this.doAnchor,this),Ext.EventManager.un(window,"scroll",this.doAnchor,this),delete this.anchorTarget),this},toFront:function(t){return this.manager.bringToFront(this)&&(t&&t.getTarget().focus||this.focus()),this},setActive:function(t){t?(this.maximized||this.el.enableShadow(!0),this.fireEvent("activate",this)):(this.el.disableShadow(),this.fireEvent("deactivate",this))},toBack:function(){return this.manager.sendToBack(this),this},center:function(){var t=this.el.getAlignToXY(this.container,"c-c");return this.setPagePosition(t[0],t[1]),this}}),Ext.reg("window",Ext.Window),Ext.Window.DD=Ext.extend(Ext.dd.DD,{constructor:function(t){this.win=t,Ext.Window.DD.superclass.constructor.call(this,t.el.id,"WindowDD-"+t.id),this.setHandleElId(t.header.id),this.scroll=!1},moveOnly:!0,headerOffsets:[100,25],startDrag:function(){var t,e=this.win;this.proxy=e.ghost(e.initialConfig.cls),!1!==e.constrain?(t=e.el.shadowOffset,this.constrainTo(e.container,{right:t,left:t,bottom:t})):!1!==e.constrainHeader&&(t=this.proxy.getSize(),this.constrainTo(e.container,{right:-(t.width-this.headerOffsets[0]),bottom:-(t.height-this.headerOffsets[1])}))},b4Drag:Ext.emptyFn,onDrag:function(t){this.alignElWithMouse(this.proxy,t.getPageX(),t.getPageY())},endDrag:function(t){this.win.unghost(),this.win.saveState()}}),Ext.WindowGroup=function(){function r(t,e){return!t._lastAccess||t._lastAccess<e._lastAccess?-1:1}function e(){var t=a,e=t.length;if(0<e){t.sort(r);for(var i=t[0].manager.zseed,s=0;s<e;s++){var n=t[s];n&&!n.hidden&&n.setZIndex(i+10*s)}}o()}function i(t){t!=n&&(n&&n.setActive(!1),(n=t)&&t.setActive(!0))}function o(){for(var t=a.length-1;0<=t;--t)if(!a[t].hidden)return void i(a[t]);i(null)}var s={},a=[],n=null;return{zseed:9e3,register:function(t){t.manager&&t.manager.unregister(t),t.manager=this,s[t.id]=t,a.push(t),t.on("hide",o)},unregister:function(t){delete t.manager,delete s[t.id],t.un("hide",o),a.remove(t)},get:function(t){return"object"==typeof t?t:s[t]},bringToFront:function(t){return(t=this.get(t))!=n&&(t._lastAccess=(new Date).getTime(),e(),!0)},sendToBack:function(t){return(t=this.get(t))._lastAccess=-(new Date).getTime(),e(),t},hideAll:function(){for(var t in s)s[t]&&"function"!=typeof s[t]&&s[t].isVisible()&&s[t].hide()},getActive:function(){return n},getBy:function(t,e){for(var i=[],s=a.length-1;0<=s;--s){var n=a[s];!1!==t.call(e||n,n)&&i.push(n)}return i},each:function(t,e){for(var i in s)if(s[i]&&"function"!=typeof s[i]&&!1===t.call(e||s[i],s[i]))return}}},Ext.WindowMgr=new Ext.WindowGroup,Ext.MessageBox=function(){function i(t){f[t].blur(),a.isVisible()&&(a.hide(),e(),Ext.callback(l.fn,l.scope||window,[t,p.dom.value,l],1))}function e(){l&&l.cls&&a.el.removeClass(l.cls),u.reset()}var a,l,d,s,r,h,c,u,o,f,p,m,g="",x="",E=["ok","yes","no","cancel"];return{getDialog:function(t){var e;return a||(e=[],f={},Ext.each(E,function(t){e.push(f[t]=new Ext.Button({text:this.buttonText[t],handler:i.createCallback(t),hideMode:"offsets"}))},this),(a=new Ext.Window({autoCreate:!0,title:t,resizable:!1,constrain:!0,constrainHeader:!0,minimizable:!1,maximizable:!1,stateful:!1,modal:!0,shim:!0,buttonAlign:"center",width:400,height:100,minHeight:80,plain:!0,footer:!0,closable:!0,close:function(){l&&l.buttons&&l.buttons.no&&!l.buttons.cancel?i("no"):i("cancel")},fbar:new Ext.Toolbar({items:e,enableOverflow:!1})})).render(document.body),a.getEl().addClass("x-window-dlg"),d=a.mask,s=a.body.createChild({html:'<div class="ext-mb-icon"></div><div class="ext-mb-content"><span class="ext-mb-text"></span><br /><div class="ext-mb-fix-cursor"><input type="text" class="ext-mb-input" /><textarea class="ext-mb-textarea"></textarea></div></div>'}),o=Ext.get(s.dom.firstChild),t=s.dom.childNodes[1],r=Ext.get(t.firstChild),(h=Ext.get(t.childNodes[2].firstChild)).enableDisplayMode(),h.addKeyListener([10,13],function(){a.isVisible()&&l&&l.buttons&&(l.buttons.ok?i("ok"):l.buttons.yes&&i("yes"))}),(c=Ext.get(t.childNodes[2].childNodes[1])).enableDisplayMode(),u=new Ext.ProgressBar({renderTo:s}),s.createChild({cls:"x-clear"})),a},updateText:function(t){a.isVisible()||l.width||a.setSize(this.maxWidth,100),r.update(t?t+" ":"&#160;");var e=""!=x?o.getWidth()+o.getMargins("lr"):0,i=r.getWidth()+r.getMargins("lr"),s=a.getFrameWidth("lr"),n=a.body.getFrameWidth("lr"),i=Math.max(Math.min(l.width||e+i+s+n,l.maxWidth||this.maxWidth),Math.max(l.minWidth||this.minWidth,m||0));return!0===l.prompt&&p.setWidth(i-e-s-n),!0!==l.progress&&!0!==l.wait||u.setSize(i-e-s-n),Ext.isIE9m&&i==m&&(i+=4),r.update(t||"&#160;"),a.setSize(i,"auto").center(),this},updateProgress:function(t,e,i){return u.updateProgress(t,e),i&&this.updateText(i),this},isVisible:function(){return a&&a.isVisible()},hide:function(){var t=a?a.activeGhost:null;return(this.isVisible()||t)&&(a.hide(),e(),t&&a.unghost(!1,!1)),this},show:function(t){this.isVisible()&&this.hide(),l=t;var e=this.getDialog(l.title||"&#160;");e.setTitle(l.title||"&#160;");var i,s,n,r,o=!1!==l.closable&&!0!==l.progress&&!0!==l.wait;return e.tools.close.setDisplayed(o),p=h,l.prompt=l.prompt||!!l.multiline,l.prompt?l.multiline?(h.hide(),c.show(),c.setHeight(Ext.isNumber(l.multiline)?l.multiline:this.defaultTextHeight),p=c):(h.show(),c.hide()):(h.hide(),c.hide()),p.dom.value=l.value||"",l.prompt?e.focusEl=p:(i=null,(t=l.buttons)&&t.ok?i=f.ok:t&&t.yes&&(i=f.yes),i&&(e.focusEl=i)),Ext.isDefined(l.iconCls)&&e.setIconClass(l.iconCls),this.setIcon(Ext.isDefined(l.icon)?l.icon:g),s=l.buttons,r=0,s?(a.footer.dom.style.display="",Ext.iterate(f,function(t,e){(n=s[t])?(e.show(),e.setText(Ext.isString(n)?n:Ext.MessageBox.buttonText[t]),r+=e.getEl().getWidth()+15):e.hide()})):Ext.each(E,function(t){f[t].hide()}),m=r,u.setVisible(!0===l.progress||!0===l.wait),this.updateProgress(0,l.progressText),this.updateText(l.msg),l.cls&&e.el.addClass(l.cls),e.proxyDrag=!0===l.proxyDrag,e.modal=!1!==l.modal,e.mask=!1!==l.modal&&d,e.isVisible()||(document.body.appendChild(a.el.dom),e.setAnimateTarget(l.animEl),e.on("show",function(){!0==o?e.keyMap.enable():e.keyMap.disable()},this,{single:!0}),e.show(l.animEl)),!0===l.wait&&u.wait(l.waitConfig),this},setIcon:function(t){if(a)return g=void 0,x=t&&""!=t?(o.removeClass("x-hidden"),o.replaceClass(x,t),s.addClass("x-dlg-icon"),t):(o.replaceClass(x,"x-hidden"),s.removeClass("x-dlg-icon"),""),this;g=t},progress:function(t,e,i){return this.show({title:t,msg:e,buttons:!1,progress:!0,closable:!1,minWidth:this.minProgressWidth,progressText:i}),this},wait:function(t,e,i){return this.show({title:e,msg:t,buttons:!1,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:i}),this},alert:function(t,e,i,s){return this.show({title:t,msg:e,buttons:this.OK,fn:i,scope:s,minWidth:this.minWidth}),this},confirm:function(t,e,i,s){return this.show({title:t,msg:e,buttons:this.YESNO,fn:i,scope:s,icon:this.QUESTION,minWidth:this.minWidth}),this},prompt:function(t,e,i,s,n,r){return this.show({title:t,msg:e,buttons:this.OKCANCEL,fn:i,minWidth:this.minPromptWidth,scope:s,prompt:!0,multiline:n,value:r}),this},OK:{ok:!0},CANCEL:{cancel:!0},OKCANCEL:{ok:!0,cancel:!0},YESNO:{yes:!0,no:!0},YESNOCANCEL:{yes:!0,no:!0,cancel:!0},INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}}}(),Ext.Msg=Ext.MessageBox,Ext.dd.PanelProxy=Ext.extend(Object,{constructor:function(t,e){this.panel=t,this.id=this.panel.id+"-ddproxy",Ext.apply(this,e)},insertProxy:!0,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){this.ghost&&(this.proxy&&(this.proxy.remove(),delete this.proxy),this.panel.el.dom.style.display="",this.ghost.remove(),delete this.ghost)},show:function(){this.ghost||(this.ghost=this.panel.createGhost(this.panel.initialConfig.cls,void 0,Ext.getBody()),this.ghost.setXY(this.panel.el.getXY()),this.insertProxy&&(this.proxy=this.panel.el.insertSibling({cls:"x-panel-dd-spacer"}),this.proxy.setSize(this.panel.getSize())),this.panel.el.dom.style.display="none")},repair:function(t,e,i){this.hide(),"function"==typeof e&&e.call(i||this)},moveProxy:function(t,e){this.proxy&&t.insertBefore(this.proxy.dom,e)}}),Ext.Panel.DD=Ext.extend(Ext.dd.DragSource,{constructor:function(t,e){this.panel=t,this.dragData={panel:t},this.proxy=new Ext.dd.PanelProxy(t,e),Ext.Panel.DD.superclass.constructor.call(this,t.el,e);var i=t.header,e=t.body;i&&(this.setHandleElId(i.id),e=t.header),e.setStyle("cursor","move"),this.scroll=!1},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(t,e){this.proxy.show()},b4MouseDown:function(t){var e=t.getPageX(),t=t.getPageY();this.autoOffset(e,t)},onInitDrag:function(t,e){return this.onStartDrag(t,e),!0},createFrame:Ext.emptyFn,getDragEl:function(t){return this.proxy.ghost.dom},endDrag:function(t){this.proxy.hide(),this.panel.saveState()},autoOffset:function(t,e){t-=this.startPageX,e-=this.startPageY,this.setDelta(t,e)}}),Ext.state.Provider=Ext.extend(Ext.util.Observable,{constructor:function(){this.addEvents("statechange"),this.state={},Ext.state.Provider.superclass.constructor.call(this)},get:function(t,e){return void 0===this.state[t]?e:this.state[t]},clear:function(t){delete this.state[t],this.fireEvent("statechange",this,t,null)},set:function(t,e){this.state[t]=e,this.fireEvent("statechange",this,t,e)},decodeValue:function(t){var e,i,s,n=/^(a|n|d|b|s|o|e)\:(.*)$/.exec(unescape(t));if(n&&n[1])switch(t=n[1],i=n[2],t){case"e":return null;case"n":return parseFloat(i);case"d":return new Date(Date.parse(i));case"b":return"1"==i;case"a":return e=[],""!=i&&Ext.each(i.split("^"),function(t){e.push(this.decodeValue(t))},this),e;case"o":return e={},""!=i&&Ext.each(i.split("^"),function(t){s=t.split("="),e[s[0]]=this.decodeValue(s[1])},this),e;default:return i}},encodeValue:function(t){var e,i,s,n="",r=0;if(null==t)return"e:1";if("number"==typeof t)e="n:"+t;else if("boolean"==typeof t)e="b:"+(t?"1":"0");else if(Ext.isDate(t))e="d:"+t.toGMTString();else if(Ext.isArray(t)){for(i=t.length;r<i;r++)n+=this.encodeValue(t[r]),r!=i-1&&(n+="^");e="a:"+n}else if("object"==typeof t){for(s in t)"function"!=typeof t[s]&&void 0!==t[s]&&(n+=s+"="+this.encodeValue(t[s])+"^");e="o:"+n.substring(0,n.length-1)}else e="s:"+t;return escape(e)}}),Ext.state.Manager=function(){var i=new Ext.state.Provider;return{setProvider:function(t){i=t},get:function(t,e){return i.get(t,e)},set:function(t,e){i.set(t,e)},clear:function(t){i.clear(t)},getProvider:function(){return i}}}(),Ext.state.CookieProvider=Ext.extend(Ext.state.Provider,{constructor:function(t){Ext.state.CookieProvider.superclass.constructor.call(this),this.path="/",this.expires=new Date((new Date).getTime()+6048e5),this.domain=null,this.secure=!1,Ext.apply(this,t),this.state=this.readCookies()},set:function(t,e){null!=e?(this.setCookie(t,e),Ext.state.CookieProvider.superclass.set.call(this,t,e)):this.clear(t)},clear:function(t){this.clearCookie(t),Ext.state.CookieProvider.superclass.clear.call(this,t)},readCookies:function(){for(var t,e,i={},s=document.cookie+";",n=/\s?(.*?)=(.*?);/g;null!=(e=n.exec(s));)t=e[1],e=e[2],t&&"ys-"==t.substring(0,3)&&(i[t.substr(3)]=this.decodeValue(e));return i},setCookie:function(t,e){document.cookie="ys-"+t+"="+this.encodeValue(e)+(null==this.expires?"":"; expires="+this.expires.toGMTString())+(null==this.path?"":"; path="+this.path)+(null==this.domain?"":"; domain="+this.domain)+(1==this.secure?"; secure":"")},clearCookie:function(t){document.cookie="ys-"+t+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+(null==this.path?"":"; path="+this.path)+(null==this.domain?"":"; domain="+this.domain)+(1==this.secure?"; secure":"")}}),Ext.DataView=Ext.extend(Ext.BoxComponent,{selectedClass:"x-view-selected",emptyText:"",deferEmptyText:!0,trackOver:!1,blockRefresh:!1,last:!1,initComponent:function(){Ext.DataView.superclass.initComponent.call(this),(Ext.isString(this.tpl)||Ext.isArray(this.tpl))&&(this.tpl=new Ext.XTemplate(this.tpl)),this.addEvents("beforeclick","click","mouseenter","mouseleave","containerclick","dblclick","contextmenu","containercontextmenu","selectionchange","beforeselect"),this.store=Ext.StoreMgr.lookup(this.store),this.all=new Ext.CompositeElementLite,this.selected=new Ext.CompositeElementLite},afterRender:function(){Ext.DataView.superclass.afterRender.call(this),this.mon(this.getTemplateTarget(),{click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu,scope:this}),(this.overClass||this.trackOver)&&this.mon(this.getTemplateTarget(),{mouseover:this.onMouseOver,mouseout:this.onMouseOut,scope:this}),this.store&&this.bindStore(this.store,!0)},refresh:function(){this.clearSelections(!1,!0);var t=this.getTemplateTarget(),e=this.store.getRange();t.update(""),e.length<1?(this.deferEmptyText&&!this.hasSkippedEmptyText||t.update(this.emptyText),this.all.clear()):(this.tpl.overwrite(t,this.collectData(e,0)),this.all.fill(Ext.query(this.itemSelector,t.dom)),this.updateIndexes(0)),this.hasSkippedEmptyText=!0},getTemplateTarget:function(){return this.el},prepareData:function(t){return t},collectData:function(t,e){for(var i=[],s=0,n=t.length;s<n;s++)i[i.length]=this.prepareData(t[s].data,e+s,t[s]);return i},bufferRender:function(t,e){var i=document.createElement("div");return this.tpl.overwrite(i,this.collectData(t,e)),Ext.query(this.itemSelector,i)},onUpdate:function(t,e){var i,s,n=this.store.indexOf(e);-1<n&&(i=this.isSelected(n),s=this.all.elements[n],e=this.bufferRender([e],n)[0],this.all.replaceElement(n,e,!0),i&&(this.selected.replaceElement(s,e),this.all.item(n).addClass(this.selectedClass)),this.updateIndexes(n,n))},onAdd:function(t,e,i){var s;0!==this.all.getCount()?(s=this.bufferRender(e,i),e=this.all.elements,i<this.all.getCount()?(this.all.item(i).insertSibling(s,"before",!0),e.splice.apply(e,[i,0].concat(s))):(this.all.last().insertSibling(s,"after",!0),e.push.apply(e,s)),this.updateIndexes(i)):this.refresh()},onRemove:function(t,e,i){this.deselect(i),this.all.removeElement(i,!0),this.updateIndexes(i),0===this.store.getCount()&&this.refresh()},refreshNode:function(t){this.onUpdate(this.store,this.store.getAt(t))},updateIndexes:function(t,e){var i=this.all.elements;e=e||(0===e?0:i.length-1);for(var s=t=t||0;s<=e;s++)i[s].viewIndex=s},getStore:function(){return this.store},bindStore:function(t,e){!e&&this.store&&(t!==this.store&&this.store.autoDestroy?this.store.destroy():(this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("datachanged",this.onDataChanged,this),this.store.un("add",this.onAdd,this),this.store.un("remove",this.onRemove,this),this.store.un("update",this.onUpdate,this),this.store.un("clear",this.refresh,this)),t||(this.store=null)),t&&(t=Ext.StoreMgr.lookup(t)).on({scope:this,beforeload:this.onBeforeLoad,datachanged:this.onDataChanged,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,clear:this.refresh}),(this.store=t)&&this.refresh()},onDataChanged:function(){!0!==this.blockRefresh&&this.refresh.apply(this,arguments)},findItemFromChild:function(t){return Ext.fly(t).findParent(this.itemSelector,this.getTemplateTarget())},onClick:function(t){var e,i=t.getTarget(this.itemSelector,this.getTemplateTarget());i?(e=this.indexOf(i),!1!==this.onItemClick(i,e,t)&&this.fireEvent("click",this,e,i,t)):!1!==this.fireEvent("containerclick",this,t)&&this.onContainerClick(t)},onContainerClick:function(t){this.clearSelections()},onContextMenu:function(t){var e=t.getTarget(this.itemSelector,this.getTemplateTarget());e?this.fireEvent("contextmenu",this,this.indexOf(e),e,t):this.fireEvent("containercontextmenu",this,t)},onDblClick:function(t){var e=t.getTarget(this.itemSelector,this.getTemplateTarget());e&&this.fireEvent("dblclick",this,this.indexOf(e),e,t)},onMouseOver:function(t){var e=t.getTarget(this.itemSelector,this.getTemplateTarget());e&&e!==this.lastItem&&(this.lastItem=e,Ext.fly(e).addClass(this.overClass),this.fireEvent("mouseenter",this,this.indexOf(e),e,t))},onMouseOut:function(t){this.lastItem&&(t.within(this.lastItem,!0,!0)||(Ext.fly(this.lastItem).removeClass(this.overClass),this.fireEvent("mouseleave",this,this.indexOf(this.lastItem),this.lastItem,t),delete this.lastItem))},onItemClick:function(t,e,i){return!1!==this.fireEvent("beforeclick",this,e,t,i)&&(this.multiSelect?(this.doMultiSelection(t,e,i),i.preventDefault()):this.singleSelect&&(this.doSingleSelection(t,e,i),i.preventDefault()),!0)},doSingleSelection:function(t,e,i){i.ctrlKey&&this.isSelected(e)?this.deselect(e):this.select(e,!1)},doMultiSelection:function(t,e,i){var s;i.shiftKey&&!1!==this.last?(s=this.last,this.selectRange(s,e,i.ctrlKey),this.last=s):(i.ctrlKey||this.simpleSelect)&&this.isSelected(e)?this.deselect(e):this.select(e,i.ctrlKey||i.shiftKey||this.simpleSelect)},getSelectionCount:function(){return this.selected.getCount()},getSelectedNodes:function(){return this.selected.elements},getSelectedIndexes:function(){for(var t=[],e=this.selected.elements,i=0,s=e.length;i<s;i++)t.push(e[i].viewIndex);return t},getSelectedRecords:function(){return this.getRecords(this.selected.elements)},getRecords:function(t){for(var e=[],i=0,s=t.length;i<s;i++)e[e.length]=this.store.getAt(t[i].viewIndex);return e},getRecord:function(t){return this.store.getAt(t.viewIndex)},clearSelections:function(t,e){(this.multiSelect||this.singleSelect)&&0<this.selected.getCount()&&(e||this.selected.removeClass(this.selectedClass),this.selected.clear(),this.last=!1,t||this.fireEvent("selectionchange",this,this.selected.elements))},isSelected:function(t){return this.selected.contains(this.getNode(t))},deselect:function(t){this.isSelected(t)&&(t=this.getNode(t),this.selected.removeElement(t),this.last==t.viewIndex&&(this.last=!1),Ext.fly(t).removeClass(this.selectedClass),this.fireEvent("selectionchange",this,this.selected.elements))},select:function(t,e,i){if(Ext.isArray(t)){e||this.clearSelections(!0);for(var s=0,n=t.length;s<n;s++)this.select(t[s],!0,!0);i||this.fireEvent("selectionchange",this,this.selected.elements)}else{var r=this.getNode(t);e||this.clearSelections(!0),r&&!this.isSelected(r)&&!1!==this.fireEvent("beforeselect",this,r,this.selected.elements)&&(Ext.fly(r).addClass(this.selectedClass),this.selected.add(r),this.last=r.viewIndex,i||this.fireEvent("selectionchange",this,this.selected.elements))}},selectRange:function(t,e,i){i||this.clearSelections(!0),this.select(this.getNodes(t,e),!0)},getNode:function(t){if(Ext.isString(t))return document.getElementById(t);if(Ext.isNumber(t))return this.all.elements[t];if(t instanceof Ext.data.Record){var e=this.store.indexOf(t);return this.all.elements[e]}return t},getNodes:function(t,e){var i,s=this.all.elements,n=[];if((t=t||0)<=(e=Ext.isDefined(e)?e:Math.max(s.length-1,0)))for(i=t;i<=e&&s[i];i++)n.push(s[i]);else for(i=t;e<=i&&s[i];i--)n.push(s[i]);return n},indexOf:function(t){return t=this.getNode(t),Ext.isNumber(t.viewIndex)?t.viewIndex:this.all.indexOf(t)},onBeforeLoad:function(){this.loadingText&&(this.clearSelections(!1,!0),this.getTemplateTarget().update('<div class="loading-indicator">'+this.loadingText+"</div>"),this.all.clear())},onDestroy:function(){this.all.clear(),this.selected.clear(),Ext.DataView.superclass.onDestroy.call(this),this.bindStore(null)}}),Ext.DataView.prototype.setStore=Ext.DataView.prototype.bindStore,Ext.reg("dataview",Ext.DataView),Ext.list.ListView=Ext.extend(Ext.DataView,{itemSelector:"dl",selectedClass:"x-list-selected",overClass:"x-list-over",scrollOffset:void 0,columnResize:!0,columnSort:!0,maxColumnWidth:Ext.isIE9m?99:100,initComponent:function(){this.columnResize&&(this.colResizer=new Ext.list.ColumnResizer(this.colResizer),this.colResizer.init(this)),this.columnSort&&(this.colSorter=new Ext.list.Sorter(this.columnSort),this.colSorter.init(this)),this.internalTpl||(this.internalTpl=new Ext.XTemplate('<div class="x-list-header"><div class="x-list-header-inner">','<tpl for="columns">','<div style="width:{[values.width*100]}%;text-align:{align};"><em class="x-unselectable" unselectable="on" id="',this.id,'-xlhd-{#}">',"{header}","</em></div>","</tpl>",'<div class="x-clear"></div>',"</div></div>",'<div class="x-list-body"><div class="x-list-body-inner">',"</div></div>")),this.tpl||(this.tpl=new Ext.XTemplate('<tpl for="rows">',"<dl>",'<tpl for="parent.columns">','<dt style="width:{[values.width*100]}%;text-align:{align};">','<em unselectable="on"<tpl if="cls"> class="{cls}</tpl>">',"{[values.tpl.apply(parent)]}","</em></dt>","</tpl>",'<div class="x-clear"></div>',"</dl>","</tpl>"));for(var t=this.columns,e=0,i=0,s=t.length,n=[],r=0;r<s;r++)(o=t[r]).isColumn||(o.xtype=o.xtype?/^lv/.test(o.xtype)?o.xtype:"lv"+o.xtype:"lvcolumn",o=Ext.create(o)),o.width&&((e+=100*o.width)>this.maxColumnWidth&&(o.width-=(e-this.maxColumnWidth)/100),i++),n.push(o);if((t=this.columns=n,i<s)&&e<this.maxColumnWidth)for(var o,a=(this.maxColumnWidth-e)/(s-i)/100,l=0;l<s;l++)(o=t[l]).width||(o.width=a);Ext.list.ListView.superclass.initComponent.call(this)},onRender:function(){this.autoEl={cls:"x-list-wrap"},Ext.list.ListView.superclass.onRender.apply(this,arguments),this.internalTpl.overwrite(this.el,{columns:this.columns}),this.innerBody=Ext.get(this.el.dom.childNodes[1].firstChild),this.innerHd=Ext.get(this.el.dom.firstChild.firstChild),this.hideHeaders&&(this.el.dom.firstChild.style.display="none")},getTemplateTarget:function(){return this.innerBody},collectData:function(){var t=Ext.list.ListView.superclass.collectData.apply(this,arguments);return{columns:this.columns,rows:t}},verifyInternalSize:function(){this.lastSize&&this.onResize(this.lastSize.width,this.lastSize.height)},onResize:function(t,e){var i,s=this.innerBody.dom,n=this.innerHd.dom,r=t-Ext.num(this.scrollOffset,Ext.getScrollBarWidth())+"px";s&&(i=s.parentNode,Ext.isNumber(t)&&(this.reserveScrollOffset||10<i.offsetWidth-i.clientWidth?(s.style.width=r,n.style.width=r):(s.style.width=t+"px",n.style.width=t+"px",setTimeout(function(){10<i.offsetWidth-i.clientWidth&&(s.style.width=r,n.style.width=r)},10))),Ext.isNumber(e)&&(i.style.height=Math.max(0,e-n.parentNode.offsetHeight)+"px"))},updateIndexes:function(){Ext.list.ListView.superclass.updateIndexes.apply(this,arguments),this.verifyInternalSize()},findHeaderIndex:function(t){for(var e,i=(t=t.dom||t).parentNode,s=i.parentNode.childNodes,n=0;e=s[n];n++)if(e==i)return n;return-1},setHdWidths:function(){for(var t=this.innerHd.dom.getElementsByTagName("div"),e=0,i=this.columns,s=i.length;e<s;e++)t[e].style.width=100*i[e].width+"%"}}),Ext.reg("listview",Ext.list.ListView),Ext.ListView=Ext.list.ListView,Ext.list.Column=Ext.extend(Object,{isColumn:!0,align:"left",header:"",width:null,cls:"",constructor:function(t){t.tpl?Ext.isString(t.tpl)&&(t.tpl=new Ext.XTemplate(t.tpl)):t.tpl=new Ext.XTemplate("{"+t.dataIndex+"}"),Ext.apply(this,t)}}),Ext.reg("lvcolumn",Ext.list.Column),Ext.list.NumberColumn=Ext.extend(Ext.list.Column,{format:"0,000.00",constructor:function(t){t.tpl=t.tpl||new Ext.XTemplate("{"+t.dataIndex+':number("'+(t.format||this.format)+'")}'),Ext.list.NumberColumn.superclass.constructor.call(this,t)}}),Ext.reg("lvnumbercolumn",Ext.list.NumberColumn),Ext.list.DateColumn=Ext.extend(Ext.list.Column,{format:"m/d/Y",constructor:function(t){t.tpl=t.tpl||new Ext.XTemplate("{"+t.dataIndex+':date("'+(t.format||this.format)+'")}'),Ext.list.DateColumn.superclass.constructor.call(this,t)}}),Ext.reg("lvdatecolumn",Ext.list.DateColumn),Ext.list.BooleanColumn=Ext.extend(Ext.list.Column,{trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(t){t.tpl=t.tpl||new Ext.XTemplate("{"+t.dataIndex+":this.format}");var e=this.trueText,i=this.falseText,s=this.undefinedText;t.tpl.format=function(t){return void 0===t?s:t&&"false"!==t?e:i},Ext.list.DateColumn.superclass.constructor.call(this,t)}}),Ext.reg("lvbooleancolumn",Ext.list.BooleanColumn),Ext.list.ColumnResizer=Ext.extend(Ext.util.Observable,{minPct:.05,constructor:function(t){Ext.apply(this,t),Ext.list.ColumnResizer.superclass.constructor.call(this)},init:function(t){(this.view=t).on("render",this.initEvents,this)},initEvents:function(t){t.mon(t.innerHd,"mousemove",this.handleHdMove,this),this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeStart.createDelegate(this),onStart:this.onStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onEnd.createDelegate(this),tolerance:3,autoStart:300}),this.tracker.initEl(t.innerHd),t.on("beforedestroy",this.tracker.destroy,this.tracker)},handleHdMove:function(t,e){var i,s,n=t.getPageX(),r=t.getTarget("em",3,!0);r&&(i=r.getRegion(),s=r.dom.style,t=r.dom.parentNode,n-i.left<=5&&t!=t.parentNode.firstChild?(this.activeHd=Ext.get(t.previousSibling.firstChild),s.cursor=Ext.isWebKit?"e-resize":"col-resize"):i.right-n<=5&&t!=t.parentNode.lastChild.previousSibling?(this.activeHd=r,s.cursor=Ext.isWebKit?"w-resize":"col-resize"):(delete this.activeHd,s.cursor=""))},onBeforeStart:function(t){return this.dragHd=this.activeHd,!!this.dragHd},onStart:function(t){var e=this,i=e.view,s=e.dragHd,n=e.tracker.getXY()[0];e.proxy=i.el.createChild({cls:"x-list-resizer"}),e.dragX=s.getX(),e.headerIndex=i.findHeaderIndex(s),e.headersDisabled=i.disableHeaders,i.disableHeaders=!0,e.proxy.setHeight(i.el.getHeight()),e.proxy.setX(e.dragX),e.proxy.setWidth(n-e.dragX),this.setBoundaries()},setBoundaries:function(t){var e=this.view,i=this.headerIndex,s=e.innerHd.getWidth(),t=e.innerHd.getX(),n=Math.ceil(s*this.minPct),r=s-n,o=e.columns.length,s=e.innerHd.select("em",!0),e=n+t,r=r+t;2==o?(this.minX=e,this.maxX=r):(t=s.item(i+2),this.minX=s.item(i).getX()+n,this.maxX=t?t.getX()-n:r,0==i?this.minX=e:i==o-2&&(this.maxX=r))},onDrag:function(t){var e=this.tracker.getXY()[0].constrain(this.minX,this.maxX);this.proxy.setWidth(e-this.dragX)},onEnd:function(t){var e=this.proxy.getWidth(),i=this.headerIndex,s=this.view,n=s.columns,r=s.innerHd.getWidth(),e=Math.ceil(e*s.maxColumnWidth/r)/100,o=this.headersDisabled,r=n[i],n=n[i+1],i=r.width+n.width;this.proxy.remove(),r.width=e,n.width=i-e,delete this.dragHd,s.setHdWidths(),s.refresh(),setTimeout(function(){s.disableHeaders=o},100)}}),Ext.ListView.ColumnResizer=Ext.list.ColumnResizer,Ext.list.Sorter=Ext.extend(Ext.util.Observable,{sortClasses:["sort-asc","sort-desc"],constructor:function(t){Ext.apply(this,t),Ext.list.Sorter.superclass.constructor.call(this)},init:function(t){(this.view=t).on("render",this.initEvents,this)},initEvents:function(t){t.mon(t.innerHd,"click",this.onHdClick,this),t.innerHd.setStyle("cursor","pointer"),t.mon(t.store,"datachanged",this.updateSortState,this),this.updateSortState.defer(10,this,[t.store])},updateSortState:function(t){var e=t.getSortState();if(e){this.sortState=e;for(var i=this.view.columns,s=-1,n=0,r=i.length;n<r;n++)if(i[n].dataIndex==e.field){s=n;break}-1!=s&&(t=e.direction,this.updateSortIcon(s,t))}},updateSortIcon:function(t,e){var i=this.sortClasses;this.view.innerHd.select("em").removeClass(i).item(t).addClass(i["DESC"==e?1:0])},onHdClick:function(t){var t=t.getTarget("em",3);t&&!this.view.disableHeaders&&(t=this.view.findHeaderIndex(t),this.view.store.sort(this.view.columns[t].dataIndex))}}),Ext.ListView.Sorter=Ext.list.Sorter,Ext.TabPanel=Ext.extend(Ext.Panel,{deferredRender:!0,tabWidth:120,minTabWidth:30,resizeTabs:!1,enableTabScroll:!1,scrollIncrement:0,scrollRepeatInterval:400,scrollDuration:.35,animScroll:!0,tabPosition:"top",baseCls:"x-tab-panel",autoTabs:!1,autoTabSelector:"div.x-tab",activeTab:void 0,tabMargin:2,plain:!1,wheelIncrement:20,idDelimiter:"__",itemCls:"x-tab-item",elements:"body",headerAsText:!1,frame:!1,hideBorders:!0,initComponent:function(){this.frame=!1,Ext.TabPanel.superclass.initComponent.call(this),this.addEvents("beforetabchange","tabchange","contextmenu"),this.setLayout(new Ext.layout.CardLayout(Ext.apply({layoutOnCardChange:this.layoutOnTabChange,deferredRender:this.deferredRender},this.layoutConfig))),"top"==this.tabPosition?(this.elements+=",header",this.stripTarget="header"):(this.elements+=",footer",this.stripTarget="footer"),this.stack||(this.stack=Ext.TabPanel.AccessStack()),this.initItems()},onRender:function(t,e){Ext.TabPanel.superclass.onRender.call(this,t,e),this.plain&&this[i="top"==this.tabPosition?"header":"footer"].addClass("x-tab-panel-"+i+"-plain");e=this[this.stripTarget];this.stripWrap=e.createChild({cls:"x-tab-strip-wrap",cn:{tag:"ul",cls:"x-tab-strip x-tab-strip-"+this.tabPosition}});var i="bottom"==this.tabPosition?this.stripWrap:null;e.createChild({cls:"x-tab-strip-spacer"},i),this.strip=new Ext.Element(this.stripWrap.dom.firstChild),this.edge=this.strip.createChild({tag:"li",cls:"x-tab-edge",cn:[{tag:"span",cls:"x-tab-strip-text",cn:"&#160;"}]}),this.strip.createChild({cls:"x-clear"}),this.body.addClass("x-tab-panel-body-"+this.tabPosition),this.itemTpl||((i=new Ext.Template('<li class="{cls}" id="{id}"><a class="x-tab-strip-close"></a>','<a class="x-tab-right" href="#"><em class="x-tab-left">','<span class="x-tab-strip-inner"><span class="x-tab-strip-text {iconCls}">{text}</span></span>',"</em></a></li>")).disableFormats=!0,i.compile(),Ext.TabPanel.prototype.itemTpl=i),this.items.each(this.initTab,this)},afterRender:function(){var t;Ext.TabPanel.superclass.afterRender.call(this),this.autoTabs&&this.readTabs(!1),void 0!==this.activeTab&&(t=Ext.isObject(this.activeTab)?this.activeTab:this.items.get(this.activeTab),delete this.activeTab,this.setActiveTab(t))},initEvents:function(){Ext.TabPanel.superclass.initEvents.call(this),this.mon(this.strip,{scope:this,mousedown:this.onStripMouseDown,contextmenu:this.onStripContextMenu}),this.enableTabScroll&&this.mon(this.strip,"mousewheel",this.onWheel,this)},findTargets:function(t){var e=null,i=t.getTarget("li:not(.x-tab-edge)",this.strip);return i&&(e=this.getComponent(i.id.split(this.idDelimiter)[1])).disabled?{close:null,item:null,el:null}:{close:t.getTarget(".x-tab-strip-close",this.strip),item:e,el:i}},onStripMouseDown:function(t){0===t.button&&(t.preventDefault(),(t=this.findTargets(t)).close?!1!==t.item.fireEvent("beforeclose",t.item)&&(t.item.fireEvent("close",t.item),this.remove(t.item)):t.item&&t.item!=this.activeTab&&this.setActiveTab(t.item))},onStripContextMenu:function(t){t.preventDefault();var e=this.findTargets(t);e.item&&this.fireEvent("contextmenu",this,e.item,t)},readTabs:function(t){!0===t&&this.items.each(function(t){this.remove(t)},this);for(var e=this.el.query(this.autoTabSelector),i=0,s=e.length;i<s;i++){var n=e[i],r=n.getAttribute("title");n.removeAttribute("title"),this.add({title:r,contentEl:n})}},initTab:function(t,e){var i=this.strip.dom.childNodes[e],e=this.getTemplateArgs(t),e=i?this.itemTpl.insertBefore(i,e):this.itemTpl.append(this.strip,e),s="x-tab-strip-over",n=Ext.get(e);n.hover(function(){t.disabled||n.addClass(s)},function(){n.removeClass(s)}),t.tabTip&&(n.child("span.x-tab-strip-text",!0).qtip=t.tabTip),t.tabEl=e,n.select("a").on("click",function(t){t.getPageX()||this.onStripMouseDown(t)},this,{preventDefault:!0}),t.on({scope:this,disable:this.onItemDisabled,enable:this.onItemEnabled,titlechange:this.onItemTitleChanged,iconchange:this.onItemIconChanged,beforeshow:this.onBeforeShowItem})},getTemplateArgs:function(t){var e=t.closable?"x-tab-strip-closable":"";return t.disabled&&(e+=" x-item-disabled"),t.iconCls&&(e+=" x-tab-with-icon"),t.tabCls&&(e+=" "+t.tabCls),{id:this.id+this.idDelimiter+t.getItemId(),text:t.title,cls:e,iconCls:t.iconCls||""}},onAdd:function(t){var e;Ext.TabPanel.superclass.onAdd.call(this,t),this.rendered&&(e=this.items,this.initTab(t,e.indexOf(t)),this.delegateUpdates())},onBeforeAdd:function(t){if(t.events?this.items.containsKey(t.getItemId())?t:null:this.items.get(t))return this.setActiveTab(t),!1;Ext.TabPanel.superclass.onBeforeAdd.apply(this,arguments);var e=t.elements;t.elements=e&&e.replace(",header",""),t.border=!0===t.border},onRemove:function(t){var e=Ext.get(t.tabEl);e&&(e.select("a").removeAllListeners(),Ext.destroy(e)),Ext.TabPanel.superclass.onRemove.call(this,t),this.stack.remove(t),delete t.tabEl,t.un("disable",this.onItemDisabled,this),t.un("enable",this.onItemEnabled,this),t.un("titlechange",this.onItemTitleChanged,this),t.un("iconchange",this.onItemIconChanged,this),t.un("beforeshow",this.onBeforeShowItem,this),t==this.activeTab&&((t=this.stack.next())?this.setActiveTab(t):0<this.items.getCount()?this.setActiveTab(0):this.setActiveTab(null)),this.destroying||this.delegateUpdates()},onBeforeShowItem:function(t){if(t!=this.activeTab)return this.setActiveTab(t),!1},onItemDisabled:function(t){var e=this.getTabEl(t);e&&Ext.fly(e).addClass("x-item-disabled"),this.stack.remove(t)},onItemEnabled:function(t){t=this.getTabEl(t);t&&Ext.fly(t).removeClass("x-item-disabled")},onItemTitleChanged:function(t){var e=this.getTabEl(t);e&&(Ext.fly(e).child("span.x-tab-strip-text",!0).innerHTML=t.title,this.delegateUpdates())},onItemIconChanged:function(t,e,i){t=this.getTabEl(t);t&&((t=Ext.get(t)).child("span.x-tab-strip-text").replaceClass(i,e),t[Ext.isEmpty(e)?"removeClass":"addClass"]("x-tab-with-icon"),this.delegateUpdates())},getTabEl:function(t){t=this.getComponent(t);return t?t.tabEl:null},onResize:function(){Ext.TabPanel.superclass.onResize.apply(this,arguments),this.delegateUpdates()},beginUpdate:function(){this.suspendUpdates=!0},endUpdate:function(){this.suspendUpdates=!1,this.delegateUpdates()},hideTabStripItem:function(t){t=this.getComponent(t);var e=this.getTabEl(t);e&&(e.style.display="none",this.delegateUpdates()),this.stack.remove(t)},unhideTabStripItem:function(t){t=this.getComponent(t);t=this.getTabEl(t);t&&(t.style.display="",this.delegateUpdates())},delegateUpdates:function(){var t=this.rendered;this.suspendUpdates||(this.resizeTabs&&t&&this.autoSizeTabs(),this.enableTabScroll&&t&&this.autoScrollTabs())},autoSizeTabs:function(){var t=this.items.length,e="bottom"!=this.tabPosition?"header":"footer",e=(this[e].dom.offsetWidth,this[e].dom.clientWidth);if(this.resizeTabs&&!(t<1)&&e){var i=Math.max(Math.min(Math.floor((e-4)/t)-this.tabMargin,this.tabWidth),this.minTabWidth);this.lastTabWidth=i;for(var s=this.strip.query("li:not(.x-tab-edge)"),n=0,r=s.length;n<r;n++){var o=s[n],a=Ext.fly(o).child(".x-tab-strip-inner",!0),l=o.offsetWidth,o=a.offsetWidth;a.style.width=i-(l-o)+"px"}}},adjustBodyWidth:function(t){return this.header&&this.header.setWidth(t),this.footer&&this.footer.setWidth(t),t},setActiveTab:function(t){var e;t=this.getComponent(t),!1!==this.fireEvent("beforetabchange",this,t,this.activeTab)&&(this.rendered?this.activeTab!=t&&(!this.activeTab||(e=this.getTabEl(this.activeTab))&&Ext.fly(e).removeClass("x-tab-strip-active"),(this.activeTab=t)&&(e=this.getTabEl(t),Ext.fly(e).addClass("x-tab-strip-active"),this.stack.add(t),this.layout.setActiveItem(t),this.delegateUpdates(),this.scrolling&&this.scrollToTab(t,this.animScroll)),this.fireEvent("tabchange",this,t)):this.activeTab=t)},getActiveTab:function(){return this.activeTab||null},getItem:function(t){return this.getComponent(t)},autoScrollTabs:function(){this.pos="bottom"==this.tabPosition?this.footer:this.header;var t=this.items.length,e=(this.pos.dom.offsetWidth,this.pos.dom.clientWidth),i=this.stripWrap,s=i.dom,n=s.offsetWidth,r=this.getScrollPos(),o=this.edge.getOffsetsTo(this.stripWrap)[0]+r;!this.enableTabScroll||n<20||(0==t||o<=e?(s.scrollLeft=0,i.setWidth(e),this.scrolling&&(this.scrolling=!1,this.pos.removeClass("x-tab-scrolling"),this.scrollLeft.hide(),this.scrollRight.hide(),(Ext.isAir||Ext.isWebKit)&&(s.style.marginLeft="",s.style.marginRight=""))):(this.scrolling||(this.pos.addClass("x-tab-scrolling"),(Ext.isAir||Ext.isWebKit)&&(s.style.marginLeft="18px",s.style.marginRight="18px")),e-=i.getMargins("lr"),i.setWidth(20<e?e:20),this.scrolling||(this.scrollLeft?(this.scrollLeft.show(),this.scrollRight.show()):this.createScrollers()),this.scrolling=!0,o-e<r?s.scrollLeft=o-e:this.scrollToTab(this.activeTab,!1),this.updateScrollButtons()))},createScrollers:function(){this.pos.addClass("x-tab-scrolling-"+this.tabPosition);var t=this.stripWrap.dom.offsetHeight,e=this.pos.insertFirst({cls:"x-tab-scroller-left"});e.setHeight(t),e.addClassOnOver("x-tab-scroller-left-over"),this.leftRepeater=new Ext.util.ClickRepeater(e,{interval:this.scrollRepeatInterval,handler:this.onScrollLeft,scope:this}),this.scrollLeft=e;e=this.pos.insertFirst({cls:"x-tab-scroller-right"});e.setHeight(t),e.addClassOnOver("x-tab-scroller-right-over"),this.rightRepeater=new Ext.util.ClickRepeater(e,{interval:this.scrollRepeatInterval,handler:this.onScrollRight,scope:this}),this.scrollRight=e},getScrollWidth:function(){return this.edge.getOffsetsTo(this.stripWrap)[0]+this.getScrollPos()},getScrollPos:function(){return parseInt(this.stripWrap.dom.scrollLeft,10)||0},getScrollArea:function(){return parseInt(this.stripWrap.dom.clientWidth,10)||0},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},getScrollIncrement:function(){return this.scrollIncrement||(this.resizeTabs?this.lastTabWidth+2:100)},scrollToTab:function(t,e){var i,s,n;t&&(n=this.getTabEl(t),i=this.getScrollPos(),s=this.getScrollArea(),n=(t=Ext.fly(n).getOffsetsTo(this.stripWrap)[0]+i)+n.offsetWidth,t<i?this.scrollTo(t,e):i+s<n&&this.scrollTo(n-s,e))},scrollTo:function(t,e){this.stripWrap.scrollTo("left",t,!!e&&this.getScrollAnim()),e||this.updateScrollButtons()},onWheel:function(t){var e=t.getWheelDelta()*this.wheelIncrement*-1;t.stopEvent();var i=this.getScrollPos(),t=i+e,e=this.getScrollWidth()-this.getScrollArea(),t=Math.max(0,Math.min(e,t));t!=i&&this.scrollTo(t,!1)},onScrollRight:function(){var t=this.getScrollWidth()-this.getScrollArea(),e=this.getScrollPos(),t=Math.min(t,e+this.getScrollIncrement());t!=e&&this.scrollTo(t,this.animScroll)},onScrollLeft:function(){var t=this.getScrollPos(),e=Math.max(0,t-this.getScrollIncrement());e!=t&&this.scrollTo(e,this.animScroll)},updateScrollButtons:function(){var t=this.getScrollPos();this.scrollLeft[0===t?"addClass":"removeClass"]("x-tab-scroller-left-disabled"),this.scrollRight[t>=this.getScrollWidth()-this.getScrollArea()?"addClass":"removeClass"]("x-tab-scroller-right-disabled")},beforeDestroy:function(){Ext.destroy(this.leftRepeater,this.rightRepeater),this.deleteMembers("strip","edge","scrollLeft","scrollRight","stripWrap"),this.activeTab=null,Ext.TabPanel.superclass.beforeDestroy.apply(this)}}),Ext.reg("tabpanel",Ext.TabPanel),Ext.TabPanel.prototype.activate=Ext.TabPanel.prototype.setActiveTab,Ext.TabPanel.AccessStack=function(){var n=[];return{add:function(t){n.push(t),10<n.length&&n.shift()},remove:function(t){for(var e=[],i=0,s=n.length;i<s;i++)n[i]!=t&&e.push(n[i]);n=e},next:function(){return n.pop()}}},Ext.Button=Ext.extend(Ext.BoxComponent,{hidden:!1,disabled:!1,pressed:!1,enableToggle:!1,menuAlign:"tl-bl?",type:"button",menuClassTarget:"tr:nth(2)",clickEvent:"click",handleMouseEvents:!0,tooltipType:"qtip",buttonSelector:"button:first-child",scale:"small",iconAlign:"left",arrowAlign:"right",initComponent:function(){this.menu&&(Ext.isArray(this.menu)&&(this.menu={items:this.menu}),Ext.isObject(this.menu)&&(this.menu.ownerCt=this),this.menu=Ext.menu.MenuMgr.get(this.menu),this.menu.ownerCt=void 0),Ext.Button.superclass.initComponent.call(this),this.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout"),Ext.isString(this.toggleGroup)&&(this.enableToggle=!0)},getTemplateArgs:function(){return[this.type,"x-btn-"+this.scale+" x-btn-icon-"+this.scale+"-"+this.iconAlign,this.getMenuClass(),this.cls,this.id]},setButtonClass:function(){this.useSetClass&&(Ext.isEmpty(this.oldCls)||this.el.removeClass([this.oldCls,"x-btn-pressed"]),this.oldCls=this.iconCls||this.icon?this.text?"x-btn-text-icon":"x-btn-icon":"x-btn-noicon",this.el.addClass([this.oldCls,this.pressed?"x-btn-pressed":null]))},getMenuClass:function(){return this.menu?"bottom"!=this.arrowAlign?"x-btn-arrow":"x-btn-arrow-bottom":""},onRender:function(t,e){this.template||(Ext.Button.buttonTemplate||(Ext.Button.buttonTemplate=new Ext.Template('<table id="{4}" cellspacing="0" class="x-btn {3}"><tbody class="{1}">','<tr><td class="x-btn-tl"><i>&#160;</i></td><td class="x-btn-tc"></td><td class="x-btn-tr"><i>&#160;</i></td></tr>','<tr><td class="x-btn-ml"><i>&#160;</i></td><td class="x-btn-mc"><em class="{2} x-unselectable" unselectable="on"><button type="{0}"></button></em></td><td class="x-btn-mr"><i>&#160;</i></td></tr>','<tr><td class="x-btn-bl"><i>&#160;</i></td><td class="x-btn-bc"></td><td class="x-btn-br"><i>&#160;</i></td></tr>',"</tbody></table>"),Ext.Button.buttonTemplate.compile()),this.template=Ext.Button.buttonTemplate);var i=this.getTemplateArgs(),i=e?this.template.insertBefore(e,i,!0):this.template.append(t,i,!0);this.btnEl=i.child(this.buttonSelector),this.mon(this.btnEl,{scope:this,focus:this.onFocus,blur:this.onBlur}),this.initButtonEl(i,this.btnEl),Ext.ButtonToggleMgr.register(this)},initButtonEl:function(t,e){this.el=t,this.setIcon(this.icon),this.setText(this.text),this.setIconClass(this.iconCls),Ext.isDefined(this.tabIndex)&&(e.dom.tabIndex=this.tabIndex),this.tooltip&&this.setTooltip(this.tooltip,!0),this.handleMouseEvents&&this.mon(t,{scope:this,mouseover:this.onMouseOver,mousedown:this.onMouseDown}),this.menu&&this.mon(this.menu,{scope:this,show:this.onMenuShow,hide:this.onMenuHide}),this.repeat?(e=new Ext.util.ClickRepeater(t,Ext.isObject(this.repeat)?this.repeat:{}),this.mon(e,"click",this.onRepeatClick,this)):this.mon(t,this.clickEvent,this.onClick,this)},afterRender:function(){Ext.Button.superclass.afterRender.call(this),this.useSetClass=!0,this.setButtonClass(),this.doc=Ext.getDoc(),this.doAutoWidth()},setIconClass:function(t){return this.iconCls=t,this.el&&(this.btnEl.dom.className="",this.btnEl.addClass(["x-btn-text",t||""]),this.setButtonClass()),this},setTooltip:function(t,e){return this.rendered?(e||this.clearTip(),Ext.isObject(t)?(Ext.QuickTips.register(Ext.apply({target:this.btnEl.id},t)),this.tooltip=t):this.btnEl.dom[this.tooltipType]=t):this.tooltip=t,this},clearTip:function(){Ext.isObject(this.tooltip)&&Ext.QuickTips.unregister(this.btnEl)},beforeDestroy:function(){this.rendered&&this.clearTip(),this.menu&&!1!==this.destroyMenu&&Ext.destroy(this.btnEl,this.menu),Ext.destroy(this.repeater)},onDestroy:function(){this.rendered&&(this.doc.un("mouseover",this.monitorMouseOver,this),this.doc.un("mouseup",this.onMouseUp,this),delete this.doc,delete this.btnEl,Ext.ButtonToggleMgr.unregister(this)),Ext.Button.superclass.onDestroy.call(this)},doAutoWidth:function(){var t;!1!==this.autoWidth&&this.el&&this.text&&void 0===this.width&&(this.el.setWidth("auto"),Ext.isIE7&&Ext.isStrict&&((t=this.btnEl)&&20<t.getWidth()&&(t.clip(),t.setWidth(Ext.util.TextMetrics.measure(t,this.text).width+t.getFrameWidth("lr")))),this.minWidth&&this.el.getWidth()<this.minWidth&&this.el.setWidth(this.minWidth))},setHandler:function(t,e){return this.handler=t,this.scope=e,this},setText:function(t){return this.text=t,this.el&&(this.btnEl.update(t||"&#160;"),this.setButtonClass()),this.doAutoWidth(),this},setIcon:function(t){return this.icon=t,this.el&&(this.btnEl.setStyle("background-image",t?"url("+t+")":""),this.setButtonClass()),this},getText:function(){return this.text},toggle:function(t,e){return(t=void 0===t?!this.pressed:!!t)!=this.pressed&&(this.rendered&&this.el[t?"addClass":"removeClass"]("x-btn-pressed"),this.pressed=t,e||(this.fireEvent("toggle",this,t),this.toggleHandler&&this.toggleHandler.call(this.scope||this,this,t))),this},onDisable:function(){this.onDisableChange(!0)},onEnable:function(){this.onDisableChange(!1)},onDisableChange:function(t){this.el&&(Ext.isIE6&&this.text||this.el[t?"addClass":"removeClass"](this.disabledClass),this.el.dom.disabled=t),this.disabled=t},showMenu:function(){return this.rendered&&this.menu&&(this.tooltip&&Ext.QuickTips.getQuickTip().cancelShow(this.btnEl),this.menu.isVisible()&&this.menu.hide(),(this.menu.ownerCt=this).menu.show(this.el,this.menuAlign)),this},hideMenu:function(){return this.hasVisibleMenu()&&this.menu.hide(),this},hasVisibleMenu:function(){return this.menu&&this.menu.ownerCt==this&&this.menu.isVisible()},onRepeatClick:function(t,e){this.onClick(e)},onClick:function(t){t&&t.preventDefault(),0===t.button&&(this.disabled||(this.doToggle(),!this.menu||this.hasVisibleMenu()||this.ignoreNextClick||this.showMenu(),this.fireEvent("click",this,t),this.handler&&this.handler.call(this.scope||this,this,t)))},doToggle:function(){!this.enableToggle||!1===this.allowDepress&&this.pressed||this.toggle()},isMenuTriggerOver:function(t,e){return this.menu&&!e},isMenuTriggerOut:function(t,e){return this.menu&&!e},onMouseOver:function(t){var e;this.disabled||((e=t.within(this.el,!0))||(this.el.addClass("x-btn-over"),this.monitoringMouseOver||(this.doc.on("mouseover",this.monitorMouseOver,this),this.monitoringMouseOver=!0),this.fireEvent("mouseover",this,t)),this.isMenuTriggerOver(t,e)&&this.fireEvent("menutriggerover",this,this.menu,t))},monitorMouseOver:function(t){t.target==this.el.dom||t.within(this.el)||(this.monitoringMouseOver&&(this.doc.un("mouseover",this.monitorMouseOver,this),this.monitoringMouseOver=!1),this.onMouseOut(t))},onMouseOut:function(t){var e=t.within(this.el)&&t.target!=this.el.dom;this.el.removeClass("x-btn-over"),this.fireEvent("mouseout",this,t),this.isMenuTriggerOut(t,e)&&this.fireEvent("menutriggerout",this,this.menu,t)},focus:function(){this.btnEl.focus()},blur:function(){this.btnEl.blur()},onFocus:function(t){this.disabled||this.el.addClass("x-btn-focus")},onBlur:function(t){this.el.removeClass("x-btn-focus")},getClickEl:function(t,e){return this.el},onMouseDown:function(t){this.disabled||0!==t.button||(this.getClickEl(t).addClass("x-btn-click"),this.doc.on("mouseup",this.onMouseUp,this))},onMouseUp:function(t){0===t.button&&(this.getClickEl(t,!0).removeClass("x-btn-click"),this.doc.un("mouseup",this.onMouseUp,this))},onMenuShow:function(t){this.menu.ownerCt==this&&((this.menu.ownerCt=this).ignoreNextClick=0,this.el.addClass("x-btn-menu-active"),this.fireEvent("menushow",this,this.menu))},onMenuHide:function(t){this.menu.ownerCt==this&&(this.el.removeClass("x-btn-menu-active"),this.ignoreNextClick=this.restoreClick.defer(250,this),this.fireEvent("menuhide",this,this.menu),delete this.menu.ownerCt)},restoreClick:function(){this.ignoreNextClick=0}}),Ext.reg("button",Ext.Button),Ext.ButtonToggleMgr=function(){var r={};function i(t,e){if(e)for(var i=r[t.toggleGroup],s=0,n=i.length;s<n;s++)i[s]!=t&&i[s].toggle(!1)}return{register:function(t){t.toggleGroup&&((r[t.toggleGroup]||(r[t.toggleGroup]=[])).push(t),t.on("toggle",i))},unregister:function(t){var e;!t.toggleGroup||(e=r[t.toggleGroup])&&(e.remove(t),t.un("toggle",i))},getPressed:function(t){var e=r[t];if(e)for(var i=0,s=e.length;i<s;i++)if(!0===e[i].pressed)return e[i];return null}}}(),Ext.SplitButton=Ext.extend(Ext.Button,{arrowSelector:"em",split:!0,initComponent:function(){Ext.SplitButton.superclass.initComponent.call(this),this.addEvents("arrowclick")},onRender:function(){Ext.SplitButton.superclass.onRender.apply(this,arguments),this.arrowTooltip&&(this.el.child(this.arrowSelector).dom[this.tooltipType]=this.arrowTooltip)},setArrowHandler:function(t,e){this.arrowHandler=t,this.scope=e},getMenuClass:function(){return"x-btn-split"+("bottom"==this.arrowAlign?"-bottom":"")},isClickOnArrow:function(t){if("bottom"==this.arrowAlign)return t.getPageY()>this.btnEl.getRegion().bottom;var e=this.el.child("em.x-btn-split"),e=e.getRegion().right-e.getPadding("r");return t.getPageX()>e},onClick:function(t,e){t.preventDefault(),this.disabled||(this.isClickOnArrow(t)?(!this.menu||this.menu.isVisible()||this.ignoreNextClick||this.showMenu(),this.fireEvent("arrowclick",this,t),this.arrowHandler&&this.arrowHandler.call(this.scope||this,this,t)):(this.doToggle(),this.fireEvent("click",this,t),this.handler&&this.handler.call(this.scope||this,this,t)))},isMenuTriggerOver:function(t){return this.menu&&t.target.tagName==this.arrowSelector},isMenuTriggerOut:function(t,e){return this.menu&&t.target.tagName!=this.arrowSelector}}),Ext.reg("splitbutton",Ext.SplitButton),Ext.CycleButton=Ext.extend(Ext.SplitButton,{getItemText:function(t){if(t&&!0===this.showText){var e="";return this.prependText&&(e+=this.prependText),e+=t.text}},setActiveItem:function(t,e){var i;(t=!Ext.isObject(t)?this.menu.getComponent(t):t)&&(this.rendered?((i=this.getItemText(t))&&this.setText(i),this.setIconClass(t.iconCls)):(this.text=this.getItemText(t),this.iconCls=t.iconCls),(this.activeItem=t).checked||t.setChecked(!0,e),this.forceIcon&&this.setIconClass(this.forceIcon),e||this.fireEvent("change",this,t))},getActiveItem:function(){return this.activeItem},initComponent:function(){this.addEvents("change"),this.changeHandler&&(this.on("change",this.changeHandler,this.scope||this),delete this.changeHandler),this.itemCount=this.items.length,this.menu={cls:"x-cycle-menu",items:[]};var i=0;Ext.each(this.items,function(t,e){Ext.apply(t,{group:t.group||this.id,itemIndex:e,checkHandler:this.checkHandler,scope:this,checked:t.checked||!1}),this.menu.items.push(t),t.checked&&(i=e)},this),Ext.CycleButton.superclass.initComponent.call(this),this.on("click",this.toggleSelected,this),this.setActiveItem(i,!0)},checkHandler:function(t,e){e&&this.setActiveItem(t)},toggleSelected:function(){var t,e=this.menu;e.render(),e.hasLayout||e.doLayout();for(var i=1;i<this.itemCount;i++)if(t=(this.activeItem.itemIndex+i)%this.itemCount,!(t=e.items.itemAt(t)).disabled){t.setChecked(!0);break}}}),Ext.reg("cycle",Ext.CycleButton),Ext.Toolbar=function(t){Ext.isArray(t)?t={items:t,layout:"toolbar"}:(t=Ext.apply({layout:"toolbar"},t)).buttons&&(t.items=t.buttons),Ext.Toolbar.superclass.constructor.call(this,t)},function(){var i=Ext.Toolbar;Ext.extend(i,Ext.Container,{defaultType:"button",enableOverflow:!1,trackMenus:!0,internalDefaults:{removeMode:"container",hideParent:!0},toolbarCls:"x-toolbar",initComponent:function(){i.superclass.initComponent.call(this),this.addEvents("overflowchange")},onRender:function(t,e){this.el||(this.autoCreate||(this.autoCreate={cls:this.toolbarCls+" x-small-editor"}),this.el=t.createChild(Ext.apply({id:this.id},this.autoCreate),e),Ext.Toolbar.superclass.onRender.apply(this,arguments))},lookupComponent:function(t){return Ext.isString(t)?(t="-"==t?new i.Separator:" "==t?new i.Spacer:"->"==t?new i.Fill:new i.TextItem(t),this.applyDefaults(t)):t.isFormField||t.render?t=this.createComponent(t):t.tag?t=new i.Item({autoEl:t}):t.tagName?t=new i.Item({el:t}):Ext.isObject(t)&&(t=t.xtype?this.createComponent(t):this.constructButton(t)),t},applyDefaults:function(t){var e;return Ext.isString(t)||(t=Ext.Toolbar.superclass.applyDefaults.call(this,t),e=this.internalDefaults,t.events?(Ext.applyIf(t.initialConfig,e),Ext.apply(t,e)):Ext.applyIf(t,e)),t},addSeparator:function(){return this.add(new i.Separator)},addSpacer:function(){return this.add(new i.Spacer)},addFill:function(){this.add(new i.Fill)},addElement:function(t){return this.addItem(new i.Item({el:t}))},addItem:function(t){return this.add.apply(this,arguments)},addButton:function(t){if(Ext.isArray(t)){for(var e=[],i=0,s=t.length;i<s;i++)e.push(this.addButton(t[i]));return e}return this.add(this.constructButton(t))},addText:function(t){return this.addItem(new i.TextItem(t))},addDom:function(t){return this.add(new i.Item({autoEl:t}))},addField:function(t){return this.add(t)},insertButton:function(t,e){if(Ext.isArray(e)){for(var i=[],s=0,n=e.length;s<n;s++)i.push(this.insertButton(t+s,e[s]));return i}return Ext.Toolbar.superclass.insert.call(this,t,e)},trackMenu:function(t,e){this.trackMenus&&t.menu&&(this[e=e?"mun":"mon"](t,"menutriggerover",this.onButtonTriggerOver,this),this[e](t,"menushow",this.onButtonMenuShow,this),this[e](t,"menuhide",this.onButtonMenuHide,this))},constructButton:function(t){return t.events?t:this.createComponent(t,t.split?"splitbutton":this.defaultType)},onAdd:function(t){Ext.Toolbar.superclass.onAdd.call(this),this.trackMenu(t),this.disabled&&t.disable()},onRemove:function(t){Ext.Toolbar.superclass.onRemove.call(this),t==this.activeMenuBtn&&delete this.activeMenuBtn,this.trackMenu(t,!0)},onDisable:function(){this.items.each(function(t){t.disable&&t.disable()})},onEnable:function(){this.items.each(function(t){t.enable&&t.enable()})},onButtonTriggerOver:function(t){this.activeMenuBtn&&this.activeMenuBtn!=t&&(this.activeMenuBtn.hideMenu(),t.showMenu(),this.activeMenuBtn=t)},onButtonMenuShow:function(t){this.activeMenuBtn=t},onButtonMenuHide:function(t){delete this.activeMenuBtn}}),Ext.reg("toolbar",Ext.Toolbar),i.Item=Ext.extend(Ext.BoxComponent,{hideParent:!0,enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn}),Ext.reg("tbitem",i.Item),i.Separator=Ext.extend(i.Item,{onRender:function(t,e){this.el=t.createChild({tag:"span",cls:"xtb-sep"},e)}}),Ext.reg("tbseparator",i.Separator),i.Spacer=Ext.extend(i.Item,{onRender:function(t,e){this.el=t.createChild({tag:"div",cls:"xtb-spacer",style:this.width?"width:"+this.width+"px":""},e)}}),Ext.reg("tbspacer",i.Spacer),i.Fill=Ext.extend(i.Item,{render:Ext.emptyFn,isFill:!0}),Ext.reg("tbfill",i.Fill),i.TextItem=Ext.extend(i.Item,{constructor:function(t){i.TextItem.superclass.constructor.call(this,Ext.isString(t)?{text:t}:t)},onRender:function(t,e){this.autoEl={cls:"xtb-text",html:this.text||""},i.TextItem.superclass.onRender.call(this,t,e)},setText:function(t){this.rendered?this.el.update(t):this.text=t}}),Ext.reg("tbtext",i.TextItem),i.Button=Ext.extend(Ext.Button,{}),i.SplitButton=Ext.extend(Ext.SplitButton,{}),Ext.reg("tbbutton",i.Button),Ext.reg("tbsplit",i.SplitButton)}(),Ext.ButtonGroup=Ext.extend(Ext.Panel,{baseCls:"x-btn-group",layout:"table",defaultType:"button",frame:!0,internalDefaults:{removeMode:"container",hideParent:!0},initComponent:function(){this.layoutConfig=this.layoutConfig||{},Ext.applyIf(this.layoutConfig,{columns:this.columns}),this.title||this.addClass("x-btn-group-notitle"),this.on("afterlayout",this.onAfterLayout,this),Ext.ButtonGroup.superclass.initComponent.call(this)},applyDefaults:function(t){t=Ext.ButtonGroup.superclass.applyDefaults.call(this,t);var e=this.internalDefaults;return t.events?(Ext.applyIf(t.initialConfig,e),Ext.apply(t,e)):Ext.applyIf(t,e),t},onAfterLayout:function(){var t=this.body.getFrameWidth("lr")+this.body.dom.firstChild.offsetWidth;this.body.setWidth(t),this.el.setWidth(t+this.getFrameWidth())}}),Ext.reg("buttongroup",Ext.ButtonGroup),function(){var i=Ext.Toolbar;Ext.PagingToolbar=Ext.extend(Ext.Toolbar,{pageSize:20,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",initComponent:function(){var t=[this.first=new i.Button({tooltip:this.firstText,overflowText:this.firstText,iconCls:"x-tbar-page-first",disabled:!0,handler:this.moveFirst,scope:this}),this.prev=new i.Button({tooltip:this.prevText,overflowText:this.prevText,iconCls:"x-tbar-page-prev",disabled:!0,handler:this.movePrevious,scope:this}),"-",this.beforePageText,this.inputItem=new Ext.form.NumberField({cls:"x-tbar-page-number",allowDecimals:!1,allowNegative:!1,enableKeyEvents:!0,selectOnFocus:!0,submitValue:!1,listeners:{scope:this,keydown:this.onPagingKeyDown,blur:this.onPagingBlur}}),this.afterTextItem=new i.TextItem({text:String.format(this.afterPageText,1)}),"-",this.next=new i.Button({tooltip:this.nextText,overflowText:this.nextText,iconCls:"x-tbar-page-next",disabled:!0,handler:this.moveNext,scope:this}),this.last=new i.Button({tooltip:this.lastText,overflowText:this.lastText,iconCls:"x-tbar-page-last",disabled:!0,handler:this.moveLast,scope:this}),"-",this.refresh=new i.Button({tooltip:this.refreshText,overflowText:this.refreshText,iconCls:"x-tbar-loading",handler:this.doRefresh,scope:this})],e=this.items||this.buttons||[];this.prependButtons?this.items=e.concat(t):this.items=t.concat(e),delete this.buttons,this.displayInfo&&(this.items.push("->"),this.items.push(this.displayItem=new i.TextItem({}))),Ext.PagingToolbar.superclass.initComponent.call(this),this.addEvents("change","beforechange"),this.on("afterlayout",this.onFirstLayout,this,{single:!0}),this.cursor=0,this.bindStore(this.store,!0)},onFirstLayout:function(){this.dsLoaded&&this.onLoad.apply(this,this.dsLoaded)},updateInfo:function(){var t;this.displayItem&&(t=0==(t=this.store.getCount())?this.emptyMsg:String.format(this.displayMsg,this.cursor+1,this.cursor+t,this.store.getTotalCount()),this.displayItem.setText(t))},onLoad:function(t,e,i){var s,n,r;this.rendered?(r=this.getParams(),this.cursor=i.params&&i.params[r.start]?i.params[r.start]:0,n=(s=this.getPageData()).activePage,r=s.pages,this.afterTextItem.setText(String.format(this.afterPageText,s.pages)),this.inputItem.setValue(n),this.first.setDisabled(1==n),this.prev.setDisabled(1==n),this.next.setDisabled(n==r),this.last.setDisabled(n==r),this.refresh.enable(),this.updateInfo(),this.fireEvent("change",this,s)):this.dsLoaded=[t,e,i]},getPageData:function(){var t=this.store.getTotalCount();return{total:t,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:t<this.pageSize?1:Math.ceil(t/this.pageSize)}},changePage:function(t){this.doLoad(((t-1)*this.pageSize).constrain(0,this.store.getTotalCount()))},onLoadError:function(){this.rendered&&this.refresh.enable()},readPage:function(t){var e,i=this.inputItem.getValue();return!i||isNaN(e=parseInt(i,10))?(this.inputItem.setValue(t.activePage),!1):e},onPagingFocus:function(){this.inputItem.select()},onPagingBlur:function(t){this.inputItem.setValue(this.getPageData().activePage)},onPagingKeyDown:function(t,e){var i,s,n=e.getKey(),r=this.getPageData();n==e.RETURN?(e.stopEvent(),!1!==(i=this.readPage(r))&&(i=Math.min(Math.max(1,i),r.pages)-1,this.doLoad(i*this.pageSize))):n==e.HOME||n==e.END?(e.stopEvent(),i=n==e.HOME?1:r.pages,t.setValue(i)):n!=e.UP&&n!=e.PAGEUP&&n!=e.DOWN&&n!=e.PAGEDOWN||(e.stopEvent(),(i=this.readPage(r))&&(s=e.shiftKey?10:1,n!=e.DOWN&&n!=e.PAGEDOWN||(s*=-1),1<=(i+=s)&i<=r.pages&&t.setValue(i)))},getParams:function(){return this.paramNames||this.store.paramNames},beforeLoad:function(){this.rendered&&this.refresh&&this.refresh.disable()},doLoad:function(t){var e={},i=this.getParams();e[i.start]=t,e[i.limit]=this.pageSize,!1!==this.fireEvent("beforechange",this,e)&&this.store.load({params:e})},moveFirst:function(){this.doLoad(0)},movePrevious:function(){this.doLoad(Math.max(0,this.cursor-this.pageSize))},moveNext:function(){this.doLoad(this.cursor+this.pageSize)},moveLast:function(){var t=this.store.getTotalCount(),e=t%this.pageSize;this.doLoad(e?t-e:t-this.pageSize)},doRefresh:function(){this.doLoad(this.cursor)},bindStore:function(t,e){var i;!e&&this.store&&(t!==this.store&&this.store.autoDestroy?this.store.destroy():(this.store.un("beforeload",this.beforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("exception",this.onLoadError,this)),t||(this.store=null)),t&&((t=Ext.StoreMgr.lookup(t)).on({scope:this,beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}),i=!0),this.store=t,i&&this.onLoad(t,null,{})},unbind:function(t){this.bindStore(null)},bind:function(t){this.bindStore(t)},onDestroy:function(){this.bindStore(null),Ext.PagingToolbar.superclass.onDestroy.call(this)}})}(),Ext.reg("paging",Ext.PagingToolbar),Ext.History=function(){var o,s,n,a=!1;function l(){var t=location.href,e=t.indexOf("#"),e=0<=e?t.substr(e+1):null;return e=Ext.isGecko?decodeURIComponent(e):e}function d(){s.value=n}function h(t){n=t,Ext.History.fireEvent("change",t)}function c(t){t=['<html><body><div id="state">',Ext.util.Format.htmlEncode(t),"</div></body></html>"].join("");try{var e=o.contentWindow.document;return e.open(),e.write(t),e.close(),!0}catch(t){return!1}}function u(){var i,s,n,r;o.contentWindow&&o.contentWindow.document?(i=o.contentWindow.document,s=i.getElementById("state"),n=s?s.innerText:null,r=l(),setInterval(function(){i=o.contentWindow.document;var t=(s=i.getElementById("state"))?s.innerText:null,e=l();t!==n?(h(n=t),location.hash=n,r=n,d()):e!==r&&c(r=e)},50),a=!0,Ext.History.fireEvent("ready",Ext.History)):setTimeout(u,10)}return{fieldId:"x-history-field",iframeId:"x-history-frame",events:{},init:function(t,e){var i;a?Ext.callback(t,e,[this]):Ext.isReady?(s=Ext.getDom(Ext.History.fieldId),Ext.isIE&&(o=Ext.getDom(Ext.History.iframeId)),this.addEvents("ready","change"),t&&this.on("ready",t,e,{single:!0}),n=s.value||l(),Ext.isIE?u():(i=l(),setInterval(function(){var t=l();t!==i&&(h(i=t),d())},50),a=!0,Ext.History.fireEvent("ready",Ext.History))):Ext.onReady(function(){Ext.History.init(t,e)})},add:function(t,e){return!1!==e&&this.getToken()==t||(Ext.isIE?c(t):(location.hash=t,!0))},back:function(){history.go(-1)},forward:function(){history.go(1)},getToken:function(){return a?n:l()}}}(),Ext.apply(Ext.History,new Ext.util.Observable),Ext.Tip=Ext.extend(Ext.Panel,{minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",autoRender:!0,quickShowInterval:250,frame:!0,hidden:!0,baseCls:"x-tip",floating:{shadow:!0,shim:!0,useDisplay:!0,constrain:!1},autoHeight:!0,closeAction:"hide",initComponent:function(){Ext.Tip.superclass.initComponent.call(this),this.closable&&!this.title&&(this.elements+=",header")},afterRender:function(){Ext.Tip.superclass.afterRender.call(this),this.closable&&this.addTool({id:"close",handler:this[this.closeAction],scope:this})},showAt:function(t){Ext.Tip.superclass.show.call(this),!1===this.measureWidth||this.initialConfig&&"number"==typeof this.initialConfig.width||this.doAutoWidth(),this.constrainPosition&&(t=this.el.adjustForConstraints(t)),this.setPagePosition(t[0],t[1])},doAutoWidth:function(t){t=t||0;var e=this.body.getTextWidth();this.title&&(e=Math.max(e,this.header.child("span").getTextWidth(this.title))),e+=this.getFrameWidth()+(this.closable?20:0)+this.body.getPadding("lr")+t,this.setWidth(e.constrain(this.minWidth,this.maxWidth)),Ext.isIE7&&!this.repainted&&(this.el.repaint(),this.repainted=!0)},showBy:function(t,e){this.rendered||this.render(Ext.getBody()),this.showAt(this.el.getAlignToXY(t,e||this.defaultAlign))},initDraggable:function(){this.dd=new Ext.Tip.DD(this,"boolean"==typeof this.draggable?null:this.draggable),this.header.addClass("x-tip-draggable")}}),Ext.reg("tip",Ext.Tip),Ext.Tip.DD=function(t,e){Ext.apply(this,e),this.tip=t,Ext.Tip.DD.superclass.constructor.call(this,t.el.id,"WindowDD-"+t.id),this.setHandleElId(t.header.id),this.scroll=!1},Ext.extend(Ext.Tip.DD,Ext.dd.DD,{moveOnly:!0,scroll:!1,headerOffsets:[100,25],startDrag:function(){this.tip.el.disableShadow()},endDrag:function(t){this.tip.el.enableShadow(!0)}}),Ext.ToolTip=Ext.extend(Ext.Tip,{showDelay:500,hideDelay:200,dismissDelay:5e3,trackMouse:!1,anchorToTarget:!0,anchorOffset:0,targetCounter:0,constrainPosition:!1,initComponent:function(){Ext.ToolTip.superclass.initComponent.call(this),this.lastActive=new Date,this.initTarget(this.target),this.origAnchor=this.anchor},onRender:function(t,e){Ext.ToolTip.superclass.onRender.call(this,t,e),this.anchorCls="x-tip-anchor-"+this.getAnchorPosition(),this.anchorEl=this.el.createChild({cls:"x-tip-anchor "+this.anchorCls})},afterRender:function(){Ext.ToolTip.superclass.afterRender.call(this),this.anchorEl.setStyle("z-index",this.el.getZIndex()+1).setVisibilityMode(Ext.Element.DISPLAY)},initTarget:function(t){var e;(e=Ext.get(t))&&(this.target&&(t=Ext.get(this.target),this.mun(t,"mouseover",this.onTargetOver,this),this.mun(t,"mouseout",this.onTargetOut,this),this.mun(t,"mousemove",this.onMouseMove,this)),this.mon(e,{mouseover:this.onTargetOver,mouseout:this.onTargetOut,mousemove:this.onMouseMove,scope:this}),this.target=e),this.anchor&&(this.anchorTarget=this.target)},onMouseMove:function(t){var e=this.delegate?t.getTarget(this.delegate):this.triggerElement=!0;e?(this.targetXY=t.getXY(),e===this.triggerElement?!this.hidden&&this.trackMouse&&this.setPagePosition(this.getTargetXY()):(this.hide(),this.lastActive=new Date(0),this.onTargetOver(t))):!this.closable&&this.isVisible()&&this.hide()},getTargetXY:function(){if(this.delegate&&(this.anchorTarget=this.triggerElement),this.anchor){this.targetCounter++;var t=this.getOffsets(),e=this.anchorToTarget&&!this.trackMouse?this.el.getAlignToXY(this.anchorTarget,this.getAnchorAlign()):this.targetXY,i=Ext.lib.Dom.getViewWidth()-5,s=Ext.lib.Dom.getViewHeight()-5,n=document.documentElement,r=document.body,o=(n.scrollLeft||r.scrollLeft||0)+5,r=(n.scrollTop||r.scrollTop||0)+5,e=[e[0]+t[0],e[1]+t[1]],t=this.getSize();if(this.anchorEl.removeClass(this.anchorCls),this.targetCounter<2){if(e[0]<o)return this.anchorToTarget&&(this.defaultAlign="l-r",this.mouseOffset&&(this.mouseOffset[0]*=-1)),this.anchor="left",this.getTargetXY();if(e[0]+t.width>i)return this.anchorToTarget&&(this.defaultAlign="r-l",this.mouseOffset&&(this.mouseOffset[0]*=-1)),this.anchor="right",this.getTargetXY();if(e[1]<r)return this.anchorToTarget&&(this.defaultAlign="t-b",this.mouseOffset&&(this.mouseOffset[1]*=-1)),this.anchor="top",this.getTargetXY();if(e[1]+t.height>s)return this.anchorToTarget&&(this.defaultAlign="b-t",this.mouseOffset&&(this.mouseOffset[1]*=-1)),this.anchor="bottom",this.getTargetXY()}return this.anchorCls="x-tip-anchor-"+this.getAnchorPosition(),this.anchorEl.addClass(this.anchorCls),this.targetCounter=0,e}e=this.getMouseOffset();return[this.targetXY[0]+e[0],this.targetXY[1]+e[1]]},getMouseOffset:function(){var t=this.anchor?[0,0]:[15,18];return this.mouseOffset&&(t[0]+=this.mouseOffset[0],t[1]+=this.mouseOffset[1]),t},getAnchorPosition:function(){if(this.anchor)this.tipAnchor=this.anchor.charAt(0);else{var t=this.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!t)throw"AnchorTip.defaultAlign is invalid";this.tipAnchor=t[1].charAt(0)}switch(this.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var t,e=this.getAnchorPosition().charAt(0);if(this.anchorToTarget&&!this.trackMouse)switch(e){case"t":t=[0,9];break;case"b":t=[0,-13];break;case"r":t=[-13,0];break;default:t=[9,0]}else switch(e){case"t":t=[-15-this.anchorOffset,30];break;case"b":t=[-19-this.anchorOffset,-13-this.el.dom.offsetHeight];break;case"r":t=[-15-this.el.dom.offsetWidth,-13-this.anchorOffset];break;default:t=[25,-13-this.anchorOffset]}e=this.getMouseOffset();return t[0]+=e[0],t[1]+=e[1],t},onTargetOver:function(t){var e;this.disabled||t.within(this.target.dom,!0)||(e=t.getTarget(this.delegate))&&(this.triggerElement=e,this.clearTimer("hide"),this.targetXY=t.getXY(),this.delayShow())},delayShow:function(){this.hidden&&!this.showTimer?this.lastActive.getElapsed()<this.quickShowInterval?this.show():this.showTimer=this.show.defer(this.showDelay,this):this.hidden||!1===this.autoHide||this.show()},onTargetOut:function(t){this.disabled||t.within(this.target.dom,!0)||(this.clearTimer("show"),!1!==this.autoHide&&this.delayHide())},delayHide:function(){this.hidden||this.hideTimer||(this.hideTimer=this.hide.defer(this.hideDelay,this))},hide:function(){this.clearTimer("dismiss"),this.lastActive=new Date,this.anchorEl&&this.anchorEl.hide(),Ext.ToolTip.superclass.hide.call(this),delete this.triggerElement},show:function(){this.anchor&&(this.showAt([-1e3,-1e3]),this.origConstrainPosition=this.constrainPosition,this.constrainPosition=!1,this.anchor=this.origAnchor),this.showAt(this.getTargetXY()),this.anchor?(this.anchorEl.show(),this.syncAnchor(),this.constrainPosition=this.origConstrainPosition):this.anchorEl.hide()},showAt:function(t){this.lastActive=new Date,this.clearTimers(),Ext.ToolTip.superclass.showAt.call(this,t),this.dismissDelay&&!1!==this.autoHide&&(this.dismissTimer=this.hide.defer(this.dismissDelay,this)),this.anchor&&!this.anchorEl.isVisible()?(this.syncAnchor(),this.anchorEl.show()):this.anchorEl.hide()},syncAnchor:function(){var t,e,i;switch(this.tipAnchor.charAt(0)){case"t":t="b",e="tl",i=[20+this.anchorOffset,2];break;case"r":t="l",e="tr",i=[-2,11+this.anchorOffset];break;case"b":t="t",e="bl",i=[20+this.anchorOffset,-2];break;default:t="r",e="tl",i=[2,11+this.anchorOffset]}this.anchorEl.alignTo(this.el,t+"-"+e,i)},setPagePosition:function(t,e){Ext.ToolTip.superclass.setPagePosition.call(this,t,e),this.anchor&&this.syncAnchor()},clearTimer:function(t){t+="Timer",clearTimeout(this[t]),delete this[t]},clearTimers:function(){this.clearTimer("show"),this.clearTimer("dismiss"),this.clearTimer("hide")},onShow:function(){Ext.ToolTip.superclass.onShow.call(this),Ext.getDoc().on("mousedown",this.onDocMouseDown,this)},onHide:function(){Ext.ToolTip.superclass.onHide.call(this),Ext.getDoc().un("mousedown",this.onDocMouseDown,this)},onDocMouseDown:function(t){!0===this.autoHide||this.closable||t.within(this.el.dom)||(this.disable(),this.doEnable.defer(100,this))},doEnable:function(){this.isDestroyed||this.enable()},onDisable:function(){this.clearTimers(),this.hide()},adjustPosition:function(t,e){var i,s;return this.constrainPosition&&(i=this.targetXY[1],s=this.getSize().height,e<=i&&i<=e+s&&(e=i-s-5)),{x:t,y:e}},beforeDestroy:function(){this.clearTimers(),Ext.destroy(this.anchorEl),delete this.anchorEl,delete this.target,delete this.anchorTarget,delete this.triggerElement,Ext.ToolTip.superclass.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this),Ext.ToolTip.superclass.onDestroy.call(this)}}),Ext.reg("tooltip",Ext.ToolTip),Ext.QuickTip=Ext.extend(Ext.ToolTip,{interceptTitles:!1,tagConfig:{namespace:"ext",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor"},initComponent:function(){this.target=this.target||Ext.getDoc(),this.targets=this.targets||{},Ext.QuickTip.superclass.initComponent.call(this)},register:function(t){for(var e=Ext.isArray(t)?t:arguments,i=0,s=e.length;i<s;i++){var n=e[i],r=n.target;if(r)if(Ext.isArray(r))for(var o=0,a=r.length;o<a;o++)this.targets[Ext.id(r[o])]=n;else this.targets[Ext.id(r)]=n}},unregister:function(t){delete this.targets[Ext.id(t)]},cancelShow:function(t){var e=this.activeTarget;t=Ext.get(t).dom,this.isVisible()?e&&e.el==t&&this.hide():e&&e.el==t&&this.clearTimer("show")},getTipCfg:function(t){var e,i=t.getTarget();return this.interceptTitles&&i.title&&Ext.isString(i.title)?(e=i.title,i.qtip=e,i.removeAttribute("title"),t.preventDefault()):(t=this.tagConfig,e=i.qtip||Ext.fly(i).getAttribute(t.attribute,t.namespace)),e},onTargetOver:function(t){if(!this.disabled){this.targetXY=t.getXY();var e=t.getTarget();if(e&&1===e.nodeType&&e!=document&&e!=document.body){if(this.activeTarget&&(e==this.activeTarget.el||Ext.fly(this.activeTarget.el).contains(e)))return this.clearTimer("hide"),void this.show();if(e&&this.targets[e.id])return this.activeTarget=this.targets[e.id],this.activeTarget.el=e,this.anchor=this.activeTarget.anchor,this.anchor&&(this.anchorTarget=e),void this.delayShow();var i,s=Ext.fly(e),n=this.tagConfig,r=n.namespace;(i=this.getTipCfg(t))&&(t=s.getAttribute(n.hide,r),this.activeTarget={el:e,text:i,width:s.getAttribute(n.width,r),autoHide:"user"!=t&&"false"!==t,title:s.getAttribute(n.title,r),cls:s.getAttribute(n.cls,r),align:s.getAttribute(n.align,r)},this.anchor=s.getAttribute(n.anchor,r),this.anchor&&(this.anchorTarget=e),this.delayShow())}}},onTargetOut:function(t){this.activeTarget&&t.within(this.activeTarget.el)&&!this.getTipCfg(t)||(this.clearTimer("show"),!1!==this.autoHide&&this.delayHide())},showAt:function(t){var e=this.activeTarget;e&&(this.rendered||(this.render(Ext.getBody()),this.activeTarget=e),e.width?(this.setWidth(e.width),this.body.setWidth(this.adjustBodyWidth(e.width-this.getFrameWidth())),this.measureWidth=!1):this.measureWidth=!0,this.setTitle(e.title||""),this.body.update(e.text),this.autoHide=e.autoHide,this.dismissDelay=e.dismissDelay||this.dismissDelay,this.lastCls&&(this.el.removeClass(this.lastCls),delete this.lastCls),e.cls&&(this.el.addClass(e.cls),this.lastCls=e.cls),this.anchor?this.constrainPosition=!1:e.align?(t=this.el.getAlignToXY(e.el,e.align),this.constrainPosition=!1):this.constrainPosition=!0),Ext.QuickTip.superclass.showAt.call(this,t)},hide:function(){delete this.activeTarget,Ext.QuickTip.superclass.hide.call(this)}}),Ext.reg("quicktip",Ext.QuickTip),Ext.QuickTips=function(){var e,i=!1;return{init:function(t){e||(Ext.isReady?(e=new Ext.QuickTip({elements:"header,body",disabled:i}),!1!==t&&e.render(Ext.getBody())):Ext.onReady(function(){Ext.QuickTips.init(t)}))},ddDisable:function(){e&&!i&&e.disable()},ddEnable:function(){e&&!i&&e.enable()},enable:function(){e&&e.enable(),i=!1},disable:function(){e&&e.disable(),i=!0},isEnabled:function(){return void 0!==e&&!e.disabled},getQuickTip:function(){return e},register:function(){e.register.apply(e,arguments)},unregister:function(){e.unregister.apply(e,arguments)},tips:function(){e.register.apply(e,arguments)}}}(),Ext.slider.Tip=Ext.extend(Ext.Tip,{minWidth:10,offsets:[0,-10],init:function(t){t.on({scope:this,dragstart:this.onSlide,drag:this.onSlide,dragend:this.hide,destroy:this.destroy})},onSlide:function(t,e,i){this.show(),this.body.update(this.getText(i)),this.doAutoWidth(),this.el.alignTo(i.el,"b-t?",this.offsets)},getText:function(t){return String(t.value)}}),Ext.ux.SliderTip=Ext.slider.Tip,Ext.tree.TreePanel=Ext.extend(Ext.Panel,{rootVisible:!0,animate:Ext.enableFx,lines:!0,enableDD:!1,hlDrop:Ext.enableFx,pathSeparator:"/",bubbleEvents:[],initComponent:function(){Ext.tree.TreePanel.superclass.initComponent.call(this),this.eventModel||(this.eventModel=new Ext.tree.TreeEventModel(this));var t=this.loader;t?Ext.isObject(t)&&!t.load&&(t=new Ext.tree.TreeLoader(t)):t=new Ext.tree.TreeLoader({dataUrl:this.dataUrl,requestMethod:this.requestMethod}),this.loader=t,this.nodeHash={},this.root&&(t=this.root,delete this.root,this.setRootNode(t)),this.addEvents("append","remove","movenode","insert","beforeappend","beforeremove","beforemovenode","beforeinsert","beforeload","load","textchange","beforeexpandnode","beforecollapsenode","expandnode","disabledchange","collapsenode","beforeclick","click","containerclick","checkchange","beforedblclick","dblclick","containerdblclick","contextmenu","containercontextmenu","beforechildrenrendered","startdrag","enddrag","dragdrop","beforenodedrop","nodedrop","nodedragover"),this.singleExpand&&this.on("beforeexpandnode",this.restrictExpand,this)},proxyNodeEvent:function(t,e,i,s,n,r,o){return"collapse"!=t&&"expand"!=t&&"beforecollapse"!=t&&"beforeexpand"!=t&&"move"!=t&&"beforemove"!=t||(t+="node"),this.fireEvent(t,e,i,s,n,r,o)},getRootNode:function(){return this.root},setRootNode:function(t){var e;return this.destroyRoot(),t.render||(t=this.loader.createNode(t)),(this.root=t).ownerTree=this,t.isRoot=!0,this.registerNode(t),this.rootVisible||(e=t.attributes.uiProvider,t.ui=new(e||Ext.tree.RootTreeNodeUI)(t)),this.innerCt&&(this.clearInnerCt(),this.renderRoot()),t},clearInnerCt:function(){this.innerCt.update("")},renderRoot:function(){this.root.render(),this.rootVisible||this.root.renderChildren()},getNodeById:function(t){return this.nodeHash[t]},registerNode:function(t){this.nodeHash[t.id]=t},unregisterNode:function(t){delete this.nodeHash[t.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"},restrictExpand:function(t){var e=t.parentNode;e&&(e.expandedChild&&e.expandedChild.parentNode==e&&e.expandedChild.collapse(),e.expandedChild=t)},getChecked:function(t,e){e=e||this.root;var i=[];return e.cascade(function(){this.attributes.checked&&i.push(t?"id"==t?this.id:this.attributes[t]:this)}),i},getLoader:function(){return this.loader},expandAll:function(){this.root.expand(!0)},collapseAll:function(){this.root.collapse(!0)},getSelectionModel:function(){return this.selModel||(this.selModel=new Ext.tree.DefaultSelectionModel),this.selModel},expandPath:function(t,e,i){var s,n,r,o;Ext.isEmpty(t)?i&&i(!1,void 0):(e=e||"id",s=t.split(this.pathSeparator),(n=this.root).attributes[e]==s[1]?(r=1,n.expand(!(o=function(){var t;++r!=s.length?(t=n.findChild(e,s[r]))?(n=t).expand(!1,!1,o):i&&i(!1,n):i&&i(!0,n)}),!1,o)):i&&i(!1,null))},selectPath:function(t,s,n){var r;Ext.isEmpty(t)?n&&n(!1,void 0):(s=s||"id",t=t.split(this.pathSeparator),r=t.pop(),1<t.length?this.expandPath(t.join(this.pathSeparator),s,function(t,e){var i;t&&e&&(i=e.findChild(s,r))?(i.select(),n&&n(!0,i)):n&&n(!1,i)}):(this.root.select(),n&&n(!0,this.root)))},getTreeEl:function(){return this.body},onRender:function(t,e){Ext.tree.TreePanel.superclass.onRender.call(this,t,e),this.el.addClass("x-tree"),this.innerCt=this.body.createChild({tag:"ul",cls:"x-tree-root-ct "+(this.useArrows?"x-tree-arrows":this.lines?"x-tree-lines":"x-tree-no-lines")})},initEvents:function(){Ext.tree.TreePanel.superclass.initEvents.call(this),this.containerScroll&&Ext.dd.ScrollManager.register(this.body),!this.enableDD&&!this.enableDrop||this.dropZone||(this.dropZone=new Ext.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||"TreeDD",appendOnly:!0===this.ddAppendOnly})),!this.enableDD&&!this.enableDrag||this.dragZone||(this.dragZone=new Ext.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||"TreeDD",scroll:this.ddScroll})),this.getSelectionModel().init(this)},afterRender:function(){Ext.tree.TreePanel.superclass.afterRender.call(this),this.renderRoot()},beforeDestroy:function(){this.rendered&&(Ext.dd.ScrollManager.unregister(this.body),Ext.destroy(this.dropZone,this.dragZone)),this.destroyRoot(),Ext.destroy(this.loader),this.nodeHash=this.root=this.loader=null,Ext.tree.TreePanel.superclass.beforeDestroy.call(this)},destroyRoot:function(){this.root&&this.root.destroy&&this.root.destroy(!0)}}),Ext.tree.TreePanel.nodeTypes={},Ext.reg("treepanel",Ext.tree.TreePanel),Ext.tree.TreeEventModel=function(t){this.tree=t,this.tree.on("render",this.initEvents,this)},Ext.tree.TreeEventModel.prototype={initEvents:function(){var t=this.tree;!1!==t.trackMouseOver&&t.mon(t.innerCt,{scope:this,mouseover:this.delegateOver,mouseout:this.delegateOut}),t.mon(t.getTreeEl(),{scope:this,click:this.delegateClick,dblclick:this.delegateDblClick,contextmenu:this.delegateContextMenu})},getNode:function(t){if(t=t.getTarget(".x-tree-node-el",10)){t=Ext.fly(t,"_treeEvents").getAttribute("tree-node-id","ext");if(t)return this.tree.getNodeById(t)}return null},getNodeTarget:function(t){return t.getTarget(".x-tree-node-icon",1)||t.getTarget(".x-tree-node-el",6)},delegateOut:function(t,e){var i;this.beforeEvent(t)&&(t.getTarget(".x-tree-ec-icon",1)&&(i=this.getNode(t),this.onIconOut(t,i),i==this.lastEcOver&&delete this.lastEcOver),(e=this.getNodeTarget(t))&&!t.within(e,!0)&&this.onNodeOut(t,this.getNode(t)))},delegateOver:function(t,e){this.beforeEvent(t)&&(Ext.isGecko&&!this.trackingDoc&&(Ext.getBody().on("mouseover",this.trackExit,this),this.trackingDoc=!0),this.lastEcOver&&(this.onIconOut(t,this.lastEcOver),delete this.lastEcOver),t.getTarget(".x-tree-ec-icon",1)&&(this.lastEcOver=this.getNode(t),this.onIconOver(t,this.lastEcOver)),this.getNodeTarget(t)&&this.onNodeOver(t,this.getNode(t)))},trackExit:function(t){this.lastOverNode&&(this.lastOverNode.ui&&!t.within(this.lastOverNode.ui.getEl())&&this.onNodeOut(t,this.lastOverNode),delete this.lastOverNode,Ext.getBody().un("mouseover",this.trackExit,this),this.trackingDoc=!1)},delegateClick:function(t,e){this.beforeEvent(t)?t.getTarget("input[type=checkbox]",1)?this.onCheckboxClick(t,this.getNode(t)):t.getTarget(".x-tree-ec-icon",1)?this.onIconClick(t,this.getNode(t)):this.getNodeTarget(t)&&this.onNodeClick(t,this.getNode(t)):this.checkContainerEvent(t,"click")},delegateDblClick:function(t,e){this.beforeEvent(t)?this.getNodeTarget(t)&&this.onNodeDblClick(t,this.getNode(t)):this.checkContainerEvent(t,"dblclick")},delegateContextMenu:function(t,e){this.beforeEvent(t)?this.getNodeTarget(t)&&this.onNodeContextMenu(t,this.getNode(t)):this.checkContainerEvent(t,"contextmenu")},checkContainerEvent:function(t,e){if(this.disabled)return t.stopEvent(),!1;this.onContainerEvent(t,e)},onContainerEvent:function(t,e){this.tree.fireEvent("container"+e,this.tree,t)},onNodeClick:function(t,e){e.ui.onClick(t)},onNodeOver:function(t,e){(this.lastOverNode=e).ui.onOver(t)},onNodeOut:function(t,e){e.ui.onOut(t)},onIconOver:function(t,e){e.ui.addClass("x-tree-ec-over")},onIconOut:function(t,e){e.ui.removeClass("x-tree-ec-over")},onIconClick:function(t,e){e.ui.ecClick(t)},onCheckboxClick:function(t,e){e.ui.onCheckChange(t)},onNodeDblClick:function(t,e){e.ui.onDblClick(t)},onNodeContextMenu:function(t,e){e.ui.onContextMenu(t)},beforeEvent:function(t){var e=this.getNode(t);return!(this.disabled||!e||!e.ui)||(t.stopEvent(),!1)},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}},Ext.tree.DefaultSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(t){this.selNode=null,this.addEvents("selectionchange","beforeselect"),Ext.apply(this,t),Ext.tree.DefaultSelectionModel.superclass.constructor.call(this)},init:function(t){(this.tree=t).mon(t.getTreeEl(),"keydown",this.onKeyDown,this),t.on("click",this.onNodeClick,this)},onNodeClick:function(t,e){this.select(t)},select:function(t,e){if(!Ext.fly(t.ui.wrap).isVisible()&&e)return e.call(this,t);e=this.selNode;return t==e?t.ui.onSelectedChange(!0):!1!==this.fireEvent("beforeselect",this,t,e)&&(e&&e.ui&&e.ui.onSelectedChange(!1),(this.selNode=t).ui.onSelectedChange(!0),this.fireEvent("selectionchange",this,t,e)),t},unselect:function(t,e){this.selNode==t&&this.clearSelections(e)},clearSelections:function(t){var e=this.selNode;return e&&(e.ui.onSelectedChange(!1),!(this.selNode=null)!==t&&this.fireEvent("selectionchange",this,null)),e},getSelectedNode:function(){return this.selNode},isSelected:function(t){return this.selNode==t},selectPrevious:function(t){if(!(t=t||this.selNode||this.lastSelNode))return null;var e=t.previousSibling;if(e){if(!e.isExpanded()||e.childNodes.length<1)return this.select(e,this.selectPrevious);for(var i=e.lastChild;i&&i.isExpanded()&&Ext.fly(i.ui.wrap).isVisible()&&0<i.childNodes.length;)i=i.lastChild;return this.select(i,this.selectPrevious)}return!t.parentNode||!this.tree.rootVisible&&t.parentNode.isRoot?null:this.select(t.parentNode,this.selectPrevious)},selectNext:function(t){if(!(t=t||this.selNode||this.lastSelNode))return null;if(t.firstChild&&t.isExpanded()&&Ext.fly(t.ui.wrap).isVisible())return this.select(t.firstChild,this.selectNext);if(t.nextSibling)return this.select(t.nextSibling,this.selectNext);if(t.parentNode){var e=null;return t.parentNode.bubble(function(){if(this.nextSibling)return e=this.getOwnerTree().selModel.select(this.nextSibling,this.selectNext),!1}),e}return null},onKeyDown:function(t){var e=this.selNode||this.lastSelNode;if(e)switch(t.getKey()){case t.DOWN:t.stopEvent(),this.selectNext();break;case t.UP:t.stopEvent(),this.selectPrevious();break;case t.RIGHT:t.preventDefault(),e.hasChildNodes()&&(e.isExpanded()?e.firstChild&&this.select(e.firstChild,t):e.expand());break;case t.LEFT:t.preventDefault(),e.hasChildNodes()&&e.isExpanded()?e.collapse():e.parentNode&&(this.tree.rootVisible||e.parentNode!=this.tree.getRootNode())&&this.select(e.parentNode,t)}}}),Ext.tree.MultiSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(t){this.selNodes=[],this.selMap={},this.addEvents("selectionchange"),Ext.apply(this,t),Ext.tree.MultiSelectionModel.superclass.constructor.call(this)},init:function(t){(this.tree=t).mon(t.getTreeEl(),"keydown",this.onKeyDown,this),t.on("click",this.onNodeClick,this)},onNodeClick:function(t,e){e.ctrlKey&&this.isSelected(t)?this.unselect(t):this.select(t,e,e.ctrlKey)},select:function(t,e,i){return!0!==i&&this.clearSelections(!0),this.isSelected(t)?this.lastSelNode=t:(this.selNodes.push(t),this.selMap[t.id]=t,(this.lastSelNode=t).ui.onSelectedChange(!0),this.fireEvent("selectionchange",this,this.selNodes),t)},unselect:function(t){var e;this.selMap[t.id]&&(t.ui.onSelectedChange(!1),-1!=(e=this.selNodes.indexOf(t))&&this.selNodes.splice(e,1),delete this.selMap[t.id],this.fireEvent("selectionchange",this,this.selNodes))},clearSelections:function(t){var e=this.selNodes;if(0<e.length){for(var i=0,s=e.length;i<s;i++)e[i].ui.onSelectedChange(!1);this.selNodes=[],this.selMap={},!0!==t&&this.fireEvent("selectionchange",this,this.selNodes)}},isSelected:function(t){return!!this.selMap[t.id]},getSelectedNodes:function(){return this.selNodes.concat([])},onKeyDown:Ext.tree.DefaultSelectionModel.prototype.onKeyDown,selectNext:Ext.tree.DefaultSelectionModel.prototype.selectNext,selectPrevious:Ext.tree.DefaultSelectionModel.prototype.selectPrevious}),Ext.data.Tree=Ext.extend(Ext.util.Observable,{constructor:function(t){this.nodeHash={},this.root=null,t&&this.setRootNode(t),this.addEvents("append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert"),Ext.data.Tree.superclass.constructor.call(this)},pathSeparator:"/",proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},setRootNode:function(t){return(this.root=t).ownerTree=this,t.isRoot=!0,this.registerNode(t),t},getNodeById:function(t){return this.nodeHash[t]},registerNode:function(t){this.nodeHash[t.id]=t},unregisterNode:function(t){delete this.nodeHash[t.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"}}),Ext.data.Node=Ext.extend(Ext.util.Observable,{constructor:function(t){this.attributes=t||{},this.leaf=this.attributes.leaf,this.id=this.attributes.id,this.id||(this.id=Ext.id(null,"xnode-"),this.attributes.id=this.id),this.childNodes=[],this.parentNode=null,this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null,this.addEvents({append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0}),this.listeners=this.attributes.listeners,Ext.data.Node.superclass.constructor.call(this)},fireEvent:function(t){if(!1===Ext.data.Node.superclass.fireEvent.apply(this,arguments))return!1;var e=this.getOwnerTree();return!e||!1!==e.proxyNodeEvent.apply(e,arguments)},isLeaf:function(){return!0===this.leaf},setFirstChild:function(t){this.firstChild=t},setLastChild:function(t){this.lastChild=t},isLast:function(){return!this.parentNode||this.parentNode.lastChild==this},isFirst:function(){return!this.parentNode||this.parentNode.firstChild==this},hasChildNodes:function(){return!this.isLeaf()&&0<this.childNodes.length},isExpandable:function(){return this.attributes.expandable||this.hasChildNodes()},appendChild:function(t){var e=!1;if(Ext.isArray(t)?e=t:1<arguments.length&&(e=arguments),!e){if(!1===this.fireEvent("beforeappend",this.ownerTree,this,t))return!1;var i=this.childNodes.length,s=t.parentNode;if(s){if(!1===t.fireEvent("beforemove",t.getOwnerTree(),t,s,this,i))return!1;s.removeChild(t)}0===(i=this.childNodes.length)&&this.setFirstChild(t),this.childNodes.push(t);var n=(t.parentNode=this).childNodes[i-1];return n?(t.previousSibling=n).nextSibling=t:t.previousSibling=null,t.nextSibling=null,this.setLastChild(t),t.setOwnerTree(this.getOwnerTree()),this.fireEvent("append",this.ownerTree,this,t,i),s&&t.fireEvent("move",this.ownerTree,t,s,this,i),t}for(var r=0,o=e.length;r<o;r++)this.appendChild(e[r])},removeChild:function(t,e){var i=this.childNodes.indexOf(t);return-1!=i&&(!1!==this.fireEvent("beforeremove",this.ownerTree,this,t)&&(this.childNodes.splice(i,1),t.previousSibling&&(t.previousSibling.nextSibling=t.nextSibling),t.nextSibling&&(t.nextSibling.previousSibling=t.previousSibling),this.firstChild==t&&this.setFirstChild(t.nextSibling),this.lastChild==t&&this.setLastChild(t.previousSibling),this.fireEvent("remove",this.ownerTree,this,t),e?t.destroy(!0):t.clear(),t))},clear:function(t){this.setOwnerTree(null,t),this.parentNode=this.previousSibling=this.nextSibling=null,t&&(this.firstChild=this.lastChild=null)},destroy:function(t){!0===t?(this.purgeListeners(),this.clear(!0),Ext.each(this.childNodes,function(t){t.destroy(!0)}),this.childNodes=null):this.remove(!0)},insertBefore:function(t,e){if(!e)return this.appendChild(t);if(t==e)return!1;if(!1===this.fireEvent("beforeinsert",this.ownerTree,this,t,e))return!1;var i=this.childNodes.indexOf(e),s=t.parentNode,n=i;if(s==this&&this.childNodes.indexOf(t)<i&&n--,s){if(!1===t.fireEvent("beforemove",t.getOwnerTree(),t,s,this,i,e))return!1;s.removeChild(t)}0===n&&this.setFirstChild(t),this.childNodes.splice(n,0,t);i=(t.parentNode=this).childNodes[n-1];return i?(t.previousSibling=i).nextSibling=t:t.previousSibling=null,((t.nextSibling=e).previousSibling=t).setOwnerTree(this.getOwnerTree()),this.fireEvent("insert",this.ownerTree,this,t,e),s&&t.fireEvent("move",this.ownerTree,t,s,this,n,e),t},remove:function(t){return this.parentNode&&this.parentNode.removeChild(this,t),this},removeAll:function(t){for(var e,i=this.childNodes;e=i[0];)this.removeChild(e,t);return this},item:function(t){return this.childNodes[t]},replaceChild:function(t,e){var i=e?e.nextSibling:null;return this.removeChild(e),this.insertBefore(t,i),e},indexOf:function(t){return this.childNodes.indexOf(t)},getOwnerTree:function(){if(!this.ownerTree)for(var t=this;t;){if(t.ownerTree){this.ownerTree=t.ownerTree;break}t=t.parentNode}return this.ownerTree},getDepth:function(){for(var t=0,e=this;e.parentNode;)++t,e=e.parentNode;return t},setOwnerTree:function(e,t){e!=this.ownerTree&&(this.ownerTree&&this.ownerTree.unregisterNode(this),this.ownerTree=e,!0!==t&&Ext.each(this.childNodes,function(t){t.setOwnerTree(e)}),e&&e.registerNode(this))},setId:function(t){var e;t!==this.id&&((e=this.ownerTree)&&e.unregisterNode(this),this.id=this.attributes.id=t,e&&e.registerNode(this),this.onIdChange(t))},onIdChange:Ext.emptyFn,getPath:function(t){for(var e=this.parentNode,i=[this.attributes[t=t||"id"]];e;)i.unshift(e.attributes[t]),e=e.parentNode;var s=this.getOwnerTree().pathSeparator;return s+i.join(s)},bubble:function(t,e,i){for(var s=this;s&&!1!==t.apply(e||s,i||[s]);)s=s.parentNode},cascade:function(t,e,i){if(!1!==t.apply(e||this,i||[this]))for(var s=this.childNodes,n=0,r=s.length;n<r;n++)s[n].cascade(t,e,i)},eachChild:function(t,e,i){for(var s=this.childNodes,n=0,r=s.length;n<r&&!1!==t.apply(e||s[n],i||[s[n]]);n++);},findChild:function(t,e,i){return this.findChildBy(function(){return this.attributes[t]==e},null,i)},findChildBy:function(t,e,i){for(var s,n,r=this.childNodes,o=r.length,a=0;a<o;a++){if(s=r[a],!0===t.call(e||s,s))return s;if(i&&null!=(n=s.findChildBy(t,e,i)))return n}return null},sort:function(t,e){var i=this.childNodes,s=i.length;if(0<s){i.sort(e?function(){t.apply(e,arguments)}:t);for(var n=0;n<s;n++){var r=i[n];r.previousSibling=i[n-1],r.nextSibling=i[n+1],0===n&&this.setFirstChild(r),n==s-1&&this.setLastChild(r)}}},contains:function(t){return t.isAncestor(this)},isAncestor:function(t){for(var e=this.parentNode;e;){if(e==t)return!0;e=e.parentNode}return!1},toString:function(){return"[Node"+(this.id?" "+this.id:"")+"]"}}),Ext.tree.TreeNode=Ext.extend(Ext.data.Node,{constructor:function(t){t=t||{},Ext.isString(t)&&(t={text:t}),this.childrenRendered=!1,this.rendered=!1,Ext.tree.TreeNode.superclass.constructor.call(this,t),this.expanded=!0===t.expanded,this.isTarget=!1!==t.isTarget,this.draggable=!1!==t.draggable&&!1!==t.allowDrag,this.allowChildren=!1!==t.allowChildren&&!1!==t.allowDrop,this.text=t.text,this.disabled=!0===t.disabled,this.hidden=!0===t.hidden,this.addEvents("textchange","beforeexpand","beforecollapse","expand","disabledchange","collapse","beforeclick","click","checkchange","beforedblclick","dblclick","contextmenu","beforechildrenrendered");t=this.attributes.uiProvider||this.defaultUI||Ext.tree.TreeNodeUI;this.ui=new t(this)},preventHScroll:!0,isExpanded:function(){return this.expanded},getUI:function(){return this.ui},getLoader:function(){var t;return this.loader||((t=this.getOwnerTree())&&t.loader?t.loader:this.loader=new Ext.tree.TreeLoader)},setFirstChild:function(t){var e=this.firstChild;Ext.tree.TreeNode.superclass.setFirstChild.call(this,t),this.childrenRendered&&e&&t!=e&&e.renderIndent(!0,!0),this.rendered&&this.renderIndent(!0,!0)},setLastChild:function(t){var e=this.lastChild;Ext.tree.TreeNode.superclass.setLastChild.call(this,t),this.childrenRendered&&e&&t!=e&&e.renderIndent(!0,!0),this.rendered&&this.renderIndent(!0,!0)},appendChild:function(t){t.render||Ext.isArray(t)||(t=this.getLoader().createNode(t));t=Ext.tree.TreeNode.superclass.appendChild.call(this,t);return t&&this.childrenRendered&&t.render(),this.ui.updateExpandIcon(),t},removeChild:function(t,e){var i;return this.ownerTree.getSelectionModel().unselect(t),Ext.tree.TreeNode.superclass.removeChild.apply(this,arguments),e||((i=t.ui.rendered)&&t.ui.remove(),i&&this.childNodes.length<1?this.collapse(!1,!1):this.ui.updateExpandIcon(),this.firstChild||this.isHiddenRoot()||(this.childrenRendered=!1)),t},insertBefore:function(t,e){t.render||(t=this.getLoader().createNode(t));var i=Ext.tree.TreeNode.superclass.insertBefore.call(this,t,e);return i&&e&&this.childrenRendered&&t.render(),this.ui.updateExpandIcon(),i},setText:function(t){var e=this.text;this.text=this.attributes.text=t,this.rendered&&this.ui.onTextChange(this,t,e),this.fireEvent("textchange",this,t,e)},setIconCls:function(t){var e=this.attributes.iconCls;this.attributes.iconCls=t,this.rendered&&this.ui.onIconClsChange(this,t,e)},setTooltip:function(t,e){this.attributes.qtip=t,this.attributes.qtipTitle=e,this.rendered&&this.ui.onTipChange(this,t,e)},setIcon:function(t){this.attributes.icon=t,this.rendered&&this.ui.onIconChange(this,t)},setHref:function(t,e){this.attributes.href=t,this.attributes.hrefTarget=e,this.rendered&&this.ui.onHrefChange(this,t,e)},setCls:function(t){var e=this.attributes.cls;this.attributes.cls=t,this.rendered&&this.ui.onClsChange(this,t,e)},select:function(){var t=this.getOwnerTree();t&&t.getSelectionModel().select(this)},unselect:function(t){var e=this.getOwnerTree();e&&e.getSelectionModel().unselect(this,t)},isSelected:function(){var t=this.getOwnerTree();return!!t&&t.getSelectionModel().isSelected(this)},expand:function(t,e,i,s){if(this.expanded)this.runCallback(i,s||this,[this]);else{if(!1===this.fireEvent("beforeexpand",this,t,e))return;if(this.childrenRendered||this.renderChildren(),this.expanded=!0,!this.isHiddenRoot()&&this.getOwnerTree().animate&&!1!==e||e)return void this.ui.animExpand(function(){this.fireEvent("expand",this),this.runCallback(i,s||this,[this]),!0===t&&this.expandChildNodes(!0,!0)}.createDelegate(this));this.ui.expand(),this.fireEvent("expand",this),this.runCallback(i,s||this,[this])}!0===t&&this.expandChildNodes(!0)},runCallback:function(t,e,i){Ext.isFunction(t)&&t.apply(e,i)},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible},collapse:function(t,e,i,s){if(this.expanded&&!this.isHiddenRoot()){if(!1===this.fireEvent("beforecollapse",this,t,e))return;if(this.expanded=!1,this.getOwnerTree().animate&&!1!==e||e)return void this.ui.animCollapse(function(){this.fireEvent("collapse",this),this.runCallback(i,s||this,[this]),!0===t&&this.collapseChildNodes(!0)}.createDelegate(this));this.ui.collapse(),this.fireEvent("collapse",this),this.runCallback(i,s||this,[this])}else this.expanded||this.runCallback(i,s||this,[this]);if(!0===t)for(var n=this.childNodes,r=0,o=n.length;r<o;r++)n[r].collapse(!0,!1)},delayedExpand:function(t){this.expandProcId||(this.expandProcId=this.expand.defer(t,this))},cancelExpand:function(){this.expandProcId&&clearTimeout(this.expandProcId),this.expandProcId=!1},toggle:function(){this.expanded?this.collapse():this.expand()},ensureVisible:function(e,i){var s=this.getOwnerTree();s.expandPath((this.parentNode||this).getPath(),!1,function(){var t=s.getNodeById(this.id);s.getTreeEl().scrollChildIntoView(t.ui.anchor),this.runCallback(e,i||this,[this])}.createDelegate(this))},expandChildNodes:function(t,e){for(var i=this.childNodes,s=i.length,n=0;n<s;n++)i[n].expand(t,e)},collapseChildNodes:function(t){for(var e=this.childNodes,i=0,s=e.length;i<s;i++)e[i].collapse(t)},disable:function(){this.disabled=!0,this.unselect(),this.rendered&&this.ui.onDisableChange&&this.ui.onDisableChange(this,!0),this.fireEvent("disabledchange",this,!0)},enable:function(){this.disabled=!1,this.rendered&&this.ui.onDisableChange&&this.ui.onDisableChange(this,!1),this.fireEvent("disabledchange",this,!1)},renderChildren:function(t){!1!==t&&this.fireEvent("beforechildrenrendered",this);for(var e=this.childNodes,i=0,s=e.length;i<s;i++)e[i].render(!0);this.childrenRendered=!0},sort:function(t,e){if(Ext.tree.TreeNode.superclass.sort.apply(this,arguments),this.childrenRendered)for(var i=this.childNodes,s=0,n=i.length;s<n;s++)i[s].render(!0)},render:function(t){this.ui.render(t),this.rendered||(this.getOwnerTree().registerNode(this),this.rendered=!0,this.expanded&&(this.expanded=!1,this.expand(!1,!1)))},renderIndent:function(t,e){if(e&&(this.ui.childIndent=null),this.ui.renderIndent(),!0===t&&this.childrenRendered)for(var i=this.childNodes,s=0,n=i.length;s<n;s++)i[s].renderIndent(!0,e)},beginUpdate:function(){this.childrenRendered=!1},endUpdate:function(){this.expanded&&this.rendered&&this.renderChildren()},destroy:function(t){!0===t&&this.unselect(!0),Ext.tree.TreeNode.superclass.destroy.call(this,t),Ext.destroy(this.ui,this.loader),this.ui=this.loader=null},onIdChange:function(t){this.ui.onIdChange(t)}}),Ext.tree.TreePanel.nodeTypes.node=Ext.tree.TreeNode,Ext.tree.AsyncTreeNode=function(t){this.loaded=t&&!0===t.loaded,this.loading=!1,Ext.tree.AsyncTreeNode.superclass.constructor.apply(this,arguments),this.addEvents("beforeload","load")},Ext.extend(Ext.tree.AsyncTreeNode,Ext.tree.TreeNode,{expand:function(t,e,i,s){if(this.loading)var n=function(){this.loading||(clearInterval(r),this.expand(t,e,i,s))}.createDelegate(this),r=setInterval(n,200);else{if(!this.loaded){if(!1===this.fireEvent("beforeload",this))return;this.loading=!0,this.ui.beforeLoad(this);n=this.loader||this.attributes.loader||this.getOwnerTree().getLoader();if(n)return void n.load(this,this.loadComplete.createDelegate(this,[t,e,i,s]),this)}Ext.tree.AsyncTreeNode.superclass.expand.call(this,t,e,i,s)}},isLoading:function(){return this.loading},loadComplete:function(t,e,i,s){this.loading=!1,this.loaded=!0,this.ui.afterLoad(this),this.fireEvent("load",this),this.expand(t,e,i,s)},isLoaded:function(){return this.loaded},hasChildNodes:function(){return!this.isLeaf()&&!this.loaded||Ext.tree.AsyncTreeNode.superclass.hasChildNodes.call(this)},reload:function(t,e){for(this.collapse(!1,!1);this.firstChild;)this.removeChild(this.firstChild).destroy();this.childrenRendered=!1,this.loaded=!1,this.isHiddenRoot()&&(this.expanded=!1),this.expand(!1,!1,t,e)}}),Ext.tree.TreePanel.nodeTypes.async=Ext.tree.AsyncTreeNode,Ext.tree.TreeNodeUI=Ext.extend(Object,{constructor:function(t){Ext.apply(this,{node:t,rendered:!1,animating:!1,wasLeaf:!0,ecc:"x-tree-ec-icon x-tree-elbow",emptyIcon:Ext.BLANK_IMAGE_URL})},removeChild:function(t){this.rendered&&this.ctNode.removeChild(t.ui.getEl())},beforeLoad:function(){this.addClass("x-tree-node-loading")},afterLoad:function(){this.removeClass("x-tree-node-loading")},onTextChange:function(t,e,i){this.rendered&&(this.textNode.innerHTML=e)},onIconClsChange:function(t,e,i){this.rendered&&Ext.fly(this.iconNode).replaceClass(i,e)},onIconChange:function(t,e){var i;this.rendered&&(i=Ext.isEmpty(e),this.iconNode.src=i?this.emptyIcon:e,Ext.fly(this.iconNode)[i?"removeClass":"addClass"]("x-tree-node-inline-icon"))},onTipChange:function(t,e,i){var s;this.rendered&&(s=Ext.isDefined(i),this.textNode.setAttributeNS?(this.textNode.setAttributeNS("ext","qtip",e),s&&this.textNode.setAttributeNS("ext","qtitle",i)):(this.textNode.setAttribute("ext:qtip",e),s&&this.textNode.setAttribute("ext:qtitle",i)))},onHrefChange:function(t,e,i){this.rendered&&(this.anchor.href=this.getHref(e),Ext.isDefined(i)&&(this.anchor.target=i))},onClsChange:function(t,e,i){this.rendered&&Ext.fly(this.elNode).replaceClass(i,e)},onDisableChange:function(t,e){this.disabled=e,this.checkbox&&(this.checkbox.disabled=e),this[e?"addClass":"removeClass"]("x-tree-node-disabled")},onSelectedChange:function(t){t?(this.focus(),this.addClass("x-tree-selected")):this.removeClass("x-tree-selected")},onMove:function(t,e,i,s,n,r){if(this.childIndent=null,this.rendered){var o=s.ui.getContainer();if(!o)return this.holder=document.createElement("div"),void this.holder.appendChild(this.wrap);r=r?r.ui.getEl():null;r?o.insertBefore(this.wrap,r):o.appendChild(this.wrap),this.node.renderIndent(!0,i!=s)}},addClass:function(t){this.elNode&&Ext.fly(this.elNode).addClass(t)},removeClass:function(t){this.elNode&&Ext.fly(this.elNode).removeClass(t)},remove:function(){this.rendered&&(this.holder=document.createElement("div"),this.holder.appendChild(this.wrap))},fireEvent:function(){return this.node.fireEvent.apply(this.node,arguments)},initEvents:function(){this.node.on("move",this.onMove,this),this.node.disabled&&this.onDisableChange(this.node,!0),this.node.hidden&&this.hide();var t=this.node.getOwnerTree();!(t.enableDD||t.enableDrag||t.enableDrop)||this.node.isRoot&&!t.rootVisible||Ext.dd.Registry.register(this.elNode,{node:this.node,handles:this.getDDHandles(),isHandle:!1})},getDDHandles:function(){return[this.iconNode,this.textNode,this.elNode]},hide:function(){this.node.hidden=!0,this.wrap&&(this.wrap.style.display="none")},show:function(){this.node.hidden=!1,this.wrap&&(this.wrap.style.display="")},onContextMenu:function(t){(this.node.hasListener("contextmenu")||this.node.getOwnerTree().hasListener("contextmenu"))&&(t.preventDefault(),this.focus(),this.fireEvent("contextmenu",this.node,t))},onClick:function(t){var e;!this.dropping&&!1!==this.fireEvent("beforeclick",this.node,t)?(e=t.getTarget("a"),!this.disabled&&this.node.attributes.href&&e?this.fireEvent("click",this.node,t):(e&&t.ctrlKey&&t.stopEvent(),t.preventDefault(),this.disabled||(this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()&&this.node.toggle(),this.fireEvent("click",this.node,t)))):t.stopEvent()},onDblClick:function(t){t.preventDefault(),this.disabled||!1!==this.fireEvent("beforedblclick",this.node,t)&&(this.checkbox&&this.toggleCheck(),!this.animating&&this.node.isExpandable()&&this.node.toggle(),this.fireEvent("dblclick",this.node,t))},onOver:function(t){this.addClass("x-tree-node-over")},onOut:function(t){this.removeClass("x-tree-node-over")},onCheckChange:function(){var t=this.checkbox.checked;this.checkbox.defaultChecked=t,this.node.attributes.checked=t,this.fireEvent("checkchange",this.node,t)},ecClick:function(t){!this.animating&&this.node.isExpandable()&&this.node.toggle()},startDrop:function(){this.dropping=!0},endDrop:function(){setTimeout(function(){this.dropping=!1}.createDelegate(this),50)},expand:function(){this.updateExpandIcon(),this.ctNode.style.display=""},focus:function(){if(this.node.preventHScroll)try{var t=this.node.getOwnerTree().getTreeEl().dom,e=t.scrollLeft;this.anchor.focus(),t.scrollLeft=e}catch(t){}else try{this.anchor.focus()}catch(t){}},toggleCheck:function(t){var e=this.checkbox;e&&(e.checked=void 0===t?!e.checked:t,this.onCheckChange())},blur:function(){try{this.anchor.blur()}catch(t){}},animExpand:function(t){var e=Ext.get(this.ctNode);if(e.stopFx(),!this.node.isExpandable())return this.updateExpandIcon(),this.ctNode.style.display="",void Ext.callback(t);this.animating=!0,this.updateExpandIcon(),e.slideIn("t",{callback:function(){this.animating=!1,Ext.callback(t)},scope:this,duration:this.node.ownerTree.duration||.25})},highlight:function(){var t=this.node.getOwnerTree();Ext.fly(this.wrap).highlight(t.hlColor||"C3DAF9",{endColor:t.hlBaseColor})},collapse:function(){this.updateExpandIcon(),this.ctNode.style.display="none"},animCollapse:function(t){var e=Ext.get(this.ctNode);e.enableDisplayMode("block"),e.stopFx(),this.animating=!0,this.updateExpandIcon(),e.slideOut("t",{callback:function(){this.animating=!1,Ext.callback(t)},scope:this,duration:this.node.ownerTree.duration||.25})},getContainer:function(){return this.ctNode},getEl:function(){return this.wrap},appendDDGhost:function(t){t.appendChild(this.elNode.cloneNode(!0))},getDDRepairXY:function(){return Ext.lib.Dom.getXY(this.iconNode)},onRender:function(){this.render()},render:function(t){var e=this.node,i=e.attributes,s=e.parentNode?e.parentNode.ui.getContainer():e.ownerTree.innerCt.dom;this.rendered?!0===t&&s.appendChild(this.wrap):(this.rendered=!0,this.renderElements(e,i,s,t),i.qtip?this.onTipChange(e,i.qtip,i.qtipTitle):i.qtipCfg&&(i.qtipCfg.target=Ext.id(this.textNode),Ext.QuickTips.register(i.qtipCfg)),this.initEvents(),this.node.expanded||this.updateExpandIcon(!0))},renderElements:function(t,e,i,s){this.indentMarkup=t.parentNode?t.parentNode.ui.getChildIndent():"";var n,r=Ext.isBoolean(e.checked),o=this.getHref(e.href),e=['<li class="x-tree-node"><div ext:tree-node-id="',t.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',e.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img alt="" src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img alt="" src="',e.icon||this.emptyIcon,'" class="x-tree-node-icon',e.icon?" x-tree-node-inline-icon":"",e.iconCls?" "+e.iconCls:"",'" unselectable="on" />',r?'<input class="x-tree-node-cb" type="checkbox" '+(e.checked?'checked="checked" />':"/>"):"",'<a hidefocus="on" class="x-tree-node-anchor" href="',o,'" tabIndex="1" ',e.hrefTarget?' target="'+e.hrefTarget+'"':"",'><span unselectable="on">',t.text,"</span></a></div>",'<ul class="x-tree-node-ct" style="display:none;"></ul>',"</li>"].join("");!0!==s&&t.nextSibling&&(n=t.nextSibling.ui.getEl())?this.wrap=Ext.DomHelper.insertHtml("beforeBegin",n,e):this.wrap=Ext.DomHelper.insertHtml("beforeEnd",i,e),this.elNode=this.wrap.childNodes[0],this.ctNode=this.wrap.childNodes[1];i=this.elNode.childNodes;this.indentNode=i[0],this.ecNode=i[1],this.iconNode=i[2];e=3;r&&(this.checkbox=i[3],this.checkbox.defaultChecked=this.checkbox.checked,e++),this.anchor=i[e],this.textNode=i[e].firstChild},getHref:function(t){return Ext.isEmpty(t)?Ext.isGecko?"":"#":t},getAnchor:function(){return this.anchor},getTextEl:function(){return this.textNode},getIconEl:function(){return this.iconNode},isChecked:function(){return!!this.checkbox&&this.checkbox.checked},updateExpandIcon:function(){var t,e,i;this.rendered&&(i=(e=this.node).isLast()?"x-tree-elbow-end":"x-tree-elbow",e.hasChildNodes()||e.attributes.expandable?(e=e.expanded?(i+="-minus",t="x-tree-node-collapsed","x-tree-node-expanded"):(i+="-plus",t="x-tree-node-expanded","x-tree-node-collapsed"),this.wasLeaf&&(this.removeClass("x-tree-node-leaf"),this.wasLeaf=!1),this.c1==t&&this.c2==e||(Ext.fly(this.elNode).replaceClass(t,e),this.c1=t,this.c2=e)):this.wasLeaf||(Ext.fly(this.elNode).replaceClass("x-tree-node-expanded","x-tree-node-collapsed"),delete this.c1,delete this.c2,this.wasLeaf=!0),this.ecc!=(i="x-tree-ec-icon "+i)&&(this.ecNode.className=i,this.ecc=i))},onIdChange:function(t){this.rendered&&this.elNode.setAttribute("ext:tree-node-id",t)},getChildIndent:function(){if(!this.childIndent){for(var t=[],e=this.node;e;)(!e.isRoot||e.isRoot&&e.ownerTree.rootVisible)&&(e.isLast()?t.unshift('<img alt="" src="'+this.emptyIcon+'" class="x-tree-icon" />'):t.unshift('<img alt="" src="'+this.emptyIcon+'" class="x-tree-elbow-line" />')),e=e.parentNode;this.childIndent=t.join("")}return this.childIndent},renderIndent:function(){var t,e;this.rendered&&(t="",(e=this.node.parentNode)&&(t=e.ui.getChildIndent()),this.indentMarkup!=t&&(this.indentNode.innerHTML=t,this.indentMarkup=t),this.updateExpandIcon())},destroy:function(){this.elNode&&Ext.dd.Registry.unregister(this.elNode.id),Ext.each(["textnode","anchor","checkbox","indentNode","ecNode","iconNode","elNode","ctNode","wrap","holder"],function(t){this[t]&&(Ext.fly(this[t]).remove(),delete this[t])},this),delete this.node}}),Ext.tree.RootTreeNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{render:function(){var t;this.rendered||(t=this.node.ownerTree.innerCt.dom,this.node.expanded=!0,t.innerHTML='<div class="x-tree-root-node"></div>',this.wrap=this.ctNode=t.firstChild)},collapse:Ext.emptyFn,expand:Ext.emptyFn}),Ext.tree.TreeLoader=function(t){this.baseParams={},Ext.apply(this,t),this.addEvents("beforeload","load","loadexception"),Ext.tree.TreeLoader.superclass.constructor.call(this),Ext.isString(this.paramOrder)&&(this.paramOrder=this.paramOrder.split(/[\s,|]/))},Ext.extend(Ext.tree.TreeLoader,Ext.util.Observable,{uiProviders:{},clearOnLoad:!0,paramOrder:void 0,paramsAsHash:!1,nodeParameter:"node",directFn:void 0,load:function(t,e,i){if(this.clearOnLoad)for(;t.firstChild;)t.removeChild(t.firstChild);this.doPreload(t)?this.runCallback(e,i||t,[t]):(this.directFn||this.dataUrl||this.url)&&this.requestData(t,e,i||t)},doPreload:function(t){if(t.attributes.children){if(t.childNodes.length<1){var e=t.attributes.children;t.beginUpdate();for(var i=0,s=e.length;i<s;i++){var n=t.appendChild(this.createNode(e[i]));this.preloadChildren&&this.doPreload(n)}t.endUpdate()}return!0}return!1},getParams:function(t){var e=Ext.apply({},this.baseParams),i=this.nodeParameter,s=this.paramOrder;if(i&&(e[i]=t.id),this.directFn){var n=[t.id];if(s){i&&-1<s.indexOf(i)&&(n=[]);for(var r=0,o=s.length;r<o;r++)n.push(e[s[r]])}else this.paramsAsHash&&(n=[e]);return n}return e},requestData:function(t,e,i){var s;!1!==this.fireEvent("beforeload",this,t,e)?this.directFn?((s=this.getParams(t)).push(this.processDirectResponse.createDelegate(this,[{callback:e,node:t,scope:i}],!0)),this.directFn.apply(window,s)):this.transId=Ext.Ajax.request({method:this.requestMethod,url:this.dataUrl||this.url,success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{callback:e,node:t,scope:i},params:this.getParams(t)}):this.runCallback(e,i||t,[])},processDirectResponse:function(t,e,i){e.status?this.handleResponse({responseData:Ext.isArray(t)?t:null,responseText:t,argument:i}):this.handleFailure({argument:i})},runCallback:function(t,e,i){Ext.isFunction(t)&&t.apply(e,i)},isLoading:function(){return!!this.transId},abort:function(){this.isLoading()&&Ext.Ajax.abort(this.transId)},createNode:function(attr){return this.baseAttrs&&Ext.applyIf(attr,this.baseAttrs),!1===this.applyLoader||attr.loader||(attr.loader=this),Ext.isString(attr.uiProvider)&&(attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)),new(attr.nodeType?Ext.tree.TreePanel.nodeTypes[attr.nodeType]:attr.leaf?Ext.tree.TreeNode:Ext.tree.AsyncTreeNode)(attr)},processResponse:function(e,t,i,s){var n=e.responseText;try{var r=e.responseData||Ext.decode(n);t.beginUpdate();for(var o=0,a=r.length;o<a;o++){var l=this.createNode(r[o]);l&&t.appendChild(l)}t.endUpdate(),this.runCallback(i,s||t,[t])}catch(t){this.handleFailure(e)}},handleResponse:function(t){this.transId=!1;var e=t.argument;this.processResponse(t,e.node,e.callback,e.scope),this.fireEvent("load",this,e.node,t)},handleFailure:function(t){this.transId=!1;var e=t.argument;this.fireEvent("loadexception",this,e.node,t),this.runCallback(e.callback,e.scope||e.node,[e.node])},destroy:function(){this.abort(),this.purgeListeners()}}),Ext.tree.TreeFilter=function(t,e){this.tree=t,this.filtered={},Ext.apply(this,e)},Ext.tree.TreeFilter.prototype={clearBlank:!1,reverse:!1,autoClear:!1,remove:!1,filter:function(e,i,t){var s;if(i=i||"text","string"==typeof e){var n=e.length;if(0==n&&this.clearBlank)return void this.clear();e=e.toLowerCase(),s=function(t){return t.attributes[i].substr(0,n).toLowerCase()==e}}else{if(!e.exec)throw"Illegal filter type, must be string or regex";s=function(t){return e.test(t.attributes[i])}}this.filterBy(s,null,t)},filterBy:function(e,i,s){s=s||this.tree.root,this.autoClear&&this.clear();var n=this.filtered,r=this.reverse;if(s.cascade(function(t){return t==s||!n[t.id]&&(!(!e.call(i||t,t)||r)||((n[t.id]=t).ui.hide(),!1))}),this.remove)for(var t in n)"function"==typeof t||(t=n[t])&&t.parentNode&&t.parentNode.removeChild(t)},clear:function(){this.tree;var t,e,i=this.filtered;for(t in i)"function"==typeof t||(e=i[t])&&e.ui.show();this.filtered={}}},Ext.tree.TreeSorter=Ext.extend(Object,{constructor:function(t,e){Ext.apply(this,e),t.on({scope:this,beforechildrenrendered:this.doSort,append:this.updateSort,insert:this.updateSort,textchange:this.updateSortParent});var n=this.dir&&"desc"==this.dir.toLowerCase(),r=this.property||"text",o=this.sortType,a=this.folderSort,l=!0===this.caseSensitive,d=this.leafAttr||"leaf";Ext.isString(o)&&(o=Ext.data.SortTypes[o]),this.sortFn=function(t,e){var i=t.attributes,s=e.attributes;if(a){if(i[d]&&!s[d])return 1;if(!i[d]&&s[d])return-1}i=i[r],s=s[r],i=o?o(i,t):l?i:i.toUpperCase(),s=o?o(s,e):l?s:s.toUpperCase();return i<s?n?1:-1:s<i?n?-1:1:0}},doSort:function(t){t.sort(this.sortFn)},updateSort:function(t,e){e.childrenRendered&&this.doSort.defer(1,this,[e])},updateSortParent:function(t){t=t.parentNode;t&&t.childrenRendered&&this.doSort.defer(1,this,[t])}}),Ext.dd.DropZone&&(Ext.tree.TreeDropZone=function(t,e){this.allowParentInsert=e.allowParentInsert||!1,this.allowContainerDrop=e.allowContainerDrop||!1,this.appendOnly=e.appendOnly||!1,Ext.tree.TreeDropZone.superclass.constructor.call(this,t.getTreeEl(),e),this.tree=t,this.dragOverData={},this.lastInsertClass="x-tree-no-status"},Ext.extend(Ext.tree.TreeDropZone,Ext.dd.DropZone,{ddGroup:"TreeDD",expandDelay:1e3,expandNode:function(t){t.hasChildNodes()&&!t.isExpanded()&&t.expand(!1,null,this.triggerCacheRefresh.createDelegate(this))},queueExpand:function(t){this.expandProcId=this.expandNode.defer(this.expandDelay,this,[t])},cancelExpand:function(){this.expandProcId&&(clearTimeout(this.expandProcId),this.expandProcId=!1)},isValidDropPoint:function(t,e,i,s,n){if(!t||!n)return!1;var r=t.node,o=n.node;if(!(r&&r.isTarget&&e))return!1;if("append"==e&&!1===r.allowChildren)return!1;if(("above"==e||"below"==e)&&r.parentNode&&!1===r.parentNode.allowChildren)return!1;if(o&&(r==o||o.contains(r)))return!1;t=this.dragOverData;t.tree=this.tree,t.target=r,t.data=n,t.point=e,t.source=i,t.rawEvent=s,t.dropNode=o,t.cancel=!1;o=this.tree.fireEvent("nodedragover",t);return!1===t.cancel&&!1!==o},getDropPoint:function(t,e,i){var s=e.node;if(s.isRoot)return!1!==s.allowChildren&&"append";var n=e.ddel,r=Ext.lib.Dom.getY(n),o=r+n.offsetHeight,e=Ext.lib.Event.getPageY(t),n=!1===s.allowChildren||s.isLeaf();if(this.appendOnly||!1===s.parentNode.allowChildren)return!n&&"append";t=!1;this.allowParentInsert||(t=s.hasChildNodes()&&s.isExpanded());s=(o-r)/(n?2:3);return r<=e&&e<r+s?"above":!t&&(n||o-s<=e&&e<=o)?"below":"append"},onNodeEnter:function(t,e,i,s){this.cancelExpand()},onContainerOver:function(t,e,i){return this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",t,e,i)?this.dropAllowed:this.dropNotAllowed},onNodeOver:function(t,e,i,s){var n=this.getDropPoint(i,t,e),r=t.node;this.expandProcId||"append"!=n||!r.hasChildNodes()||t.node.isExpanded()?"append"!=n&&this.cancelExpand():this.queueExpand(r);r=this.dropNotAllowed;return this.isValidDropPoint(t,n,e,i,s)&&n&&(s=t.ddel,t="above"==n?(r=t.node.isFirst()?"x-tree-drop-ok-above":"x-tree-drop-ok-between","x-tree-drag-insert-above"):"below"==n?(r=t.node.isLast()?"x-tree-drop-ok-below":"x-tree-drop-ok-between","x-tree-drag-insert-below"):(r="x-tree-drop-ok-append","x-tree-drag-append"),this.lastInsertClass!=t&&(Ext.fly(s).replaceClass(this.lastInsertClass,t),this.lastInsertClass=t)),r},onNodeOut:function(t,e,i,s){this.cancelExpand(),this.removeDropIndicators(t)},onNodeDrop:function(t,e,i,s){var n=this.getDropPoint(i,t,e),r=t.node;if(r.ui.startDrop(),!this.isValidDropPoint(t,n,e,i,s))return r.ui.endDrop(),!1;t=s.node||(e.getTreeNode?e.getTreeNode(s,r,n,i):null);return this.processDrop(r,s,n,e,i,t)},onContainerDrop:function(t,e,i){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",t,e,i)){var s=this.tree.getRootNode();s.ui.startDrop();var n=i.node||(t.getTreeNode?t.getTreeNode(i,s,"append",e):null);return this.processDrop(s,i,"append",t,e,n)}return!1},processDrop:function(t,e,i,s,n,r){var o={tree:this.tree,target:t,data:e,point:i,source:s,rawEvent:n,dropNode:r,cancel:!r,dropStatus:!1};return!1!==this.tree.fireEvent("beforenodedrop",o)&&!0!==o.cancel&&o.dropNode?(t=o.target,"append"!=i||t.isExpanded()?this.completeDrop(o):t.expand(!1,null,function(){this.completeDrop(o)}.createDelegate(this)),!0):(t.ui.endDrop(),o.dropStatus)},completeDrop:function(t){for(var e,i=t.dropNode,s=t.point,n=t.target,r=0,o=(i=!Ext.isArray(i)?[i]:i).length;r<o;r++)e=i[r],"above"==s?n.parentNode.insertBefore(e,n):"below"==s?n.parentNode.insertBefore(e,n.nextSibling):n.appendChild(e);e.ui.focus(),Ext.enableFx&&this.tree.hlDrop&&e.ui.highlight(),n.ui.endDrop(),this.tree.fireEvent("nodedrop",t)},afterNodeMoved:function(t,e,i,s,n){Ext.enableFx&&this.tree.hlDrop&&(n.ui.focus(),n.ui.highlight()),this.tree.fireEvent("nodedrop",this.tree,s,e,t,i)},getTree:function(){return this.tree},removeDropIndicators:function(t){t&&t.ddel&&(t=t.ddel,Ext.fly(t).removeClass(["x-tree-drag-insert-above","x-tree-drag-insert-below","x-tree-drag-append"]),this.lastInsertClass="_noclass")},beforeDragDrop:function(t,e,i){return this.cancelExpand(),!0},afterRepair:function(t){t&&Ext.enableFx&&t.node.ui.highlight(),this.hideProxy()}})),Ext.dd.DragZone&&(Ext.tree.TreeDragZone=function(t,e){Ext.tree.TreeDragZone.superclass.constructor.call(this,t.innerCt,e),this.tree=t},Ext.extend(Ext.tree.TreeDragZone,Ext.dd.DragZone,{ddGroup:"TreeDD",onBeforeDrag:function(t,e){t=t.node;return t&&t.draggable&&!t.disabled},onInitDrag:function(t){var e=this.dragData;this.tree.getSelectionModel().select(e.node),this.tree.eventModel.disable(),this.proxy.update(""),e.node.ui.appendDDGhost(this.proxy.ghost.dom),this.tree.fireEvent("startdrag",this.tree,e.node,t)},getRepairXY:function(t,e){return e.node.ui.getDDRepairXY()},onEndDrag:function(t,e){this.tree.eventModel.enable.defer(100,this.tree.eventModel),this.tree.fireEvent("enddrag",this.tree,t.node,e)},onValidDrop:function(t,e,i){this.tree.fireEvent("dragdrop",this.tree,this.dragData.node,t,e),this.hideProxy()},beforeInvalidDrop:function(t,e){var i=this.tree.getSelectionModel();i.clearSelections(),i.select(this.dragData.node)},afterRepair:function(){Ext.enableFx&&this.tree.hlDrop&&Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9"),this.dragging=!1}})),Ext.tree.TreeEditor=function(t,e,i){e=(e=e||{}).events?e:new Ext.form.TextField(e);Ext.tree.TreeEditor.superclass.constructor.call(this,e,i),(this.tree=t).rendered?this.initEditor(t):t.on("render",this.initEditor,this)},Ext.extend(Ext.tree.TreeEditor,Ext.Editor,{alignment:"l-l",autoSize:!1,hideEl:!1,cls:"x-small-editor x-tree-editor",shim:!1,shadow:"frame",maxWidth:250,editDelay:350,initEditor:function(t){t.on({scope:this,beforeclick:this.beforeNodeClick,dblclick:this.onNodeDblClick}),this.on({scope:this,complete:this.updateNode,beforestartedit:this.fitToTree,specialkey:this.onSpecialKey}),this.on("startedit",this.bindScroll,this,{delay:10})},fitToTree:function(t,e){var i=this.tree.getTreeEl().dom,e=e.dom;i.scrollLeft>e.offsetLeft&&(i.scrollLeft=e.offsetLeft);i=Math.min(this.maxWidth,(20<i.clientWidth?i.clientWidth:i.offsetWidth)-Math.max(0,e.offsetLeft-i.scrollLeft)-5);this.setSize(i,"")},triggerEdit:function(t,e){if(this.completeEdit(),!1!==t.attributes.editable){this.editNode=t,this.tree.autoScroll&&Ext.fly(t.ui.getEl()).scrollIntoView(this.tree.body);var i=t.text||"";return!Ext.isGecko&&Ext.isEmpty(t.text)&&t.setText("&#160;"),this.autoEditTimer=this.startEdit.defer(this.editDelay,this,[t.ui.textNode,i]),!1}},bindScroll:function(){this.tree.getTreeEl().on("scroll",this.cancelEdit,this)},beforeNodeClick:function(t,e){if(clearTimeout(this.autoEditTimer),this.tree.getSelectionModel().isSelected(t))return e.stopEvent(),this.triggerEdit(t)},onNodeDblClick:function(t,e){clearTimeout(this.autoEditTimer)},updateNode:function(t,e){this.tree.getTreeEl().un("scroll",this.cancelEdit,this),this.editNode.setText(e)},onHide:function(){Ext.tree.TreeEditor.superclass.onHide.call(this),this.editNode&&this.editNode.ui.focus.defer(50,this.editNode.ui)},onSpecialKey:function(t,e){var i=e.getKey();i==e.ESC?(e.stopEvent(),this.cancelEdit()):i!=e.ENTER||e.hasModifier()||(e.stopEvent(),this.completeEdit())},onDestroy:function(){clearTimeout(this.autoEditTimer),Ext.tree.TreeEditor.superclass.onDestroy.call(this);var t=this.tree;t.un("beforeclick",this.beforeNodeClick,this),t.un("dblclick",this.onNodeDblClick,this)}});var swfobject=function(){var r,o,a,l,d,h,x="undefined",E="object",c="Shockwave Flash",g="application/x-shockwave-flash",u="SWFObjectExprInst",t="onreadystatechange",f=window,p=document,m=navigator,v=!1,s=[function(){(v?function(){var e=p.getElementsByTagName("body")[0],i=O(E);i.setAttribute("type",g);var s=e.appendChild(i);{var n;s?(n=0,function(){if(typeof s.GetVariable!=x){var t=s.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),S.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(n<10)return n++,setTimeout(arguments.callee,10);e.removeChild(i),s=null,k()}()):k()}}:k)()}],y=[],b=[],w=[],n=!1,C=!1,i=!0,S=function(){var t=typeof p.getElementById!=x&&typeof p.getElementsByTagName!=x&&typeof p.createElement!=x,e=m.userAgent.toLowerCase(),i=m.platform.toLowerCase(),s=/win/.test(i||e),n=/mac/.test(i||e),r=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,i=[0,0,0],e=null;if(typeof m.plugins!=x&&typeof m.plugins[c]==E)!(e=m.plugins[c].description)||typeof m.mimeTypes!=x&&m.mimeTypes[g]&&!m.mimeTypes[g].enabledPlugin||(o=!(v=!0),e=e.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),i[0]=parseInt(e.replace(/^(.*)\..*$/,"$1"),10),i[1]=parseInt(e.replace(/^.*\.(.*)\s.*$/,"$1"),10),i[2]=/[a-zA-Z]/.test(e)?parseInt(e.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof f.ActiveXObject!=x)try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");a&&(e=a.GetVariable("$version"))&&(o=!0,e=e.split(" ")[1].split(","),i=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}catch(t){}return{w3:t,pv:i,wk:r,ie:o,win:s,mac:n}}();S.w3&&((typeof p.readyState!=x&&"complete"==p.readyState||typeof p.readyState==x&&(p.getElementsByTagName("body")[0]||p.body))&&e(),n||(typeof p.addEventListener!=x&&p.addEventListener("DOMContentLoaded",e,!1),S.ie&&S.win&&(p.attachEvent(t,function(){"complete"==p.readyState&&(p.detachEvent(t,arguments.callee),e())}),f==top&&function(){if(!n){try{p.documentElement.doScroll("left")}catch(t){return setTimeout(arguments.callee,0)}e()}}()),S.wk&&function(){n||(/loaded|complete/.test(p.readyState)?e():setTimeout(arguments.callee,0))}(),I(e)));function e(){if(!n){try{var t=p.getElementsByTagName("body")[0].appendChild(O("span"));t.parentNode.removeChild(t)}catch(t){return}n=!0;for(var e=s.length,i=0;i<e;i++)s[i]()}}function T(t){n?t():s[s.length]=t}function I(t){var e,i,s,n;typeof f.addEventListener!=x?f.addEventListener("load",t,!1):typeof p.addEventListener!=x?p.addEventListener("load",t,!1):typeof f.attachEvent!=x?(s="onload",n=t,(i=f).attachEvent(s,n),w[w.length]=[i,s,n]):"function"==typeof f.onload?(e=f.onload,f.onload=function(){e(),t()}):f.onload=t}function k(){var t=y.length;if(0<t)for(var e=0;e<t;e++){var i=y[e].id,s=y[e].callbackFn,n={success:!1,id:i};if(0<S.pv[0]){var r=P(i);if(r)if(!L(y[e].swfVersion)||S.wk&&S.wk<312)if(y[e].expressInstall&&D()){var o={};o.data=y[e].expressInstall,o.width=r.getAttribute("width")||"0",o.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(o.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(o.align=r.getAttribute("align"));for(var a={},l=r.getElementsByTagName("param"),d=l.length,h=0;h<d;h++)"movie"!=l[h].getAttribute("name").toLowerCase()&&(a[l[h].getAttribute("name")]=l[h].getAttribute("value"));A(o,a,i,s)}else!function(t){{var e;S.ie&&S.win&&4!=t.readyState?(e=O("div"),t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(R(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()):t.parentNode.replaceChild(R(t),t)}}(r),s&&s(n);else _(i,!0),s&&(n.success=!0,n.ref=M(i),s(n))}else _(i,!0),s&&((i=M(i))&&typeof i.SetVariable!=x&&(n.success=!0,n.ref=i),s(n))}}function M(t){var e=null,t=P(t);return t&&"OBJECT"==t.nodeName&&(typeof t.SetVariable!=x?e=t:(t=t.getElementsByTagName(E)[0])&&(e=t)),e}function D(){return!C&&L("6.0.65")&&(S.win||S.mac)&&!(S.wk&&S.wk<312)}function A(t,e,i,s){a=s||null,l={success:!(C=!0),id:i};var n=P(i);n&&(o="OBJECT"==n.nodeName?(r=R(n),null):(r=n,i),t.id=u,(typeof t.width==x||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==x||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),p.title=p.title.slice(0,47)+" - Flash Player Installation",s=S.ie&&S.win?"ActiveX":"PlugIn",s="MMredirectURL="+f.location.toString().replace(/&/g,"%26")+"&MMplayerType="+s+"&MMdoctitle="+p.title,typeof e.flashvars!=x?e.flashvars+="&"+s:e.flashvars=s,S.ie&&S.win&&4!=n.readyState&&((s=O("div")).setAttribute("id",i+="SWFObjectNew"),n.parentNode.insertBefore(s,n),n.style.display="none",function(){4==n.readyState?n.parentNode.removeChild(n):setTimeout(arguments.callee,10)}()),N(t,e,i))}function R(t){var e=O("div");if(S.win&&S.ie)e.innerHTML=t.innerHTML;else{t=t.getElementsByTagName(E)[0];if(t){var i=t.childNodes;if(i)for(var s=i.length,n=0;n<s;n++)1==i[n].nodeType&&"PARAM"==i[n].nodeName||8==i[n].nodeType||e.appendChild(i[n].cloneNode(!0))}}return e}function N(t,e,i){var s,n,r,o,a,l=P(i);if(S.wk&&S.wk<312)return s;if(l)if(typeof t.id==x&&(t.id=i),S.ie&&S.win){var d,h="";for(d in t)t[d]!=Object.prototype[d]&&("data"==d.toLowerCase()?e.movie=t[d]:"styleclass"==d.toLowerCase()?h+=' class="'+t[d]+'"':"classid"!=d.toLowerCase()&&(h+=" "+d+'="'+t[d]+'"'));var c,u="";for(c in e)e[c]!=Object.prototype[c]&&(u+='<param name="'+c+'" value="'+e[c]+'" />');l.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+h+">"+u+"</object>",b[b.length]=t.id,s=P(t.id)}else{var f,p,m=O(E);for(f in m.setAttribute("type",g),t)t[f]!=Object.prototype[f]&&("styleclass"==f.toLowerCase()?m.setAttribute("class",t[f]):"classid"!=f.toLowerCase()&&m.setAttribute(f,t[f]));for(p in e)e[p]!=Object.prototype[p]&&"movie"!=p.toLowerCase()&&(n=m,o=e[r=p],a=void 0,(a=O("param")).setAttribute("name",r),a.setAttribute("value",o),n.appendChild(a));l.parentNode.replaceChild(m,l),s=m}return s}function F(t){var e=P(t);e&&"OBJECT"==e.nodeName&&(S.ie&&S.win?(e.style.display="none",function(){4==e.readyState?function(t){var e=P(t);if(e){for(var i in e)"function"==typeof e[i]&&(e[i]=null);e.parentNode.removeChild(e)}}(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function P(t){var e=null;try{e=p.getElementById(t)}catch(t){}return e}function O(t){return p.createElement(t)}function L(t){var e=S.pv,t=t.split(".");return t[0]=parseInt(t[0],10),t[1]=parseInt(t[1],10)||0,t[2]=parseInt(t[2],10)||0,e[0]>t[0]||e[0]==t[0]&&e[1]>t[1]||e[0]==t[0]&&e[1]==t[1]&&e[2]>=t[2]}function B(t,e,i,s){var n;S.ie&&S.mac||(n=p.getElementsByTagName("head")[0])&&(i=i&&"string"==typeof i?i:"screen",s&&(h=d=null),d&&h==i||((s=O("style")).setAttribute("type","text/css"),s.setAttribute("media",i),d=n.appendChild(s),S.ie&&S.win&&typeof p.styleSheets!=x&&0<p.styleSheets.length&&(d=p.styleSheets[p.styleSheets.length-1]),h=i),S.ie&&S.win?d&&typeof d.addRule==E&&d.addRule(t,e):d&&typeof p.createTextNode!=x&&d.appendChild(p.createTextNode(t+" {"+e+"}")))}function _(t,e){i&&(e=e?"visible":"hidden",n&&P(t)?P(t).style.visibility=e:B("#"+t,"visibility:"+e))}function H(t){return null!=/[\\\"<>\.;]/.exec(t)&&typeof encodeURIComponent!=x?encodeURIComponent(t):t}S.ie&&S.win&&window.attachEvent("onunload",function(){for(var t=w.length,e=0;e<t;e++)w[e][0].detachEvent(w[e][1],w[e][2]);for(var i,s,n=b.length,r=0;r<n;r++)F(b[r]);for(i in S)S[i]=null;for(s in S=null,swfobject)swfobject[s]=null;swfobject=null,window.detachEvent("onunload",arguments.callee)});return{registerObject:function(t,e,i,s){var n;S.w3&&t&&e?((n={}).id=t,n.swfVersion=e,n.expressInstall=i,n.callbackFn=s,y[y.length]=n,_(t,!1)):s&&s({success:!1,id:t})},getObjectById:function(t){if(S.w3)return M(t)},embedSWF:function(o,a,l,d,h,c,u,f,p,m){var g={success:!1,id:a};S.w3&&!(S.wk&&S.wk<312)&&o&&a&&l&&d&&h?(_(a,!1),T(function(){l+="",d+="";var t={};if(p&&typeof p===E)for(var e in p)t[e]=p[e];t.data=o,t.width=l,t.height=d;var i={};if(f&&typeof f===E)for(var s in f)i[s]=f[s];if(u&&typeof u===E)for(var n in u)typeof i.flashvars!=x?i.flashvars+="&"+n+"="+u[n]:i.flashvars=n+"="+u[n];if(L(h)){var r=N(t,i,a);t.id==a&&_(a,!0),g.success=!0,g.ref=r}else{if(c&&D())return t.data=c,void A(t,i,a,m);_(a,!0)}m&&m(g)})):m&&m(g)},switchOffAutoHideShow:function(){i=!1},ua:S,getFlashPlayerVersion:function(){return{major:S.pv[0],minor:S.pv[1],release:S.pv[2]}},hasFlashPlayerVersion:L,createSWF:function(t,e,i){if(S.w3)return N(t,e,i)},showExpressInstall:function(t,e,i,s){S.w3&&D()&&A(t,e,i,s)},removeSWF:function(t){S.w3&&F(t)},createCSS:function(t,e,i,s){S.w3&&B(t,e,i,s)},addDomLoadEvent:T,addLoadEvent:I,getQueryParamValue:function(t){var e=p.location.search||p.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return H(e);for(var i=e.split("&"),s=0;s<i.length;s++)if(i[s].substring(0,i[s].indexOf("="))==t)return H(i[s].substring(i[s].indexOf("=")+1))}return""},expressInstallCallback:function(){var t;C&&((t=P(u))&&r&&(t.parentNode.replaceChild(r,t),o&&(_(o,!0),S.ie&&S.win&&(r.style.display="block")),a&&a(l)),C=!1)}}}();Ext.FlashComponent=Ext.extend(Ext.BoxComponent,{flashVersion:"9.0.115",backgroundColor:"#ffffff",wmode:"opaque",flashVars:void 0,flashParams:void 0,url:void 0,swfId:void 0,swfWidth:"100%",swfHeight:"100%",expressInstall:!1,initComponent:function(){Ext.FlashComponent.superclass.initComponent.call(this),this.addEvents("initialize")},onRender:function(){Ext.FlashComponent.superclass.onRender.apply(this,arguments);var t=Ext.apply({allowScriptAccess:"always",bgcolor:this.backgroundColor,wmode:this.wmode},this.flashParams),e=Ext.apply({allowedDomain:document.location.hostname,YUISwfId:this.getId(),YUIBridgeCallback:"Ext.FlashEventProxy.onEvent"},this.flashVars);new swfobject.embedSWF(this.url,this.id,this.swfWidth,this.swfHeight,this.flashVersion,this.expressInstall?Ext.FlashComponent.EXPRESS_INSTALL_URL:void 0,e,t),this.swf=Ext.getDom(this.id),this.el=Ext.get(this.swf)},getSwfId:function(){return this.swfId||(this.swfId="extswf"+ ++Ext.Component.AUTO_ID)},getId:function(){return this.id||(this.id="extflashcmp"+ ++Ext.Component.AUTO_ID)},onFlashEvent:function(t){switch(t.type){case"swfReady":return void this.initSwf();case"log":return}(t.component=this).fireEvent(t.type.toLowerCase().replace(/event$/,""),t)},initSwf:function(){this.onSwfReady(!!this.isInitialized),this.isInitialized=!0,this.fireEvent("initialize",this)},beforeDestroy:function(){this.rendered&&swfobject.removeSWF(this.swf.id),Ext.FlashComponent.superclass.beforeDestroy.call(this)},onSwfReady:Ext.emptyFn}),Ext.FlashComponent.EXPRESS_INSTALL_URL="http://swfobject.googlecode.com/svn/trunk/swfobject/expressInstall.swf",Ext.reg("flash",Ext.FlashComponent),Ext.FlashEventProxy={onEvent:function(t,e){var i=Ext.getCmp(t);i?i.onFlashEvent(e):arguments.callee.defer(10,this,[t,e])}},Ext.chart.Chart=Ext.extend(Ext.FlashComponent,{refreshBuffer:100,chartStyle:{padding:10,animationEnabled:!0,font:{name:"Tahoma",color:4473924,size:11},dataTip:{padding:5,border:{color:10075112,size:1},background:{color:14346230,alpha:.9},font:{name:"Tahoma",color:1393291,size:10,bold:!0}}},extraStyle:null,seriesStyles:null,disableCaching:Ext.isIE||Ext.isOpera,disableCacheParam:"_dc",initComponent:function(){Ext.chart.Chart.superclass.initComponent.call(this),this.url||(this.url=Ext.chart.Chart.CHART_URL),this.disableCaching&&(this.url=Ext.urlAppend(this.url,String.format("{0}={1}",this.disableCacheParam,(new Date).getTime()))),this.addEvents("itemmouseover","itemmouseout","itemclick","itemdoubleclick","itemdragstart","itemdrag","itemdragend","beforerefresh","refresh"),this.store=Ext.StoreMgr.lookup(this.store)},setStyle:function(t,e){this.swf.setStyle(t,Ext.encode(e))},setStyles:function(t){this.swf.setStyles(Ext.encode(t))},setSeriesStyles:function(t){this.seriesStyles=t;var e=[];Ext.each(t,function(t){e.push(Ext.encode(t))}),this.swf.setSeriesStyles(e)},setCategoryNames:function(t){this.swf.setCategoryNames(t)},setLegendRenderer:function(e,i){i=i||this,this.removeFnProxy(this.legendFnName),this.legendFnName=this.createFnProxy(function(t){return e.call(i,t)}),this.swf.setLegendLabelFunction(this.legendFnName)},setTipRenderer:function(n,r){var o=this;r=r||o,o.removeFnProxy(o.tipFnName),o.tipFnName=o.createFnProxy(function(t,e,i){var s=o.store.getAt(e);return n.call(r,o,s,e,i)}),o.swf.setDataTipFunction(o.tipFnName)},setSeries:function(t){this.series=t,this.refresh()},bindStore:function(t,e){!e&&this.store&&(t!==this.store&&this.store.autoDestroy?this.store.destroy():(this.store.un("datachanged",this.refresh,this),this.store.un("add",this.delayRefresh,this),this.store.un("remove",this.delayRefresh,this),this.store.un("update",this.delayRefresh,this),this.store.un("clear",this.refresh,this))),t&&(t=Ext.StoreMgr.lookup(t)).on({scope:this,datachanged:this.refresh,add:this.delayRefresh,remove:this.delayRefresh,update:this.delayRefresh,clear:this.refresh}),(this.store=t)&&!e&&this.refresh()},onSwfReady:function(t){var e;Ext.chart.Chart.superclass.onSwfReady.call(this,t),this.swf.setType(this.type),this.chartStyle&&this.setStyles(Ext.apply({},this.extraStyle,this.chartStyle)),this.categoryNames&&this.setCategoryNames(this.categoryNames),this.tipRenderer&&(e=this.getFunctionRef(this.tipRenderer),this.setTipRenderer(e.fn,e.scope)),this.legendRenderer&&(e=this.getFunctionRef(this.legendRenderer),this.setLegendRenderer(e.fn,e.scope)),t||this.bindStore(this.store,!0),this.refresh.defer(10,this)},delayRefresh:function(){this.refreshTask||(this.refreshTask=new Ext.util.DelayedTask(this.refresh,this)),this.refreshTask.delay(this.refreshBuffer)},refresh:function(){if(!1!==this.fireEvent("beforerefresh",this)){for(var t=[],e=this.store.data.items,i=0,s=e.length;i<s;i++)t[i]=e[i].data;var n=[],r=0,o=null,a=0;if(this.series)for(r=this.series.length,a=0;a<r;a++){var l,d={};for(l in o=this.series[a])"style"==l&&null!==o.style?d.style=Ext.encode(o.style):d[l]=o[l];n.push(d)}if(0<r)for(a=0;a<r;a++)(o=n[a]).type||(o.type=this.type),o.dataProvider=t;else n.push({type:this.type,dataProvider:t});this.swf.setDataProvider(n),this.seriesStyles&&this.setSeriesStyles(this.seriesStyles),this.fireEvent("refresh",this)}},createFnProxy:function(t){var e="extFnProxy"+ ++Ext.chart.Chart.PROXY_FN_ID;return Ext.chart.Chart.proxyFunction[e]=t,"Ext.chart.Chart.proxyFunction."+e},removeFnProxy:function(t){Ext.isEmpty(t)||(t=t.replace("Ext.chart.Chart.proxyFunction.",""),delete Ext.chart.Chart.proxyFunction[t])},getFunctionRef:function(t){return Ext.isFunction(t)?{fn:t,scope:this}:{fn:t.fn,scope:t.scope||this}},onDestroy:function(){this.refreshTask&&this.refreshTask.cancel&&this.refreshTask.cancel(),Ext.chart.Chart.superclass.onDestroy.call(this),this.bindStore(null),this.removeFnProxy(this.tipFnName),this.removeFnProxy(this.legendFnName)}}),Ext.reg("chart",Ext.chart.Chart),Ext.chart.Chart.PROXY_FN_ID=0,Ext.chart.Chart.proxyFunction={},Ext.chart.Chart.CHART_URL="http://yui.yahooapis.com/2.8.2/build/charts/assets/charts.swf",Ext.chart.PieChart=Ext.extend(Ext.chart.Chart,{type:"pie",onSwfReady:function(t){Ext.chart.PieChart.superclass.onSwfReady.call(this,t),this.setDataField(this.dataField),this.setCategoryField(this.categoryField)},setDataField:function(t){this.dataField=t,this.swf.setDataField(t)},setCategoryField:function(t){this.categoryField=t,this.swf.setCategoryField(t)}}),Ext.reg("piechart",Ext.chart.PieChart),Ext.chart.CartesianChart=Ext.extend(Ext.chart.Chart,{onSwfReady:function(t){Ext.chart.CartesianChart.superclass.onSwfReady.call(this,t),this.labelFn=[],this.xField&&this.setXField(this.xField),this.yField&&this.setYField(this.yField),this.xAxis&&this.setXAxis(this.xAxis),this.xAxes&&this.setXAxes(this.xAxes),this.yAxis&&this.setYAxis(this.yAxis),this.yAxes&&this.setYAxes(this.yAxes),Ext.isDefined(this.constrainViewport)&&this.swf.setConstrainViewport(this.constrainViewport)},setXField:function(t){this.xField=t,this.swf.setHorizontalField(t)},setYField:function(t){this.yField=t,this.swf.setVerticalField(t)},setXAxis:function(t){this.xAxis=this.createAxis("xAxis",t),this.swf.setHorizontalAxis(this.xAxis)},setXAxes:function(t){for(var e,i=0;i<t.length;i++)e=this.createAxis("xAxis"+i,t[i]),this.swf.setHorizontalAxis(e)},setYAxis:function(t){this.yAxis=this.createAxis("yAxis",t),this.swf.setVerticalAxis(this.yAxis)},setYAxes:function(t){for(var e,i=0;i<t.length;i++)e=this.createAxis("yAxis"+i,t[i]),this.swf.setVerticalAxis(e)},createAxis:function(t,e){var i,s=Ext.apply({},e);return this[t]&&(e=this[t].labelFunction,this.removeFnProxy(e),this.labelFn.remove(e)),s.labelRenderer&&(i=this.getFunctionRef(s.labelRenderer),s.labelFunction=this.createFnProxy(function(t){return i.fn.call(i.scope,t)}),delete s.labelRenderer,this.labelFn.push(s.labelFunction)),-1<t.indexOf("xAxis")&&"left"==s.position&&(s.position="bottom"),s},onDestroy:function(){Ext.chart.CartesianChart.superclass.onDestroy.call(this),Ext.each(this.labelFn,function(t){this.removeFnProxy(t)},this)}}),Ext.reg("cartesianchart",Ext.chart.CartesianChart),Ext.chart.LineChart=Ext.extend(Ext.chart.CartesianChart,{type:"line"}),Ext.reg("linechart",Ext.chart.LineChart),Ext.chart.ColumnChart=Ext.extend(Ext.chart.CartesianChart,{type:"column"}),Ext.reg("columnchart",Ext.chart.ColumnChart),Ext.chart.StackedColumnChart=Ext.extend(Ext.chart.CartesianChart,{type:"stackcolumn"}),Ext.reg("stackedcolumnchart",Ext.chart.StackedColumnChart),Ext.chart.BarChart=Ext.extend(Ext.chart.CartesianChart,{type:"bar"}),Ext.reg("barchart",Ext.chart.BarChart),Ext.chart.StackedBarChart=Ext.extend(Ext.chart.CartesianChart,{type:"stackbar"}),Ext.reg("stackedbarchart",Ext.chart.StackedBarChart),Ext.chart.Axis=function(t){Ext.apply(this,t)},Ext.chart.Axis.prototype={type:null,orientation:"horizontal",reverse:!1,labelFunction:null,hideOverlappingLabels:!0,labelSpacing:2},Ext.chart.NumericAxis=Ext.extend(Ext.chart.Axis,{type:"numeric",minimum:NaN,maximum:NaN,majorUnit:NaN,minorUnit:NaN,snapToUnits:!0,alwaysShowZero:!0,scale:"linear",roundMajorUnit:!0,calculateByLabelSize:!0,position:"left",adjustMaximumByMajorUnit:!0,adjustMinimumByMajorUnit:!0}),Ext.chart.TimeAxis=Ext.extend(Ext.chart.Axis,{type:"time",minimum:null,maximum:null,majorUnit:NaN,majorTimeUnit:null,minorUnit:NaN,minorTimeUnit:null,snapToUnits:!0,stackingEnabled:!1,calculateByLabelSize:!0}),Ext.chart.CategoryAxis=Ext.extend(Ext.chart.Axis,{type:"category",categoryNames:null,calculateCategoryCount:!1}),Ext.chart.Series=function(t){Ext.apply(this,t)},Ext.chart.Series.prototype={type:null,displayName:null},Ext.chart.CartesianSeries=Ext.extend(Ext.chart.Series,{xField:null,yField:null,showInLegend:!0,axis:"primary"}),Ext.chart.ColumnSeries=Ext.extend(Ext.chart.CartesianSeries,{type:"column"}),Ext.chart.LineSeries=Ext.extend(Ext.chart.CartesianSeries,{type:"line"}),Ext.chart.BarSeries=Ext.extend(Ext.chart.CartesianSeries,{type:"bar"}),Ext.chart.PieSeries=Ext.extend(Ext.chart.Series,{type:"pie",dataField:null,categoryField:null}),Ext.menu.Menu=Ext.extend(Ext.Container,{minWidth:120,shadow:"sides",subMenuAlign:"tl-tr?",defaultAlign:"tl-bl?",allowOtherMenus:!1,ignoreParentClicks:!1,enableScrolling:!0,maxHeight:null,scrollIncrement:24,showSeparator:!0,defaultOffsets:[0,0],plain:!1,floating:!0,zIndex:15e3,hidden:!0,layout:"menu",hideMode:"offsets",scrollerHeight:8,autoLayout:!0,defaultType:"menuitem",bufferResize:!1,initComponent:function(){var t;Ext.isArray(this.initialConfig)&&Ext.apply(this,{items:this.initialConfig}),this.addEvents("click","mouseover","mouseout","itemclick"),Ext.menu.MenuMgr.register(this),this.floating?Ext.EventManager.onWindowResize(this.hide,this):(!1!==this.initialConfig.hidden&&(this.hidden=!1),this.internalDefaults={hideOnClick:!1}),Ext.menu.Menu.superclass.initComponent.call(this),this.autoLayout&&(t=this.doLayout.createDelegate(this,[]),this.on({add:t,remove:t}))},getLayoutTarget:function(){return this.ul},onRender:function(t,e){t=t||Ext.getBody();var i={id:this.getId(),cls:"x-menu "+(this.floating?"x-menu-floating x-layer ":"")+(this.cls||"")+(this.plain?" x-menu-plain":"")+(this.showSeparator?"":" x-menu-nosep"),style:this.style,cn:[{tag:"a",cls:"x-menu-focus",href:"#",onclick:"return false;",tabIndex:"-1"},{tag:"ul",cls:"x-menu-list"}]};this.floating?this.el=new Ext.Layer({shadow:this.shadow,dh:i,constrain:!1,parentEl:t,zindex:this.zIndex}):this.el=t.createChild(i),Ext.menu.Menu.superclass.onRender.call(this,t,e),this.keyNav||(this.keyNav=new Ext.menu.MenuNav(this)),this.focusEl=this.el.child("a.x-menu-focus"),this.ul=this.el.child("ul.x-menu-list"),this.mon(this.ul,{scope:this,click:this.onClick,mouseover:this.onMouseOver,mouseout:this.onMouseOut}),this.enableScrolling&&this.mon(this.el,{scope:this,delegate:".x-menu-scroller",click:this.onScroll,mouseover:this.deactivateActive})},findTargetItem:function(t){t=t.getTarget(".x-menu-list-item",this.ul,!0);if(t&&t.menuItemId)return this.items.get(t.menuItemId)},onClick:function(t){var e=this.findTargetItem(t);e&&(e.isFormField?this.setActiveItem(e):e instanceof Ext.menu.BaseItem&&(e.menu&&this.ignoreParentClicks?(e.expandMenu(),t.preventDefault()):e.onClick&&(e.onClick(t),this.fireEvent("click",this,e,t))))},setActiveItem:function(t,e){t!=this.activeItem?(this.deactivateActive(),(this.activeItem=t).isFormField?t.focus():t.activate(e)):e&&t.expandMenu()},deactivateActive:function(){var t=this.activeItem;t&&(t.isFormField?t.collapse&&t.collapse():t.deactivate(),delete this.activeItem)},tryActivate:function(t,e){for(var i=this.items,s=t,n=i.length;0<=s&&s<n;s+=e){var r=i.get(s);if(r.isVisible()&&!r.disabled&&(r.canActivate||r.isFormField))return this.setActiveItem(r,!1),r}return!1},onMouseOver:function(t){var e=this.findTargetItem(t);e&&e.canActivate&&!e.disabled&&this.setActiveItem(e,!0),this.over=!0,this.fireEvent("mouseover",this,t,e)},onMouseOut:function(t){var e=this.findTargetItem(t);e&&e==this.activeItem&&e.shouldDeactivate&&e.shouldDeactivate(t)&&(this.activeItem.deactivate(),delete this.activeItem),this.over=!1,this.fireEvent("mouseout",this,t,e)},onScroll:function(t,e){t&&t.stopEvent();var i=this.ul.dom,t=Ext.fly(e).is(".x-menu-scroller-top");i.scrollTop+=this.scrollIncrement*(t?-1:1),(t?i.scrollTop<=0:i.scrollTop+this.activeMax>=i.scrollHeight)&&this.onScrollerOut(null,e)},onScrollerIn:function(t,e){var i=this.ul.dom;(Ext.fly(e).is(".x-menu-scroller-top")?0<i.scrollTop:i.scrollTop+this.activeMax<i.scrollHeight)&&Ext.fly(e).addClass(["x-menu-item-active","x-menu-scroller-active"])},onScrollerOut:function(t,e){Ext.fly(e).removeClass(["x-menu-item-active","x-menu-scroller-active"])},show:function(t,e,i){this.floating?(this.parentMenu=i,this.el||(this.render(),this.doLayout(!1,!0)),this.showAt(this.el.getAlignToXY(t,e||this.defaultAlign,this.defaultOffsets),i)):Ext.menu.Menu.superclass.show.call(this)},showAt:function(t,e){!1!==this.fireEvent("beforeshow",this)&&(this.parentMenu=e,this.el||this.render(),t=this.enableScrolling?(this.el.setXY(t),t[1]=this.constrainScroll(t[1]),[this.el.adjustForConstraints(t)[0],t[1]]):this.el.adjustForConstraints(t),this.el.setXY(t),this.el.show(),Ext.menu.Menu.superclass.onShow.call(this),Ext.isIE9m&&(this.fireEvent("autosize",this),Ext.isIE8||this.el.repaint()),this.hidden=!1,this.focus(),this.fireEvent("show",this))},constrainScroll:function(t){var e,i,s,n=this.ul.setHeight("auto").getHeight(),r=t;return this.floating?(i=(e=Ext.fly(this.el.dom.parentNode)).getScroll().top,s=e.getViewSize().height,e=t-i,i=this.maxHeight||s-e,s<n?(i=s,r=t-e):i<n&&(r=t-(n-i),i=n)):i=this.getHeight(),(i=this.maxHeight?Math.min(this.maxHeight,i):i)<n&&0<i?(this.activeMax=i-2*this.scrollerHeight-this.el.getFrameWidth("tb")-Ext.num(this.el.shadowOffset,0),this.ul.setHeight(this.activeMax),this.createScrollers(),this.el.select(".x-menu-scroller").setDisplayed("")):(this.ul.setHeight(n),this.el.select(".x-menu-scroller").setDisplayed("none")),this.ul.dom.scrollTop=0,r},createScrollers:function(){this.scroller||(this.scroller={pos:0,top:this.el.insertFirst({tag:"div",cls:"x-menu-scroller x-menu-scroller-top",html:"&#160;"}),bottom:this.el.createChild({tag:"div",cls:"x-menu-scroller x-menu-scroller-bottom",html:"&#160;"})},this.scroller.top.hover(this.onScrollerIn,this.onScrollerOut,this),this.scroller.topRepeater=new Ext.util.ClickRepeater(this.scroller.top,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.top],!1)}}),this.scroller.bottom.hover(this.onScrollerIn,this.onScrollerOut,this),this.scroller.bottomRepeater=new Ext.util.ClickRepeater(this.scroller.bottom,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.bottom],!1)}}))},onLayout:function(){this.isVisible()&&(this.enableScrolling&&this.constrainScroll(this.el.getTop()),this.floating&&this.el.sync())},focus:function(){this.hidden||this.doFocus.defer(50,this)},doFocus:function(){this.hidden||this.focusEl.focus()},hide:function(t){this.isDestroyed||(this.deepHide=t,Ext.menu.Menu.superclass.hide.call(this),delete this.deepHide)},onHide:function(){Ext.menu.Menu.superclass.onHide.call(this),this.deactivateActive(),this.el&&this.floating&&this.el.hide();var t=this.parentMenu;!0===this.deepHide&&t&&(t.floating?t.hide(!0):t.deactivateActive())},lookupComponent:function(t){return Ext.isString(t)?(t="separator"==t||"-"==t?new Ext.menu.Separator:new Ext.menu.TextItem(t),this.applyDefaults(t)):Ext.isObject(t)?t=this.getMenuItem(t):(t.tagName||t.el)&&(t=new Ext.BoxComponent({el:t})),t},applyDefaults:function(t){var e;return Ext.isString(t)||(t=Ext.menu.Menu.superclass.applyDefaults.call(this,t),(e=this.internalDefaults)&&(t.events?(Ext.applyIf(t.initialConfig,e),Ext.apply(t,e)):Ext.applyIf(t,e))),t},getMenuItem:function(t){return t.ownerCt=this,t.isXType?t:!t.xtype&&Ext.isBoolean(t.checked)?new Ext.menu.CheckItem(t):Ext.create(t,this.defaultType)},addSeparator:function(){return this.add(new Ext.menu.Separator)},addElement:function(t){return this.add(new Ext.menu.BaseItem({el:t}))},addItem:function(t){return this.add(t)},addMenuItem:function(t){return this.add(this.getMenuItem(t))},addText:function(t){return this.add(new Ext.menu.TextItem(t))},onDestroy:function(){Ext.EventManager.removeResizeListener(this.hide,this);var t=this.parentMenu;t&&t.activeChild==this&&delete t.activeChild,delete this.parentMenu,Ext.menu.Menu.superclass.onDestroy.call(this),Ext.menu.MenuMgr.unregister(this),this.keyNav&&this.keyNav.disable();t=this.scroller;t&&Ext.destroy(t.topRepeater,t.bottomRepeater,t.top,t.bottom),Ext.destroy(this.el,this.focusEl,this.ul)}}),Ext.reg("menu",Ext.menu.Menu),Ext.menu.MenuNav=Ext.extend(Ext.KeyNav,function(){function i(t,e){e.tryActivate(e.items.indexOf(e.activeItem)-1,-1)||e.tryActivate(e.items.length-1,-1)}function s(t,e){e.tryActivate(e.items.indexOf(e.activeItem)+1,1)||e.tryActivate(0,1)}return{constructor:function(t){Ext.menu.MenuNav.superclass.constructor.call(this,t.el),this.scope=this.menu=t},doRelay:function(t,e){var i=t.getKey();return(!this.menu.activeItem||!this.menu.activeItem.isFormField||i==t.TAB)&&(!this.menu.activeItem&&t.isNavKeyPress()&&i!=t.SPACE&&i!=t.RETURN?(this.menu.tryActivate(0,1),!1):e.call(this.scope||this,t,this.menu))},tab:function(t,e){t.stopEvent(),(t.shiftKey?i:s)(0,e)},up:i,down:s,right:function(t,e){e.activeItem&&e.activeItem.expandMenu(!0)},left:function(t,e){e.hide(),e.parentMenu&&e.parentMenu.activeItem&&e.parentMenu.activeItem.activate()},enter:function(t,e){if(e.activeItem)return t.stopPropagation(),e.activeItem.onClick(t),e.fireEvent("click",this,e.activeItem),!0}}}()),Ext.menu.MenuMgr=function(){var e,i,s,o={},n=!1,r=new Date;function a(){return!!(i&&0<i.length)&&(i.clone().each(function(t){t.hide()}),!0)}function l(t){i.remove(t),i.length<1&&(s.disable(),Ext.getDoc().un("mousedown",u),n=!1)}function d(t){var e=i.last();r=new Date,i.add(t),n||(s.enable(),Ext.getDoc().on("mousedown",u),n=!0),t.parentMenu?(t.getEl().setZIndex(parseInt(t.parentMenu.getEl().getStyle("z-index"),10)+3),t.parentMenu.activeChild=t):e&&!e.isDestroyed&&e.isVisible()&&t.getEl().setZIndex(parseInt(e.getEl().getStyle("z-index"),10)+3)}function h(t){t.activeChild&&t.activeChild.hide(),t.autoHideTimer&&(clearTimeout(t.autoHideTimer),delete t.autoHideTimer)}function c(t){var e=t.parentMenu;e||t.allowOtherMenus?e&&e.activeChild&&e.activeChild.hide():a()}function u(t){50<r.getElapsed()&&0<i.length&&!t.getTarget(".x-menu")&&a()}return{hideAll:a,register:function(t){e||(e={},i=new Ext.util.MixedCollection,(s=Ext.getDoc().addKeyListener(27,a)).disable()),(e[t.id]=t).on({beforehide:h,hide:l,beforeshow:c,show:d})},get:function(t){return"string"==typeof t?e?e[t]:null:t.events?t:"number"==typeof t.length?new Ext.menu.Menu({items:t}):Ext.create(t,"menu")},unregister:function(t){delete e[t.id],t.un("beforehide",h),t.un("hide",l),t.un("beforeshow",c),t.un("show",d)},registerCheckable:function(t){var e=t.group;e&&(o[e]||(o[e]=[]),o[e].push(t))},unregisterCheckable:function(t){var e=t.group;e&&o[e].remove(t)},onCheckChange:function(t,e){if(t.group&&e)for(var i,s=o[t.group],n=0,r=s.length;n<r;n++)(i=s[n])!=t&&i.setChecked(!1)},getCheckedItem:function(t){var e=o[t];if(e)for(var i=0,s=e.length;i<s;i++)if(e[i].checked)return e[i];return null},setCheckedItem:function(t,e){var i=o[t];if(i)for(var s=0,n=i.length;s<n;s++)i[s].id==e&&i[s].setChecked(!0);return null}}}(),Ext.menu.BaseItem=Ext.extend(Ext.Component,{canActivate:!1,activeClass:"x-menu-item-active",hideOnClick:!0,clickHideDelay:1,ctype:"Ext.menu.BaseItem",actionMode:"container",initComponent:function(){Ext.menu.BaseItem.superclass.initComponent.call(this),this.addEvents("click","activate","deactivate"),this.handler&&this.on("click",this.handler,this.scope)},onRender:function(t,e){Ext.menu.BaseItem.superclass.onRender.apply(this,arguments),this.ownerCt&&this.ownerCt instanceof Ext.menu.Menu?this.parentMenu=this.ownerCt:(this.container.addClass("x-menu-list-item"),this.mon(this.el,{scope:this,click:this.onClick,mouseenter:this.activate,mouseleave:this.deactivate}))},setHandler:function(t,e){this.handler&&this.un("click",this.handler,this.scope),this.on("click",this.handler=t,this.scope=e)},onClick:function(t){!this.disabled&&!1!==this.fireEvent("click",this,t)&&this.parentMenu&&!1!==this.parentMenu.fireEvent("itemclick",this,t)?this.handleClick(t):t.stopEvent()},activate:function(){if(this.disabled)return!1;var t=this.container;return t.addClass(this.activeClass),this.region=t.getRegion().adjust(2,2,-2,-2),this.fireEvent("activate",this),!0},deactivate:function(){this.container.removeClass(this.activeClass),this.fireEvent("deactivate",this)},shouldDeactivate:function(t){return!this.region||!this.region.contains(t.getPoint())},handleClick:function(t){var e=this.parentMenu;this.hideOnClick&&(e.floating?this.clickHideDelayTimer=e.hide.defer(this.clickHideDelay,e,[!0]):e.deactivateActive())},beforeDestroy:function(){clearTimeout(this.clickHideDelayTimer),Ext.menu.BaseItem.superclass.beforeDestroy.call(this)},expandMenu:Ext.emptyFn,hideMenu:Ext.emptyFn}),Ext.reg("menubaseitem",Ext.menu.BaseItem),Ext.menu.TextItem=Ext.extend(Ext.menu.BaseItem,{hideOnClick:!1,itemCls:"x-menu-text",constructor:function(t){"string"==typeof t&&(t={text:t}),Ext.menu.TextItem.superclass.constructor.call(this,t)},onRender:function(){var t=document.createElement("span");t.className=this.itemCls,t.innerHTML=this.text,this.el=t,Ext.menu.TextItem.superclass.onRender.apply(this,arguments)}}),Ext.reg("menutextitem",Ext.menu.TextItem),Ext.menu.Separator=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-sep",hideOnClick:!1,activeClass:"",onRender:function(t){var e=document.createElement("span");e.className=this.itemCls,e.innerHTML="&#160;",this.el=e,t.addClass("x-menu-sep-li"),Ext.menu.Separator.superclass.onRender.apply(this,arguments)}}),Ext.reg("menuseparator",Ext.menu.Separator),Ext.menu.Item=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-item",canActivate:!0,showDelay:200,altText:"",hideDelay:200,ctype:"Ext.menu.Item",initComponent:function(){Ext.menu.Item.superclass.initComponent.call(this),this.menu&&(Ext.isArray(this.menu)&&(this.menu={items:this.menu}),Ext.isObject(this.menu)&&(this.menu.ownerCt=this),this.menu=Ext.menu.MenuMgr.get(this.menu),this.menu.ownerCt=void 0)},onRender:function(t,e){this.itemTpl||(this.itemTpl=Ext.menu.Item.prototype.itemTpl=new Ext.XTemplate('<a id="{id}" class="{cls} x-unselectable" hidefocus="true" unselectable="on" href="{href}"','<tpl if="hrefTarget">',' target="{hrefTarget}"',"</tpl>",">",'<img alt="{altText}" src="{icon}" class="x-menu-item-icon {iconCls}"/>','<span class="x-menu-item-text">{text}</span>',"</a>"));var i=this.getTemplateArgs();this.el=e?this.itemTpl.insertBefore(e,i,!0):this.itemTpl.append(t,i,!0),this.iconEl=this.el.child("img.x-menu-item-icon"),this.textEl=this.el.child(".x-menu-item-text"),this.href||this.mon(this.el,"click",Ext.emptyFn,null,{preventDefault:!0}),Ext.menu.Item.superclass.onRender.call(this,t,e)},getTemplateArgs:function(){return{id:this.id,cls:this.itemCls+(this.menu?" x-menu-item-arrow":"")+(this.cls?" "+this.cls:""),href:this.href||"#",hrefTarget:this.hrefTarget,icon:this.icon||Ext.BLANK_IMAGE_URL,iconCls:this.iconCls||"",text:this.itemText||this.text||"&#160;",altText:this.altText||""}},setText:function(t){this.text=t||"&#160;",this.rendered&&(this.textEl.update(this.text),this.parentMenu.layout.doAutoSize())},setIconClass:function(t){var e=this.iconCls;this.iconCls=t,this.rendered&&this.iconEl.replaceClass(e,this.iconCls)},beforeDestroy:function(){clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.menu&&(delete this.menu.ownerCt,this.menu.destroy()),Ext.menu.Item.superclass.beforeDestroy.call(this)},handleClick:function(t){this.href||t.stopEvent(),Ext.menu.Item.superclass.handleClick.apply(this,arguments)},activate:function(t){return Ext.menu.Item.superclass.activate.apply(this,arguments)&&(this.focus(),t&&this.expandMenu()),!0},shouldDeactivate:function(t){return!!Ext.menu.Item.superclass.shouldDeactivate.call(this,t)&&(!this.menu||!this.menu.isVisible()||!this.menu.getEl().getRegion().contains(t.getPoint()))},deactivate:function(){Ext.menu.Item.superclass.deactivate.apply(this,arguments),this.hideMenu()},expandMenu:function(t){!this.disabled&&this.menu&&(clearTimeout(this.hideTimer),delete this.hideTimer,this.menu.isVisible()||this.showTimer?this.menu.isVisible()&&t&&this.menu.tryActivate(0,1):this.showTimer=this.deferExpand.defer(this.showDelay,this,[t]))},deferExpand:function(t){delete this.showTimer,this.menu.show(this.container,this.parentMenu.subMenuAlign||"tl-tr?",this.parentMenu),t&&this.menu.tryActivate(0,1)},hideMenu:function(){clearTimeout(this.showTimer),delete this.showTimer,!this.hideTimer&&this.menu&&this.menu.isVisible()&&(this.hideTimer=this.deferHide.defer(this.hideDelay,this))},deferHide:function(){delete this.hideTimer,this.menu.over?this.parentMenu.setActiveItem(this,!1):this.menu.hide()}}),Ext.reg("menuitem",Ext.menu.Item),Ext.menu.CheckItem=Ext.extend(Ext.menu.Item,{itemCls:"x-menu-item x-menu-check-item",groupClass:"x-menu-group-item",checked:!1,ctype:"Ext.menu.CheckItem",initComponent:function(){Ext.menu.CheckItem.superclass.initComponent.call(this),this.addEvents("beforecheckchange","checkchange"),this.checkHandler&&this.on("checkchange",this.checkHandler,this.scope),Ext.menu.MenuMgr.registerCheckable(this)},onRender:function(t){Ext.menu.CheckItem.superclass.onRender.apply(this,arguments),this.group&&this.el.addClass(this.groupClass),this.checked&&(this.checked=!1,this.setChecked(!0,!0))},destroy:function(){Ext.menu.MenuMgr.unregisterCheckable(this),Ext.menu.CheckItem.superclass.destroy.apply(this,arguments)},setChecked:function(t,e){e=!0===e;this.checked==t||!e&&!1===this.fireEvent("beforecheckchange",this,t)||(Ext.menu.MenuMgr.onCheckChange(this,t),this.container&&this.container[t?"addClass":"removeClass"]("x-menu-item-checked"),this.checked=t,e||this.fireEvent("checkchange",this,t))},handleClick:function(t){this.disabled||this.checked&&this.group||this.setChecked(!this.checked),Ext.menu.CheckItem.superclass.handleClick.apply(this,arguments)}}),Ext.reg("menucheckitem",Ext.menu.CheckItem),Ext.menu.DateMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:!1,hideOnClick:!0,pickerId:null,cls:"x-date-menu",initComponent:function(){this.on("beforeshow",this.onBeforeShow,this),(this.strict=Ext.isIE7&&Ext.isStrict)&&this.on("show",this.onShow,this,{single:!0,delay:20}),Ext.apply(this,{plain:!0,showSeparator:!1,items:this.picker=new Ext.DatePicker(Ext.applyIf({internalRender:this.strict||!Ext.isIE9m,ctCls:"x-menu-date-item",id:this.pickerId},this.initialConfig))}),this.picker.purgeListeners(),Ext.menu.DateMenu.superclass.initComponent.call(this),this.relayEvents(this.picker,["select"]),this.on("show",this.picker.focus,this.picker),this.on("select",this.menuHide,this),this.handler&&this.on("select",this.handler,this.scope||this)},menuHide:function(){this.hideOnClick&&this.hide(!0)},onBeforeShow:function(){this.picker&&this.picker.hideMonthPicker(!0)},onShow:function(){var t=this.picker.getEl();t.setWidth(t.getWidth())}}),Ext.reg("datemenu",Ext.menu.DateMenu),Ext.menu.ColorMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:!1,hideOnClick:!0,cls:"x-color-menu",paletteId:null,initComponent:function(){Ext.apply(this,{plain:!0,showSeparator:!1,items:this.palette=new Ext.ColorPalette(Ext.applyIf({id:this.paletteId},this.initialConfig))}),this.palette.purgeListeners(),Ext.menu.ColorMenu.superclass.initComponent.call(this),this.relayEvents(this.palette,["select"]),this.on("select",this.menuHide,this),this.handler&&this.on("select",this.handler,this.scope||this)},menuHide:function(){this.hideOnClick&&this.hide(!0)}}),Ext.reg("colormenu",Ext.menu.ColorMenu),Ext.form.Field=Ext.extend(Ext.BoxComponent,{invalidClass:"x-form-invalid",invalidText:"The value in this field is invalid",focusClass:"x-form-focus",validationEvent:"keyup",validateOnBlur:!0,validationDelay:250,defaultAutoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off"},fieldClass:"x-form-field",msgTarget:"qtip",msgFx:"normal",readOnly:!1,disabled:!1,submitValue:!0,isFormField:!0,msgDisplay:"",hasFocus:!1,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this),this.addEvents("focus","blur","specialkey","change","invalid","valid")},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:this.name||this.id||""},onRender:function(t,e){var i;this.el||((i=this.getAutoCreate()).name||(i.name=this.name||this.id),this.inputType&&(i.type=this.inputType),this.autoEl=i),Ext.form.Field.superclass.onRender.call(this,t,e),!1===this.submitValue&&this.el.dom.removeAttribute("name");e=this.el.dom.type;e&&this.el.addClass("x-form-"+(e="password"==e?"text":e)),this.readOnly&&this.setReadOnly(!0),void 0!==this.tabIndex&&this.el.dom.setAttribute("tabIndex",this.tabIndex),this.el.addClass([this.fieldClass,this.cls])},getItemCt:function(){return this.itemCt},initValue:function(){void 0!==this.value?this.setValue(this.value):Ext.isEmpty(this.el.dom.value)||this.el.dom.value==this.emptyText||this.setValue(this.el.dom.value),this.originalValue=this.getValue()},isDirty:function(){return!(this.disabled||!this.rendered)&&String(this.getValue())!==String(this.originalValue)},setReadOnly:function(t){this.rendered&&(this.el.dom.readOnly=t),this.readOnly=t},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this),this.initEvents(),this.initValue()},fireKey:function(t){t.isSpecialKey()&&this.fireEvent("specialkey",this,t)},reset:function(){this.setValue(this.originalValue),this.clearInvalid()},initEvents:function(){this.mon(this.el,Ext.EventManager.getKeyEvent(),this.fireKey,this),this.mon(this.el,"focus",this.onFocus,this),this.mon(this.el,"blur",this.onBlur,this,this.inEditor?{buffer:10}:null)},preFocus:Ext.emptyFn,onFocus:function(){this.preFocus(),this.focusClass&&this.el.addClass(this.focusClass),this.hasFocus||(this.hasFocus=!0,this.startValue=this.getValue(),this.fireEvent("focus",this))},beforeBlur:Ext.emptyFn,onBlur:function(){this.beforeBlur(),this.focusClass&&this.el.removeClass(this.focusClass),(this.hasFocus=!1)===this.validationEvent||!this.validateOnBlur&&"blur"!=this.validationEvent||this.validate();var t=this.getValue();String(t)!==String(this.startValue)&&this.fireEvent("change",this,t,this.startValue),this.fireEvent("blur",this),this.postBlur()},postBlur:Ext.emptyFn,isValid:function(t){if(this.disabled)return!0;var e=this.preventMark;this.preventMark=!0===t;t=this.validateValue(this.processValue(this.getRawValue()),t);return this.preventMark=e,t},validate:function(){return!(!this.disabled&&!this.validateValue(this.processValue(this.getRawValue())))&&(this.clearInvalid(),!0)},processValue:function(t){return t},validateValue:function(t){t=this.getErrors(t)[0];return null==t||(this.markInvalid(t),!1)},getErrors:function(){return[]},getActiveError:function(){return this.activeError||""},markInvalid:function(t){var e;this.rendered&&!this.preventMark&&(t=t||this.invalidText,(e=this.getMessageHandler())?e.mark(this,t):this.msgTarget&&(this.el.addClass(this.invalidClass),(e=Ext.getDom(this.msgTarget))&&(e.innerHTML=t,e.style.display=this.msgDisplay))),this.setActiveError(t)},clearInvalid:function(){var t;this.rendered&&!this.preventMark&&(this.el.removeClass(this.invalidClass),(t=this.getMessageHandler())?t.clear(this):this.msgTarget&&(this.el.removeClass(this.invalidClass),(t=Ext.getDom(this.msgTarget))&&(t.innerHTML="",t.style.display="none"))),this.unsetActiveError()},setActiveError:function(t,e){this.activeError=t,!0!==e&&this.fireEvent("invalid",this,t)},unsetActiveError:function(t){delete this.activeError,!0!==t&&this.fireEvent("valid",this)},getMessageHandler:function(){return Ext.form.MessageTargets[this.msgTarget]},getErrorCt:function(){return this.el.findParent(".x-form-element",5,!0)||this.el.findParent(".x-form-field-wrap",5,!0)},alignErrorEl:function(){this.errorEl.setWidth(this.getErrorCt().getWidth(!0)-20)},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,"tl-tr",[2,0])},getRawValue:function(){var t=this.rendered?this.el.getValue():Ext.value(this.value,"");return t=t===this.emptyText?"":t},getValue:function(){if(!this.rendered)return this.value;var t=this.el.getValue();return t=t===this.emptyText||void 0===t?"":t},setRawValue:function(t){return this.rendered?this.el.dom.value=Ext.isEmpty(t)?"":t:""},setValue:function(t){return this.value=t,this.rendered&&(this.el.dom.value=Ext.isEmpty(t)?"":t,this.validate()),this},append:function(t){this.setValue([this.getValue(),t].join(""))}}),Ext.form.MessageTargets={qtip:{mark:function(t,e){t.el.addClass(t.invalidClass),t.el.dom.qtip=e,t.el.dom.qclass="x-form-invalid-tip",Ext.QuickTips&&Ext.QuickTips.enable()},clear:function(t){t.el.removeClass(t.invalidClass),t.el.dom.qtip=""}},title:{mark:function(t,e){t.el.addClass(t.invalidClass),t.el.dom.title=e},clear:function(t){t.el.dom.title=""}},under:{mark:function(t,e){if(t.el.addClass(t.invalidClass),!t.errorEl){var i=t.getErrorCt();if(!i)return void(t.el.dom.title=e);t.errorEl=i.createChild({cls:"x-form-invalid-msg"}),t.on("resize",t.alignErrorEl,t),t.on("destroy",function(){Ext.destroy(this.errorEl)},t)}t.alignErrorEl(),t.errorEl.update(e),Ext.form.Field.msgFx[t.msgFx].show(t.errorEl,t)},clear:function(t){t.el.removeClass(t.invalidClass),t.errorEl?Ext.form.Field.msgFx[t.msgFx].hide(t.errorEl,t):t.el.dom.title=""}},side:{mark:function(t,e){if(t.el.addClass(t.invalidClass),!t.errorIcon){var i=t.getErrorCt();if(!i)return void(t.el.dom.title=e);t.errorIcon=i.createChild({cls:"x-form-invalid-icon"}),t.ownerCt&&(t.ownerCt.on("afterlayout",t.alignErrorIcon,t),t.ownerCt.on("expand",t.alignErrorIcon,t)),t.on("resize",t.alignErrorIcon,t),t.on("destroy",function(){Ext.destroy(this.errorIcon)},t)}t.alignErrorIcon(),t.errorIcon.dom.qtip=e,t.errorIcon.dom.qclass="x-form-invalid-tip",t.errorIcon.show()},clear:function(t){t.el.removeClass(t.invalidClass),t.errorIcon?(t.errorIcon.dom.qtip="",t.errorIcon.hide()):t.el.dom.title=""}}},Ext.form.Field.msgFx={normal:{show:function(t,e){t.setDisplayed("block")},hide:function(t,e){t.setDisplayed(!1).update("")}},slide:{show:function(t,e){t.slideIn("t",{stopFx:!0})},hide:function(t,e){t.slideOut("t",{stopFx:!0,useDisplay:!0})}},slideRight:{show:function(t,e){t.fixDisplay(),t.alignTo(e.el,"tl-tr"),t.slideIn("l",{stopFx:!0})},hide:function(t,e){t.slideOut("l",{stopFx:!0,useDisplay:!0})}}},Ext.reg("field",Ext.form.Field),Ext.form.TextField=Ext.extend(Ext.form.Field,{grow:!1,growMin:30,growMax:800,vtype:null,maskRe:null,disableKeyFilter:!1,allowBlank:!0,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",selectOnFocus:!1,blankText:"This field is required",validator:null,regex:null,regexText:"",emptyText:null,emptyClass:"x-form-empty-field",initComponent:function(){Ext.form.TextField.superclass.initComponent.call(this),this.addEvents("autosize","keydown","keyup","keypress")},initEvents:function(){Ext.form.TextField.superclass.initEvents.call(this),"keyup"==this.validationEvent?(this.validationTask=new Ext.util.DelayedTask(this.validate,this),this.mon(this.el,"keyup",this.filterValidation,this)):!1!==this.validationEvent&&"blur"!=this.validationEvent&&this.mon(this.el,this.validationEvent,this.validate,this,{buffer:this.validationDelay}),(this.selectOnFocus||this.emptyText)&&(this.mon(this.el,"mousedown",this.onMouseDown,this),this.emptyText&&this.applyEmptyText()),(this.maskRe||this.vtype&&!0!==this.disableKeyFilter&&(this.maskRe=Ext.form.VTypes[this.vtype+"Mask"]))&&this.mon(this.el,"keypress",this.filterKeys,this),this.grow&&(this.mon(this.el,"keyup",this.onKeyUpBuffered,this,{buffer:50}),this.mon(this.el,"click",this.autoSize,this)),this.enableKeyEvents&&this.mon(this.el,{scope:this,keyup:this.onKeyUp,keydown:this.onKeyDown,keypress:this.onKeyPress})},onMouseDown:function(t){this.hasFocus||this.mon(this.el,"mouseup",Ext.emptyFn,this,{single:!0,preventDefault:!0})},processValue:function(t){if(this.stripCharsRe){var e=t.replace(this.stripCharsRe,"");if(e!==t)return this.setRawValue(e),e}return t},filterValidation:function(t){t.isNavKeyPress()||this.validationTask.delay(this.validationDelay)},onDisable:function(){Ext.form.TextField.superclass.onDisable.call(this),Ext.isIE&&(this.el.dom.unselectable="on")},onEnable:function(){Ext.form.TextField.superclass.onEnable.call(this),Ext.isIE&&(this.el.dom.unselectable="")},onKeyUpBuffered:function(t){this.doAutoSize(t)&&this.autoSize()},doAutoSize:function(t){return!t.isNavKeyPress()},onKeyUp:function(t){this.fireEvent("keyup",this,t)},onKeyDown:function(t){this.fireEvent("keydown",this,t)},onKeyPress:function(t){this.fireEvent("keypress",this,t)},reset:function(){Ext.form.TextField.superclass.reset.call(this),this.applyEmptyText()},applyEmptyText:function(){this.rendered&&this.emptyText&&this.getRawValue().length<1&&!this.hasFocus&&(this.setRawValue(this.emptyText),this.el.addClass(this.emptyClass))},preFocus:function(){var t,e=this.el;this.emptyText&&(e.dom.value==this.emptyText&&(this.setRawValue(""),t=!0),e.removeClass(this.emptyClass)),(this.selectOnFocus||t)&&e.dom.select()},postBlur:function(){this.applyEmptyText()},filterKeys:function(t){var e;t.ctrlKey||(e=t.getKey(),Ext.isGecko&&(t.isNavKeyPress()||e==t.BACKSPACE||e==t.DELETE&&-1==t.button)||(e=String.fromCharCode(t.getCharCode()),!Ext.isGecko&&t.isSpecialKey()&&!e||this.maskRe.test(e)||t.stopEvent()))},setValue:function(t){return this.emptyText&&this.el&&!Ext.isEmpty(t)&&this.el.removeClass(this.emptyClass),Ext.form.TextField.superclass.setValue.apply(this,arguments),this.applyEmptyText(),this.autoSize(),this},getErrors:function(t){var e,i=Ext.form.TextField.superclass.getErrors.apply(this,arguments);if(t=Ext.isDefined(t)?t:this.processValue(this.getRawValue()),!Ext.isFunction(this.validator)||!0!==(e=this.validator(t))&&i.push(e),t.length<1||t===this.emptyText){if(this.allowBlank)return i;i.push(this.blankText)}return!this.allowBlank&&(t.length<1||t===this.emptyText)&&i.push(this.blankText),t.length<this.minLength&&i.push(String.format(this.minLengthText,this.minLength)),t.length>this.maxLength&&i.push(String.format(this.maxLengthText,this.maxLength)),this.vtype&&((e=Ext.form.VTypes)[this.vtype](t,this)||i.push(this.vtypeText||e[this.vtype+"Text"])),this.regex&&!this.regex.test(t)&&i.push(this.regexText),i},selectText:function(t,e){var i,s=this.getRawValue();0<s.length&&(t=void 0===t?0:t,e=void 0===e?s.length:e,(i=this.el.dom).setSelectionRange?i.setSelectionRange(t,e):i.createTextRange&&((i=i.createTextRange()).moveStart("character",t),i.moveEnd("character",e-s.length),i.select()),!Ext.isGecko&&!Ext.isOpera)||this.focus()},autoSize:function(){var t,e;this.grow&&this.rendered&&(this.metrics||(this.metrics=Ext.util.TextMetrics.createInstance(this.el)),e=this.el.dom.value,(t=document.createElement("div")).appendChild(document.createTextNode(e)),e=t.innerHTML,Ext.removeNode(t),t=null,e+="&#160;",e=Math.min(this.growMax,Math.max(this.metrics.getWidth(e)+10,this.growMin)),this.el.setWidth(e),this.fireEvent("autosize",this,e))},onDestroy:function(){this.validationTask&&(this.validationTask.cancel(),this.validationTask=null),Ext.form.TextField.superclass.onDestroy.call(this)}}),Ext.reg("textfield",Ext.form.TextField),Ext.form.TriggerField=Ext.extend(Ext.form.TextField,{defaultAutoCreate:{tag:"input",type:"text",size:"16",autocomplete:"off"},hideTrigger:!1,editable:!0,readOnly:!1,wrapFocusClass:"x-trigger-wrap-focus",autoSize:Ext.emptyFn,monitorTab:!0,deferHeight:!0,mimicing:!1,actionMode:"wrap",defaultTriggerWidth:17,onResize:function(t,e){Ext.form.TriggerField.superclass.onResize.call(this,t,e);e=this.getTriggerWidth();Ext.isNumber(t)&&this.el.setWidth(t-e),this.wrap.setWidth(this.el.getWidth()+e)},getTriggerWidth:function(){var t=this.trigger.getWidth();return t=!this.hideTrigger&&!this.readOnly&&0===t?this.defaultTriggerWidth:t},alignErrorIcon:function(){this.wrap&&this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])},onRender:function(t,e){this.doc=Ext.isIE?Ext.getBody():Ext.getDoc(),Ext.form.TriggerField.superclass.onRender.call(this,t,e),this.wrap=this.el.wrap({cls:"x-form-field-wrap x-form-field-trigger-wrap"}),this.trigger=this.wrap.createChild(this.triggerConfig||{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.triggerClass}),this.initTrigger(),this.width||this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth()),this.resizeEl=this.positionEl=this.wrap},getWidth:function(){return this.el.getWidth()+this.trigger.getWidth()},updateEditState:function(){this.rendered&&(this.readOnly?(this.el.dom.readOnly=!0,this.el.addClass("x-trigger-noedit"),this.mun(this.el,"click",this.onTriggerClick,this),this.trigger.setDisplayed(!1)):(this.editable?(this.el.dom.readOnly=!1,this.el.removeClass("x-trigger-noedit"),this.mun(this.el,"click",this.onTriggerClick,this)):(this.el.dom.readOnly=!0,this.el.addClass("x-trigger-noedit"),this.mon(this.el,"click",this.onTriggerClick,this)),this.trigger.setDisplayed(!this.hideTrigger)),this.onResize(this.width||this.wrap.getWidth()))},setHideTrigger:function(t){t!=this.hideTrigger&&(this.hideTrigger=t,this.updateEditState())},setEditable:function(t){t!=this.editable&&(this.editable=t,this.updateEditState())},setReadOnly:function(t){t!=this.readOnly&&(this.readOnly=t,this.updateEditState())},afterRender:function(){Ext.form.TriggerField.superclass.afterRender.call(this),this.updateEditState()},initTrigger:function(){this.mon(this.trigger,"click",this.onTriggerClick,this,{preventDefault:!0}),this.trigger.addClassOnOver("x-form-trigger-over"),this.trigger.addClassOnClick("x-form-trigger-click")},onDestroy:function(){Ext.destroy(this.trigger,this.wrap),this.mimicing&&this.doc.un("mousedown",this.mimicBlur,this),delete this.doc,Ext.form.TriggerField.superclass.onDestroy.call(this)},onFocus:function(){Ext.form.TriggerField.superclass.onFocus.call(this),this.mimicing||(this.wrap.addClass(this.wrapFocusClass),this.mimicing=!0,this.doc.on("mousedown",this.mimicBlur,this,{delay:10}),this.monitorTab&&this.on("specialkey",this.checkTab,this))},checkTab:function(t,e){e.getKey()==e.TAB&&this.triggerBlur()},onBlur:Ext.emptyFn,mimicBlur:function(t){this.isDestroyed||this.wrap.contains(t.target)||!this.validateBlur(t)||this.triggerBlur()},triggerBlur:function(){this.mimicing=!1,this.doc.un("mousedown",this.mimicBlur,this),this.monitorTab&&this.el&&this.un("specialkey",this.checkTab,this),Ext.form.TriggerField.superclass.onBlur.call(this),this.wrap&&this.wrap.removeClass(this.wrapFocusClass)},beforeBlur:Ext.emptyFn,validateBlur:function(t){return!0},onTriggerClick:Ext.emptyFn}),Ext.form.TwinTriggerField=Ext.extend(Ext.form.TriggerField,{initComponent:function(){Ext.form.TwinTriggerField.superclass.initComponent.call(this),this.triggerConfig={tag:"span",cls:"x-form-twin-triggers",cn:[{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.trigger1Class},{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.trigger2Class}]}},getTrigger:function(t){return this.triggers[t]},afterRender:function(){Ext.form.TwinTriggerField.superclass.afterRender.call(this);for(var t=this.triggers,e=0,i=t.length;e<i;++e)this["hideTrigger"+(e+1)]&&t[e].hide()},initTrigger:function(){var t=this.trigger.select(".x-form-trigger",!0),n=this;t.each(function(t,e,i){var s="Trigger"+(i+1);t.hide=function(){var t=n.wrap.getWidth();this.dom.style.display="none",n.el.setWidth(t-n.trigger.getWidth()),n["hidden"+s]=!0},t.show=function(){var t=n.wrap.getWidth();this.dom.style.display="",n.el.setWidth(t-n.trigger.getWidth()),n["hidden"+s]=!1},this.mon(t,"click",this["on"+s+"Click"],this,{preventDefault:!0}),t.addClassOnOver("x-form-trigger-over"),t.addClassOnClick("x-form-trigger-click")},this),this.triggers=t.elements},getTriggerWidth:function(){var i=0;return Ext.each(this.triggers,function(t,e){e="Trigger"+(e+1),t=t.getWidth();0!==t||this["hidden"+e]?i+=t:i+=this.defaultTriggerWidth},this),i},onDestroy:function(){Ext.destroy(this.triggers),Ext.form.TwinTriggerField.superclass.onDestroy.call(this)},onTrigger1Click:Ext.emptyFn,onTrigger2Click:Ext.emptyFn}),Ext.reg("trigger",Ext.form.TriggerField),Ext.reg("twintrigger",Ext.form.TwinTriggerField),Ext.form.TextArea=Ext.extend(Ext.form.TextField,{growMin:60,growMax:1e3,growAppend:"&#160;\n&#160;",enterIsSpecial:!1,preventScrollbars:!1,onRender:function(t,e){this.el||(this.defaultAutoCreate={tag:"textarea",style:"width:100px;height:60px;",autocomplete:"off"}),Ext.form.TextArea.superclass.onRender.call(this,t,e),this.grow&&(this.textSizeEl=Ext.DomHelper.append(document.body,{tag:"pre",cls:"x-form-grow-sizer"}),this.preventScrollbars&&this.el.setStyle("overflow","hidden"),this.el.setHeight(this.growMin))},onDestroy:function(){Ext.removeNode(this.textSizeEl),Ext.form.TextArea.superclass.onDestroy.call(this)},fireKey:function(t){t.isSpecialKey()&&(this.enterIsSpecial||t.getKey()!=t.ENTER||t.hasModifier())&&this.fireEvent("specialkey",this,t)},doAutoSize:function(t){return!t.isNavKeyPress()||t.getKey()==t.ENTER},filterValidation:function(t){t.isNavKeyPress()&&(this.enterIsSpecial||t.keyCode!=t.ENTER)||this.validationTask.delay(this.validationDelay)},autoSize:function(){var t,e;this.grow&&this.textSizeEl&&(e=this.el,t=Ext.util.Format.htmlEncode(e.dom.value),e=this.textSizeEl,Ext.fly(e).setWidth(this.el.getWidth()),t.length<1?t="&#160;&#160;":(t+=this.growAppend,Ext.isIE&&(t=t.replace(/\n/g,"&#160;<br />"))),e.innerHTML=t,(e=Math.min(this.growMax,Math.max(e.offsetHeight,this.growMin)))!=this.lastHeight&&(this.lastHeight=e,this.el.setHeight(e),this.fireEvent("autosize",this,e)))}}),Ext.reg("textarea",Ext.form.TextArea),Ext.form.NumberField=Ext.extend(Ext.form.TextField,{fieldClass:"x-form-field x-form-num-field",allowDecimals:!0,decimalSeparator:".",decimalPrecision:2,allowNegative:!0,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",baseChars:"0123456789",autoStripChars:!1,initEvents:function(){var t=this.baseChars+"";this.allowDecimals&&(t+=this.decimalSeparator),this.allowNegative&&(t+="-"),t=Ext.escapeRe(t),this.maskRe=new RegExp("["+t+"]"),this.autoStripChars&&(this.stripCharsRe=new RegExp("[^"+t+"]","gi")),Ext.form.NumberField.superclass.initEvents.call(this)},getErrors:function(t){var e=Ext.form.NumberField.superclass.getErrors.apply(this,arguments);if((t=Ext.isDefined(t)?t:this.processValue(this.getRawValue())).length<1)return e;t=String(t).replace(this.decimalSeparator,"."),isNaN(t)&&e.push(String.format(this.nanText,t));var i=this.parseValue(t);return i<this.minValue&&e.push(String.format(this.minText,this.minValue)),i>this.maxValue&&e.push(String.format(this.maxText,this.maxValue)),e},getValue:function(){return this.fixPrecision(this.parseValue(Ext.form.NumberField.superclass.getValue.call(this)))},setValue:function(t){return t=Ext.isNumber(t)?t:parseFloat(String(t).replace(this.decimalSeparator,".")),t=this.fixPrecision(t),t=isNaN(t)?"":String(t).replace(".",this.decimalSeparator),Ext.form.NumberField.superclass.setValue.call(this,t)},setMinValue:function(t){this.minValue=Ext.num(t,Number.NEGATIVE_INFINITY)},setMaxValue:function(t){this.maxValue=Ext.num(t,Number.MAX_VALUE)},parseValue:function(t){return t=parseFloat(String(t).replace(this.decimalSeparator,".")),isNaN(t)?"":t},fixPrecision:function(t){var e=isNaN(t);return this.allowDecimals&&-1!=this.decimalPrecision&&!e&&t?parseFloat(parseFloat(t).toFixed(this.decimalPrecision)):e?"":t},beforeBlur:function(){var t=this.parseValue(this.getRawValue());Ext.isEmpty(t)||this.setValue(t)}}),Ext.reg("numberfield",Ext.form.NumberField),Ext.form.DateField=Ext.extend(Ext.form.TriggerField,{format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerClass:"x-form-date-trigger",showToday:!0,startDay:0,defaultAutoCreate:{tag:"input",type:"text",size:"10",autocomplete:"off"},initTime:"12",initTimeFormat:"H",safeParse:function(t,e){if(Date.formatContainsHourInfo(e))return Date.parseDate(t,e);e=Date.parseDate(t+" "+this.initTime,e+" "+this.initTimeFormat);return e?e.clearTime():void 0},initComponent:function(){Ext.form.DateField.superclass.initComponent.call(this),this.addEvents("select"),Ext.isString(this.minValue)&&(this.minValue=this.parseDate(this.minValue)),Ext.isString(this.maxValue)&&(this.maxValue=this.parseDate(this.maxValue)),this.disabledDatesRE=null,this.initDisabledDays()},initEvents:function(){Ext.form.DateField.superclass.initEvents.call(this),this.keyNav=new Ext.KeyNav(this.el,{down:function(t){this.onTriggerClick()},scope:this,forceKeyDown:!0})},initDisabledDays:function(){var i,s,n;this.disabledDates&&(i=this.disabledDates,s=i.length-1,n="(?:",Ext.each(i,function(t,e){n+=Ext.isDate(t)?"^"+Ext.escapeRe(t.dateFormat(this.format))+"$":i[e],e!=s&&(n+="|")},this),this.disabledDatesRE=new RegExp(n+")"))},setDisabledDates:function(t){this.disabledDates=t,this.initDisabledDays(),this.menu&&this.menu.picker.setDisabledDates(this.disabledDatesRE)},setDisabledDays:function(t){this.disabledDays=t,this.menu&&this.menu.picker.setDisabledDays(t)},setMinValue:function(t){this.minValue=Ext.isString(t)?this.parseDate(t):t,this.menu&&this.menu.picker.setMinDate(this.minValue)},setMaxValue:function(t){this.maxValue=Ext.isString(t)?this.parseDate(t):t,this.menu&&this.menu.picker.setMaxDate(this.maxValue)},getErrors:function(t){var e=Ext.form.DateField.superclass.getErrors.apply(this,arguments);if((t=this.formatDate(t||this.processValue(this.getRawValue()))).length<1)return e;var i=t;if(!(t=this.parseDate(t)))return e.push(String.format(this.invalidText,i,this.format)),e;i=t.getTime();if(this.minValue&&i<this.minValue.clearTime().getTime()&&e.push(String.format(this.minText,this.formatDate(this.minValue))),this.maxValue&&i>this.maxValue.clearTime().getTime()&&e.push(String.format(this.maxText,this.formatDate(this.maxValue))),this.disabledDays)for(var s=t.getDay(),n=0;n<this.disabledDays.length;n++)if(s===this.disabledDays[n]){e.push(this.disabledDaysText);break}i=this.formatDate(t);return this.disabledDatesRE&&this.disabledDatesRE.test(i)&&e.push(String.format(this.disabledDatesText,i)),e},validateBlur:function(){return!this.menu||!this.menu.isVisible()},getValue:function(){return this.parseDate(Ext.form.DateField.superclass.getValue.call(this))||""},setValue:function(t){return Ext.form.DateField.superclass.setValue.call(this,this.formatDate(this.parseDate(t)))},parseDate:function(t){if(!t||Ext.isDate(t))return t;var e=this.safeParse(t,this.format),i=this.altFormats,s=this.altFormatsArray;if(!e&&i)for(var n=0,r=(s=s||i.split("|")).length;n<r&&!e;n++)e=this.safeParse(t,s[n]);return e},onDestroy:function(){Ext.destroy(this.menu,this.keyNav),Ext.form.DateField.superclass.onDestroy.call(this)},formatDate:function(t){return Ext.isDate(t)?t.dateFormat(this.format):t},onTriggerClick:function(){this.disabled||(null==this.menu&&(this.menu=new Ext.menu.DateMenu({hideOnClick:!1,focusOnSelect:!1})),this.onFocus(),Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.disabledDatesRE,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,showToday:this.showToday,startDay:this.startDay,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,this.formatDate(this.maxValue))}),this.menu.picker.setValue(this.getValue()||new Date),this.menu.show(this.el,"tl-bl?"),this.menuEvents("on"))},menuEvents:function(t){this.menu[t]("select",this.onSelect,this),this.menu[t]("hide",this.onMenuHide,this),this.menu[t]("show",this.onFocus,this)},onSelect:function(t,e){this.setValue(e),this.fireEvent("select",this,e),this.menu.hide()},onMenuHide:function(){this.focus(!1,60),this.menuEvents("un")},beforeBlur:function(){var t=this.parseDate(this.getRawValue());t&&this.setValue(t)}}),Ext.reg("datefield",Ext.form.DateField),Ext.form.DisplayField=Ext.extend(Ext.form.Field,{validationEvent:!1,validateOnBlur:!1,defaultAutoCreate:{tag:"div"},fieldClass:"x-form-display-field",htmlEncode:!1,initEvents:Ext.emptyFn,isValid:function(){return!0},validate:function(){return!0},getRawValue:function(){var t=this.rendered?this.el.dom.innerHTML:Ext.value(this.value,"");return t===this.emptyText&&(t=""),t=this.htmlEncode?Ext.util.Format.htmlDecode(t):t},getValue:function(){return this.getRawValue()},getName:function(){return this.name},setRawValue:function(t){return this.htmlEncode&&(t=Ext.util.Format.htmlEncode(t)),this.rendered?this.el.dom.innerHTML=Ext.isEmpty(t)?"":t:this.value=t},setValue:function(t){return this.setRawValue(t),this}}),Ext.reg("displayfield",Ext.form.DisplayField),Ext.form.ComboBox=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"24",autocomplete:"off"},listClass:"",selectedClass:"x-combo-selected",listEmptyText:"",triggerClass:"x-form-arrow-trigger",shadow:"sides",listAlign:"tl-bl?",maxHeight:300,minHeight:90,triggerAction:"query",minChars:4,autoSelect:!0,typeAhead:!1,queryDelay:500,pageSize:0,selectOnFocus:!1,queryParam:"query",loadingText:"Loading...",resizable:!1,handleHeight:8,allQuery:"",mode:"remote",minListWidth:70,forceSelection:!1,typeAheadDelay:250,lazyInit:!0,clearFilterOnReset:!0,submitValue:void 0,initComponent:function(){if(Ext.form.ComboBox.superclass.initComponent.call(this),this.addEvents("expand","collapse","beforeselect","select","beforequery"),this.transform){var t=Ext.getDom(this.transform);if(this.hiddenName||(this.hiddenName=t.name),!this.store){this.mode="local";for(var e=[],i=t.options,s=0,n=i.length;s<n;s++){var r=i[s],o=(r.hasAttribute?r.hasAttribute("value"):r.getAttributeNode("value").specified)?r.value:r.text;r.selected&&Ext.isEmpty(this.value,!0)&&(this.value=o),e.push([o,r.text])}this.store=new Ext.data.ArrayStore({idIndex:0,fields:["value","text"],data:e,autoDestroy:!0}),this.valueField="value",this.displayField="text"}t.name=Ext.id(),this.lazyRender||(this.target=!0,this.el=Ext.DomHelper.insertBefore(t,this.autoCreate||this.defaultAutoCreate),this.render(this.el.parentNode,t)),Ext.removeNode(t)}else this.store&&(this.store=Ext.StoreMgr.lookup(this.store),this.store.autoCreated&&(this.displayField=this.valueField="field1",this.store.expandData||(this.displayField="field2"),this.mode="local"));this.selectedIndex=-1,"local"==this.mode&&(Ext.isDefined(this.initialConfig.queryDelay)||(this.queryDelay=10),Ext.isDefined(this.initialConfig.minChars)||(this.minChars=0))},onRender:function(t,e){this.hiddenName&&!Ext.isDefined(this.submitValue)&&(this.submitValue=!1),Ext.form.ComboBox.superclass.onRender.call(this,t,e),this.hiddenName&&(this.hiddenField=this.el.insertSibling({tag:"input",type:"hidden",name:this.hiddenName,id:this.hiddenId||Ext.id()},"before",!0)),Ext.isGecko&&this.el.dom.setAttribute("autocomplete","off"),this.lazyInit?this.on("focus",this.initList,this,{single:!0}):this.initList()},initValue:function(){Ext.form.ComboBox.superclass.initValue.call(this),this.hiddenField&&(this.hiddenField.value=Ext.value(Ext.isDefined(this.hiddenValue)?this.hiddenValue:this.value,""))},getParentZIndex:function(){var e;return this.ownerCt&&this.findParentBy(function(t){return!!(e=parseInt(t.getPositionEl().getStyle("z-index"),10))}),e},getZIndex:function(t){return t=t||Ext.getDom(this.getListParent()||Ext.getBody()),(parseInt(Ext.fly(t).getStyle("z-index"),10)||this.getParentZIndex()||12e3)+5},initList:function(){var t,e;this.list||(t="x-combo-list",e=Ext.getDom(this.getListParent()||Ext.getBody()),this.list=new Ext.Layer({parentEl:e,shadow:this.shadow,cls:[t,this.listClass].join(" "),constrain:!1,zindex:this.getZIndex(e)}),e=this.listWidth||Math.max(this.wrap.getWidth(),this.minListWidth),this.list.setSize(e,0),this.list.swallowEvent("mousewheel"),this.assetHeight=0,!1!==this.syncFont&&this.list.setStyle("font-size",this.el.getStyle("font-size")),this.title&&(this.header=this.list.createChild({cls:t+"-hd",html:this.title}),this.assetHeight+=this.header.getHeight()),this.innerList=this.list.createChild({cls:t+"-inner"}),this.mon(this.innerList,"mouseover",this.onViewOver,this),this.mon(this.innerList,"mousemove",this.onViewMove,this),this.innerList.setWidth(e-this.list.getFrameWidth("lr")),this.pageSize&&(this.footer=this.list.createChild({cls:t+"-ft"}),this.pageTb=new Ext.PagingToolbar({store:this.store,pageSize:this.pageSize,renderTo:this.footer}),this.assetHeight+=this.footer.getHeight()),this.tpl||(this.tpl='<tpl for="."><div class="'+t+'-item">{'+this.displayField+"}</div></tpl>"),this.view=new Ext.DataView({applyTo:this.innerList,tpl:this.tpl,singleSelect:!0,selectedClass:this.selectedClass,itemSelector:this.itemSelector||"."+t+"-item",emptyText:this.listEmptyText,deferEmptyText:!1}),this.mon(this.view,{containerclick:this.onViewClick,click:this.onViewClick,scope:this}),this.bindStore(this.store,!0),this.resizable&&(this.resizer=new Ext.Resizable(this.list,{pinned:!0,handles:"se"}),this.mon(this.resizer,"resize",function(t,e,i){this.maxHeight=i-this.handleHeight-this.list.getFrameWidth("tb")-this.assetHeight,this.listWidth=e,this.innerList.setWidth(e-this.list.getFrameWidth("lr")),this.restrictHeight()},this),this[this.pageSize?"footer":"innerList"].setStyle("margin-bottom",this.handleHeight+"px")))},getListParent:function(){return document.body},getStore:function(){return this.store},bindStore:function(t,e){this.store&&!e&&(this.store!==t&&this.store.autoDestroy?this.store.destroy():(this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("exception",this.collapse,this)),t||(this.store=null,this.view&&this.view.bindStore(null),this.pageTb&&this.pageTb.bindStore(null))),t&&(e||(this.lastQuery=null,this.pageTb&&this.pageTb.bindStore(t)),this.store=Ext.StoreMgr.lookup(t),this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.collapse}),this.view&&this.view.bindStore(t))},reset:function(){this.clearFilterOnReset&&"local"==this.mode&&this.store.clearFilter(),Ext.form.ComboBox.superclass.reset.call(this)},initEvents:function(){Ext.form.ComboBox.superclass.initEvents.call(this),this.keyNav=new Ext.KeyNav(this.el,{up:function(t){this.inKeyMode=!0,this.selectPrev()},down:function(t){this.isExpanded()?(this.inKeyMode=!0,this.selectNext()):this.onTriggerClick()},enter:function(t){this.onViewClick()},esc:function(t){this.collapse()},tab:function(t){return!0===this.forceSelection?this.collapse():this.onViewClick(!1),!0},scope:this,doRelay:function(t,e,i){if("down"==i||this.scope.isExpanded()){var s=Ext.KeyNav.prototype.doRelay.apply(this,arguments);return(Ext.isIE9&&Ext.isStrict||Ext.isIE10p||!Ext.isIE)&&Ext.EventManager.useKeydown&&this.scope.fireKey(t),s}return!0},forceKeyDown:!0,defaultEventAction:"stopEvent"}),this.queryDelay=Math.max(this.queryDelay||10,"local"==this.mode?10:250),this.dqTask=new Ext.util.DelayedTask(this.initQuery,this),this.typeAhead&&(this.taTask=new Ext.util.DelayedTask(this.onTypeAhead,this)),this.enableKeyEvents||this.mon(this.el,"keyup",this.onKeyUp,this)},onDestroy:function(){this.dqTask&&(this.dqTask.cancel(),this.dqTask=null),this.bindStore(null),Ext.destroy(this.resizer,this.view,this.pageTb,this.list),Ext.destroyMembers(this,"hiddenField"),Ext.form.ComboBox.superclass.onDestroy.call(this)},fireKey:function(t){this.isExpanded()||Ext.form.ComboBox.superclass.fireKey.call(this,t)},onResize:function(t,e){Ext.form.ComboBox.superclass.onResize.apply(this,arguments),!isNaN(t)&&this.isVisible()&&this.list?this.doResize(t):this.bufferSize=t},doResize:function(t){Ext.isDefined(this.listWidth)||(t=Math.max(t,this.minListWidth),this.list.setWidth(t),this.innerList.setWidth(t-this.list.getFrameWidth("lr")))},onEnable:function(){Ext.form.ComboBox.superclass.onEnable.apply(this,arguments),this.hiddenField&&(this.hiddenField.disabled=!1)},onDisable:function(){Ext.form.ComboBox.superclass.onDisable.apply(this,arguments),this.hiddenField&&(this.hiddenField.disabled=!0)},onBeforeLoad:function(){this.hasFocus&&(this.innerList.update(this.loadingText?'<div class="loading-indicator">'+this.loadingText+"</div>":""),this.restrictHeight(),this.selectedIndex=-1)},onLoad:function(){this.hasFocus&&(0<this.store.getCount()||this.listEmptyText?(this.expand(),this.restrictHeight(),this.lastQuery==this.allQuery?(this.editable&&this.el.dom.select(),!1===this.autoSelect||this.selectByValue(this.value,!0)||this.select(0,!0)):(!1!==this.autoSelect&&this.selectNext(),this.typeAhead&&this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE&&this.taTask.delay(this.typeAheadDelay))):this.collapse())},onTypeAhead:function(){var t,e,i;0<this.store.getCount()&&(e=(t=this.store.getAt(0).data[this.displayField]).length,(i=this.getRawValue().length)!=e&&(this.setRawValue(t),this.selectText(i,t.length)))},assertValue:function(){var t,e=this.getRawValue();if(!(t=!(t=this.valueField&&Ext.isDefined(this.value)?this.findRecord(this.valueField,this.value):t)||t.get(this.displayField)!=e?this.findRecord(this.displayField,e):t)&&this.forceSelection)0<e.length&&e!=this.emptyText?(this.el.dom.value=Ext.value(this.lastSelectionText,""),this.applyEmptyText()):this.clearValue();else{if(t&&this.valueField){if(this.value==e)return;e=t.get(this.valueField||this.displayField)}this.setValue(e)}},onSelect:function(t,e){!1!==this.fireEvent("beforeselect",this,t,e)&&(this.setValue(t.data[this.valueField||this.displayField]),this.collapse(),this.fireEvent("select",this,t,e))},getName:function(){var t=this.hiddenField;return t&&t.name?t.name:this.hiddenName||Ext.form.ComboBox.superclass.getName.call(this)},getValue:function(){return this.valueField?Ext.isDefined(this.value)?this.value:"":Ext.form.ComboBox.superclass.getValue.call(this)},clearValue:function(){this.hiddenField&&(this.hiddenField.value=""),this.setRawValue(""),this.lastSelectionText="",this.applyEmptyText(),this.value=""},setValue:function(t){var e,i=t;return this.valueField&&((e=this.findRecord(this.valueField,t))?i=e.data[this.displayField]:Ext.isDefined(this.valueNotFoundText)&&(i=this.valueNotFoundText)),this.lastSelectionText=i,this.hiddenField&&(this.hiddenField.value=Ext.value(t,"")),Ext.form.ComboBox.superclass.setValue.call(this,i),this.value=t,this},findRecord:function(e,i){var s;return 0<this.store.getCount()&&this.store.each(function(t){if(t.data[e]==i)return s=t,!1}),s},onViewMove:function(t,e){this.inKeyMode=!1},onViewOver:function(t,e){this.inKeyMode||(e=this.view.findItemFromChild(e))&&(e=this.view.indexOf(e),this.select(e,!1))},onViewClick:function(t){var e=this.view.getSelectedIndexes()[0],i=this.store.getAt(e);i?this.onSelect(i,e):this.collapse(),!1!==t&&this.el.focus()},restrictHeight:function(){this.innerList.dom.style.height="";var t=this.innerList.dom,e=this.list.getFrameWidth("tb")+(this.resizable?this.handleHeight:0)+this.assetHeight,i=Math.max(t.clientHeight,t.offsetHeight,t.scrollHeight),s=this.getPosition()[1]-Ext.getBody().getScroll().top,t=Ext.lib.Dom.getViewHeight()-s-this.getSize().height,t=Math.max(s,t,this.minHeight||0)-this.list.shadowOffset-e-5,i=Math.min(i,t,this.maxHeight);this.innerList.setHeight(i),this.list.beginUpdate(),this.list.setHeight(i+e),this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign)),this.list.endUpdate()},isExpanded:function(){return this.list&&this.list.isVisible()},selectByValue:function(t,e){if(!Ext.isEmpty(t,!0)){t=this.findRecord(this.valueField||this.displayField,t);if(t)return this.select(this.store.indexOf(t),e),!0}return!1},select:function(t,e){this.selectedIndex=t,this.view.select(t),!1===e||(t=this.view.getNode(t))&&this.innerList.scrollChildIntoView(t,!1)},selectNext:function(){var t=this.store.getCount();0<t&&(-1==this.selectedIndex?this.select(0):this.selectedIndex<t-1&&this.select(this.selectedIndex+1))},selectPrev:function(){0<this.store.getCount()&&(-1==this.selectedIndex?this.select(0):0!==this.selectedIndex&&this.select(this.selectedIndex-1))},onKeyUp:function(t){var e=t.getKey();!1===this.editable||!0===this.readOnly||e!=t.BACKSPACE&&t.isSpecialKey()||(this.lastKey=e,this.dqTask.delay(this.queryDelay)),Ext.form.ComboBox.superclass.onKeyUp.call(this,t)},validateBlur:function(){return!this.list||!this.list.isVisible()},initQuery:function(){this.doQuery(this.getRawValue())},beforeBlur:function(){this.assertValue()},postBlur:function(){Ext.form.ComboBox.superclass.postBlur.call(this),this.collapse(),this.inKeyMode=!1},doQuery:function(t,e){var i={query:t=Ext.isEmpty(t)?"":t,forceAll:e,combo:this,cancel:!1};if(!1===this.fireEvent("beforequery",i)||i.cancel)return!1;t=i.query,(!0===(e=i.forceAll)||t.length>=this.minChars)&&(this.lastQuery!==t?(this.lastQuery=t,"local"==this.mode?(this.selectedIndex=-1,e?this.store.clearFilter():this.store.filter(this.displayField,t),this.onLoad()):(this.store.baseParams[this.queryParam]=t,this.store.load({params:this.getParams(t)}),this.expand())):(this.selectedIndex=-1,this.onLoad()))},getParams:function(t){var e={},i=this.store.paramNames;return this.pageSize&&(e[i.start]=0,e[i.limit]=this.pageSize),e},collapse:function(){this.isExpanded()&&(this.list.hide(),Ext.getDoc().un("mousewheel",this.collapseIf,this),Ext.getDoc().un("mousedown",this.collapseIf,this),this.fireEvent("collapse",this))},collapseIf:function(t){this.isDestroyed||t.within(this.wrap)||t.within(this.list)||this.collapse()},expand:function(){!this.isExpanded()&&this.hasFocus&&((this.title||this.pageSize)&&(this.assetHeight=0,this.title&&(this.assetHeight+=this.header.getHeight()),this.pageSize&&(this.assetHeight+=this.footer.getHeight())),this.bufferSize&&(this.doResize(this.bufferSize),delete this.bufferSize),this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign)),this.list.setZIndex(this.getZIndex()),this.list.show(),Ext.isGecko2&&this.innerList.setOverflow("auto"),this.mon(Ext.getDoc(),{scope:this,mousewheel:this.collapseIf,mousedown:this.collapseIf}),this.fireEvent("expand",this))},onTriggerClick:function(){this.readOnly||this.disabled||(this.isExpanded()?this.collapse():(this.onFocus({}),"all"==this.triggerAction?this.doQuery(this.allQuery,!0):this.doQuery(this.getRawValue())),this.el.focus())}}),Ext.reg("combo",Ext.form.ComboBox),Ext.form.Checkbox=Ext.extend(Ext.form.Field,{focusClass:void 0,fieldClass:"x-form-field",checked:!1,boxLabel:"&#160;",defaultAutoCreate:{tag:"input",type:"checkbox",autocomplete:"off"},actionMode:"wrap",initComponent:function(){Ext.form.Checkbox.superclass.initComponent.call(this),this.addEvents("check")},onResize:function(){Ext.form.Checkbox.superclass.onResize.apply(this,arguments),this.boxLabel||this.fieldLabel||this.el.alignTo(this.wrap,"c-c")},initEvents:function(){Ext.form.Checkbox.superclass.initEvents.call(this),this.mon(this.el,{scope:this,click:this.onClick,change:this.onClick})},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,onRender:function(t,e){Ext.form.Checkbox.superclass.onRender.call(this,t,e),void 0!==this.inputValue&&(this.el.dom.value=this.inputValue),this.wrap=this.el.wrap({cls:"x-form-check-wrap"}),this.boxLabel&&this.wrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel}),this.checked?this.setValue(!0):this.checked=this.el.dom.checked,Ext.isIEQuirks&&this.wrap.repaint(),this.resizeEl=this.positionEl=this.wrap},onDestroy:function(){Ext.destroy(this.wrap),Ext.form.Checkbox.superclass.onDestroy.call(this)},initValue:function(){this.originalValue=this.getValue()},getValue:function(){return(this.rendered?this.el.dom:this).checked},onClick:function(){this.el.dom.checked!=this.checked&&this.setValue(this.el.dom.checked)},setValue:function(t){var e=this.checked,i=this.inputValue;return this.checked=!1!==t&&(!0===t||"true"===t||"1"==t||(i?t==i:"on"==String(t).toLowerCase())),this.rendered&&(this.el.dom.checked=this.checked,this.el.dom.defaultChecked=this.checked),e!=this.checked&&(this.fireEvent("check",this,this.checked),this.handler&&this.handler.call(this.scope||this,this,this.checked)),this}}),Ext.reg("checkbox",Ext.form.Checkbox),Ext.form.CheckboxGroup=Ext.extend(Ext.form.Field,{columns:"auto",vertical:!1,allowBlank:!0,blankText:"You must select at least one item in this group",defaultType:"checkbox",groupCls:"x-form-check-group",initComponent:function(){this.addEvents("change"),this.on("change",this.validate,this),Ext.form.CheckboxGroup.superclass.initComponent.call(this)},onRender:function(t,e){if(!this.el){var i={autoEl:{id:this.id},cls:this.groupCls,layout:"column",renderTo:t,bufferResize:!1},s={xtype:"container",defaultType:this.defaultType,layout:"form",defaults:{hideLabel:!0,anchor:"100%"}};if(this.items[0].items){Ext.apply(i,{layoutConfig:{columns:this.items.length},defaults:this.defaults,items:this.items});for(var n=0,r=this.items.length;n<r;n++)Ext.applyIf(this.items[n],s)}else{var o=[];if("string"==typeof this.columns&&(this.columns=this.items.length),!Ext.isArray(this.columns)){for(var a=[],n=0;n<this.columns;n++)a.push(100/this.columns*.01);this.columns=a}for(var l=this.columns.length,n=0;n<l;n++){var d=Ext.apply({items:[]},s);d[this.columns[n]<=1?"columnWidth":"width"]=this.columns[n],this.defaults&&(d.defaults=Ext.apply(d.defaults||{},this.defaults)),o.push(d)}if(this.vertical)for(var h=Math.ceil(this.items.length/l),c=0,n=0,r=this.items.length;n<r;n++)0<n&&n%h==0&&c++,this.items[n].fieldLabel&&(this.items[n].hideLabel=!1),o[c].items.push(this.items[n]);else for(n=0,r=this.items.length;n<r;n++){var u=n%l;this.items[n].fieldLabel&&(this.items[n].hideLabel=!1),o[u].items.push(this.items[n])}Ext.apply(i,{layoutConfig:{columns:l},items:o})}this.panel=new Ext.Container(i),(this.panel.ownerCt=this).el=this.panel.getEl(),this.forId&&this.itemCls&&((f=this.el.up(this.itemCls).child("label",!0))&&f.setAttribute("htmlFor",this.forId));var f=this.panel.findBy(function(t){return t.isFormField},this);this.items=new Ext.util.MixedCollection,this.items.addAll(f)}Ext.form.CheckboxGroup.superclass.onRender.call(this,t,e)},initValue:function(){this.value&&(this.setValue.apply(this,this.buffered?this.value:[this.value]),delete this.buffered,delete this.value)},afterRender:function(){Ext.form.CheckboxGroup.superclass.afterRender.call(this),this.eachItem(function(t){t.on("check",this.fireChecked,this),t.inGroup=!0})},doLayout:function(){this.rendered&&(this.panel.forceLayout=this.ownerCt.forceLayout,this.panel.doLayout())},fireChecked:function(){var e=[];this.eachItem(function(t){t.checked&&e.push(t)}),this.fireEvent("change",this,e)},getErrors:function(){var e,t=Ext.form.CheckboxGroup.superclass.getErrors.apply(this,arguments);return this.allowBlank||(e=!0,this.eachItem(function(t){if(t.checked)return e=!1}),e&&t.push(this.blankText)),t},isDirty:function(){if(this.disabled||!this.rendered)return!1;var e=!1;return this.eachItem(function(t){if(t.isDirty())return!(e=!0)}),e},setReadOnly:function(e){this.rendered&&this.eachItem(function(t){t.setReadOnly(e)}),this.readOnly=e},onDisable:function(){this.eachItem(function(t){t.disable()})},onEnable:function(){this.eachItem(function(t){t.enable()})},onResize:function(t,e){this.panel.setSize(t,e),this.panel.doLayout()},reset:function(){this.originalValue?(this.eachItem(function(t){t.setValue&&(t.setValue(!1),t.originalValue=t.getValue())}),this.resetOriginal=!0,this.setValue(this.originalValue),delete this.resetOriginal):this.eachItem(function(t){t.reset&&t.reset()}),function(){this.clearInvalid()}.defer(50,this)},setValue:function(){return this.rendered?this.onSetValue.apply(this,arguments):(this.buffered=!0,this.value=arguments),this},onSetValue:function(t,e){var i;if(1==arguments.length)if(Ext.isArray(t))Ext.each(t,function(t,e){Ext.isObject(t)&&t.setValue?(t.setValue(!0),!0===this.resetOriginal&&(t.originalValue=t.getValue())):(e=this.items.itemAt(e))&&e.setValue(t)},this);else if(Ext.isObject(t))for(var s in t)(i=this.getBox(s))&&i.setValue(t[s]);else this.setValueForItem(t);else(i=this.getBox(t))&&i.setValue(e)},beforeDestroy:function(){Ext.destroy(this.panel),this.rendered||Ext.destroy(this.items),Ext.form.CheckboxGroup.superclass.beforeDestroy.call(this)},setValueForItem:function(e){e=String(e).split(","),this.eachItem(function(t){-1<e.indexOf(t.inputValue)&&t.setValue(!0)})},getBox:function(e){var i=null;return this.eachItem(function(t){if(e==t||t.dataIndex==e||t.id==e||t.getName()==e)return i=t,!1}),i},getValue:function(){var e=[];return this.eachItem(function(t){t.checked&&e.push(t)}),e},eachItem:function(t,e){this.items&&this.items.each&&this.items.each(t,e||this)},getRawValue:Ext.emptyFn,setRawValue:Ext.emptyFn}),Ext.reg("checkboxgroup",Ext.form.CheckboxGroup),Ext.form.CompositeField=Ext.extend(Ext.form.Field,{defaultMargins:"0 5 0 0",skipLastItemMargin:!0,isComposite:!0,combineErrors:!0,labelConnector:", ",initComponent:function(){for(var t,e=[],i=this.items,s=0,n=i.length;s<n;s++)t=i[s],Ext.isEmpty(t.ref)||(t.ref="../"+t.ref),e.push(t.fieldLabel),Ext.applyIf(t,this.defaults),s==n-1&&this.skipLastItemMargin||Ext.applyIf(t,{margins:this.defaultMargins});this.fieldLabel=this.fieldLabel||this.buildLabel(e),this.fieldErrors=new Ext.util.MixedCollection(!0,function(t){return t.field}),this.fieldErrors.on({scope:this,add:this.updateInvalidMark,remove:this.updateInvalidMark,replace:this.updateInvalidMark}),Ext.form.CompositeField.superclass.initComponent.apply(this,arguments),this.innerCt=new Ext.Container({layout:"hbox",items:this.items,cls:"x-form-composite",defaultMargins:"0 3 0 0",ownerCt:this}),delete this.innerCt.ownerCt;var r=this.innerCt.findBy(function(t){return t.isFormField},this);this.items=new Ext.util.MixedCollection,this.items.addAll(r)},onRender:function(t,e){var i;this.el||((i=this.innerCt).render(t),(this.innerCt.ownerCt=this).el=i.getEl(),this.combineErrors&&this.eachItem(function(t){Ext.apply(t,{markInvalid:this.onFieldMarkInvalid.createDelegate(this,[t],0),clearInvalid:this.onFieldClearInvalid.createDelegate(this,[t],0)})}),(i=this.el.parent().parent().child("label",!0))&&i.setAttribute("for",this.items.items[0].id)),Ext.form.CompositeField.superclass.onRender.apply(this,arguments)},onFieldMarkInvalid:function(t,e){var i=t.getName(),e={field:i,errorName:t.fieldLabel||i,error:e};this.fieldErrors.replace(i,e),t.preventMark||t.el.addClass(t.invalidClass)},onFieldClearInvalid:function(t){this.fieldErrors.removeKey(t.getName()),t.el.removeClass(t.invalidClass)},updateInvalidMark:function(){var t,e=Ext.isIE6&&Ext.isStrict;0==this.fieldErrors.length?(this.clearInvalid(),e&&this.clearInvalid.defer(50,this)):(t=this.buildCombinedErrorMessage(this.fieldErrors.items),this.sortErrors(),this.markInvalid(t),e&&this.markInvalid(t))},validateValue:function(t,e){var i=!0;return this.eachItem(function(t){t.isValid(e)||(i=!1)}),i},buildCombinedErrorMessage:function(t){for(var e,i=[],s=0,n=t.length;s<n;s++)e=t[s],i.push(String.format("{0}: {1}",e.errorName,e.error));return i.join("<br />")},sortErrors:function(){var s=this.items;this.fieldErrors.sort("ASC",function(t,e){function i(e){return function(t){return t.getName()==e}}return s.findIndexBy(i(t.field))<s.findIndexBy(i(e.field))?-1:1})},reset:function(){this.eachItem(function(t){t.reset()}),function(){this.clearInvalid()}.defer(50,this)},clearInvalidChildren:function(){this.eachItem(function(t){t.clearInvalid()})},buildLabel:function(t){return Ext.clean(t).join(this.labelConnector)},isDirty:function(){if(this.disabled||!this.rendered)return!1;var e=!1;return this.eachItem(function(t){if(t.isDirty())return!(e=!0)}),e},eachItem:function(t,e){this.items&&this.items.each&&this.items.each(t,e||this)},onResize:function(t,e,i,s){var n=this.innerCt;this.rendered&&n.rendered&&n.setSize(t,e),Ext.form.CompositeField.superclass.onResize.apply(this,arguments)},doLayout:function(t,e){var i;this.rendered&&((i=this.innerCt).forceLayout=this.ownerCt.forceLayout,i.doLayout(t,e))},beforeDestroy:function(){Ext.destroy(this.innerCt),Ext.form.CompositeField.superclass.beforeDestroy.call(this)},setReadOnly:function(e){e=!!(e=null==e?!0:e),this.rendered&&this.eachItem(function(t){t.setReadOnly(e)}),this.readOnly=e},onShow:function(){Ext.form.CompositeField.superclass.onShow.call(this),this.doLayout()},onDisable:function(){this.eachItem(function(t){t.disable()})},onEnable:function(){this.eachItem(function(t){t.enable()})}}),Ext.reg("compositefield",Ext.form.CompositeField),Ext.form.Radio=Ext.extend(Ext.form.Checkbox,{inputType:"radio",markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,getGroupValue:function(){var t=(this.el.up("form")||Ext.getBody()).child('input[name="'+this.el.dom.name+'"]:checked',!0);return t?t.value:null},setValue:function(t){var e,i;return"boolean"==typeof t?Ext.form.Radio.superclass.setValue.call(this,t):this.rendered&&(i=(e=this.getCheckEl()).child('input[name="'+this.el.dom.name+'"][value="'+t+'"]',!0))&&Ext.getCmp(i.id).setValue(!0),this.rendered&&this.checked&&(e=e||this.getCheckEl(),this.getCheckEl().select('input[name="'+this.el.dom.name+'"]').each(function(t){t.dom.id!=this.id&&Ext.getCmp(t.dom.id).setValue(!1)},this)),this},getCheckEl:function(){return this.inGroup?this.el.up(".x-form-radio-group"):this.el.up("form")||Ext.getBody()}}),Ext.reg("radio",Ext.form.Radio),Ext.form.RadioGroup=Ext.extend(Ext.form.CheckboxGroup,{allowBlank:!0,blankText:"You must select one item in this group",defaultType:"radio",groupCls:"x-form-radio-group",getValue:function(){var e=null;return this.eachItem(function(t){if(t.checked)return e=t,!1}),e},onSetValue:function(t,e){var i;1<arguments.length?(i=this.getBox(t))&&(i.setValue(e),i.checked&&this.eachItem(function(t){t!==i&&t.setValue(!1)})):this.setValueForItem(t)},setValueForItem:function(e){e=String(e).split(",")[0],this.eachItem(function(t){t.setValue(e==t.inputValue)})},fireChecked:function(){this.checkTask||(this.checkTask=new Ext.util.DelayedTask(this.bufferChecked,this)),this.checkTask.delay(10)},bufferChecked:function(){var e=null;this.eachItem(function(t){if(t.checked)return e=t,!1}),this.fireEvent("change",this,e)},onDestroy:function(){this.checkTask&&(this.checkTask.cancel(),this.checkTask=null),Ext.form.RadioGroup.superclass.onDestroy.call(this)}}),Ext.reg("radiogroup",Ext.form.RadioGroup),Ext.form.Hidden=Ext.extend(Ext.form.Field,{inputType:"hidden",shouldLayout:!1,onRender:function(){Ext.form.Hidden.superclass.onRender.apply(this,arguments)},initEvents:function(){this.originalValue=this.getValue()},setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn}),Ext.reg("hidden",Ext.form.Hidden),Ext.form.BasicForm=Ext.extend(Ext.util.Observable,{constructor:function(t,e){Ext.apply(this,e),Ext.isString(this.paramOrder)&&(this.paramOrder=this.paramOrder.split(/[\s,|]/)),this.items=new Ext.util.MixedCollection(!1,function(t){return t.getItemId()}),this.addEvents("beforeaction","actionfailed","actioncomplete"),t&&this.initEl(t),Ext.form.BasicForm.superclass.constructor.call(this)},timeout:30,paramOrder:void 0,paramsAsHash:!1,waitTitle:"Please Wait...",activeAction:null,trackResetOnLoad:!1,initEl:function(t){this.el=Ext.get(t),this.id=this.el.id||Ext.id(),this.standardSubmit||this.el.on("submit",this.onSubmit,this),this.el.addClass("x-form")},getEl:function(){return this.el},onSubmit:function(t){t.stopEvent()},destroy:function(t){!0!==t&&(this.items.each(function(t){Ext.destroy(t)}),Ext.destroy(this.el)),this.items.clear(),this.purgeListeners()},isValid:function(){var e=!0;return this.items.each(function(t){t.validate()||(e=!1)}),e},isDirty:function(){var e=!1;return this.items.each(function(t){if(t.isDirty())return!(e=!0)}),e},doAction:function(t,e){return Ext.isString(t)&&(t=new Ext.form.Action.ACTION_TYPES[t](this,e)),!1!==this.fireEvent("beforeaction",this,t)&&(this.beforeAction(t),t.run.defer(100,t)),this},submit:function(t){if(t=t||{},this.standardSubmit){var e,i=!1===t.clientValidation||this.isValid();return i&&(e=this.el.dom,this.url&&Ext.isEmpty(e.action)&&(e.action=this.url),e.submit()),i}i=String.format("{0}submit",this.api?"direct":"");return this.doAction(i,t),this},load:function(t){var e=String.format("{0}load",this.api?"direct":"");return this.doAction(e,t),this},updateRecord:function(e){var i,s;return e.beginEdit(),e.fields.each(function(t){(i=this.findField(t.name))&&(s=i.getValue(),!1!==Ext.type(s)&&s.getGroupValue?s=s.getGroupValue():i.eachItem&&(s=[],i.eachItem(function(t){s.push(t.getValue())})),e.set(t.name,s))},this),e.endEdit(),this},loadRecord:function(t){return this.setValues(t.data),this},beforeAction:function(t){this.items.each(function(t){t.isFormField&&t.syncValue&&t.syncValue()});t=t.options;t.waitMsg&&(!0===this.waitMsgTarget?this.el.mask(t.waitMsg,"x-mask-loading"):this.waitMsgTarget?(this.waitMsgTarget=Ext.get(this.waitMsgTarget),this.waitMsgTarget.mask(t.waitMsg,"x-mask-loading")):Ext.MessageBox.wait(t.waitMsg,t.waitTitle||this.waitTitle))},afterAction:function(t,e){this.activeAction=null;var i=t.options;i.waitMsg&&(!0===this.waitMsgTarget?this.el.unmask():this.waitMsgTarget?this.waitMsgTarget.unmask():(Ext.MessageBox.updateProgress(1),Ext.MessageBox.hide())),e?(i.reset&&this.reset(),Ext.callback(i.success,i.scope,[this,t]),this.fireEvent("actioncomplete",this,t)):(Ext.callback(i.failure,i.scope,[this,t]),this.fireEvent("actionfailed",this,t))},findField:function(e){var i,s=this.items.get(e);return Ext.isObject(s)||this.items.each(i=function(t){if(t.isFormField)return t.dataIndex==e||t.id==e||t.getName()==e?(s=t,!1):t.isComposite?t.items.each(i):t instanceof Ext.form.CheckboxGroup&&t.rendered?t.eachItem(i):void 0}),s||null},markInvalid:function(t){var e,i;if(Ext.isArray(t))for(var s=0,n=t.length;s<n;s++){var r=t[s],o=this.findField(r.id);o&&o.markInvalid(r.msg)}else for(i in t)!Ext.isFunction(t[i])&&(e=this.findField(i))&&e.markInvalid(t[i]);return this},setValues:function(t){var e,i;if(Ext.isArray(t))for(var s=0,n=t.length;s<n;s++){var r=t[s],o=this.findField(r.id);o&&(o.setValue(r.value),this.trackResetOnLoad&&(o.originalValue=o.getValue()))}else for(i in t)!Ext.isFunction(t[i])&&(e=this.findField(i))&&(e.setValue(t[i]),this.trackResetOnLoad&&(e.originalValue=e.getValue()));return this},getValues:function(t){var e=Ext.lib.Ajax.serializeForm(this.el.dom);return!0===t?e:Ext.urlDecode(e)},getFieldValues:function(e){var i,s,n,r={};return this.items.each(function(t){t.disabled||!0===e&&!t.isDirty()||(i=t.getName(),s=r[i],n=t.getValue(),Ext.isDefined(s)?Ext.isArray(s)?r[i].push(n):r[i]=[s,n]:r[i]=n)}),r},clearInvalid:function(){return this.items.each(function(t){t.clearInvalid()}),this},reset:function(){return this.items.each(function(t){t.reset()}),this},add:function(){return this.items.addAll(Array.prototype.slice.call(arguments,0)),this},remove:function(t){return this.items.remove(t),this},cleanDestroyed:function(){this.items.filterBy(function(t){return!!t.isDestroyed}).each(this.remove,this)},render:function(){return this.items.each(function(t){t.isFormField&&!t.rendered&&document.getElementById(t.id)&&t.applyToMarkup(t.id)}),this},applyToFields:function(e){return this.items.each(function(t){Ext.apply(t,e)}),this},applyIfToFields:function(e){return this.items.each(function(t){Ext.applyIf(t,e)}),this},callFieldMethod:function(e,i){return i=i||[],this.items.each(function(t){Ext.isFunction(t[e])&&t[e].apply(t,i)}),this}}),Ext.BasicForm=Ext.form.BasicForm,Ext.FormPanel=Ext.extend(Ext.Panel,{minButtonWidth:75,labelAlign:"left",monitorValid:!1,monitorPoll:200,layout:"form",initComponent:function(){this.form=this.createForm(),Ext.FormPanel.superclass.initComponent.call(this),this.bodyCfg={tag:"form",cls:this.baseCls+"-body",method:this.method||"POST",id:this.formId||Ext.id()},this.fileUpload&&(this.bodyCfg.enctype="multipart/form-data"),this.initItems(),this.addEvents("clientvalidation"),this.relayEvents(this.form,["beforeaction","actionfailed","actioncomplete"])},createForm:function(){var t=Ext.applyIf({listeners:{}},this.initialConfig);return new Ext.form.BasicForm(null,t)},initFields:function(){function e(t){s.isField(t)?i.add(t):t.findBy&&t!=s&&(s.applySettings(t),t.items&&t.items.each&&t.items.each(e,this))}var i=this.form,s=this;this.items.each(e,this)},applySettings:function(t){var e=t.ownerCt;Ext.applyIf(t,{labelAlign:e.labelAlign,labelWidth:e.labelWidth,itemCls:e.itemCls})},getLayoutTarget:function(){return this.form.el},getForm:function(){return this.form},onRender:function(t,e){this.initFields(),Ext.FormPanel.superclass.onRender.call(this,t,e),this.form.initEl(this.body)},beforeDestroy:function(){this.stopMonitoring(),this.form.destroy(!0),Ext.FormPanel.superclass.beforeDestroy.call(this)},isField:function(t){return!!(t.setValue&&t.getValue&&t.markInvalid&&t.clearInvalid)},initEvents:function(){Ext.FormPanel.superclass.initEvents.call(this),this.on({scope:this,add:this.onAddEvent,remove:this.onRemoveEvent}),this.monitorValid&&this.startMonitoring()},onAdd:function(t){Ext.FormPanel.superclass.onAdd.call(this,t),this.processAdd(t)},onAddEvent:function(t,e){t!==this&&this.processAdd(e)},processAdd:function(t){this.isField(t)?this.form.add(t):t.findBy&&(this.applySettings(t),this.form.add.apply(this.form,t.findBy(this.isField)))},onRemove:function(t){Ext.FormPanel.superclass.onRemove.call(this,t),this.processRemove(t)},onRemoveEvent:function(t,e){t!==this&&this.processRemove(e)},processRemove:function(t){this.destroying||(this.isField(t)?this.form.remove(t):t.findBy&&(Ext.each(t.findBy(this.isField),this.form.remove,this.form),this.form.cleanDestroyed()))},startMonitoring:function(){this.validTask||(this.validTask=new Ext.util.TaskRunner,this.validTask.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this}))},stopMonitoring:function(){this.validTask&&(this.validTask.stopAll(),this.validTask=null)},load:function(){this.form.load.apply(this.form,arguments)},onDisable:function(){Ext.FormPanel.superclass.onDisable.call(this),this.form&&this.form.items.each(function(){this.disable()})},onEnable:function(){Ext.FormPanel.superclass.onEnable.call(this),this.form&&this.form.items.each(function(){this.enable()})},bindHandler:function(){var e=!0;if(this.form.items.each(function(t){if(!t.isValid(!0))return e=!1}),this.fbar)for(var t=this.fbar.items.items,i=0,s=t.length;i<s;i++){var n=t[i];!0===n.formBind&&n.disabled===e&&n.setDisabled(!e)}this.fireEvent("clientvalidation",this,e)}}),Ext.reg("form",Ext.FormPanel),Ext.form.FormPanel=Ext.FormPanel,Ext.form.FieldSet=Ext.extend(Ext.Panel,{baseCls:"x-fieldset",layout:"form",animCollapse:!1,onRender:function(t,e){this.el||(this.el=document.createElement("fieldset"),this.el.id=this.id,(this.title||this.header||this.checkboxToggle)&&(this.el.appendChild(document.createElement("legend")).className=this.baseCls+"-header")),Ext.form.FieldSet.superclass.onRender.call(this,t,e),this.checkboxToggle&&(e="object"==typeof this.checkboxToggle?this.checkboxToggle:{tag:"input",type:"checkbox",name:this.checkboxName||this.id+"-checkbox"},this.checkbox=this.header.insertFirst(e),this.checkbox.dom.checked=!this.collapsed,this.mon(this.checkbox,"click",this.onCheckClick,this))},onCollapse:function(t,e){this.checkbox&&(this.checkbox.dom.checked=!1),Ext.form.FieldSet.superclass.onCollapse.call(this,t,e)},onExpand:function(t,e){this.checkbox&&(this.checkbox.dom.checked=!0),Ext.form.FieldSet.superclass.onExpand.call(this,t,e)},onCheckClick:function(){this[this.checkbox.dom.checked?"expand":"collapse"]()}}),Ext.reg("fieldset",Ext.form.FieldSet),Ext.form.HtmlEditor=Ext.extend(Ext.form.Field,{enableFormat:!0,enableFontSize:!0,enableColors:!0,enableAlignments:!0,enableLists:!0,enableSourceEdit:!0,enableLinks:!0,enableFont:!0,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",defaultValue:Ext.isOpera||Ext.isIE6?"&#160;":"&#8203;",actionMode:"wrap",validationEvent:!1,deferHeight:!0,initialized:!1,activated:!1,sourceEditMode:!1,onFocus:Ext.emptyFn,iframePad:3,hideMode:"offsets",defaultAutoCreate:{tag:"textarea",style:"width:500px;height:300px;",autocomplete:"off"},initComponent:function(){this.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange"),Ext.form.HtmlEditor.superclass.initComponent.call(this)},createFontOptions:function(){for(var t,e,i=[],s=this.fontFamilies,n=0,r=s.length;n<r;n++)e=(t=s[n]).toLowerCase(),i.push('<option value="',e,'" style="font-family:',t,';"',this.defaultFont==e?' selected="true">':">",t,"</option>");return i.join("")},createToolbar:function(s){var t,e=[],n=Ext.QuickTips&&Ext.QuickTips.isEnabled();function i(t,e,i){return{itemId:t,cls:"x-btn-icon",iconCls:"x-edit-"+t,enableToggle:!1!==e,scope:s,handler:i||s.relayBtnCmd,clickEvent:"mousedown",tooltip:n&&s.buttonTips[t]||void 0,overflowText:s.buttonTips[t].title||void 0,tabIndex:-1}}this.enableFont&&!Ext.isSafari2&&(t=new Ext.Toolbar.Item({autoEl:{tag:"select",cls:"x-font-select",html:this.createFontOptions()}}),e.push(t,"-")),this.enableFormat&&e.push(i("bold"),i("italic"),i("underline")),this.enableFontSize&&e.push("-",i("increasefontsize",!1,this.adjustFont),i("decreasefontsize",!1,this.adjustFont)),this.enableColors&&e.push("-",{itemId:"forecolor",cls:"x-btn-icon",iconCls:"x-edit-forecolor",clickEvent:"mousedown",tooltip:n&&s.buttonTips.forecolor||void 0,tabIndex:-1,menu:new Ext.menu.ColorMenu({allowReselect:!0,focus:Ext.emptyFn,value:"000000",plain:!0,listeners:{scope:this,select:function(t,e){this.execCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+e:e),this.deferFocus()}},clickEvent:"mousedown"})},{itemId:"backcolor",cls:"x-btn-icon",iconCls:"x-edit-backcolor",clickEvent:"mousedown",tooltip:n&&s.buttonTips.backcolor||void 0,tabIndex:-1,menu:new Ext.menu.ColorMenu({focus:Ext.emptyFn,value:"FFFFFF",plain:!0,allowReselect:!0,listeners:{scope:this,select:function(t,e){Ext.isGecko?(this.execCmd("useCSS",!1),this.execCmd("hilitecolor",e),this.execCmd("useCSS",!0)):this.execCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE?"#"+e:e),this.deferFocus()}},clickEvent:"mousedown"})}),this.enableAlignments&&e.push("-",i("justifyleft"),i("justifycenter"),i("justifyright")),Ext.isSafari2||(this.enableLinks&&e.push("-",i("createlink",!1,this.createLink)),this.enableLists&&e.push("-",i("insertorderedlist"),i("insertunorderedlist")),this.enableSourceEdit&&e.push("-",i("sourceedit",!0,function(t){this.toggleSourceEdit(!this.sourceEditMode)})));e=new Ext.Toolbar({renderTo:this.wrap.dom.firstChild,items:e});t&&(this.fontSelect=t.el,this.mon(this.fontSelect,"change",function(){var t=this.fontSelect.dom.value;this.relayCmd("fontname",t),this.deferFocus()},this)),this.mon(e.el,"click",function(t){t.preventDefault()}),this.tb=e,this.tb.doLayout()},onDisable:function(){this.wrap.mask(),Ext.form.HtmlEditor.superclass.onDisable.call(this)},onEnable:function(){this.wrap.unmask(),Ext.form.HtmlEditor.superclass.onEnable.call(this)},setReadOnly:function(t){var e;Ext.form.HtmlEditor.superclass.setReadOnly.call(this,t),this.initialized&&(Ext.isIE?this.getEditorBody().contentEditable=!t:this.setDesignMode(!t),(e=this.getEditorBody())&&(e.style.cursor=this.readOnly?"default":"text"),this.disableItems(t))},getDocMarkup:function(){var t=Ext.fly(this.iframe).getHeight()-2*this.iframePad;return String.format('<html><head><style type="text/css">body{border: 0; margin: 0; padding: {0}px; height: {1}px; cursor: text}</style></head><body></body></html>',this.iframePad,t)},getEditorBody:function(){var t=this.getDoc();return t.body||t.documentElement},getDoc:function(){return!Ext.isIE&&this.iframe.contentDocument||this.getWin().document},getWin:function(){return Ext.isIE?this.iframe.contentWindow:window.frames[this.iframe.name]},onRender:function(t,e){Ext.form.HtmlEditor.superclass.onRender.call(this,t,e),this.el.dom.style.border="0 none",this.el.dom.setAttribute("tabIndex",-1),this.el.addClass("x-hidden"),Ext.isIE&&this.el.applyStyles("margin-top:-1px;margin-bottom:-1px;"),this.wrap=this.el.wrap({cls:"x-html-editor-wrap",cn:{cls:"x-html-editor-tb"}}),this.createToolbar(this),this.disableItems(!0),this.tb.doLayout(),this.createIFrame(),this.width||(e=this.el.getSize(),this.setSize(e.width,this.height||e.height)),this.resizeEl=this.positionEl=this.wrap},createIFrame:function(){var t=document.createElement("iframe");t.name=Ext.id(),t.frameBorder="0",t.style.overflow="auto",t.src=Ext.SSL_SECURE_URL,this.wrap.dom.appendChild(t),this.iframe=t,this.monitorTask=Ext.TaskMgr.start({run:this.checkDesignMode,scope:this,interval:100})},initFrame:function(){Ext.TaskMgr.stop(this.monitorTask);var t=this.getDoc();this.win=this.getWin(),t.open(),t.write(this.getDocMarkup()),t.close(),this.readyTask={run:function(){var t=this.getDoc();!t.body&&"complete"!=t.readyState||(Ext.TaskMgr.stop(this.readyTask),this.setDesignMode(!0),this.initEditor.defer(10,this))},interval:10,duration:1e4,scope:this},Ext.TaskMgr.start(this.readyTask)},checkDesignMode:function(){var t;this.wrap&&this.wrap.dom.offsetWidth&&((t=this.getDoc())&&(t.editorInitialized&&"on"==this.getDesignMode()||this.initFrame()))},setDesignMode:function(t){var e=this.getDoc();e&&(this.readOnly&&(t=!1),e.designMode=/on|true/i.test(String(t).toLowerCase())?"on":"off")},getDesignMode:function(){var t=this.getDoc();return t?String(t.designMode).toLowerCase():""},disableItems:function(e){this.fontSelect&&(this.fontSelect.dom.disabled=e),this.tb.items.each(function(t){"sourceedit"!=t.getItemId()&&t.setDisabled(e)})},onResize:function(t,e){var i,s;Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments),this.el&&this.iframe&&(Ext.isNumber(t)&&(s=t-this.wrap.getFrameWidth("lr"),this.el.setWidth(s),this.tb.setWidth(s),this.iframe.style.width=Math.max(s,0)+"px"),Ext.isNumber(e)&&(i=e-this.wrap.getFrameWidth("tb")-this.tb.el.getHeight(),this.el.setHeight(i),this.iframe.style.height=Math.max(i,0)+"px",(s=this.getEditorBody())&&(s.style.height=Math.max(i-2*this.iframePad,0)+"px")))},toggleSourceEdit:function(t){var e;void 0===t&&(t=!this.sourceEditMode),this.sourceEditMode=!0===t;t=this.tb.getComponent("sourceedit");t.pressed!==this.sourceEditMode&&(t.toggle(this.sourceEditMode),!t.xtbHidden)||(this.sourceEditMode?(this.previousSize=this.getSize(),e=Ext.get(this.iframe).getHeight(),this.disableItems(!0),this.syncValue(),this.iframe.className="x-hidden",this.el.removeClass("x-hidden"),this.el.dom.removeAttribute("tabIndex"),this.el.focus(),this.el.dom.style.height=e+"px"):(e=parseInt(this.el.dom.style.height,10),this.initialized&&this.disableItems(this.readOnly),this.pushValue(),this.iframe.className="",this.el.addClass("x-hidden"),this.el.dom.setAttribute("tabIndex",-1),this.deferFocus(),this.setSize(this.previousSize),delete this.previousSize,this.iframe.style.height=e+"px"),this.fireEvent("editmodechange",this,this.sourceEditMode))},createLink:function(){var t=prompt(this.createLinkText,this.defaultLinkValue);t&&"http://"!=t&&this.relayCmd("createlink",t)},initEvents:function(){this.originalValue=this.getValue()},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,setValue:function(t){return Ext.form.HtmlEditor.superclass.setValue.call(this,t),this.pushValue(),this},cleanHtml:function(t){return t=String(t),t=(t=Ext.isWebKit?t.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,""):t).charCodeAt(0)==this.defaultValue.replace(/\D/g,"")?t.substring(1):t},syncValue:function(){var t,e;this.initialized&&(t=(e=this.getEditorBody()).innerHTML,!Ext.isWebKit||(e=e.getAttribute("style").match(/text-align:(.*?);/i))&&e[1]&&(t='<div style="'+e[0]+'">'+t+"</div>"),t=this.cleanHtml(t),!1!==this.fireEvent("beforesync",this,t)&&(this.el.dom.value=t,this.fireEvent("sync",this,t)))},getValue:function(){return this[this.sourceEditMode?"pushValue":"syncValue"](),Ext.form.HtmlEditor.superclass.getValue.call(this)},pushValue:function(){var t;this.initialized&&(t=this.el.dom.value,!this.activated&&t.length<1&&(t=this.defaultValue),!1!==this.fireEvent("beforepush",this,t)&&(this.getEditorBody().innerHTML=t,Ext.isGecko&&(this.setDesignMode(!1),this.setDesignMode(!0)),this.fireEvent("push",this,t)))},deferFocus:function(){this.focus.defer(10,this)},focus:function(){(this.win&&!this.sourceEditMode?this.win:this.el).focus()},initEditor:function(){try{var t,e,i=this.getEditorBody(),s=this.el.getStyles("font-size","font-family","background-image","background-repeat","background-color","color");if(s["background-attachment"]="fixed",i.bgProperties="fixed",Ext.DomHelper.applyStyles(i,s),t=this.getDoc())try{Ext.EventManager.removeAll(t)}catch(t){}e=this.onEditorEvent.createDelegate(this),Ext.EventManager.on(t,{mousedown:e,dblclick:e,click:e,keyup:e,buffer:100}),Ext.isGecko&&Ext.EventManager.on(t,"keypress",this.applyCommand,this),(Ext.isIE||Ext.isWebKit||Ext.isOpera)&&Ext.EventManager.on(t,"keydown",this.fixKeys,this),t.editorInitialized=!0,this.initialized=!0,this.pushValue(),this.setReadOnly(this.readOnly),this.fireEvent("initialize",this)}catch(t){}},beforeDestroy:function(){if(this.monitorTask&&Ext.TaskMgr.stop(this.monitorTask),this.readyTask&&Ext.TaskMgr.stop(this.readyTask),this.rendered){Ext.destroy(this.tb);var t=this.getDoc();if(Ext.EventManager.removeFromSpecialCache(t),t)try{for(var e in Ext.EventManager.removeAll(t),t)delete t[e]}catch(t){}this.wrap&&(this.wrap.dom.innerHTML="",this.wrap.remove())}Ext.form.HtmlEditor.superclass.beforeDestroy.call(this)},onFirstFocus:function(){if(this.activated=!0,this.disableItems(this.readOnly),Ext.isGecko){this.win.focus();var t=this.win.getSelection();t.focusNode&&3==t.focusNode.nodeType||((t=t.getRangeAt(0)).selectNodeContents(this.getEditorBody()),t.collapse(!0),this.deferFocus());try{this.execCmd("useCSS",!0),this.execCmd("styleWithCSS",!1)}catch(t){}}this.fireEvent("activate",this)},adjustFont:function(t){var e="increasefontsize"==t.getItemId()?1:-1,t=this.getDoc(),t=parseInt(t.queryCommandValue("FontSize")||2,10),t=Ext.isSafari&&!Ext.isSafari2||Ext.isChrome||Ext.isAir?(t=t<=10?1+e:t<=13?2+e:t<=16?3+e:t<=18?4+e:t<=24?5+e:6+e).constrain(1,6):(Ext.isSafari&&(e*=2),Math.max(1,t+e)+(Ext.isSafari?"px":0));this.execCmd("FontSize",t)},onEditorEvent:function(t){this.updateToolbar()},updateToolbar:function(){var t,e,i;this.readOnly||(this.activated?(t=this.tb.items.map,e=this.getDoc(),!this.enableFont||Ext.isSafari2||(i=(e.queryCommandValue("FontName")||this.defaultFont).toLowerCase())!=this.fontSelect.dom.value&&(this.fontSelect.dom.value=i),this.enableFormat&&(t.bold.toggle(e.queryCommandState("bold")),t.italic.toggle(e.queryCommandState("italic")),t.underline.toggle(e.queryCommandState("underline"))),this.enableAlignments&&(t.justifyleft.toggle(e.queryCommandState("justifyleft")),t.justifycenter.toggle(e.queryCommandState("justifycenter")),t.justifyright.toggle(e.queryCommandState("justifyright"))),!Ext.isSafari2&&this.enableLists&&(t.insertorderedlist.toggle(e.queryCommandState("insertorderedlist")),t.insertunorderedlist.toggle(e.queryCommandState("insertunorderedlist"))),Ext.menu.MenuMgr.hideAll(),this.syncValue()):this.onFirstFocus())},relayBtnCmd:function(t){this.relayCmd(t.getItemId())},relayCmd:function(t,e){!function(){this.focus(),this.execCmd(t,e),this.updateToolbar()}.defer(10,this)},execCmd:function(t,e){this.getDoc().execCommand(t,!1,void 0===e?null:e),this.syncValue()},applyCommand:function(t){if(t.ctrlKey){var e,i=t.getCharCode();if(0<i){switch(String.fromCharCode(i)){case"b":e="bold";break;case"i":e="italic";break;case"u":e="underline"}e&&(this.win.focus(),this.execCmd(e),this.deferFocus(),t.preventDefault())}}},insertAtCursor:function(t){var e;this.activated&&(Ext.isIE?(this.win.focus(),(e=this.getDoc().selection.createRange())&&(e.pasteHTML(t),this.syncValue(),this.deferFocus())):(this.win.focus(),this.execCmd("InsertHTML",t),this.deferFocus()))},fixKeys:Ext.isIE?function(t){var e,i=t.getKey(),s=this.getDoc();i==t.TAB?(t.stopEvent(),(e=s.selection.createRange())&&(e.collapse(!0),e.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;"),this.deferFocus())):i==t.ENTER&&(e=s.selection.createRange())&&((s=e.parentElement())&&"li"==s.tagName.toLowerCase()||(t.stopEvent(),e.pasteHTML("<br />"),e.collapse(!1),e.select()))}:Ext.isOpera?function(t){t.getKey()==t.TAB&&(t.stopEvent(),this.win.focus(),this.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;"),this.deferFocus())}:Ext.isWebKit?function(t){var e=t.getKey();e==t.TAB?(t.stopEvent(),this.execCmd("InsertText","\t"),this.deferFocus()):e==t.ENTER&&(t.stopEvent(),this.execCmd("InsertHtml","<br /><br />"),this.deferFocus())}:void 0,getToolbar:function(){return this.tb},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}}}),Ext.reg("htmleditor",Ext.form.HtmlEditor),Ext.form.TimeField=Ext.extend(Ext.form.ComboBox,{minValue:void 0,maxValue:void 0,minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",increment:15,mode:"local",triggerAction:"all",typeAhead:!1,initDate:"1/1/2008",initDateFormat:"j/n/Y",initComponent:function(){Ext.isDefined(this.minValue)&&this.setMinValue(this.minValue,!0),Ext.isDefined(this.maxValue)&&this.setMaxValue(this.maxValue,!0),this.store||this.generateStore(!0),Ext.form.TimeField.superclass.initComponent.call(this)},setMinValue:function(t,e){return this.setLimit(t,!0,e),this},setMaxValue:function(t,e){return this.setLimit(t,!1,e),this},generateStore:function(t){for(var e=this.minValue||new Date(this.initDate).clearTime(),i=this.maxValue||new Date(this.initDate).clearTime().add("mi",1439),s=[];e<=i;)s.push(e.dateFormat(this.format)),e=e.add("mi",this.increment);this.bindStore(s,t)},setLimit:function(t,e,i){var s;Ext.isString(t)?s=this.parseDate(t):Ext.isDate(t)&&(s=t),s&&((t=new Date(this.initDate).clearTime()).setHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),this[e?"minValue":"maxValue"]=t,i||this.generateStore())},getValue:function(){var t=Ext.form.TimeField.superclass.getValue.call(this);return this.formatDate(this.parseDate(t))||""},setValue:function(t){return Ext.form.TimeField.superclass.setValue.call(this,this.formatDate(this.parseDate(t)))},validateValue:Ext.form.DateField.prototype.validateValue,formatDate:Ext.form.DateField.prototype.formatDate,parseDate:function(t){if(!t||Ext.isDate(t))return t;var e=this.initDate+" ",i=this.initDateFormat+" ",s=Date.parseDate(e+t,i+this.format),n=this.altFormats;if(!s&&n){this.altFormatsArray||(this.altFormatsArray=n.split("|"));for(var r=0,o=this.altFormatsArray,a=o.length;r<a&&!s;r++)s=Date.parseDate(e+t,i+o[r])}return s}}),Ext.reg("timefield",Ext.form.TimeField),Ext.form.SliderField=Ext.extend(Ext.form.Field,{useTips:!0,tipText:null,actionMode:"wrap",initComponent:function(){var t,e=Ext.copyTo({id:this.id+"-slider"},this.initialConfig,["vertical","minValue","maxValue","decimalPrecision","keyIncrement","increment","clickToChange","animate"]);this.useTips&&(t=this.tipText?{getText:this.tipText}:{},e.plugins=[new Ext.slider.Tip(t)]),this.slider=new Ext.Slider(e),Ext.form.SliderField.superclass.initComponent.call(this)},onRender:function(t,e){this.autoCreate={id:this.id,name:this.name,type:"hidden",tag:"input"},Ext.form.SliderField.superclass.onRender.call(this,t,e),this.wrap=this.el.wrap({cls:"x-form-field-wrap"}),this.resizeEl=this.positionEl=this.wrap,this.slider.render(this.wrap)},onResize:function(t,e,i,s){Ext.form.SliderField.superclass.onResize.call(this,t,e,i,s),this.slider.setSize(t,e)},initEvents:function(){Ext.form.SliderField.superclass.initEvents.call(this),this.slider.on("change",this.onChange,this)},onChange:function(t,e){this.setValue(e,void 0,!0)},onEnable:function(){Ext.form.SliderField.superclass.onEnable.call(this),this.slider.enable()},onDisable:function(){Ext.form.SliderField.superclass.onDisable.call(this),this.slider.disable()},beforeDestroy:function(){Ext.destroy(this.slider),Ext.form.SliderField.superclass.beforeDestroy.call(this)},alignErrorIcon:function(){this.errorIcon.alignTo(this.slider.el,"tl-tr",[2,0])},setMinValue:function(t){return this.slider.setMinValue(t),this},setMaxValue:function(t){return this.slider.setMaxValue(t),this},setValue:function(t,e,i){return i||this.slider.setValue(t,e),Ext.form.SliderField.superclass.setValue.call(this,this.slider.getValue())},getValue:function(){return this.slider.getValue()}}),Ext.reg("sliderfield",Ext.form.SliderField),Ext.form.Label=Ext.extend(Ext.BoxComponent,{onRender:function(t,e){this.el||(this.el=document.createElement("label"),this.el.id=this.getId(),this.el.innerHTML=this.text?Ext.util.Format.htmlEncode(this.text):this.html||"",this.forId&&this.el.setAttribute("for",this.forId)),Ext.form.Label.superclass.onRender.call(this,t,e)},setText:function(t,e){var i=!1===e;return this[i?"html":"text"]=t,delete this[i?"text":"html"],this.rendered&&(this.el.dom.innerHTML=!1!==e?Ext.util.Format.htmlEncode(t):t),this}}),Ext.reg("label",Ext.form.Label),Ext.form.Action=function(t,e){this.form=t,this.options=e||{}},Ext.form.Action.CLIENT_INVALID="client",Ext.form.Action.SERVER_INVALID="server",Ext.form.Action.CONNECT_FAILURE="connect",Ext.form.Action.LOAD_FAILURE="load",Ext.form.Action.prototype={type:"default",run:function(t){},success:function(t){},handleResponse:function(t){},failure:function(t){this.response=t,this.failureType=Ext.form.Action.CONNECT_FAILURE,this.form.afterAction(this,!1)},processResponse:function(t){return!(this.response=t).responseText&&!t.responseXML||(this.result=this.handleResponse(t),this.result)},decodeResponse:function(t){try{return Ext.decode(t.responseText)}catch(t){return!1}},getUrl:function(t){var e=this.options.url||this.form.url||this.form.el.dom.action;return!t||(t=this.getParams())&&(e=Ext.urlAppend(e,t)),e},getMethod:function(){return(this.options.method||this.form.method||this.form.el.dom.method||"POST").toUpperCase()},getParams:function(){var t=this.form.baseParams,e=this.options.params;return e?"object"==typeof e?e=Ext.urlEncode(Ext.applyIf(e,t)):"string"==typeof e&&t&&(e+="&"+Ext.urlEncode(t)):t&&(e=Ext.urlEncode(t)),e},createCallback:function(t){t=t||{};return{success:this.success,failure:this.failure,scope:this,timeout:1e3*t.timeout||1e3*this.form.timeout,upload:this.form.fileUpload?this.success:void 0}}},Ext.form.Action.Submit=function(t,e){Ext.form.Action.Submit.superclass.constructor.call(this,t,e)},Ext.extend(Ext.form.Action.Submit,Ext.form.Action,{type:"submit",run:function(){var t,e,i,s=this.options,n=this.getMethod(),r="GET"==n;!1===s.clientValidation||this.form.isValid()?(!1===s.submitEmptyText&&(t=this.form.items,e=[],t.each(i=function(t){t.el.getValue()==t.emptyText&&(e.push(t),t.el.dom.value=""),t.isComposite&&t.rendered&&t.items.each(i)})),Ext.Ajax.request(Ext.apply(this.createCallback(s),{form:this.form.el.dom,url:this.getUrl(r),method:n,headers:s.headers,params:r?null:this.getParams(),isUpload:this.form.fileUpload})),!1===s.submitEmptyText&&Ext.each(e,function(t){t.applyEmptyText&&t.applyEmptyText()})):!1!==s.clientValidation&&(this.failureType=Ext.form.Action.CLIENT_INVALID,this.form.afterAction(this,!1))},success:function(t){t=this.processResponse(t);!0===t||t.success?this.form.afterAction(this,!0):(t.errors&&this.form.markInvalid(t.errors),this.failureType=Ext.form.Action.SERVER_INVALID,this.form.afterAction(this,!1))},handleResponse:function(t){if(this.form.errorReader){var e=this.form.errorReader.read(t),i=[];if(e.records)for(var s=0,n=e.records.length;s<n;s++){var r=e.records[s];i[s]=r.data}return i.length<1&&(i=null),{success:e.success,errors:i}}return this.decodeResponse(t)}}),Ext.form.Action.Load=function(t,e){Ext.form.Action.Load.superclass.constructor.call(this,t,e),this.reader=this.form.reader},Ext.extend(Ext.form.Action.Load,Ext.form.Action,{type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(this.options),{method:this.getMethod(),url:this.getUrl(!1),headers:this.options.headers,params:this.getParams()}))},success:function(t){t=this.processResponse(t);if(!0===t||!t.success||!t.data)return this.failureType=Ext.form.Action.LOAD_FAILURE,void this.form.afterAction(this,!1);this.form.clearInvalid(),this.form.setValues(t.data),this.form.afterAction(this,!0)},handleResponse:function(t){if(this.form.reader){var e=this.form.reader.read(t),i=e.records&&e.records[0]?e.records[0].data:null;return{success:e.success,data:i}}return this.decodeResponse(t)}}),Ext.form.Action.DirectLoad=Ext.extend(Ext.form.Action.Load,{constructor:function(t,e){Ext.form.Action.DirectLoad.superclass.constructor.call(this,t,e)},type:"directload",run:function(){var t=this.getParams();t.push(this.success,this),this.form.api.load.apply(window,t)},getParams:function(){var t=[],e={},i=this.form.baseParams,s=this.options.params;Ext.apply(e,s,i);var n=this.form.paramOrder;if(n)for(var r=0,o=n.length;r<o;r++)t.push(e[n[r]]);else this.form.paramsAsHash&&t.push(e);return t},processResponse:function(t){return this.result=t},success:function(t,e){e.type==Ext.Direct.exceptions.SERVER&&(t={}),Ext.form.Action.DirectLoad.superclass.success.call(this,t)}}),Ext.form.Action.DirectSubmit=Ext.extend(Ext.form.Action.Submit,{constructor:function(t,e){Ext.form.Action.DirectSubmit.superclass.constructor.call(this,t,e)},type:"directsubmit",run:function(){var t=this.options;!1===t.clientValidation||this.form.isValid()?(this.success.params=this.getParams(),this.form.api.submit(this.form.el.dom,this.success,this)):!1!==t.clientValidation&&(this.failureType=Ext.form.Action.CLIENT_INVALID,this.form.afterAction(this,!1))},getParams:function(){var t={},e=this.form.baseParams,i=this.options.params;return Ext.apply(t,i,e),t},processResponse:function(t){return this.result=t},success:function(t,e){e.type==Ext.Direct.exceptions.SERVER&&(t={}),Ext.form.Action.DirectSubmit.superclass.success.call(this,t)}}),Ext.form.Action.ACTION_TYPES={load:Ext.form.Action.Load,submit:Ext.form.Action.Submit,directload:Ext.form.Action.DirectLoad,directsubmit:Ext.form.Action.DirectSubmit},Ext.form.VTypes=function(){var e=/^[a-zA-Z_]+$/,i=/^[a-zA-Z0-9_]+$/,s=/^(\w+)([\-+.\'][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,n=/(((^https?)|(^ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return{email:function(t){return s.test(t)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[a-z0-9_\.\-\+\'@]/i,url:function(t){return n.test(t)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(t){return e.test(t)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(t){return i.test(t)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}(),Ext.grid.GridPanel=Ext.extend(Ext.Panel,{autoExpandColumn:!1,autoExpandMax:1e3,autoExpandMin:50,columnLines:!1,ddText:"{0} selected row{1}",deferRowRender:!0,enableColumnHide:!0,enableColumnMove:!0,enableDragDrop:!1,enableHdMenu:!0,loadMask:!1,minColumnWidth:25,stripeRows:!1,trackMouseOver:!0,stateEvents:["columnmove","columnresize","sortchange","groupchange"],view:null,bubbleEvents:[],rendered:!1,viewReady:!1,initComponent:function(){Ext.grid.GridPanel.superclass.initComponent.call(this),this.columnLines&&(this.cls=(this.cls||"")+" x-grid-with-col-lines"),this.autoScroll=!1,this.autoWidth=!1,Ext.isArray(this.columns)&&(this.colModel=new Ext.grid.ColumnModel(this.columns),delete this.columns),this.ds&&(this.store=this.ds,delete this.ds),this.cm&&(this.colModel=this.cm,delete this.cm),this.sm&&(this.selModel=this.sm,delete this.sm),this.store=Ext.StoreMgr.lookup(this.store),this.addEvents("click","dblclick","contextmenu","mousedown","mouseup","mouseover","mouseout","keypress","keydown","cellmousedown","rowmousedown","headermousedown","groupmousedown","rowbodymousedown","containermousedown","cellclick","celldblclick","rowclick","rowdblclick","headerclick","headerdblclick","groupclick","groupdblclick","containerclick","containerdblclick","rowbodyclick","rowbodydblclick","rowcontextmenu","cellcontextmenu","headercontextmenu","groupcontextmenu","containercontextmenu","rowbodycontextmenu","bodyscroll","columnresize","columnmove","sortchange","groupchange","reconfigure","viewready")},onRender:function(t,e){Ext.grid.GridPanel.superclass.onRender.apply(this,arguments);var i=this.getGridEl();this.el.addClass("x-grid-panel"),this.mon(i,{scope:this,mousedown:this.onMouseDown,click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu}),this.relayEvents(i,["mousedown","mouseup","mouseover","mouseout","keypress","keydown"]);i=this.getView();i.init(this),i.render(),this.getSelectionModel().init(this)},initEvents:function(){Ext.grid.GridPanel.superclass.initEvents.call(this),this.loadMask&&(this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({store:this.store},this.loadMask)))},initStateEvents:function(){Ext.grid.GridPanel.superclass.initStateEvents.call(this),this.mon(this.colModel,"hiddenchange",this.saveState,this,{delay:100})},applyState:function(t){var e,i,s,n=this.colModel,r=t.columns,o=this.store;if(r)for(var a=0,l=r.length;a<l;a++)e=r[a],(i=n.getColumnById(e.id))&&(s=n.getIndexById(e.id),n.setState(s,{hidden:e.hidden,width:e.width,sortable:i.sortable,editable:i.editable}),s!=a&&n.moveColumn(s,a));o&&((e=t.sort)&&o[o.remoteSort?"setDefaultSort":"sort"](e.field,e.direction),e=t.group,o.groupBy&&(e?o.groupBy(e):o.clearGrouping()));t=Ext.apply({},t);delete t.columns,delete t.sort,Ext.grid.GridPanel.superclass.applyState.call(this,t)},getState:function(){for(var t,e,i,s={columns:[]},n=this.store,r=0;i=this.colModel.config[r];r++)s.columns[r]={id:i.id,width:i.width},i.hidden&&(s.columns[r].hidden=!0);return n&&((t=n.getSortState())&&(s.sort=t),n.getGroupState&&(e=n.getGroupState())&&(s.group=e)),s},afterRender:function(){Ext.grid.GridPanel.superclass.afterRender.call(this);var t=this.view;this.on("bodyresize",t.layout,t),t.layout(!0),this.deferRowRender?(this.deferRowRenderTask||(this.deferRowRenderTask=new Ext.util.DelayedTask(t.afterRender,this.view)),this.deferRowRenderTask.delay(10)):t.afterRender(),this.viewReady=!0},reconfigure:function(t,e){var i=this.rendered;i&&this.loadMask&&(this.loadMask.destroy(),this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({},{store:t},this.initialConfig.loadMask))),this.view&&this.view.initData(t,e),this.store=t,this.colModel=e,i&&this.view.refresh(!0),this.fireEvent("reconfigure",this,t,e)},onDestroy:function(){this.deferRowRenderTask&&this.deferRowRenderTask.cancel&&this.deferRowRenderTask.cancel(),this.rendered?Ext.destroy(this.view,this.loadMask):this.store&&this.store.autoDestroy&&this.store.destroy(),Ext.destroy(this.colModel,this.selModel),this.store=this.selModel=this.colModel=this.view=this.loadMask=null,Ext.grid.GridPanel.superclass.onDestroy.call(this)},processEvent:function(t,e){this.view.processEvent(t,e)},onClick:function(t){this.processEvent("click",t)},onMouseDown:function(t){this.processEvent("mousedown",t)},onContextMenu:function(t,e){this.processEvent("contextmenu",t)},onDblClick:function(t){this.processEvent("dblclick",t)},walkCells:function(t,e,i,s,n){var r=this.colModel,o=r.getColumnCount(),a=this.store.getCount(),l=!0;if(i<0)for(e<0&&(t--,l=!1);0<=t;){for(l||(e=o-1),l=!1;0<=e;){if(!0===s.call(n||this,t,e,r))return[t,e];e--}t--}else for(o<=e&&(t++,l=!1);t<a;){for(l||(e=0),l=!1;e<o;){if(!0===s.call(n||this,t,e,r))return[t,e];e++}t++}return null},getGridEl:function(){return this.body},stopEditing:Ext.emptyFn,getSelectionModel:function(){return this.selModel||(this.selModel=new Ext.grid.RowSelectionModel(this.disableSelection?{selectRow:Ext.emptyFn}:null)),this.selModel},getStore:function(){return this.store},getColumnModel:function(){return this.colModel},getView:function(){return this.view||(this.view=new Ext.grid.GridView(this.viewConfig)),this.view},getDragDropText:function(){var t=this.selModel.getCount?this.selModel.getCount():1;return String.format(this.ddText,t,1==t?"":"s")}}),Ext.reg("grid",Ext.grid.GridPanel),Ext.grid.PivotGrid=Ext.extend(Ext.grid.GridPanel,{aggregator:"sum",renderer:void 0,initComponent:function(){Ext.grid.PivotGrid.superclass.initComponent.apply(this,arguments),this.initAxes(),this.enableColumnResize=!1,this.viewConfig=Ext.apply(this.viewConfig||{},{forceFit:!0}),this.colModel=new Ext.grid.ColumnModel({})},getAggregator:function(){return"string"==typeof this.aggregator?Ext.grid.PivotAggregatorMgr.types[this.aggregator]:this.aggregator},setAggregator:function(t){this.aggregator=t},setMeasure:function(t){this.measure=t},setLeftAxis:function(t,e){this.leftAxis=t,e&&this.view.refresh()},setTopAxis:function(t,e){this.topAxis=t,e&&this.view.refresh()},initAxes:function(){var t=Ext.grid.PivotAxis;this.leftAxis instanceof t||this.setLeftAxis(new t({orientation:"vertical",dimensions:this.leftAxis||[],store:this.store})),this.topAxis instanceof t||this.setTopAxis(new t({orientation:"horizontal",dimensions:this.topAxis||[],store:this.store}))},extractData:function(){var t,e,i,s=this.store.data.items,n=s.length,r=[];if(0==n)return[];for(var o=this.leftAxis.getTuples(),a=o.length,l=this.topAxis.getTuples(),d=l.length,h=this.getAggregator(),c=0;c<n;c++)for(t=s[c],e=0;e<a;e++)if(r[e]=r[e]||[],!0===o[e].matcher(t))for(i=0;i<d;i++)r[e][i]=r[e][i]||[],l[i].matcher(t)&&r[e][i].push(t);var u,f=r.length;for(c=0;c<f;c++)for(u=r[c].length,e=0;e<u;e++)r[c][e]=h(r[c][e],this.measure);return r},getView:function(){return this.view||(this.view=new Ext.grid.PivotGridView(this.viewConfig)),this.view}}),Ext.reg("pivotgrid",Ext.grid.PivotGrid),Ext.grid.PivotAggregatorMgr=new Ext.AbstractManager,Ext.grid.PivotAggregatorMgr.registerType("sum",function(t,e){for(var i=t.length,s=0,n=0;n<i;n++)s+=t[n].get(e);return s}),Ext.grid.PivotAggregatorMgr.registerType("avg",function(t,e){for(var i=t.length,s=0,n=0;n<i;n++)s+=t[n].get(e);return s/i||"n/a"}),Ext.grid.PivotAggregatorMgr.registerType("min",function(t,e){for(var i=[],s=t.length,n=0;n<s;n++)i.push(t[n].get(e));return Math.min.apply(this,i)||"n/a"}),Ext.grid.PivotAggregatorMgr.registerType("max",function(t,e){for(var i=[],s=t.length,n=0;n<s;n++)i.push(t[n].get(e));return Math.max.apply(this,i)||"n/a"}),Ext.grid.PivotAggregatorMgr.registerType("count",function(t,e){return t.length}),Ext.grid.GridView=Ext.extend(Ext.util.Observable,{deferEmptyText:!0,scrollOffset:void 0,autoFill:!1,forceFit:!1,sortClasses:["sort-asc","sort-desc"],sortAscText:"Sort Ascending",sortDescText:"Sort Descending",hideSortIcons:!1,columnsText:"Columns",selectedRowClass:"x-grid3-row-selected",borderWidth:2,tdClass:"x-grid3-cell",hdCls:"x-grid3-hd",markDirty:!0,cellSelectorDepth:4,rowSelectorDepth:10,rowBodySelectorDepth:10,cellSelector:"td.x-grid3-cell",rowSelector:"div.x-grid3-row",rowBodySelector:"div.x-grid3-row-body",firstRowCls:"x-grid3-row-first",lastRowCls:"x-grid3-row-last",rowClsRe:/(?:^|\s+)x-grid3-row-(first|last|alt)(?:\s+|$)/g,headerMenuOpenCls:"x-grid3-hd-menu-open",rowOverCls:"x-grid3-row-over",constructor:function(t){Ext.apply(this,t),this.addEvents("beforerowremoved","beforerowsinserted","beforerefresh","rowremoved","rowsinserted","rowupdated","refresh"),Ext.grid.GridView.superclass.constructor.call(this)},masterTpl:new Ext.Template('<div class="x-grid3" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header">','<div class="x-grid3-header-inner">','<div class="x-grid3-header-offset" style="{ostyle}">{header}</div>',"</div>",'<div class="x-clear"></div>',"</div>",'<div class="x-grid3-scroller">','<div class="x-grid3-body" style="{bstyle}">{body}</div>','<a href="#" class="x-grid3-focus" tabIndex="-1"></a>',"</div>","</div>",'<div class="x-grid3-resize-marker">&#160;</div>','<div class="x-grid3-resize-proxy">&#160;</div>',"</div>"),headerTpl:new Ext.Template('<table border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<thead>",'<tr class="x-grid3-hd-row">{cells}</tr>',"</thead>","</table>"),bodyTpl:new Ext.Template("{rows}"),cellTpl:new Ext.Template('<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}" tabIndex="0" {cellAttr}>','<div class="x-grid3-cell-inner x-grid3-col-{id} x-unselectable" unselectable="on" {attr}>{value}</div>',"</td>"),initTemplates:function(){var t,e,i=this.templates||{},s=new Ext.Template('<td class="x-grid3-hd x-grid3-cell x-grid3-td-{id} {css}" style="{style}">','<div {tooltip} {attr} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"","{value}",'<img alt="" class="x-grid3-sort-icon" src="',Ext.BLANK_IMAGE_URL,'" />',"</div>","</td>"),n=['<tr class="x-grid3-row-body-tr" style="{bodyStyle}">','<td colspan="{cols}" class="x-grid3-body-cell" tabIndex="0" hidefocus="on">','<div class="x-grid3-row-body">{body}</div>',"</td>","</tr>"].join(""),n=['<table class="x-grid3-row-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody>","<tr>{cells}</tr>",this.enableRowBody?n:"","</tbody>","</table>"].join("");for(e in Ext.applyIf(i,{hcell:s,cell:this.cellTpl,body:this.bodyTpl,header:this.headerTpl,master:this.masterTpl,row:new Ext.Template('<div class="x-grid3-row {alt}" style="{tstyle}">'+n+"</div>"),rowInner:new Ext.Template(n)}),i)(t=i[e])&&Ext.isFunction(t.compile)&&!t.compiled&&(t.disableFormats=!0,t.compile());this.templates=i,this.colRe=new RegExp("x-grid3-td-([^\\s]+)","")},fly:function(t){return this._flyweight||(this._flyweight=new Ext.Element.Flyweight(document.body)),this._flyweight.dom=t,this._flyweight},getEditorParent:function(){return this.scroller.dom},initElements:function(){var t=Ext.Element,e=Ext.get(this.grid.getGridEl().dom.firstChild),i=new t(e.child("div.x-grid3-viewport")),s=new t(i.child("div.x-grid3-header")),n=new t(i.child("div.x-grid3-scroller"));this.grid.hideHeaders&&s.setDisplayed(!1),this.forceFit&&n.setStyle("overflow-x","hidden"),Ext.apply(this,{el:e,mainWrap:i,scroller:n,mainHd:s,innerHd:s.child("div.x-grid3-header-inner").dom,mainBody:new t(t.fly(n).child("div.x-grid3-body")),focusEl:new t(t.fly(n).child("a")),resizeMarker:new t(e.child("div.x-grid3-resize-marker")),resizeProxy:new t(e.child("div.x-grid3-resize-proxy"))}),this.focusEl.swallowEvent("click",!0)},getRows:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},findCell:function(t){return!!t&&this.fly(t).findParent(this.cellSelector,this.cellSelectorDepth)},findCellIndex:function(t,e){var i=this.findCell(t);return!(!i||(t=this.fly(i).hasClass(e),e&&!t))&&this.getCellIndex(i)},getCellIndex:function(t){if(t){t=t.className.match(this.colRe);if(t&&t[1])return this.cm.getIndexById(t[1])}return!1},findHeaderCell:function(t){t=this.findCell(t);return t&&this.fly(t).hasClass(this.hdCls)?t:null},findHeaderIndex:function(t){return this.findCellIndex(t,this.hdCls)},findRow:function(t){return!!t&&this.fly(t).findParent(this.rowSelector,this.rowSelectorDepth)},findRowIndex:function(t){t=this.findRow(t);return!!t&&t.rowIndex},findRowBody:function(t){return!!t&&this.fly(t).findParent(this.rowBodySelector,this.rowBodySelectorDepth)},getRow:function(t){return this.getRows()[t]},getCell:function(t,e){return Ext.fly(this.getRow(t)).query(this.cellSelector)[e]},getHeaderCell:function(t){return this.mainHd.dom.getElementsByTagName("td")[t]},addRowClass:function(t,e){t=this.getRow(t);t&&this.fly(t).addClass(e)},removeRowClass:function(t,e){t=this.getRow(t);t&&this.fly(t).removeClass(e)},removeRow:function(t){Ext.removeNode(this.getRow(t)),this.syncFocusEl(t)},removeRows:function(t,e){for(var i=this.mainBody.dom,s=t;s<=e;s++)Ext.removeNode(i.childNodes[t]);this.syncFocusEl(t)},getScrollState:function(){var t=this.scroller.dom;return{left:t.scrollLeft,top:t.scrollTop}},restoreScroll:function(t){var e=this.scroller.dom;e.scrollLeft=t.left,e.scrollTop=t.top},scrollToTop:function(){var t=this.scroller.dom;t.scrollTop=0,t.scrollLeft=0},syncScroll:function(){this.syncHeaderScroll();var t=this.scroller.dom;this.grid.fireEvent("bodyscroll",t.scrollLeft,t.scrollTop)},syncHeaderScroll:function(){var t=this.innerHd,e=this.scroller.dom.scrollLeft;t.scrollLeft=e,t.scrollLeft=e},updateSortIcon:function(t,e){var i=this.sortClasses,e=i["DESC"==e?1:0];this.mainHd.select("td").removeClass(i).item(t).addClass(e)},updateAllColumnWidths:function(){for(var t,e,i,s=this.getTotalWidth(),n=this.cm.getColumnCount(),r=this.getRows(),o=r.length,a=[],l=0;l<n;l++)a[l]=this.getColumnWidth(l),this.getHeaderCell(l).style.width=a[l];for(this.updateHeaderWidth(),l=0;l<o;l++)if((t=r[l]).style.width=s,t=t.firstChild)for(t.style.width=s,e=t.rows[0],i=0;i<n;i++)e.childNodes[i].style.width=a[i];this.onAllColumnWidthsUpdated(a,s)},updateColumnWidth:function(t,e){var i,s,n,r=this.getColumnWidth(t),o=this.getTotalWidth(),a=this.getHeaderCell(t),l=this.getRows(),d=l.length;for(this.updateHeaderWidth(),a.style.width=r,s=0;s<d;s++)n=(i=l[s]).firstChild,i.style.width=o,n&&(n.style.width=o,n.rows[0].childNodes[t].style.width=r);this.onColumnWidthUpdated(t,r,o)},updateColumnHidden:function(t,e){var i,s,n=this.getTotalWidth(),r=e?"none":"",o=this.getHeaderCell(t),a=this.getRows(),l=a.length;for(this.updateHeaderWidth(),o.style.display=r,s=0;s<l;s++)(i=a[s]).style.width=n,(i=i.firstChild)&&(i.style.width=n,i.rows[0].childNodes[t].style.display=r);this.onColumnHiddenUpdated(t,e,n),delete this.lastViewWidth,this.layout()},doRender:function(t,e,i,s,n,r){for(var o,a,l,d,h,c=this.templates,u=c.cell,f=c.row,p=n-1,m=[],g=[],x={tstyle:"width:"+this.getTotalWidth()+";"},E={},v=e.length,y=0;y<v;y++){for(l=e[y],g=[],h=y+s,d=0;d<n;d++)a=t[d],E.id=a.id,E.css=0===d?"x-grid3-cell-first ":d==p?"x-grid3-cell-last ":"",E.attr=E.cellAttr="",E.style=a.style,E.value=a.renderer.call(a.scope,l.data[a.name],E,l,h,d,i),Ext.isEmpty(E.value)&&(E.value="&#160;"),this.markDirty&&l.dirty&&void 0!==l.modified[a.name]&&(E.css+=" x-grid3-dirty-cell"),g[g.length]=u.apply(E);o=[],r&&(h+1)%2==0&&(o[0]="x-grid3-row-alt"),l.dirty&&(o[1]=" x-grid3-dirty-row"),x.cols=n,this.getRowClass&&(o[2]=this.getRowClass(l,h,x,i)),x.alt=o.join(" "),x.cells=g.join(""),m[m.length]=f.apply(x)}return m.join("")},processRows:function(t,e){if(this.ds&&!(this.ds.getCount()<1)){var i,s,n=this.getRows(),r=n.length;for(e=e||!this.grid.stripeRows,t=t||0,s=0;s<r;s++)(i=n[s])&&(i.rowIndex=s,e||(i.className=i.className.replace(this.rowClsRe," "),(s+1)%2==0&&(i.className+=" x-grid3-row-alt")));0===t&&Ext.fly(n[0]).addClass(this.firstRowCls),Ext.fly(n[r-1]).addClass(this.lastRowCls)}},afterRender:function(){this.ds&&this.cm&&(this.mainBody.dom.innerHTML=this.renderBody()||"&#160;",this.processRows(0,!0),!0!==this.deferEmptyText&&this.applyEmptyText(),this.grid.fireEvent("viewready",this.grid))},afterRenderUI:function(){var t=this.grid;this.initElements(),Ext.fly(this.innerHd).on("click",this.handleHdDown,this),this.mainHd.on({scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut,mousemove:this.handleHdMove}),this.scroller.on("scroll",this.syncScroll,this),!1!==t.enableColumnResize&&(this.splitZone=new Ext.grid.GridView.SplitDragZone(t,this.mainHd.dom)),t.enableColumnMove&&(this.columnDrag=new Ext.grid.GridView.ColumnDragZone(t,this.innerHd),this.columnDrop=new Ext.grid.HeaderDropZone(t,this.mainHd.dom)),!1!==t.enableHdMenu&&(this.hmenu=new Ext.menu.Menu({id:t.id+"-hctx"}),this.hmenu.add({itemId:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{itemId:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"}),!1!==t.enableColumnHide&&(this.colMenu=new Ext.menu.Menu({id:t.id+"-hcols-menu"}),this.colMenu.on({scope:this,beforeshow:this.beforeColMenuShow,itemclick:this.handleHdMenuClick}),this.hmenu.add({itemId:"sortSep",xtype:"menuseparator"},{itemId:"columns",hideOnClick:!1,text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"})),this.hmenu.on("itemclick",this.handleHdMenuClick,this)),t.trackMouseOver&&this.mainBody.on({scope:this,mouseover:this.onRowOver,mouseout:this.onRowOut}),(t.enableDragDrop||t.enableDrag)&&(this.dragZone=new Ext.grid.GridDragZone(t,{ddGroup:t.ddGroup||"GridDD"})),this.updateHeaderSortState()},renderUI:function(){var t=this.templates;return t.master.apply({body:t.body.apply({rows:"&#160;"}),header:this.renderHeaders(),ostyle:"width:"+this.getOffsetWidth()+";",bstyle:"width:"+this.getTotalWidth()+";"})},processEvent:function(t,e){var i,s,n=e.getTarget(),r=this.grid,o=this.findHeaderIndex(n);r.fireEvent(t,e),!1!==o?r.fireEvent("header"+t,r,o,e):!1!==(i=this.findRowIndex(n))?!1!==(s=this.findCellIndex(n))?(o=r.colModel.getColumnAt(s),!1!==r.fireEvent("cell"+t,r,i,s,e)&&(!o||o.processEvent&&!1!==o.processEvent(t,e,r,i,s))&&r.fireEvent("row"+t,r,i,e)):!1!==r.fireEvent("row"+t,r,i,e)&&this.findRowBody(n)&&r.fireEvent("rowbody"+t,r,i,e):r.fireEvent("container"+t,r,e)},layout:function(t){var e,i,s,n,r;this.mainBody&&(e=(s=(n=this.grid).getGridEl().getSize(!0)).width,i=s.height,s=this.scroller,e<20||i<20||(n.autoHeight?((n=s.dom.style).overflow="visible",Ext.isWebKit&&(n.position="static")):(this.el.setSize(e,i),r=this.mainHd.getHeight(),s.setSize(e,r=i-r),this.innerHd&&(this.innerHd.style.width=e+"px")),this.forceFit||!0===t&&this.autoFill?this.lastViewWidth!=e&&(this.fitColumns(!1,!1),this.lastViewWidth=e):(this.autoExpand(),this.syncHeaderScroll()),this.onLayout(e,r)))},onLayout:function(t,e){},onColumnWidthUpdated:function(t,e,i){},onAllColumnWidthsUpdated:function(t,e){},onColumnHiddenUpdated:function(t,e,i){},updateColumnText:function(t,e){},afterMove:function(t){},init:function(t){this.grid=t,this.initTemplates(),this.initData(t.store,t.colModel),this.initUI(t)},getColumnId:function(t){return this.cm.getColumnId(t)},getOffsetWidth:function(){return this.cm.getTotalWidth()+this.getScrollOffset()+"px"},getScrollOffset:function(){return Ext.num(this.scrollOffset,Ext.getScrollBarWidth())},renderHeaders:function(){for(var t,e=this.cm,i=this.templates,s=i.hcell,n={},r=e.getColumnCount(),o=r-1,a=[],l=0;l<r;l++)t=0==l?"x-grid3-cell-first ":l==o?"x-grid3-cell-last ":"",n={id:e.getColumnId(l),value:e.getColumnHeader(l)||"",style:this.getColumnStyle(l,!0),css:t,tooltip:this.getColumnTooltip(l)},"right"==e.config[l].align?n.istyle="padding-right: 16px;":delete n.istyle,a[l]=s.apply(n);return i.header.apply({cells:a.join(""),tstyle:String.format("width: {0};",this.getTotalWidth())})},getColumnTooltip:function(t){t=this.cm.getColumnTooltip(t);return t?Ext.QuickTips.isEnabled()?'ext:qtip="'+t+'"':'title="'+t+'"':""},beforeUpdate:function(){this.grid.stopEditing(!0)},updateHeaders:function(){this.innerHd.firstChild.innerHTML=this.renderHeaders(),this.updateHeaderWidth(!1)},updateHeaderWidth:function(t){var e=this.innerHd.firstChild,i=this.getTotalWidth();e.style.width=this.getOffsetWidth(),e.firstChild.style.width=i,!1!==t&&(this.mainBody.dom.style.width=i)},focusRow:function(t){this.focusCell(t,0,!1)},focusCell:function(t,e,i){this.syncFocusEl(this.ensureVisible(t,e,i));i=this.focusEl;Ext.isGecko?i.focus():i.focus.defer(1,i)},resolveCell:function(t,e,i){if(Ext.isNumber(t)||(t=t.rowIndex),!this.ds)return null;if(t<0||t>=this.ds.getCount())return null;e=void 0!==e?e:0;var s,n=this.getRow(t),r=this.cm,o=r.getColumnCount();if(!1!==i||0!==e){for(;e<o&&r.isHidden(e);)e++;s=this.getCell(t,e)}return{row:n,cell:s}},getResolvedXY:function(t){if(!t)return null;var e=t.cell,t=t.row;return e?Ext.fly(e).getXY():[this.el.getX(),Ext.fly(t).getY()]},syncFocusEl:function(t,e,i){var s=t;if(!Ext.isArray(s)){if(t=Math.min(t,Math.max(0,this.getRows().length-1)),isNaN(t))return;s=this.getResolvedXY(this.resolveCell(t,e,i))}this.focusEl.setXY(s||this.scroller.getXY())},ensureVisible:function(t,e,i){var s=this.resolveCell(t,e,i);if(!s||!s.row)return null;for(var n=s.row,r=s.cell,o=this.scroller.dom,a=n,l=0,d=this.el.dom;a&&a!=d;)l+=a.offsetTop,a=a.offsetParent;l-=this.mainHd.dom.offsetHeight;var d=parseInt(o.scrollTop,10),t=l+n.offsetHeight,e=o.clientHeight,n=d+e;return l<d?o.scrollTop=l:n<t&&(o.scrollTop=t-e),!1!==i&&(e=(t=parseInt(r.offsetLeft,10))+r.offsetWidth,r=(i=parseInt(o.scrollLeft,10))+o.clientWidth,t<i?o.scrollLeft=t:r<e&&(o.scrollLeft=e-o.clientWidth)),this.getResolvedXY(s)},insertRows:function(t,e,i,s){var n,r=t.getCount()-1;!s&&0===e&&r<=i?(this.fireEvent("beforerowsinserted",this,e,i),this.refresh(),this.fireEvent("rowsinserted",this,e,i)):(s||this.fireEvent("beforerowsinserted",this,e,i),n=this.renderRows(e,i),(t=this.getRow(e))?(0===e&&Ext.fly(this.getRow(0)).removeClass(this.firstRowCls),Ext.DomHelper.insertHtml("beforeBegin",t,n)):((t=this.getRow(r-1))&&Ext.fly(t).removeClass(this.lastRowCls),Ext.DomHelper.insertHtml("beforeEnd",this.mainBody.dom,n)),s?(0===e||r<=e)&&Ext.fly(this.getRow(e)).addClass(0===e?this.firstRowCls:this.lastRowCls):(this.processRows(e),this.fireEvent("rowsinserted",this,e,i))),this.syncFocusEl(e)},deleteRows:function(t,e,i){t.getRowCount()<1?this.refresh():(this.fireEvent("beforerowsdeleted",this,e,i),this.removeRows(e,i),this.processRows(e),this.fireEvent("rowsdeleted",this,e,i))},getColumnStyle:function(t,e){var i=this.cm,s=i.config,e=!e&&s[t].css||"",s=s[t].align;return e+=String.format("width: {0};",this.getColumnWidth(t)),i.isHidden(t)&&(e+="display: none; "),s&&(e+=String.format("text-align: {0};",s)),e},getColumnWidth:function(t){var e=this.cm.getColumnWidth(t),t=this.borderWidth;return Ext.isNumber(e)?Ext.isBorderBox?e+"px":Math.max(e-t,0)+"px":e},getTotalWidth:function(){return this.cm.getTotalWidth()+"px"},fitColumns:function(t,e,i){var s,n,r,o=this.grid,a=this.cm,l=a.getTotalWidth(!1),d=this.getGridInnerWidth(),h=[],c=0,u=0;if(d<20||0==d-l)return!1;var f=a.getColumnCount(!0),p=a.getColumnCount(!1),m=f-(Ext.isNumber(i)?1:0);for(0===m&&(m=1,i=void 0),r=0;r<p;r++)a.isFixed(r)||r===i||(s=a.getColumnWidth(r),h.push(r,s),a.isHidden(r)||(c=r,u+=s));for(n=(d-a.getTotalWidth())/u;h.length;)s=h.pop(),r=h.pop(),a.setColumnWidth(r,Math.max(o.minColumnWidth,Math.floor(s+s*n)),!0);return d<(l=a.getTotalWidth(!1))&&(f=m==f?c:i,d=Math.max(1,a.getColumnWidth(f)-(l-d)),a.setColumnWidth(f,d,!0)),!0!==t&&this.updateAllColumnWidths(),!0},autoExpand:function(t){var e,i=this.grid,s=this.cm,n=this.getGridInnerWidth(),r=s.getTotalWidth(!1),o=i.autoExpandColumn;!this.userResized&&o&&n!=r&&(e=s.getIndexById(o),(o=s.getColumnWidth(e))!=(i=Math.min(Math.max(n-r+o,i.autoExpandMin),i.autoExpandMax))&&(s.setColumnWidth(e,i,!0),!0!==t&&this.updateColumnWidth(e,i)))},getGridInnerWidth:function(){return this.grid.getGridEl().getWidth(!0)-this.getScrollOffset()},getColumnData:function(){for(var t,e=[],i=this.cm,s=i.getColumnCount(),n=this.ds.fields,r=0;r<s;r++)t=i.getDataIndex(r),e[r]={name:Ext.isDefined(t)?t:n.get(r)?n.get(r).name:void 0,renderer:i.getRenderer(r),scope:i.getRendererScope(r),id:i.getColumnId(r),style:this.getColumnStyle(r)};return e},renderRows:function(t,e){var i=this.grid,s=i.store,n=i.stripeRows,r=i.colModel.getColumnCount(),i=s.getCount();return i<1?"":(t=t||0,e=Ext.isDefined(e)?e:i-1,e=s.getRange(t,e),this.doRender(this.getColumnData(),e,s,t,r,n))},renderBody:function(){var t=this.renderRows()||"&#160;";return this.templates.body.apply({rows:t})},refreshRow:function(t){var e,i,s,n,r,o=this.ds,a=this.cm.getColumnCount(),l=this.getColumnData(),d=a-1,h=["x-grid3-row"],c={tstyle:String.format("width: {0};",this.getTotalWidth())},u=[],f=this.templates.cell;if(Ext.isNumber(t)?(e=t,t=o.getAt(e)):e=o.indexOf(t),t&&!(e<0)){for(r=0;r<a;r++)(n={id:(s=l[r]).id,style:s.style,css:0==r?"x-grid3-cell-first":r==d?"x-grid3-cell-last ":"",attr:"",cellAttr:""}).value=s.renderer.call(s.scope,t.data[s.name],n,t,e,r,o),Ext.isEmpty(n.value)&&(n.value="&#160;"),this.markDirty&&t.dirty&&void 0!==t.modified[s.name]&&(n.css+=" x-grid3-dirty-cell"),u[r]=f.apply(n);(i=this.getRow(e)).className="",this.grid.stripeRows&&(e+1)%2==0&&h.push("x-grid3-row-alt"),this.getRowClass&&(c.cols=a,h.push(this.getRowClass(t,e,c,o))),this.fly(i).addClass(h).setStyle(c.tstyle),c.cells=u.join(""),i.innerHTML=this.templates.rowInner.apply(c),this.fireEvent("rowupdated",this,e,t)}},refresh:function(t){this.fireEvent("beforerefresh",this),this.grid.stopEditing(!0);var e=this.renderBody();this.mainBody.update(e).setWidth(this.getTotalWidth()),!0===t&&(this.updateHeaders(),this.updateHeaderSortState()),this.processRows(0,!0),this.layout(),this.applyEmptyText(),this.fireEvent("refresh",this)},applyEmptyText:function(){this.emptyText&&!this.hasRows()&&this.mainBody.update('<div class="x-grid-empty">'+this.emptyText+"</div>")},updateHeaderSortState:function(){var t,e=this.ds.getSortState();e&&(this.sortState&&this.sortState.field==e.field&&this.sortState.direction==e.direction||this.grid.fireEvent("sortchange",this.grid,e),this.sortState=e,-1!=(t=this.cm.findColumnIndex(e.field))&&(e=e.direction,this.updateSortIcon(t,e)))},clearHeaderSortState:function(){this.sortState&&(this.grid.fireEvent("sortchange",this.grid,null),this.mainHd.select("td").removeClass(this.sortClasses),delete this.sortState)},destroy:function(){var t,e=this,i=e.grid,s=i.getGridEl(),n=e.dragZone,r=e.splitZone,o=e.columnDrag,a=e.columnDrop,l=e.scrollToTopTask;l&&l.cancel&&l.cancel(),Ext.destroyMembers(e,"colMenu","hmenu"),e.initData(null,null),e.purgeListeners(),Ext.fly(e.innerHd).un("click",e.handleHdDown,e),i.enableColumnMove&&(t=o.dragData,l=o.proxy,Ext.destroy(o.el,l.ghost,l.el,a.el,a.proxyTop,a.proxyBottom,t.ddel,t.header),l.anim&&Ext.destroy(l.anim),delete l.ghost,delete t.ddel,delete t.header,o.destroy(),delete Ext.dd.DDM.locationCache[o.id],delete o._domRef,delete a.proxyTop,delete a.proxyBottom,a.destroy(),delete Ext.dd.DDM.locationCache["gridHeader"+s.id],delete a._domRef,delete Ext.dd.DDM.ids[a.ddGroup]),r&&(r.destroy(),delete r._domRef,delete Ext.dd.DDM.ids["gridSplitters"+s.id]),Ext.fly(e.innerHd).removeAllListeners(),Ext.removeNode(e.innerHd),delete e.innerHd,Ext.destroy(e.el,e.mainWrap,e.mainHd,e.scroller,e.mainBody,e.focusEl,e.resizeMarker,e.resizeProxy,e.activeHdBtn,e._flyweight,n,r),delete i.container,n&&n.destroy(),Ext.dd.DDM.currentTarget=null,delete Ext.dd.DDM.locationCache[s.id],Ext.EventManager.removeResizeListener(e.onWindowResize,e)},onDenyColumnHide:function(){},render:function(){var t;this.autoFill?(t=this.grid.ownerCt)&&t.getLayout()&&t.on("afterlayout",function(){this.fitColumns(!0,!0),this.updateHeaders(),this.updateHeaderSortState()},this,{single:!0}):this.forceFit?this.fitColumns(!0,!1):this.grid.autoExpandColumn&&this.autoExpand(!0),this.grid.getGridEl().dom.innerHTML=this.renderUI(),this.afterRenderUI()},initData:function(t,e){var i,s=this;s.ds&&((i=s.ds).un("add",s.onAdd,s),i.un("load",s.onLoad,s),i.un("clear",s.onClear,s),i.un("remove",s.onRemove,s),i.un("update",s.onUpdate,s),i.un("datachanged",s.onDataChange,s),i!==t&&i.autoDestroy&&i.destroy()),t&&t.on({scope:s,load:s.onLoad,add:s.onAdd,remove:s.onRemove,update:s.onUpdate,clear:s.onClear,datachanged:s.onDataChange}),s.cm&&((i=s.cm).un("configchange",s.onColConfigChange,s),i.un("widthchange",s.onColWidthChange,s),i.un("headerchange",s.onHeaderChange,s),i.un("hiddenchange",s.onHiddenChange,s),i.un("columnmoved",s.onColumnMove,s)),e&&(delete s.lastViewWidth,e.on({scope:s,configchange:s.onColConfigChange,widthchange:s.onColWidthChange,headerchange:s.onHeaderChange,hiddenchange:s.onHiddenChange,columnmoved:s.onColumnMove})),s.ds=t,s.cm=e},onDataChange:function(){this.refresh(!0),this.updateHeaderSortState(),this.syncFocusEl(0)},onClear:function(){this.refresh(),this.syncFocusEl(0)},onUpdate:function(t,e){this.refreshRow(e)},onAdd:function(t,e,i){this.insertRows(t,i,i+(e.length-1))},onRemove:function(t,e,i,s){!0!==s&&this.fireEvent("beforerowremoved",this,i,e),this.removeRow(i),!0!==s&&(this.processRows(i),this.applyEmptyText(),this.fireEvent("rowremoved",this,i,e))},onLoad:function(){Ext.isGecko?(this.scrollToTopTask||(this.scrollToTopTask=new Ext.util.DelayedTask(this.scrollToTop,this)),this.scrollToTopTask.delay(1)):this.scrollToTop()},onColWidthChange:function(t,e,i){this.updateColumnWidth(e,i)},onHeaderChange:function(t,e,i){this.updateHeaders()},onHiddenChange:function(t,e,i){this.updateColumnHidden(e,i)},onColumnMove:function(t,e,i){this.indexMap=null,this.refresh(!0),this.restoreScroll(this.getScrollState()),this.afterMove(i),this.grid.fireEvent("columnmove",e,i)},onColConfigChange:function(){delete this.lastViewWidth,this.indexMap=null,this.refresh(!0)},initUI:function(t){t.on("headerclick",this.onHeaderClick,this)},initEvents:Ext.emptyFn,onHeaderClick:function(t,e){!this.headersDisabled&&this.cm.isSortable(e)&&(t.stopEditing(!0),t.store.sort(this.cm.getDataIndex(e)))},onRowOver:function(t,e){e=this.findRowIndex(e);!1!==e&&this.addRowClass(e,this.rowOverCls)},onRowOut:function(t,e){e=this.findRowIndex(e);!1===e||t.within(this.getRow(e),!0)||this.removeRowClass(e,this.rowOverCls)},onRowSelect:function(t){this.addRowClass(t,this.selectedRowClass)},onRowDeselect:function(t){this.removeRowClass(t,this.selectedRowClass)},onCellSelect:function(t,e){e=this.getCell(t,e);e&&this.fly(e).addClass("x-grid3-cell-selected")},onCellDeselect:function(t,e){e=this.getCell(t,e);e&&this.fly(e).removeClass("x-grid3-cell-selected")},handleWheel:function(t){t.stopPropagation()},onColumnSplitterMoved:function(t,e){this.userResized=!0,this.grid.colModel.setColumnWidth(t,e,!0),this.forceFit?(this.fitColumns(!0,!1,t),this.updateAllColumnWidths()):(this.updateColumnWidth(t,e),this.syncHeaderScroll()),this.grid.fireEvent("columnresize",t,e)},beforeColMenuShow:function(){var t,e=this.cm,i=e.getColumnCount(),s=this.colMenu;for(s.removeAll(),t=0;t<i;t++)!1!==e.config[t].hideable&&s.add(new Ext.menu.CheckItem({text:e.getColumnHeader(t),itemId:"col-"+e.getColumnId(t),checked:!e.isHidden(t),disabled:!1===e.config[t].hideable,hideOnClick:!1}))},handleHdMenuClick:function(t){var e=this.ds,i=this.cm.getDataIndex(this.hdCtxIndex);switch(t.getItemId()){case"asc":e.sort(i,"ASC");break;case"desc":e.sort(i,"DESC");break;default:this.handleHdMenuClickDefault(t)}return!0},handleHdMenuClickDefault:function(t){var e=this.cm,i=t.getItemId(),i=e.getIndexById(i.substr(4));-1!=i&&(t.checked&&e.getColumnsBy(this.isHideableColumn,this).length<=1?this.onDenyColumnHide():e.setHidden(i,t.checked))},handleHdDown:function(t,e){var i,s,n,r,o;Ext.fly(e).hasClass("x-grid3-hd-btn")&&(t.stopEvent(),n=this.cm,i=this.findHeaderCell(e),o=this.getCellIndex(i),s=n.isSortable(o),n=(t=this.hmenu).items,r=this.headerMenuOpenCls,this.hdCtxIndex=o,Ext.fly(i).addClass(r),this.hideSortIcons?(n.get("asc").setVisible(s),n.get("desc").setVisible(s),(o=n.get("sortSep"))&&o.setVisible(s)):(n.get("asc").setDisabled(!s),n.get("desc").setDisabled(!s)),t.on("hide",function(){Ext.fly(i).removeClass(r)},this,{single:!0}),t.show(e,"tl-bl?"))},handleHdMove:function(t){var e,i,s,n,r,o,a=this.findHeaderCell(this.activeHdRef);a&&!this.headersDisabled&&(o=this.splitHandleWidth||5,e=this.activeHdRegion,i=a.style,r=this.cm,s="",n=t.getPageX(),!1!==this.grid.enableColumnResize&&(a=this.activeHdIndex,t=this.getPreviousVisible(a),a=r.isResizable(a),r=t&&r.isResizable(t),t=n-e.left<=o,o=e.right-n<=(this.activeHdBtn?2:o),t&&r?s=Ext.isAir?"move":Ext.isWebKit?"e-resize":"col-resize":o&&a&&(s=Ext.isAir?"move":Ext.isWebKit?"w-resize":"col-resize")),i.cursor=s)},getPreviousVisible:function(t){for(;0<t;){if(!this.cm.isHidden(t-1))return t;t--}},handleHdOver:function(t,e){var i,s=this.findHeaderCell(e);s&&!this.headersDisabled&&(i=this.fly(s),this.activeHdRef=e,this.activeHdIndex=this.getCellIndex(s),this.activeHdRegion=i.getRegion(),this.isMenuDisabled(this.activeHdIndex,i)||(i.addClass("x-grid3-hd-over"),this.activeHdBtn=i.child(".x-grid3-hd-btn"),this.activeHdBtn&&(this.activeHdBtn.dom.style.height=s.firstChild.offsetHeight-1+"px")))},handleHdOut:function(t,e){e=this.findHeaderCell(e);!e||Ext.isIE9m&&t.within(e,!0)||(this.activeHdRef=null,this.fly(e).removeClass("x-grid3-hd-over"),e.style.cursor="")},isMenuDisabled:function(t,e){return this.cm.isMenuDisabled(t)},hasRows:function(){var t=this.mainBody.dom.firstChild;return t&&1==t.nodeType&&"x-grid-empty"!=t.className},isHideableColumn:function(t){return!t.hidden},bind:function(t,e){this.initData(t,e)}}),Ext.grid.GridView.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{constructor:function(t,e){this.grid=t,this.view=t.getView(),this.marker=this.view.resizeMarker,this.proxy=this.view.resizeProxy,Ext.grid.GridView.SplitDragZone.superclass.constructor.call(this,e,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:!1}),this.scroll=!1,this.hw=this.view.splitHandleWidth||5},b4StartDrag:function(t,e){this.dragHeadersDisabled=this.view.headersDisabled,this.view.headersDisabled=!0;var i=this.view.mainWrap.getHeight();this.marker.setHeight(i),this.marker.show(),this.marker.alignTo(this.view.getHeaderCell(this.cellIndex),"tl-tl",[-2,0]),this.proxy.setHeight(i);i=this.cm.getColumnWidth(this.cellIndex),i=Math.max(i-this.grid.minColumnWidth,0);this.resetConstraints(),this.setXConstraint(i,1e3),this.setYConstraint(0,0),this.minX=t-i,this.maxX=t+1e3,this.startPos=t,Ext.dd.DDProxy.prototype.b4StartDrag.call(this,t,e)},allowHeaderDrag:function(t){return!0},handleMouseDown:function(t){var e=this.view.findHeaderCell(t.getTarget());if(e&&this.allowHeaderDrag(t)){var i=this.view.fly(e).getXY()[0],s=t.getXY()[0],n=e.offsetWidth,r=!1;if(s-i<=this.hw?r=-1:i+n-s<=this.hw&&(r=0),!1!==r){this.cm=this.grid.colModel;var o=this.view.getCellIndex(e);if(-1==r){if(o+r<0)return;for(;this.cm.isHidden(o+r);)if(o+--r<0)return}this.cellIndex=o+r,this.split=e.dom,this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)&&Ext.grid.GridView.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}else this.view.columnDrag&&this.view.columnDrag.callHandleMouseDown(t)}},endDrag:function(t){this.marker.hide();var e=this.view,t=Math.max(this.minX,t.getPageX())-this.startPos,i=this.dragHeadersDisabled;e.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+t),setTimeout(function(){e.headersDisabled=i},50)},autoOffset:function(){this.setDelta(0,0)}}),Ext.grid.PivotGridView=Ext.extend(Ext.grid.GridView,{colHeaderCellCls:"grid-hd-group-cell",title:"",getColumnHeaders:function(){return this.grid.topAxis.buildHeaders()},getRowHeaders:function(){return this.grid.leftAxis.buildHeaders()},renderRows:function(t,e){var i,s=this.grid,n=s.extractData(),r=n.length,o=this.templates,a=s.renderer,l="function"==typeof a,d=this.getCellCls,h="function"==typeof d,c=o.cell,u=o.row,f=[],p={},m="width:"+this.getGridInnerWidth()+"px;";for(e=Ext.isDefined(e)?e:r-1,i=0;i<r;i++){for(var g,x=(g=n[i]).length,E=[],v=0;v<x;v++)p.id=i+"-"+v,p.css=0===v?"x-grid3-cell-first ":v==x-1?"x-grid3-cell-last ":"",p.attr=p.cellAttr="",p.value=g[v],Ext.isEmpty(p.value)&&(p.value="&#160;"),l&&(p.value=a(p.value)),h&&(p.css+=d(p.value)+" "),E[E.length]=c.apply(p);f[f.length]=u.apply({tstyle:m,cols:x,cells:E.join(""),alt:""})}return f.join("")},masterTpl:new Ext.Template('<div class="x-grid3 x-pivotgrid" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header">','<div class="x-grid3-header-title"><span>{title}</span></div>','<div class="x-grid3-header-inner">','<div class="x-grid3-header-offset" style="{ostyle}"></div>',"</div>",'<div class="x-clear"></div>',"</div>",'<div class="x-grid3-scroller">','<div class="x-grid3-row-headers"></div>','<div class="x-grid3-body" style="{bstyle}">{body}</div>','<a href="#" class="x-grid3-focus" tabIndex="-1"></a>',"</div>","</div>",'<div class="x-grid3-resize-marker">&#160;</div>','<div class="x-grid3-resize-proxy">&#160;</div>',"</div>"),initTemplates:function(){Ext.grid.PivotGridView.superclass.initTemplates.apply(this,arguments);var t=this.templates||{};t.gcell||(t.gcell=new Ext.XTemplate('<td class="x-grid3-hd x-grid3-gcell x-grid3-td-{id} ux-grid-hd-group-row-{row} '+this.colHeaderCellCls+'" style="{style}">','<div {tooltip} class="x-grid3-hd-inner x-grid3-hd-{id} x-unselectable" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"","{value}","</div>","</td>")),this.templates=t,this.hrowRe=new RegExp("ux-grid-hd-group-row-(\\d+)","")},initElements:function(){Ext.grid.PivotGridView.superclass.initElements.apply(this,arguments),this.rowHeadersEl=new Ext.Element(this.scroller.child("div.x-grid3-row-headers")),this.headerTitleEl=new Ext.Element(this.mainHd.child("div.x-grid3-header-title"))},getGridInnerWidth:function(){return Ext.grid.PivotGridView.superclass.getGridInnerWidth.apply(this,arguments)-this.getTotalRowHeaderWidth()},getTotalRowHeaderWidth:function(){for(var t=this.getRowHeaders(),e=t.length,i=0,s=0;s<e;s++)i+=t[s].width;return i},getTotalColumnHeaderHeight:function(){return 21*this.getColumnHeaders().length},getCellIndex:function(t){if(t){var e,t=t.className.match(this.colRe);if(t&&(e=t[1]))return parseInt(e.split("-")[1],10)}return!1},renderUI:function(){var t=this.templates,e=this.getGridInnerWidth();return t.master.apply({body:t.body.apply({rows:"&#160;"}),ostyle:"width:"+e+"px",bstyle:"width:"+e+"px"})},onLayout:function(t,e){Ext.grid.PivotGridView.superclass.onLayout.apply(this,arguments);t=this.getGridInnerWidth();this.resizeColumnHeaders(t),this.resizeAllRows(t)},refresh:function(t){this.fireEvent("beforerefresh",this),this.grid.stopEditing(!0);var e=this.renderBody();this.mainBody.update(e).setWidth(this.getGridInnerWidth()),!0===t&&(this.updateHeaders(),this.updateHeaderSortState()),this.processRows(0,!0),this.layout(),this.applyEmptyText(),this.fireEvent("refresh",this)},renderHeaders:Ext.emptyFn,fitColumns:Ext.emptyFn,resizeColumnHeaders:function(t){var e=this.grid.topAxis;e.rendered&&e.el.setWidth(t)},resizeRowHeaders:function(){var t=this.getTotalRowHeaderWidth(),e=String.format("margin-left: {0}px;",t);this.rowHeadersEl.setWidth(t),this.mainBody.applyStyles(e),Ext.fly(this.innerHd).applyStyles(e),this.headerTitleEl.setWidth(t),this.headerTitleEl.setHeight(this.getTotalColumnHeaderHeight())},resizeAllRows:function(t){for(var e=this.getRows(),i=e.length,s=0;s<i;s++)Ext.fly(e[s]).setWidth(t),Ext.fly(e[s]).child("table").setWidth(t)},updateHeaders:function(){this.renderGroupRowHeaders(),this.renderGroupColumnHeaders()},renderGroupRowHeaders:function(){var t=this.grid.leftAxis;this.resizeRowHeaders(),t.rendered=!1,t.render(this.rowHeadersEl),this.setTitle(this.title)},setTitle:function(t){this.headerTitleEl.child("span").dom.innerHTML=t},renderGroupColumnHeaders:function(){var t=this.grid.topAxis;t.rendered=!1,t.render(this.innerHd.firstChild)},isMenuDisabled:function(t,e){return!0}}),Ext.grid.PivotAxis=Ext.extend(Ext.Component,{orientation:"horizontal",defaultHeaderWidth:80,paddingWidth:7,setDimensions:function(t){this.dimensions=t},onRender:function(t,e){var i="horizontal"==this.orientation?this.renderHorizontalRows():this.renderVerticalRows();this.el=Ext.DomHelper.overwrite(t.dom,{tag:"table",cn:i},!0)},renderHorizontalRows:function(){for(var t,e,i,s,n=this.buildHeaders(),r=n.length,o=[],a=0;a<r;a++){for(t=[],i=(e=n[a].items).length,s=0;s<i;s++)t.push({tag:"td",html:e[s].header,colspan:e[s].span});o[a]={tag:"tr",cn:t}}return o},renderVerticalRows:function(){for(var t,e,i,s,n,r=this.buildHeaders(),o=r.length,a=[],l=[],d=0;d<o;d++)for(s=(e=r[d]).width||80,t=e.items.length,n=0;n<t;n++)a[(i=e.items[n]).start]=a[i.start]||[],a[i.start].push({tag:"td",html:i.header,rowspan:i.span,width:Ext.isBorderBox?s:s-this.paddingWidth});for(t=a.length,d=0;d<t;d++)l[d]={tag:"tr",cn:a[d]};return l},getTuples:function(){var t=new Ext.data.Store({});t.data=this.store.data.clone(),t.fields=this.store.fields;for(var e=[],i=this.dimensions,s=i.length,n=0;n<s;n++)e.push({field:i[n].dataIndex,direction:i[n].direction||"ASC"});t.sort(e);var r,o,a,l,d=t.data.items,h=[],c=[],s=d.length;for(n=0;n<s;n++){for(l in r="",a=(o=this.getRecordInfo(d[n])).data)r+=a[l]+"---";-1==h.indexOf(r)&&(h.push(r),c.push(o))}return t.destroy(),c},getRecordInfo:function(t){for(var e,i=this.dimensions,s=i.length,n={},r=0;r<s;r++)n[e=i[r].dataIndex]=t.get(e);var o;return{data:n,matcher:(o=n,function(t){for(var e in o)if(t.get(e)!=o[e])return!1;return!0})}},buildHeaders:function(){for(var t,e,i,s,n,r,o,a,l,d,h=this.getTuples(),c=h.length,u=this.dimensions,f=u.length,p=[],m=0;m<f;m++){for(t=u[m],i=[],d=o=r=0;d<c;d++)a=d==c-1,s=(e=h[d]).data[t.dataIndex],l=null!=n&&n!=s,(l=0<m&&0<d?l||e.data[u[m-1].dataIndex]!=h[d-1].data[u[m-1].dataIndex]:l)&&(i.push({header:n,span:r,start:o}),o+=r,r=0),a&&(i.push({header:s,span:r+1,start:o}),o+=r,r=0),n=s,r++;p.push({items:i,width:t.width||this.defaultHeaderWidth}),n=void 0}return p}}),Ext.grid.HeaderDragZone=Ext.extend(Ext.dd.DragZone,{maxDragWidth:120,constructor:function(t,e,i){this.grid=t,this.view=t.getView(),this.ddGroup="gridHeader"+this.grid.getGridEl().id,Ext.grid.HeaderDragZone.superclass.constructor.call(this,e),i&&(this.setHandleElId(Ext.id(e)),this.setOuterHandleElId(Ext.id(i))),this.scroll=!1},getDragData:function(t){t=Ext.lib.Event.getTarget(t),t=this.view.findHeaderCell(t);return!!t&&{ddel:t.firstChild,header:t}},onInitDrag:function(t){this.dragHeadersDisabled=this.view.headersDisabled,this.view.headersDisabled=!0;var e=this.dragData.ddel.cloneNode(!0);return e.id=Ext.id(),e.style.width=Math.min(this.dragData.header.offsetWidth,this.maxDragWidth)+"px",this.proxy.update(e),!0},afterValidDrop:function(){this.completeDrop()},afterInvalidDrop:function(){this.completeDrop()},completeDrop:function(){var t=this.view,e=this.dragHeadersDisabled;setTimeout(function(){t.headersDisabled=e},50)}}),Ext.grid.HeaderDropZone=Ext.extend(Ext.dd.DropZone,{proxyOffsets:[-4,-9],fly:Ext.Element.fly,constructor:function(t,e,i){this.grid=t,this.view=t.getView(),this.proxyTop=Ext.DomHelper.append(document.body,{cls:"col-move-top",html:"&#160;"},!0),this.proxyBottom=Ext.DomHelper.append(document.body,{cls:"col-move-bottom",html:"&#160;"},!0),this.proxyTop.hide=this.proxyBottom.hide=function(){this.setLeftTop(-100,-100),this.setStyle("visibility","hidden")},this.ddGroup="gridHeader"+this.grid.getGridEl().id,Ext.grid.HeaderDropZone.superclass.constructor.call(this,t.getGridEl().dom)},getTargetFromEvent:function(t){t=Ext.lib.Event.getTarget(t),t=this.view.findCellIndex(t);if(!1!==t)return this.view.getHeaderCell(t)},nextVisible:function(t){var e=this.view,i=this.grid.colModel;for(t=t.nextSibling;t;){if(!i.isHidden(e.getCellIndex(t)))return t;t=t.nextSibling}return null},prevVisible:function(t){var e=this.view,i=this.grid.colModel;for(t=t.prevSibling;t;){if(!i.isHidden(e.getCellIndex(t)))return t;t=t.prevSibling}return null},positionIndicator:function(t,e,i){var s,n=Ext.lib.Event.getPageX(i),r=Ext.lib.Dom.getRegion(e.firstChild),i=r.top+this.proxyOffsets[1],r=r.right-n<=(r.right-r.left)/2?(s=r.right+this.view.borderWidth,"after"):(s=r.left,"before");return!this.grid.colModel.isFixed(this.view.getCellIndex(e))&&(s+=this.proxyOffsets[0],this.proxyTop.setLeftTop(s,i),this.proxyTop.show(),this.bottomOffset||(this.bottomOffset=this.view.mainHd.getHeight()),this.proxyBottom.setLeftTop(s,i+this.proxyTop.dom.offsetHeight+this.bottomOffset),this.proxyBottom.show(),r)},onNodeEnter:function(t,e,i,s){s.header!=t&&this.positionIndicator(s.header,t,i)},onNodeOver:function(t,e,i,s){var n=!1;return(n=s.header!=t?this.positionIndicator(s.header,t,i):n)||(this.proxyTop.hide(),this.proxyBottom.hide()),n?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(t,e,i,s){this.proxyTop.hide(),this.proxyBottom.hide()},onNodeDrop:function(t,e,i,s){var n=s.header;if(n==t)return!1;var r=this.grid.colModel,s=Ext.lib.Event.getPageX(i),i=Ext.lib.Dom.getRegion(t.firstChild),i=i.right-s<=(i.right-i.left)/2?"after":"before",n=this.view.getCellIndex(n),t=this.view.getCellIndex(t);return"after"==i&&t++,n<t&&t--,r.moveColumn(n,t),!0}}),Ext.grid.GridView.ColumnDragZone=Ext.extend(Ext.grid.HeaderDragZone,{constructor:function(t,e){Ext.grid.GridView.ColumnDragZone.superclass.constructor.call(this,t,e,null),this.proxy.el.addClass("x-grid3-col-dd")},handleMouseDown:function(t){},callHandleMouseDown:function(t){Ext.grid.GridView.ColumnDragZone.superclass.handleMouseDown.call(this,t)}}),Ext.grid.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{fly:Ext.Element.fly,constructor:function(t,e,i){this.grid=t,this.view=t.getView(),this.proxy=this.view.resizeProxy,Ext.grid.SplitDragZone.superclass.constructor.call(this,e,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:!1}),this.setHandleElId(Ext.id(e)),this.setOuterHandleElId(Ext.id(i)),this.scroll=!1},b4StartDrag:function(t,e){this.view.headersDisabled=!0,this.proxy.setHeight(this.view.mainWrap.getHeight());var i=this.cm.getColumnWidth(this.cellIndex),i=Math.max(i-this.grid.minColumnWidth,0);this.resetConstraints(),this.setXConstraint(i,1e3),this.setYConstraint(0,0),this.minX=t-i,this.maxX=t+1e3,this.startPos=t,Ext.dd.DDProxy.prototype.b4StartDrag.call(this,t,e)},handleMouseDown:function(t){var e=Ext.EventObject.setEvent(t),e=this.fly(e.getTarget());e.hasClass("x-grid-split")&&(this.cellIndex=this.view.getCellIndex(e.dom),this.split=e.dom,this.cm=this.grid.colModel,this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)&&Ext.grid.SplitDragZone.superclass.handleMouseDown.apply(this,arguments))},endDrag:function(t){this.view.headersDisabled=!1;t=Math.max(this.minX,Ext.lib.Event.getPageX(t))-this.startPos;this.view.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+t)},autoOffset:function(){this.setDelta(0,0)}}),Ext.grid.GridDragZone=function(t,e){this.view=t.getView(),Ext.grid.GridDragZone.superclass.constructor.call(this,this.view.mainBody.dom,e),this.scroll=!1,this.grid=t,this.ddel=document.createElement("div"),this.ddel.className="x-grid-dd-wrap",this.preventDefault=!0},Ext.extend(Ext.grid.GridDragZone,Ext.dd.DragZone,{ddGroup:"GridDD",getDragData:function(t){var e,i,s,n=Ext.lib.Event.getTarget(t),r=this.view.findRowIndex(n);return!1!==r&&((e=this.grid.selModel).getSelectedCell?(i=this.view.findCellIndex(n),(n=e.getSelectedCell())&&n[0]===r&&n[1]===i||e.handleMouseDown(this.grid,r,i,t),this.grid.dragCell?(s=e.getSelectedCell(),this.grid.hasOwnProperty("ddText")||(this.grid.ddText="{0} selected cell{1}")):s=[this.grid.store.getAt(r)]):(e.isSelected(r)&&!t.hasModifier()||e.handleMouseDown(this.grid,r,t),s=e.getSelections()),{grid:this.grid,ddel:this.ddel,rowIndex:r,selections:s})},onInitDrag:function(t){this.dragData;this.ddel.innerHTML=this.grid.getDragDropText(),this.proxy.update(this.ddel)},afterRepair:function(){this.dragging=!1},getRepairXY:function(t,e){return!1},onEndDrag:function(t,e){},onValidDrop:function(t,e,i){this.hideProxy()},beforeInvalidDrop:function(t,e){}}),Ext.grid.ColumnModel=Ext.extend(Ext.util.Observable,{defaultWidth:100,defaultSortable:!1,constructor:function(t){t.columns?(Ext.apply(this,t),this.setConfig(t.columns,!0)):this.setConfig(t,!0),this.addEvents("widthchange","headerchange","hiddenchange","columnmoved","configchange"),Ext.grid.ColumnModel.superclass.constructor.call(this)},getColumnId:function(t){return this.config[t].id},getColumnAt:function(t){return this.config[t]},setConfig:function(t,e){var i,s,n;if(!e)for(delete this.totalWidth,i=0,s=this.config.length;i<s;i++)(n=this.config[i]).setEditor&&n.setEditor(null);for(this.defaults=Ext.apply({width:this.defaultWidth,sortable:this.defaultSortable},this.defaults),this.config=t,this.lookup={},i=0,s=t.length;i<s;i++)n=Ext.applyIf(t[i],this.defaults),Ext.isEmpty(n.id)&&(n.id=i),n.isColumn||(n=new Ext.grid.Column.types[n.xtype||"gridcolumn"](n),t[i]=n),this.lookup[n.id]=n;e||this.fireEvent("configchange",this)},getColumnById:function(t){return this.lookup[t]},getIndexById:function(t){for(var e=0,i=this.config.length;e<i;e++)if(this.config[e].id==t)return e;return-1},moveColumn:function(t,e){var i=this.config,s=i[t];i.splice(t,1),i.splice(e,0,s),this.dataMap=null,this.fireEvent("columnmoved",this,t,e)},getColumnCount:function(t){var e,i=this.config.length,s=0;if(!0!==t)return i;for(e=0;e<i;e++)this.isHidden(e)||s++;return s},getColumnsBy:function(t,e){for(var i,s=this.config,n=s.length,r=[],o=0;o<n;o++)i=s[o],!0===t.call(e||this,i,o)&&(r[r.length]=i);return r},isSortable:function(t){return!!this.config[t].sortable},isMenuDisabled:function(t){return!!this.config[t].menuDisabled},getRenderer:function(t){return this.config[t].renderer||Ext.grid.ColumnModel.defaultRenderer},getRendererScope:function(t){return this.config[t].scope},setRenderer:function(t,e){this.config[t].renderer=e},getColumnWidth:function(t){t=this.config[t].width;return t="number"!=typeof t?this.defaultWidth:t},setColumnWidth:function(t,e,i){this.config[t].width=e,this.totalWidth=null,i||this.fireEvent("widthchange",this,t,e)},getTotalWidth:function(t){if(!this.totalWidth)for(var e=this.totalWidth=0,i=this.config.length;e<i;e++)!t&&this.isHidden(e)||(this.totalWidth+=this.getColumnWidth(e));return this.totalWidth},getColumnHeader:function(t){return this.config[t].header},setColumnHeader:function(t,e){this.config[t].header=e,this.fireEvent("headerchange",this,t,e)},getColumnTooltip:function(t){return this.config[t].tooltip},setColumnTooltip:function(t,e){this.config[t].tooltip=e},getDataIndex:function(t){return this.config[t].dataIndex},setDataIndex:function(t,e){this.config[t].dataIndex=e},findColumnIndex:function(t){for(var e=this.config,i=0,s=e.length;i<s;i++)if(e[i].dataIndex==t)return i;return-1},isCellEditable:function(t,e){var i=this.config[t],t=i.editable;return!!(t||!Ext.isDefined(t)&&i.editor)},getCellEditor:function(t,e){return this.config[t].getCellEditor(e)},setEditable:function(t,e){this.config[t].editable=e},isHidden:function(t){return!!this.config[t].hidden},isFixed:function(t){return!!this.config[t].fixed},isResizable:function(t){return 0<=t&&!1!==this.config[t].resizable&&!0!==this.config[t].fixed},setHidden:function(t,e){var i=this.config[t];i.hidden!==e&&(i.hidden=e,this.totalWidth=null,this.fireEvent("hiddenchange",this,t,e))},setEditor:function(t,e){this.config[t].setEditor(e)},destroy:function(){for(var t=this.config.length,e=0;e<t;e++)this.config[e].destroy();delete this.config,delete this.lookup,this.purgeListeners()},setState:function(t,e){e=Ext.applyIf(e,this.defaults),Ext.apply(this.config[t],e)}}),Ext.grid.ColumnModel.defaultRenderer=function(t){return"string"==typeof t&&t.length<1?"&#160;":t},Ext.grid.AbstractSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(){this.locked=!1,Ext.grid.AbstractSelectionModel.superclass.constructor.call(this)},init:function(t){this.grid=t,this.lockOnInit&&(delete this.lockOnInit,this.locked=!1,this.lock()),this.initEvents()},lock:function(){var t;this.locked||(this.locked=!0,(t=this.grid)?t.getView().on({scope:this,beforerefresh:this.sortUnLock,refresh:this.sortLock}):this.lockOnInit=!0)},sortLock:function(){this.locked=!0},sortUnLock:function(){this.locked=!1},unlock:function(){var t;this.locked&&(this.locked=!1,(t=this.grid)?((t=t.getView()).un("beforerefresh",this.sortUnLock,this),t.un("refresh",this.sortLock,this)):delete this.lockOnInit)},isLocked:function(){return this.locked},destroy:function(){this.unlock(),this.purgeListeners()}}),Ext.grid.RowSelectionModel=Ext.extend(Ext.grid.AbstractSelectionModel,{singleSelect:!1,constructor:function(t){Ext.apply(this,t),this.selections=new Ext.util.MixedCollection(!1,function(t){return t.id}),this.last=!1,this.lastActive=!1,this.addEvents("selectionchange","beforerowselect","rowselect","rowdeselect"),Ext.grid.RowSelectionModel.superclass.constructor.call(this)},initEvents:function(){this.grid.enableDragDrop||this.grid.enableDrag||this.grid.on("rowmousedown",this.handleMouseDown,this),this.rowNav=new Ext.KeyNav(this.grid.getGridEl(),{up:this.onKeyPress,down:this.onKeyPress,scope:this}),this.grid.getView().on({scope:this,refresh:this.onRefresh,rowupdated:this.onRowUpdated,rowremoved:this.onRemove})},onKeyPress:function(t,e){var i="up"==e,e=i?-1:1;!t.shiftKey||this.singleSelect?this[i?"selectPrevious":"selectNext"](!1):!1!==this.last&&!1!==this.lastActive?(i=this.last,this.selectRange(this.last,this.lastActive+e),this.grid.getView().focusRow(this.lastActive),!1!==i&&(this.last=i)):this.selectFirstRow()},onRefresh:function(){var t,e=this.grid.store,i=this.getSelections(),s=0,n=i.length;for(this.silent=!0,this.clearSelections(!0);s<n;s++)t=i[s],-1!=(t=e.indexOfId(t.id))&&this.selectRow(t,!0);i.length!=this.selections.getCount()&&this.fireEvent("selectionchange",this),this.silent=!1},onRemove:function(t,e,i){!1!==this.selections.remove(i)&&this.fireEvent("selectionchange",this)},onRowUpdated:function(t,e,i){this.isSelected(i)&&t.onRowSelect(e)},selectRecords:function(t,e){e||this.clearSelections();for(var i=this.grid.store,s=0,n=t.length;s<n;s++)this.selectRow(i.indexOf(t[s]),!0)},getCount:function(){return this.selections.length},selectFirstRow:function(){this.selectRow(0)},selectLastRow:function(t){this.selectRow(this.grid.store.getCount()-1,t)},selectNext:function(t){return!!this.hasNext()&&(this.selectRow(this.last+1,t),this.grid.getView().focusRow(this.last),!0)},selectPrevious:function(t){return!!this.hasPrevious()&&(this.selectRow(this.last-1,t),this.grid.getView().focusRow(this.last),!0)},hasNext:function(){return!1!==this.last&&this.last+1<this.grid.store.getCount()},hasPrevious:function(){return!!this.last},getSelections:function(){return[].concat(this.selections.items)},getSelected:function(){return this.selections.itemAt(0)},each:function(t,e){for(var i=this.getSelections(),s=0,n=i.length;s<n;s++)if(!1===t.call(e||this,i[s],s))return!1;return!0},clearSelections:function(t){var e;this.isLocked()||(!0!==t?(e=this.grid.store,(t=this.selections).each(function(t){this.deselectRow(e.indexOfId(t.id))},this),t.clear()):this.selections.clear(),this.last=!1)},selectAll:function(){if(!this.isLocked()){this.selections.clear();for(var t=0,e=this.grid.store.getCount();t<e;t++)this.selectRow(t,!0)}},hasSelection:function(){return 0<this.selections.length},isSelected:function(t){t=Ext.isNumber(t)?this.grid.store.getAt(t):t;return!(!t||!this.selections.key(t.id))},isIdSelected:function(t){return!!this.selections.key(t)},handleMouseDown:function(t,e,i){var s,n;0!==i.button||this.isLocked()||(s=this.grid.getView(),i.shiftKey&&!this.singleSelect&&!1!==this.last?(n=this.last,this.selectRange(n,e,i.ctrlKey),this.last=n,s.focusRow(e)):(n=this.isSelected(e),i.ctrlKey&&n?this.deselectRow(e):(!n||1<this.getCount())&&(this.selectRow(e,i.ctrlKey||i.shiftKey),s.focusRow(e))))},selectRows:function(t,e){e||this.clearSelections();for(var i=0,s=t.length;i<s;i++)this.selectRow(t[i],!0)},selectRange:function(t,e,i){var s;if(!this.isLocked())if(i||this.clearSelections(),t<=e)for(s=t;s<=e;s++)this.selectRow(s,!0);else for(s=t;e<=s;s--)this.selectRow(s,!0)},deselectRange:function(t,e,i){if(!this.isLocked())for(var s=t;s<=e;s++)this.deselectRow(s,i)},selectRow:function(t,e,i){var s;this.isLocked()||t<0||t>=this.grid.store.getCount()||e&&this.isSelected(t)||(s=this.grid.store.getAt(t))&&!1!==this.fireEvent("beforerowselect",this,t,e,s)&&(e&&!this.singleSelect||this.clearSelections(),this.selections.add(s),this.last=this.lastActive=t,i||this.grid.getView().onRowSelect(t),this.silent||(this.fireEvent("rowselect",this,t,s),this.fireEvent("selectionchange",this)))},deselectRow:function(t,e){var i;this.isLocked()||(this.last==t&&(this.last=!1),this.lastActive==t&&(this.lastActive=!1),(i=this.grid.store.getAt(t))&&(this.selections.remove(i),e||this.grid.getView().onRowDeselect(t),this.fireEvent("rowdeselect",this,t,i),this.fireEvent("selectionchange",this)))},acceptsNav:function(t,e,i){return!i.isHidden(e)&&i.isCellEditable(e,t)},onEditorKey:function(t,e){var i,s,n=e.getKey(),r=this.grid,o=r.lastEdit,a=r.activeEditor,l=e.shiftKey;n==e.TAB?(e.stopEvent(),a.completeEdit(),s=l?r.walkCells(a.row,a.col-1,-1,this.acceptsNav,this):r.walkCells(a.row,a.col+1,1,this.acceptsNav,this)):n==e.ENTER&&!1!==this.moveEditorOnEnter&&(s=l?r.walkCells(o.row-1,o.col,-1,this.acceptsNav,this):r.walkCells(o.row+1,o.col,1,this.acceptsNav,this)),s&&(l=s[0],s=s[1],this.onEditorSelect(l,o.row),r.isEditor&&r.editing&&(i=r.activeEditor)&&i.field.triggerBlur&&i.field.triggerBlur(),r.startEditing(l,s))},onEditorSelect:function(t,e){e!=t&&this.selectRow(t)},destroy:function(){Ext.destroy(this.rowNav),this.rowNav=null,Ext.grid.RowSelectionModel.superclass.destroy.call(this)}}),Ext.grid.Column=Ext.extend(Ext.util.Observable,{isColumn:!0,constructor:function(t){Ext.apply(this,t),Ext.isString(this.renderer)?this.renderer=Ext.util.Format[this.renderer]:Ext.isObject(this.renderer)&&(this.scope=this.renderer.scope,this.renderer=this.renderer.fn),this.scope||(this.scope=this);t=this.editor;delete this.editor,this.setEditor(t),this.addEvents("click","contextmenu","dblclick","mousedown"),Ext.grid.Column.superclass.constructor.call(this)},processEvent:function(t,e,i,s,n){return this.fireEvent(t,this,i,s,e)},destroy:function(){this.setEditor&&this.setEditor(null),this.purgeListeners()},renderer:function(t){return t},getEditor:function(t){return!1!==this.editable?this.editor:null},setEditor:function(t){var e=this.editor;e&&(e.gridEditor?(e.gridEditor.destroy(),delete e.gridEditor):e.destroy()),this.editor=null,t&&(t.isXType||(t=Ext.create(t,"textfield")),this.editor=t)},getCellEditor:function(t){t=this.getEditor(t);return t&&(t.startEdit||(t.gridEditor||(t.gridEditor=new Ext.grid.GridEditor(t)),t=t.gridEditor)),t}}),Ext.grid.BooleanColumn=Ext.extend(Ext.grid.Column,{trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(t){Ext.grid.BooleanColumn.superclass.constructor.call(this,t);var e=this.trueText,i=this.falseText,s=this.undefinedText;this.renderer=function(t){return void 0===t?s:t&&"false"!==t?e:i}}}),Ext.grid.NumberColumn=Ext.extend(Ext.grid.Column,{format:"0,000.00",constructor:function(t){Ext.grid.NumberColumn.superclass.constructor.call(this,t),this.renderer=Ext.util.Format.numberRenderer(this.format)}}),Ext.grid.DateColumn=Ext.extend(Ext.grid.Column,{format:"m/d/Y",constructor:function(t){Ext.grid.DateColumn.superclass.constructor.call(this,t),this.renderer=Ext.util.Format.dateRenderer(this.format)}}),Ext.grid.TemplateColumn=Ext.extend(Ext.grid.Column,{constructor:function(t){Ext.grid.TemplateColumn.superclass.constructor.call(this,t);var s=!Ext.isPrimitive(this.tpl)&&this.tpl.compile?this.tpl:new Ext.XTemplate(this.tpl);this.renderer=function(t,e,i){return s.apply(i.data)},this.tpl=s}}),Ext.grid.ActionColumn=Ext.extend(Ext.grid.Column,{header:"&#160;",actionIdRe:/x-action-col-(\d+)/,altText:"",constructor:function(i){var s,n,r=this,o=i.items||(r.items=[r]),a=o.length;Ext.grid.ActionColumn.superclass.constructor.call(r,i),r.renderer=function(t,e){for(t=Ext.isFunction(i.renderer)&&i.renderer.apply(this,arguments)||"",e.css+=" x-action-col-cell",s=0;s<a;s++)n=o[s],t+='<img alt="'+(n.altText||r.altText)+'" src="'+(n.icon||Ext.BLANK_IMAGE_URL)+'" class="x-action-col-icon x-action-col-'+String(s)+" "+(n.iconCls||"")+" "+(Ext.isFunction(n.getClass)?n.getClass.apply(n.scope||this.scope||this,arguments):"")+'"'+(n.tooltip?' ext:qtip="'+n.tooltip+'"':"")+" />";return t}},destroy:function(){return delete this.items,delete this.renderer,Ext.grid.ActionColumn.superclass.destroy.apply(this,arguments)},processEvent:function(t,e,i,s,n){var r,o=e.getTarget().className.match(this.actionIdRe);if(o&&(r=this.items[parseInt(o[1],10)]))if("click"==t)(o=r.handler||this.handler)&&o.call(r.scope||this.scope||this,i,s,n,r,e);else if("mousedown"==t&&!1!==r.stopSelection)return!1;return Ext.grid.ActionColumn.superclass.processEvent.apply(this,arguments)}}),Ext.grid.Column.types={gridcolumn:Ext.grid.Column,booleancolumn:Ext.grid.BooleanColumn,numbercolumn:Ext.grid.NumberColumn,datecolumn:Ext.grid.DateColumn,templatecolumn:Ext.grid.TemplateColumn,actioncolumn:Ext.grid.ActionColumn},Ext.grid.RowNumberer=Ext.extend(Object,{header:"",width:23,sortable:!1,constructor:function(t){Ext.apply(this,t),this.rowspan&&(this.renderer=this.renderer.createDelegate(this))},fixed:!0,hideable:!1,menuDisabled:!0,dataIndex:"",id:"numberer",rowspan:void 0,renderer:function(t,e,i,s){return this.rowspan&&(e.cellAttr='rowspan="'+this.rowspan+'"'),s+1}}),Ext.grid.CheckboxSelectionModel=Ext.extend(Ext.grid.RowSelectionModel,{header:'<div class="x-grid3-hd-checker">&#160;</div>',width:20,sortable:!1,menuDisabled:!0,fixed:!0,hideable:!1,dataIndex:"",id:"checker",isColumn:!0,constructor:function(){Ext.grid.CheckboxSelectionModel.superclass.constructor.apply(this,arguments),this.checkOnly&&(this.handleMouseDown=Ext.emptyFn)},initEvents:function(){Ext.grid.CheckboxSelectionModel.superclass.initEvents.call(this),this.grid.on("render",function(){Ext.fly(this.grid.getView().innerHd).on("mousedown",this.onHdMouseDown,this)},this)},processEvent:function(t,e,i,s,n){return"mousedown"==t?(this.onMouseDown(e,e.getTarget()),!1):Ext.grid.Column.prototype.processEvent.apply(this,arguments)},onMouseDown:function(t,e){0===t.button&&"x-grid3-row-checker"==e.className&&(t.stopEvent(),(t=t.getTarget(".x-grid3-row"))&&(t=t.rowIndex,this.isSelected(t)?this.deselectRow(t):(this.selectRow(t,!0),this.grid.getView().focusRow(t))))},onHdMouseDown:function(t,e){"x-grid3-hd-checker"==e.className&&(t.stopEvent(),(e=Ext.fly(e.parentNode)).hasClass("x-grid3-hd-checker-on")?(e.removeClass("x-grid3-hd-checker-on"),this.clearSelections()):(e.addClass("x-grid3-hd-checker-on"),this.selectAll()))},renderer:function(t,e,i){return'<div class="x-grid3-row-checker">&#160;</div>'},onEditorSelect:function(t,e){e==t||this.checkOnly||this.selectRow(t)}}),Ext.grid.CellSelectionModel=Ext.extend(Ext.grid.AbstractSelectionModel,{constructor:function(t){Ext.apply(this,t),this.selection=null,this.addEvents("beforecellselect","cellselect","selectionchange"),Ext.grid.CellSelectionModel.superclass.constructor.call(this)},initEvents:function(){this.grid.on("cellmousedown",this.handleMouseDown,this),this.grid.on(Ext.EventManager.getKeyEvent(),this.handleKeyDown,this),this.grid.getView().on({scope:this,refresh:this.onViewChange,rowupdated:this.onRowUpdated,beforerowremoved:this.clearSelections,beforerowsinserted:this.clearSelections}),this.grid.isEditor&&this.grid.on("beforeedit",this.beforeEdit,this)},beforeEdit:function(t){this.select(t.row,t.column,!1,!0,t.record)},onRowUpdated:function(t,e,i){this.selection&&this.selection.record==i&&t.onCellSelect(e,this.selection.cell[1])},onViewChange:function(){this.clearSelections(!0)},getSelectedCell:function(){return this.selection?this.selection.cell:null},clearSelections:function(t){var e=this.selection;e&&(!0!==t&&this.grid.view.onCellDeselect(e.cell[0],e.cell[1]),this.selection=null,this.fireEvent("selectionchange",this,null))},hasSelection:function(){return!!this.selection},handleMouseDown:function(t,e,i,s){0!==s.button||this.isLocked()||this.select(e,i)},select:function(t,e,i,s,n){!1!==this.fireEvent("beforecellselect",this,t,e)&&(this.clearSelections(),n=n||this.grid.store.getAt(t),this.selection={record:n,cell:[t,e]},i||((i=this.grid.getView()).onCellSelect(t,e),!0!==s&&i.focusCell(t,e)),this.fireEvent("cellselect",this,t,e),this.fireEvent("selectionchange",this,this.selection))},isSelectable:function(t,e,i){return!i.isHidden(e)},onEditorKey:function(t,e){e.getKey()==e.TAB&&this.handleKeyDown(e)},handleKeyDown:function(t){if(t.isNavKeyPress()){function e(t,e,i){return a.walkCells(t,e,i,a.isEditor&&a.editing?d.acceptsNav:d.isSelectable,d)}var i,s,n,r,o=t.getKey(),a=this.grid,l=this.selection,d=this;switch(o){case t.ESC:case t.PAGE_UP:case t.PAGE_DOWN:break;default:t.stopEvent()}if(l){switch(n=(i=l.cell)[0],r=i[1],o){case t.TAB:s=t.shiftKey?e(n,r-1,-1):e(n,r+1,1);break;case t.DOWN:s=e(n+1,r,1);break;case t.UP:s=e(n-1,r,-1);break;case t.RIGHT:s=e(n,r+1,1);break;case t.LEFT:s=e(n,r-1,-1);break;case t.ENTER:if(a.isEditor&&!a.editing)return void a.startEditing(n,r)}s&&(n=s[0],r=s[1],this.select(n,r),a.isEditor&&a.editing&&((o=a.activeEditor)&&o.field.triggerBlur&&o.field.triggerBlur(),a.startEditing(n,r)))}else(i=e(0,0,1))&&this.select(i[0],i[1])}},acceptsNav:function(t,e,i){return!i.isHidden(e)&&i.isCellEditable(e,t)}}),Ext.grid.EditorGridPanel=Ext.extend(Ext.grid.GridPanel,{clicksToEdit:2,forceValidation:!1,isEditor:!0,detectEdit:!1,autoEncode:!1,trackMouseOver:!1,initComponent:function(){Ext.grid.EditorGridPanel.superclass.initComponent.call(this),this.selModel||(this.selModel=new Ext.grid.CellSelectionModel),this.activeEditor=null,this.addEvents("beforeedit","afteredit","validateedit")},initEvents:function(){var t;Ext.grid.EditorGridPanel.superclass.initEvents.call(this),this.getGridEl().on("mousewheel",this.stopEditing.createDelegate(this,[!0]),this),this.on("columnresize",this.stopEditing,this,[!0]),1==this.clicksToEdit?this.on("cellclick",this.onCellDblClick,this):(t=this.getView(),"auto"==this.clicksToEdit&&t.mainBody&&t.mainBody.on("mousedown",this.onAutoEditClick,this),this.on("celldblclick",this.onCellDblClick,this))},onResize:function(){Ext.grid.EditorGridPanel.superclass.onResize.apply(this,arguments);var t=this.activeEditor;this.editing&&t&&t.realign(!0)},onCellDblClick:function(t,e,i){this.startEditing(e,i)},onAutoEditClick:function(t,e){var i;0===t.button&&(i=this.view.findRowIndex(e),t=this.view.findCellIndex(e),!1!==i&&!1!==t&&(this.stopEditing(),this.selModel.getSelectedCell?(e=this.selModel.getSelectedCell())&&e[0]===i&&e[1]===t&&this.startEditing(i,t):this.selModel.isSelected(i)&&this.startEditing(i,t)))},onEditComplete:function(t,e,i){this.editing=!1,this.lastActiveEditor=this.activeEditor,this.activeEditor=null;var s,n=t.record,r=this.colModel.getDataIndex(t.col);e=this.postEditValue(e,i,n,r),!0!==this.forceValidation&&String(e)===String(i)||(!(s={grid:this,record:n,field:r,originalValue:i,value:e,row:t.row,column:t.col,cancel:!1})===this.fireEvent("validateedit",s)||s.cancel||String(e)===String(i)||(n.set(r,s.value),delete s.cancel,this.fireEvent("afteredit",s))),this.view.focusCell(t.row,t.col)},startEditing:function(t,e){var i,s,n,r;this.stopEditing(),this.colModel.isCellEditable(e,t)&&(this.view.ensureVisible(t,e,!0),i=this.store.getAt(t),r=this.colModel.getDataIndex(e),!(s={grid:this,record:i,field:r,value:i.data[r],row:t,column:e,cancel:!1})===this.fireEvent("beforeedit",s)||s.cancel||(this.editing=!0,(n=this.colModel.getCellEditor(e,t))&&(n.rendered||(n.parentEl=this.view.getEditorParent(n),n.on({scope:this,render:{fn:function(t){t.field.focus(!1,!0)},single:!0,scope:this},specialkey:function(t,e){this.getSelectionModel().onEditorKey(t,e)},complete:this.onEditComplete,canceledit:this.stopEditing.createDelegate(this,[!0])})),Ext.apply(n,{row:t,col:e,record:i}),this.lastEdit={row:t,col:e},(this.activeEditor=n).field.isXType("checkbox")&&(n.allowBlur=!1,this.setupCheckbox(n.field)),n.selectSameEditor=this.activeEditor==this.lastActiveEditor,r=this.preEditValue(i,r),n.startEdit(this.view.getCell(t,e).firstChild,Ext.isDefined(r)?r:""),function(){delete n.selectSameEditor}.defer(50))))},setupCheckbox:function(t){function e(){t.el.on("click",i.onCheckClick,i,{single:!0})}var i=this;t.rendered?e():t.on("render",e,null,{single:!0})},onCheckClick:function(){var t=this.activeEditor;t.allowBlur=!0,t.field.focus(!1,10)},preEditValue:function(t,e){e=t.data[e];return this.autoEncode&&Ext.isString(e)?Ext.util.Format.htmlDecode(e):e},postEditValue:function(t,e,i,s){return this.autoEncode&&Ext.isString(t)?Ext.util.Format.htmlEncode(t):t},stopEditing:function(t){var e;this.editing&&((e=this.lastActiveEditor=this.activeEditor)&&(e[!0===t?"cancelEdit":"completeEdit"](),this.view.focusCell(e.row,e.col)),this.activeEditor=null),this.editing=!1}}),Ext.reg("editorgrid",Ext.grid.EditorGridPanel),Ext.grid.GridEditor=function(t,e){Ext.grid.GridEditor.superclass.constructor.call(this,t,e),t.monitorTab=!1},Ext.extend(Ext.grid.GridEditor,Ext.Editor,{alignment:"tl-tl",autoSize:"width",hideEl:!1,cls:"x-small-editor x-grid-editor",shim:!1,shadow:!1}),Ext.grid.PropertyRecord=Ext.data.Record.create([{name:"name",type:"string"},"value"]),Ext.grid.PropertyStore=Ext.extend(Ext.util.Observable,{constructor:function(t,e){this.grid=t,this.store=new Ext.data.Store({recordType:Ext.grid.PropertyRecord}),this.store.on("update",this.onUpdate,this),e&&this.setSource(e),Ext.grid.PropertyStore.superclass.constructor.call(this)},setSource:function(t){this.source=t,this.store.removeAll();var e,i=[];for(e in t)this.isEditableValue(t[e])&&i.push(new Ext.grid.PropertyRecord({name:e,value:t[e]},e));this.store.loadRecords({records:i},{},!0)},onUpdate:function(t,e,i){var s;i==Ext.data.Record.EDIT&&(s=e.data.value,i=e.modified.value,!1!==this.grid.fireEvent("beforepropertychange",this.source,e.id,s,i)?(this.source[e.id]=s,e.commit(),this.grid.fireEvent("propertychange",this.source,e.id,s,i)):e.reject())},getProperty:function(t){return this.store.getAt(t)},isEditableValue:function(t){return Ext.isPrimitive(t)||Ext.isDate(t)},setValue:function(t,e,i){var s=this.getRec(t);s?(s.set("value",e),this.source[t]=e):i&&(this.source[t]=e,s=new Ext.grid.PropertyRecord({name:t,value:e},t),this.store.add(s))},remove:function(t){var e=this.getRec(t);e&&(this.store.remove(e),delete this.source[t])},getRec:function(t){return this.store.getById(t)},getSource:function(){return this.source}}),Ext.grid.PropertyColumnModel=Ext.extend(Ext.grid.ColumnModel,{nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",trueText:"true",falseText:"false",constructor:function(t,e){var i=Ext.grid,s=Ext.form;this.grid=t,i.PropertyColumnModel.superclass.constructor.call(this,[{header:this.nameText,width:50,sortable:!0,dataIndex:"name",id:"name",menuDisabled:!0},{header:this.valueText,width:50,resizable:!1,dataIndex:"value",id:"value",menuDisabled:!0}]),this.store=e;e=new s.Field({autoCreate:{tag:"select",children:[{tag:"option",value:"true",html:this.trueText},{tag:"option",value:"false",html:this.falseText}]},getValue:function(){return"true"==this.el.dom.value}});this.editors={date:new i.GridEditor(new s.DateField({selectOnFocus:!0})),string:new i.GridEditor(new s.TextField({selectOnFocus:!0})),number:new i.GridEditor(new s.NumberField({selectOnFocus:!0,style:"text-align:left;"})),boolean:new i.GridEditor(e,{autoSize:"both"})},this.renderCellDelegate=this.renderCell.createDelegate(this),this.renderPropDelegate=this.renderProp.createDelegate(this)},renderDate:function(t){return t.dateFormat(this.dateFormat)},renderBool:function(t){return this[t?"trueText":"falseText"]},isCellEditable:function(t,e){return 1==t},getRenderer:function(t){return 1==t?this.renderCellDelegate:this.renderPropDelegate},renderProp:function(t){return this.getPropertyName(t)},renderCell:function(t,e,i){var s=this.grid.customRenderers[i.get("name")];if(s)return s.apply(this,arguments);s=t;return Ext.isDate(t)?s=this.renderDate(t):"boolean"==typeof t&&(s=this.renderBool(t)),Ext.util.Format.htmlEncode(s)},getPropertyName:function(t){var e=this.grid.propertyNames;return e&&e[t]?e[t]:t},getCellEditor:function(t,e){var i=this.store.getProperty(e),e=i.data.name,i=i.data.value;return this.grid.customEditors[e]||(Ext.isDate(i)?this.editors.date:"number"==typeof i?this.editors.number:"boolean"==typeof i?this.editors.boolean:this.editors.string)},destroy:function(){Ext.grid.PropertyColumnModel.superclass.destroy.call(this),this.destroyEditors(this.editors),this.destroyEditors(this.grid.customEditors)},destroyEditors:function(t){for(var e in t)Ext.destroy(t[e])}}),Ext.grid.PropertyGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:!1,stripeRows:!1,trackMouseOver:!1,clicksToEdit:1,enableHdMenu:!1,viewConfig:{forceFit:!0},initComponent:function(){this.customRenderers=this.customRenderers||{},this.customEditors=this.customEditors||{},this.lastEditRow=null;var t=new Ext.grid.PropertyStore(this);this.propStore=t;var e=new Ext.grid.PropertyColumnModel(this,t);t.store.sort("name","ASC"),this.addEvents("beforepropertychange","propertychange"),this.cm=e,this.ds=t.store,Ext.grid.PropertyGrid.superclass.initComponent.call(this),this.mon(this.selModel,"beforecellselect",function(t,e,i){if(0===i)return this.startEditing.defer(200,this,[e,1]),!1},this)},onRender:function(){Ext.grid.PropertyGrid.superclass.onRender.apply(this,arguments),this.getGridEl().addClass("x-props-grid")},afterRender:function(){Ext.grid.PropertyGrid.superclass.afterRender.apply(this,arguments),this.source&&this.setSource(this.source)},setSource:function(t){this.propStore.setSource(t)},getSource:function(){return this.propStore.getSource()},setProperty:function(t,e,i){this.propStore.setValue(t,e,i)},removeProperty:function(t){this.propStore.remove(t)}}),Ext.reg("propertygrid",Ext.grid.PropertyGrid),Ext.grid.GroupingView=Ext.extend(Ext.grid.GridView,{groupByText:"Group By This Field",showGroupsText:"Show in Groups",hideGroupedColumn:!1,showGroupName:!0,startCollapsed:!1,enableGrouping:!0,enableGroupingMenu:!0,enableNoGroups:!0,emptyGroupText:"(None)",ignoreAdd:!1,groupTextTpl:"{text}",groupMode:"value",cancelEditOnToggle:!0,initTemplates:function(){Ext.grid.GroupingView.superclass.initTemplates.call(this),this.state={};var t=this.grid.getSelectionModel();t.on(t.selectRow?"beforerowselect":"beforecellselect",this.onBeforeRowSelect,this),this.startGroup||(this.startGroup=new Ext.XTemplate('<div id="{groupId}" class="x-grid-group {cls}">','<div id="{groupId}-hd" class="x-grid-group-hd" style="{style}"><div class="x-grid-group-title">',this.groupTextTpl,"</div></div>",'<div id="{groupId}-bd" class="x-grid-group-body">')),this.startGroup.compile(),this.endGroup||(this.endGroup="</div></div>")},findGroup:function(t){return Ext.fly(t).up(".x-grid-group",this.mainBody.dom)},getGroups:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},onAdd:function(t,e,i){var s;this.canGroup()&&!this.ignoreAdd?(s=this.getScrollState(),this.fireEvent("beforerowsinserted",t,i,i+(e.length-1)),this.refresh(),this.restoreScroll(s),this.fireEvent("rowsinserted",t,i,i+(e.length-1))):this.canGroup()||Ext.grid.GroupingView.superclass.onAdd.apply(this,arguments)},onRemove:function(t,e,i,s){Ext.grid.GroupingView.superclass.onRemove.apply(this,arguments);var n=document.getElementById(e._groupId);n&&n.childNodes[1].childNodes.length<1&&Ext.removeNode(n),this.applyEmptyText()},refreshRow:function(t){1==this.ds.getCount()?this.refresh():(this.isUpdating=!0,Ext.grid.GroupingView.superclass.refreshRow.apply(this,arguments),this.isUpdating=!1)},beforeMenuShow:function(){var t,e=this.hmenu.items,i=!1===this.cm.config[this.hdCtxIndex].groupable;(t=e.get("groupBy"))&&t.setDisabled(i),(t=e.get("showGroups"))&&(t.setDisabled(i),t.setChecked(this.canGroup(),!0))},renderUI:function(){var t=Ext.grid.GroupingView.superclass.renderUI.call(this);return this.enableGroupingMenu&&this.hmenu&&(this.hmenu.add("-",{itemId:"groupBy",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:"x-group-by-icon"}),this.enableNoGroups&&this.hmenu.add({itemId:"showGroups",text:this.showGroupsText,checked:!0,checkHandler:this.onShowGroupsClick,scope:this}),this.hmenu.on("beforeshow",this.beforeMenuShow,this)),t},processEvent:function(t,e){Ext.grid.GroupingView.superclass.processEvent.call(this,t,e);var i,s,n,r=e.getTarget(".x-grid-group-hd",this.mainBody);r&&(i=this.getGroupField(),s=this.getPrefix(i),n=r.id.substring(s.length),s=new RegExp("gp-"+Ext.escapeRe(i)+"--hd"),((n=n.substr(0,n.length-3))||s.test(r.id))&&this.grid.fireEvent("group"+t,this.grid,i,n,e),"mousedown"==t&&0==e.button&&this.toggleGroup(r.parentNode))},onGroupByClick:function(){var t=this.grid;this.enableGrouping=!0,t.store.groupBy(this.cm.getDataIndex(this.hdCtxIndex)),t.fireEvent("groupchange",t,t.store.getGroupState()),this.beforeMenuShow(),this.refresh()},onShowGroupsClick:function(t,e){(this.enableGrouping=e)?this.onGroupByClick():(this.grid.store.clearGrouping(),this.grid.fireEvent("groupchange",this,null))},toggleRowIndex:function(t,e){!this.canGroup()||(t=this.getRow(t))&&this.toggleGroup(this.findGroup(t),e)},toggleGroup:function(t,e){var i=Ext.get(t),t=Ext.util.Format.htmlEncode(i.id);e=Ext.isDefined(e)?e:i.hasClass("x-grid-group-collapsed"),this.state[t]!==e&&(!1!==this.cancelEditOnToggle&&this.grid.stopEditing(!0),i[(this.state[t]=e)?"removeClass":"addClass"]("x-grid-group-collapsed"))},toggleAllGroups:function(t){for(var e=this.getGroups(),i=0,s=e.length;i<s;i++)this.toggleGroup(e[i],t)},expandAllGroups:function(){this.toggleAllGroups(!0)},collapseAllGroups:function(){this.toggleAllGroups(!1)},getGroup:function(t,e,i,s,n,r){var o=this.cm.config[n],t=i?i.call(o.scope,t,{},e,s,n,r):String(t);return t=""===t||"&#160;"===t?o.emptyGroupText||this.emptyGroupText:t},getGroupField:function(){return this.grid.store.getGroupState()},afterRender:function(){this.ds&&this.cm&&(Ext.grid.GroupingView.superclass.afterRender.call(this),this.grid.deferRowRender&&this.updateGroupWidths())},afterRenderUI:function(){Ext.grid.GroupingView.superclass.afterRenderUI.call(this),this.enableGroupingMenu&&this.hmenu&&(this.hmenu.add("-",{itemId:"groupBy",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:"x-group-by-icon"}),this.enableNoGroups&&this.hmenu.add({itemId:"showGroups",text:this.showGroupsText,checked:!0,checkHandler:this.onShowGroupsClick,scope:this}),this.hmenu.on("beforeshow",this.beforeMenuShow,this))},renderRows:function(){var t,e,i=this.getGroupField(),s=!!i;return this.hideGroupedColumn&&(t=this.cm.findColumnIndex(i),e=Ext.isDefined(this.lastGroupField),!s&&e?(this.mainBody.update(""),this.cm.setHidden(this.cm.findColumnIndex(this.lastGroupField),!1),delete this.lastGroupField):s&&!e?(this.lastGroupField=i,this.cm.setHidden(t,!0)):s&&e&&i!==this.lastGroupField&&(this.mainBody.update(""),e=this.cm.findColumnIndex(this.lastGroupField),this.cm.setHidden(e,!1),this.lastGroupField=i,this.cm.setHidden(t,!0))),Ext.grid.GroupingView.superclass.renderRows.apply(this,arguments)},doRender:function(t,e,i,s,n,r){if(e.length<1)return"";if(!this.canGroup()||this.isUpdating)return Ext.grid.GroupingView.superclass.doRender.apply(this,arguments);for(var o,a,l=this.getGroupField(),d=this.cm.findColumnIndex(l),h="width:"+this.getTotalWidth()+";",c=this.cm.config[d],u=c.groupRenderer||c.renderer,f=this.showGroupName?(c.groupName||c.header)+": ":"",p=[],m=0,g=e.length;m<g;m++){var x=s+m,E=e[m],v=E.data[l],y=this.getGroup(v,E,u,x,d,i);o&&o.group==y?o.rs.push(E):(a=this.constructId(v,l,d),this.state[a]=!(Ext.isDefined(this.state[a])?!this.state[a]:this.startCollapsed),o={group:y,gvalue:v,text:f+y,groupId:a,startRow:x,rs:[E],cls:this.state[a]?"":"x-grid-group-collapsed",style:h},p.push(o)),E._groupId=a}var b=[];for(m=0,g=p.length;m<g;m++)y=p[m],this.doGroupStart(b,y,t,i,n),b[b.length]=Ext.grid.GroupingView.superclass.doRender.call(this,t,y.rs,i,y.startRow,n,r),this.doGroupEnd(b,y,t,i,n);return b.join("")},getGroupId:function(t){var e=this.getGroupField();return this.constructId(t,e,this.cm.findColumnIndex(e))},constructId:function(t,e,i){var s=this.cm.config[i],s=s.groupRenderer||s.renderer,i="value"==this.groupMode?t:this.getGroup(t,{data:{}},s,0,i,this.ds);return this.getPrefix(e)+Ext.util.Format.htmlEncode(i)},canGroup:function(){return this.enableGrouping&&!!this.getGroupField()},getPrefix:function(t){return this.grid.getGridEl().id+"-gp-"+t+"-"},doGroupStart:function(t,e,i,s,n){t[t.length]=this.startGroup.apply(e)},doGroupEnd:function(t,e,i,s,n){t[t.length]=this.endGroup},getRows:function(){if(!this.canGroup())return Ext.grid.GroupingView.superclass.getRows.call(this);for(var t,e,i,s=[],n=this.getGroups(),r=0,o=n.length;r<o;++r)if(t=n[r].childNodes[1])for(e=0,i=(t=t.childNodes).length;e<i;++e)s[s.length]=t[e];return s},updateGroupWidths:function(){if(this.canGroup()&&this.hasRows())for(var t=Math.max(this.cm.getTotalWidth(),this.el.dom.offsetWidth-this.getScrollOffset())+"px",e=this.getGroups(),i=0,s=e.length;i<s;i++)e[i].firstChild.style.width=t},onColumnWidthUpdated:function(t,e,i){Ext.grid.GroupingView.superclass.onColumnWidthUpdated.call(this,t,e,i),this.updateGroupWidths()},onAllColumnWidthsUpdated:function(t,e){Ext.grid.GroupingView.superclass.onAllColumnWidthsUpdated.call(this,t,e),this.updateGroupWidths()},onColumnHiddenUpdated:function(t,e,i){Ext.grid.GroupingView.superclass.onColumnHiddenUpdated.call(this,t,e,i),this.updateGroupWidths()},onLayout:function(){this.updateGroupWidths()},onBeforeRowSelect:function(t,e){this.toggleRowIndex(e,!0)}}),Ext.grid.GroupingView.GROUP_ID=1e3,Ext.ns("Ext.ux.grid"),Ext.ux.grid.GroupSummary=Ext.extend(Ext.util.Observable,{constructor:function(t){Ext.apply(this,t),Ext.ux.grid.GroupSummary.superclass.constructor.call(this)},init:function(t){this.grid=t;t=this.view=t.getView();t.doGroupEnd=this.doGroupEnd.createDelegate(this),t.afterMethod("onColumnWidthUpdated",this.doWidth,this),t.afterMethod("onAllColumnWidthsUpdated",this.doAllWidths,this),t.afterMethod("onColumnHiddenUpdated",this.doHidden,this),t.afterMethod("onUpdate",this.doUpdate,this),t.afterMethod("onRemove",this.doRemove,this),this.rowTpl||(this.rowTpl=new Ext.Template('<div class="x-grid3-summary-row" style="{tstyle}">','<table class="x-grid3-summary-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody><tr>{cells}</tr></tbody>","</table></div>"),this.rowTpl.disableFormats=!0),this.rowTpl.compile(),this.cellTpl||(this.cellTpl=new Ext.Template('<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}">','<div class="x-grid3-cell-inner x-grid3-col-{id}" unselectable="on">{value}</div>',"</td>"),this.cellTpl.disableFormats=!0),this.cellTpl.compile()},toggleSummaries:function(t){var e=this.grid.getGridEl();e&&(void 0===t&&(t=e.hasClass("x-grid-hide-summary")),e[t?"removeClass":"addClass"]("x-grid-hide-summary"))},renderSummary:function(t,e){e=e||this.view.getColumnData();for(var i,s,n=this.grid.getColumnModel().config,r=[],o={},a=e.length-1,l=0,d=e.length;l<d;l++)i=e[l],s=n[l],o.id=i.id,o.style=i.style,o.css=0==l?"x-grid3-cell-first ":l==a?"x-grid3-cell-last ":"",s.summaryType||s.summaryRenderer?o.value=(s.summaryRenderer||i.renderer)(t.data[i.name],o,t):o.value="",null!=o.value&&""!==o.value||(o.value="&#160;"),r[r.length]=this.cellTpl.apply(o);return this.rowTpl.apply({tstyle:"width:"+this.view.getTotalWidth()+";",cells:r.join("")})},calculate:function(t,e){for(var i,s,n={},r=this.grid.getColumnModel().config,o=0,a=t.length;o<a;o++)for(var l=t[o],d=0,h=e.length;d<h;d++)i=e[d],(s=r[d]).summaryType&&(n[i.name]=Ext.ux.grid.GroupSummary.Calculations[s.summaryType](n[i.name]||0,l,i.name,n));return n},doGroupEnd:function(t,e,i,s,n){e=this.calculate(e.rs,i);t.push("</div>",this.renderSummary({data:e},i),"</div>")},doWidth:function(t,e,i){if(this.isGrouped())for(var s,n=this.view.getGroups(),r=n.length,o=0;o<r;++o)(s=n[o].childNodes[2]).style.width=i,s.firstChild.style.width=i,s.firstChild.rows[0].childNodes[t].style.width=e},doAllWidths:function(t,e){if(this.isGrouped())for(var i,s,n,r=this.view.getGroups(),o=r.length,a=0,l=t.length;a<o;a++)for((s=r[a].childNodes[2]).style.width=e,s.firstChild.style.width=e,n=s.firstChild.rows[0].childNodes,i=0;i<l;i++)n[i].style.width=t[i]},doHidden:function(t,e,i){if(this.isGrouped())for(var s,n=this.view.getGroups(),r=n.length,o=0,a=e?"none":"";o<r;o++)(s=n[o].childNodes[2]).style.width=i,s.firstChild.style.width=i,s.firstChild.rows[0].childNodes[t].style.display=a},isGrouped:function(){return!Ext.isEmpty(this.grid.getStore().groupField)},refreshSummary:function(t){return this.refreshSummaryById(this.view.getGroupId(t))},getSummaryNode:function(t){t=Ext.fly(t,"_gsummary");return t?t.down(".x-grid3-summary-row",!0):null},refreshSummaryById:function(e){var t=Ext.getDom(e);if(!t)return!1;var i=[];this.grid.getStore().each(function(t){t._groupId==e&&(i[i.length]=t)});var s=this.view.getColumnData(),n=this.calculate(i,s),n=this.renderSummary({data:n},s),s=this.getSummaryNode(e);return s&&t.removeChild(s),Ext.DomHelper.append(t,n),!0},doUpdate:function(t,e){this.refreshSummaryById(e._groupId)},doRemove:function(t,e,i,s){s||this.refreshSummaryById(e._groupId)},showSummaryMsg:function(t,e){t=this.view.getGroupId(t),t=this.getSummaryNode(t);t&&(t.innerHTML='<div class="x-grid3-summary-msg">'+e+"</div>")}}),Ext.grid.GroupSummary=Ext.ux.grid.GroupSummary,Ext.ux.grid.GroupSummary.Calculations={sum:function(t,e,i){return t+(e.data[i]||0)},count:function(t,e,i,s){return s[i+"count"]?++s[i+"count"]:s[i+"count"]=1},max:function(t,e,i,s){t=e.data[i],e=void 0===s[i+"max"]?s[i+"max"]=t:s[i+"max"];return e<t?s[i+"max"]=t:e},min:function(t,e,i,s){t=e.data[i],e=void 0===s[i+"min"]?s[i+"min"]=t:s[i+"min"];return t<e?s[i+"min"]=t:e},average:function(t,e,i,s){var n=s[i+"count"]?++s[i+"count"]:s[i+"count"]=1,i=s[i+"total"]=(s[i+"total"]||0)+(e.data[i]||0);return 0===i?0:i/n}},Ext.grid.GroupSummary.Calculations=Ext.ux.grid.GroupSummary.Calculations,Ext.ux.grid.HybridSummary=Ext.extend(Ext.ux.grid.GroupSummary,{calculate:function(t,e){var i=this.view.getGroupField(),i=t[0].data[i];return this.getSummaryData(i)||Ext.ux.grid.HybridSummary.superclass.calculate.call(this,t,e)},updateSummaryData:function(t,e,i){var s=this.grid.getStore().reader.jsonData;s.summaryData||(s.summaryData={}),s.summaryData[t]=e,i||this.refreshSummary(t)},getSummaryData:function(t){var e,i=this.grid.getStore().reader,s=i.jsonData,n=i.recordType.prototype.fields;return s&&s.summaryData&&(e=s.summaryData[t])?i.extractValues(e,n.items,n.length):null}}),Ext.grid.HybridSummary=Ext.ux.grid.HybridSummary;var appName="STIG Manager",appVersion="3.0",copyrightStr="",licenseStr="This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nThis program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.\n\nThe GNU General Public License is available at  <http://www.gnu.org/licenses/>.",curUser,appConfig;Ext.ns("SM"),SM.he=Ext.util.Format.htmlEncode,SM.hd=Ext.util.Format.htmlDecode,SM.GetUserObject=async function(){var t=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/user",method:"GET"});return(curUser=JSON.parse(t.response.responseText)).collectionGrants.sort((t,e)=>{t=t.collection.name,e=e.collection.name;return t<e?-1:e<t?1:0}),curUser},SM.styledEmptyRenderer=t=>t||'<span class="sm-empty-cell" />',SM.ResultTipText=`<b>Result</b><br>The result of an evaluation of a STIG ruleId.<br><br><b>Export Mappings</b><br><b>CKL:</b> &lt;CHECKLIST&gt;&lt;STIGS&gt;&lt;iSTIG&gt;&lt;VULN&gt;&lt;STATUS&gt;<br>
<b>XCCDF:</b> &lt;TestResult&gt;&lt;rule-result&gt;&lt;result&gt;`,SM.ResultTipTpl=new Ext.XTemplate(`<b>Result</b><br>The result of an evaluation of a STIG ruleId.<br><br><b>Export Mappings</b><br><b>CKL:</b> &lt;CHECKLIST&gt;&lt;STIGS&gt;&lt;iSTIG&gt;&lt;VULN&gt;&lt;STATUS&gt;<br>
<b>XCCDF:</b> &lt;TestResult&gt;&lt;rule-result&gt;&lt;result&gt;`),SM.DetailTipText=`<b>Detail</b><br>A description of how the evaluator or evaluation tool determined the result.<br><br><b>Export Mappings</b><br><b>CKL:</b> &lt;CHECKLIST&gt;&lt;STIGS&gt;&lt;iSTIG&gt;&lt;VULN&gt;&lt;FINDING_DETAILS&gt;<br>
<b>XCCDF:</b> &lt;TestResult&gt;&lt;rule-result&gt;&lt;message&gt;`,SM.DetailTipTpl=new Ext.XTemplate("<b>Detail</b><br>A description of how the evaluator or evaluation tool determined the result.<br><br>","<b>Collection Settings</b></br>This field is enabled ",`<tpl if="detailEnabled == 'always'">for any result.<br></tpl>`,`<tpl if="detailEnabled == 'findings'">for findings only.<br></tpl>`,"Content in this field is ",`<tpl if="detailRequired == 'always'">required to submit a review.<br></tpl>`,`<tpl if="detailRequired == 'findings'">required to submit a finding.<br></tpl>`,`<tpl if="detailRequired == 'optional'">optional.<br></tpl>`,"<br><b>Export Mappings</b><br><b>CKL:</b> &lt;CHECKLIST&gt;&lt;STIGS&gt;&lt;iSTIG&gt;&lt;VULN&gt;&lt;FINDING_DETAILS&gt;<br><b>XCCDF:</b> &lt;TestResult&gt;&lt;rule-result&gt;&lt;message&gt;"),SM.CommentTipText=`<b>Comment</b><br>Additional comment by the evaluator or evaluation tool.<br><br><b>Export Mappings</b><br><b>CKL:</b> &lt;CHECKLIST&gt;&lt;STIGS&gt;&lt;iSTIG&gt;&lt;VULN&gt;&lt;COMMENTS&gt;<br>
<b>XCCDF:</b> &lt;TestResult&gt;&lt;rule-result&gt;&lt;metadata comment&gt;`,SM.CommentTipTpl=new Ext.XTemplate("<b>Comment</b><br>Additional comment by the evaluator or evaluation tool.<br><br>","<b>Collection Settings</b></br>This field is enabled ",`<tpl if="commentEnabled == 'always'">for any result.<br></tpl>`,`<tpl if="commentEnabled == 'findings'">for findings only.<br></tpl>`,"Content in this field is ",`<tpl if="commentRequired == 'always'">required to submit a review.<br></tpl>`,`<tpl if="commentRequired == 'findings'">required to submit a finding.<br></tpl>`,`<tpl if="commentRequired == 'optional'">optional.<br></tpl>`,`<br><b>Export Mappings</b><br><b>CKL:</b> &lt;CHECKLIST&gt;&lt;STIGS&gt;&lt;iSTIG&gt;&lt;VULN&gt;&lt;COMMENTS&gt;<br>
    <b>XCCDF:</b> &lt;TestResult&gt;&lt;rule-result&gt;&lt;metadata comment&gt;`),SM.RenderResult={fail:{css:"sm-result-fail",textDisa:"O",textNist:"F"},pass:{css:"sm-result-pass",textDisa:"NF",textNist:"P"},notapplicable:{css:"sm-result-na",textDisa:"NA",textNist:"N"},notchecked:{css:"sm-result-nr",textDisa:"NR",textNist:"K"},unknown:{css:"sm-result-nr",textDisa:"U",textNist:"U"},error:{css:"sm-result-nr",textDisa:"E",textNist:"E"},notselected:{css:"sm-result-nr",textDisa:"S",textNist:"S"},informational:{css:"sm-result-nr",textDisa:"I",textNist:"I"},fixed:{css:"sm-result-pass",textDisa:"F",textNist:"F"}},SM.RuleContentTpl=new Ext.XTemplate("<div class=cs-home-header-top>{ruleId}",'<span class="sm-content-sprite sm-severity-{severity}">',`<tpl if="severity == 'high'">CAT 1</tpl>`,`<tpl if="severity == 'medium'">CAT 2</tpl>`,`<tpl if="severity == 'low'">CAT 3</tpl>`,"</span>","</div>","<div class=cs-home-header-sub>{[SM.he(values.title)]}</div>","<div class=cs-home-body-title>Manual Check","<div class=cs-home-body-text>",'<tpl for="checks">',"<pre>{[SM.he(values.content?.trim())]}</pre>","</tpl>","</div>","</div>","<div class=cs-home-body-title>Fix","<div class=cs-home-body-text>",'<tpl for="fixes">',"<pre>{[SM.he(values.text?.trim())]}</pre>","</tpl>","</div>","</div>","<div class=cs-home-header-sub></div>","<div class=cs-home-body-title>Other Data",'<tpl if="values.detail.vulnDiscussion">',"<div class=cs-home-body-text><b>Vulnerability Discussion</b><br><br>","<pre>{[SM.he(values.detail.vulnDiscussion?.trim())]}</pre>","</div>","</tpl>",'<tpl if="values.detail.documentable">',"<div class=cs-home-body-text><b>Documentable: </b>{[SM.he(values.detail.documentable)]}</div>","</tpl>",'<tpl if="values.detail.responsibility">',"<div class=cs-home-body-text><b>Responsibility: </b>{[SM.he(values.detail.responsibility)]}</div>","</tpl>",'<tpl if="values.ccis.length === 0">',"<div class=cs-home-body-text><b>Controls: </b>No mapped controls</div>","</tpl>",'<tpl if="values.ccis.length !== 0">',"<div class=cs-home-body-text><b>Controls: </b><br>",'<table class=cs-home-body-table border="1">',"<tr><td><b>CCI</b></td><td><b>AP Acronym</b></td><td><b>Control</b></td></tr>",'<tpl for="ccis">',"<tr><td>{cci}</td><td>{[SM.he(values.apAcronym)]}</td><td>{[SM.he(values.control)]}</td></tr>","</tpl>","</table>","</div>","</tpl>","</div>"),SM.StoreRowCount=function(t){var e=t.data.length||0,i=t.snapshot?.length||e;return`${e}${t.isFiltered()?" of "+i:""} row`+(1===i?"":"s")},SM.RowCountTextItem=Ext.extend(Ext.Toolbar.TextItem,{initComponent:function(){const e=this;var t={store:this.store};this.store?.on("load",function(t){e.setText(SM.StoreRowCount(t))}),this.store?.on("datachanged",function(t){e.setText(SM.StoreRowCount(t))}),this.store?.on("remove",function(t){e.setText(SM.StoreRowCount(t))}),this.store?.on("clear",function(t){e.setText(SM.StoreRowCount(t))}),this.store?.on("add",function(t){e.setText(SM.StoreRowCount(t))}),Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.RowCountTextItem.superclass.initComponent.call(this)}}),Ext.ns("SM.TipContent"),Ext.ns("SM.TipContent.CklParseOptions"),SM.TipContent.CklParseOptions.Text=`If checked, <b>clear</b> existing Review Detail when &lt;FINDING_DETAILS&gt; 
  is empty and <b>clear</b> existing Review Comment when &lt;COMMENTS&gt; is empty.
  <br><br>
  If unchecked, <b>retain</b> existing Review Detail when &lt;FINDING_DETAILS&gt; 
  is empty and <b>retain</b> existing Review Comment when &lt;COMMENTS&gt; is empty.`,SM.TipContent.CklParseOptions.Revision=`If checked, skip CKL with results for a STIG revision that is not available.
  <br><br>
  If unchecked, process CKL with results for any revision of a STIG that is mapped to the corresponding Asset.`,Ext.lib.Ajax=function(){var o=["Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP"],l="Content-Type";function a(t){var i,e=t.conn,t={};Ext.apply(t,m.headers,m.defaultHeaders),function(t,e){for(i in e)e.hasOwnProperty(i)&&t.setRequestHeader(i,e[i])}(e,t),delete m.headers}function d(t,e){(m.headers=m.headers||{})[t]=e}function h(t,e){var i,s,n,r={},o=t.conn,a=1223==o.status;try{i=t.conn.getAllResponseHeaders(),Ext.each(i.replace(/\r\n/g,"\n").split("\n"),function(t){0<=(s=t.indexOf(":"))&&(n=t.substr(0,s).toLowerCase()," "==t.charAt(s+1)&&++s,r[n]=t.substr(s+1))})}catch(t){}return{tId:t.tId,status:a?204:o.status,statusText:a?"No Content":o.statusText,getResponseHeader:function(t){return r[t.toLowerCase()]},getAllResponseHeaders:function(){return i},responseText:o.responseText,responseXML:o.responseXML,argument:e}}function c(t){t.tId&&(m.conn[t.tId]=null),t.conn=null}function u(t,e,i,s){if(e){var n,r,o,a;try{n=void 0!==t.conn.status&&0!=t.conn.status?t.conn.status:13030}catch(t){n=13030}if(200<=n&&n<300||Ext.isIE&&1223==n)r=h(t,e.argument),e.success&&(e.scope?e.success.apply(e.scope,[r]):e.success(r));else switch(n){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:a=t.tId,o=e.argument,r={tId:a,status:(a=i||!1)?-1:0,statusText:a?"transaction aborted":"communication failure",isAbort:a,isTimeout:s,argument:o},e.failure&&(e.scope?e.failure.apply(e.scope,[r]):e.failure(r));break;default:r=h(t,e.argument),e.failure&&(e.scope?e.failure.apply(e.scope,[r]):e.failure(r))}c(t)}else c(t)}function f(t,e){var i=t.conn,s=t.tId,n=m.poll,r=(e=e||{}).timeout||null;r&&(m.conn[s]=i,m.timeout[s]=setTimeout(function(t,e){m.abort(t,e,!0)}.createCallback(t,e),r)),n[s]=setInterval(function(t,e,i,s,n,r){i&&4==i.readyState&&(clearInterval(n[s]),n[s]=null,r&&(clearTimeout(m.timeout[s]),m.timeout[s]=null),u(t,e))}.createCallback(t,e,i,s,n,r),m.pollInterval)}function p(e,i,s,n){var r=function(){var t;try{(t=function(t){var e;try{e=new XMLHttpRequest}catch(t){for(var i=Ext.isIE6?1:0;i<o.length;++i)try{e=new ActiveXObject(o[i]);break}catch(t){}}finally{return{conn:e,tId:t}}}(m.transactionId))&&m.transactionId++}catch(t){}finally{return t}}()||null;return r&&window.oidcProvider.updateToken(10).then(function(t){r.conn.open(e,i,!0),window.oidcProvider.token&&d("Authorization","Bearer "+window.oidcProvider.token),m.useDefaultXhrHeader&&d("X-Requested-With",m.defaultXhrHeader),!n||!m.useDefaultHeader||m.headers&&m.headers[l]||d(l,m.defaultPostHeader),(m.defaultHeaders||m.headers)&&a(r),f(r,s),r.conn.send(n||null)}).catch(function(t){console.info("In Ext.lib.Ajax.asyncRequest - updateToken() error: "+t),m.abort(r,s,!1)}),r}var m={request:function(t,e,i,s,n){var r,o,a;return n&&(r=n.xmlData,o=n.jsonData,Ext.applyIf(this,n),(r||o)&&((a=this.headers)&&a[l]||d(l,r?"text/xml":"application/json"),s=r||(Ext.isPrimitive(o)?o:Ext.encode(o)))),p(t||n.method||"POST",e,i,s)},serializeForm:function(t){var e,i,s,t=t.elements||(document.forms[t]||Ext.getDom(t)).elements,n=!1,r=encodeURIComponent,o="";return Ext.each(t,function(t){e=t.name,i=t.type,!t.disabled&&e&&(/select-(one|multiple)/i.test(i)?Ext.each(t.options,function(t){t.selected&&(s=t.hasAttribute?t.hasAttribute("value"):t.getAttributeNode("value").specified,o+=String.format("{0}={1}&",r(e),r(s?t.value:t.text)))}):/file|undefined|reset|button/i.test(i)||/radio|checkbox/i.test(i)&&!t.checked||"submit"==i&&n||(o+=r(e)+"="+r(t.value)+"&",n=/submit/i.test(i)))}),o.substr(0,o.length-1)},useDefaultHeader:!0,defaultPostHeader:"application/json",useDefaultXhrHeader:!0,defaultXhrHeader:"XMLHttpRequest",poll:{},timeout:{},conn:{},pollInterval:50,transactionId:0,abort:function(t,e,i){var s=t.tId,n=!1;return this.isCallInProgress(t)&&(t.conn.abort(),clearInterval(this.poll[s]),this.poll[s]=null,clearTimeout(m.timeout[s]),u(t,e,n=!(this.timeout[s]=null),i)),n},isCallInProgress:function(t){return t.conn&&!{0:!0,4:!0}[t.conn.readyState]}};return m}(),Ext.ns("SM"),window.oidcProvider.onRefreshExpWarn=function(e){var t=Math.round(e-(new Date).getTime()/1e3);let i="refresh";Ext.Msg.alert("Session Timeout",`Your session will expire in ${t} seconds. Click OK to coontinue session`,function(){"refresh"===i?window.oidcProvider.updateToken(-1):"reload"===i&&window.location.reload()});let s;s=setInterval(()=>{var t=Math.round(e-(new Date).getTime()/1e3);t<=0?(clearInterval(s),i="reload",Ext.Msg.updateText("Your session has expired.  Click OK to reload STIG Manager")):Ext.Msg.updateText(`Your session will expire in ${t} seconds.  Click OK to coontinue session`)},1e3)};"use strict";Ext.ns("SM");class Classification{constructor(t){switch(this.showBanner=!0,t){case"U":this.classificationCls="unclassified",this.classificationText="UNCLASSIFIED (U)";break;case"CUI":case"FOUO":this.classificationCls="cui",this.classificationText="CONTROLLED (CUI)";break;case"C":this.classificationCls="confidential",this.classificationText="CONFIDENTIAL (C)";break;case"S":this.classificationCls="secret",this.classificationText="SECRET (S)";break;case"TS":this.classificationCls="topsecret",this.classificationText="TOP SECRET (TS)";break;case"SCI":this.classificationCls="sci",this.classificationText="TOP SECRET / SCI (TS/SCI)";break;default:this.showBanner=!1}}}Ext.ns("SM"),SM.Margin={adjacent:3,top:6,bottom:0,edge:0},SM.MainTabPanel=Ext.extend(Ext.TabPanel,{initComponent:function(){const i=this;this.onCollectionChanged=t=>{if(t.name)for(const e of i.items.items)e.collectionId===t.collectionId&&(e.collectionName=t.name,e.updateTitle.call(e))},this.onCollectionDeleted=e=>{for(const t of i.items.items.filter(t=>t.collectionId===e))i.remove(t)};var t={plugins:new SM.TabEnhancements,title:"STIGManager",enableTabScroll:!0,activeTab:0,listeners:{beforetabchange:function(t,e,i){var s;Ext.isIE&&(Ext.isDefined(i)&&"asset_review"==i.sm_TabType&&((i=i.sm_GroupGridView).scrollTop=i.scroller.dom.scrollTop,i.scrollHeight=i.scroller.dom.scrollHeight),Ext.isDefined(e)&&"asset_review"==e.sm_TabType&&(s=e.sm_GroupGridView,Ext.isDefined(s.scroller)&&setTimeout(function(){s.scroller.dom.scrollTop=s.scrollTop+(0==s.scrollTop?0:s.scroller.dom.scrollHeight-s.scrollHeight)},100)))},tabchange:function(t,e){e.sm_treePath&&Ext.getCmp("app-nav-tree").selectPath(e.sm_treePath)}},items:[]};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.MainTabPanel.superclass.initComponent.call(this),SM.Dispatcher.addListener("collectionchanged",this.onCollectionChanged),SM.Dispatcher.addListener("collectiondeleted",this.onCollectionDeleted)}}),SM.HomeTab=Ext.extend(Ext.Panel,{initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,{autoScroll:!0})),SM.HomeTab.superclass.initComponent.call(this)}}),SM.WelcomeWidget=Ext.extend(Ext.Panel,{initComponent:function(){Ext.id();var t=new Ext.XTemplate("<div class=sm-home-widget-header>","<div class='sm-home-widget-title'>Welcome</div>","</div>","<div class='sm-home-widget-text'>","<div class=sm-home-widget-image-text-wrap>",`<img src="${STIGMAN.Env.welcome.image||"img/navy.svg"}" style="max-width:100%;max-height:100%;"/>`,"</div>",'<b>STIG Manager</b> is an API and Web client for managing the assessment of Information Systems for compliance with <a href="https://public.cyber.mil/stigs/">security checklists</a> published by the United States Defense Information Systems Agency (DISA). The software is <a target="_blank" href="https://github.com/NUWCDIVNPT/stig-manager">an open source project</a> maintained by the Naval Sea Systems Command (NAVSEA) of the United States Navy.',"</div>","<div class='sm-home-widget-text'>",`<div class='sm-home-widget-subtitle'>${STIGMAN.Env.welcome.title?SM.he(STIGMAN.Env.welcome.title):STIGMAN.Env.welcome.message||STIGMAN.Env.welcome.link?"Support":""}</div>`,""+SM.he(STIGMAN.Env.welcome.message)+(STIGMAN.Env.welcome.message&&STIGMAN.Env.welcome.link?"<br><br>":""),STIGMAN.Env.welcome.link?'<a href="'+STIGMAN.Env.welcome.link+'">'+STIGMAN.Env.welcome.link+"</a>":"","</div>");Ext.apply(this,Ext.apply(this.initialConfig,{tpl:t,bodyCssClass:"sm-home-widget-body",border:!1,data:[1]})),SM.WelcomeWidget.superclass.initComponent.call(this)}}),Ext.reg("sm-home-widget-welcome",SM.WelcomeWidget),SM.DocWidget=Ext.extend(Ext.Panel,{initComponent:function(){Ext.id();var t=new Ext.XTemplate("<div class=sm-home-widget-header>","<div class='sm-home-widget-title'>Documentation</div>","</div>","<div class='sm-home-widget-text'>","<div class='sm-home-widget-subtitle'>Need help?</div>",'Check out our <a target="_blank" href="docs/index.html">Documentation</a>',"</div>","<div class='sm-home-widget-text'>","<div class='sm-home-widget-subtitle'> Just Geting Started? </div>",'Check out our <a target="_blank" href="docs/user-guide/user-quickstart.html">User Walkthrough</a> or the <a target="_blank" href="docs/user-guide/user-guide.html">User Guide</a>',"</div>","<div class='sm-home-widget-text'>","<div class='sm-home-widget-subtitle'>Common Tasks </div>",'Not sure how to do something in STIG Manager? Check out these links to <a target="_blank" href="docs/features/common-tasks.html">Common Tasks</a>',"</div>","<div class='sm-home-widget-text'>","<div class='sm-home-widget-subtitle'>Issues, Feature Requests, and Contributions</div>",'Want to report a bug, request a feature, or help out the project? <a target="_blank" href="docs/the-project/contributing.html">Check out our Contribution Guide</a>',"</div>");Ext.apply(this,Ext.apply(this.initialConfig,{tpl:t,bodyCssClass:"sm-home-widget-body",border:!1,data:[1]})),SM.DocWidget.superclass.initComponent.call(this)}}),Ext.reg("sm-home-widget-doc",SM.DocWidget),SM.ResourcesWidget=Ext.extend(Ext.Panel,{initComponent:function(){Ext.id();var t=new Ext.XTemplate("<div class=sm-home-widget-header>","<div class='sm-home-widget-title'>Resources</div>","</div>","<div class='sm-home-widget-text'>","<div class='sm-home-widget-subtitle'>GitHub</div>",'<p><a target="_blank" href="https://github.com/NUWCDIVNPT/stig-manager">STIG Manager</a></p>','<p><a target="_blank" href="https://github.com/NUWCDIVNPT/stigman-watcher">STIG Manager Watcher</a></p>',"</div>","<div class='sm-home-widget-text'>","<div class='sm-home-widget-subtitle'>DISA STIGs</div>",'Get the latest STIGs at <a target="_blank" href="https://public.cyber.mil/stigs/downloads/">cyber.mil</a>.',"</div>","<div class='sm-home-widget-text'>","<div class='sm-home-widget-subtitle'>RMF Reference</div>",'STIG Manager assists with STEP 4 of the <a target="_blank" href="https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-37r2.pdf">Risk Management Framework Process</a>.',"</div>","<div class='sm-home-widget-text'>","<div class='sm-home-widget-subtitle'>DevSecOps</div>",'STIG Manager is being developed as part of the <a target="_blank" href="https://software.af.mil/dsop/documents/">DoD Enterprise DevSecOps</a> and <a target="_blank" href="https://code.mil">Code.mil Open Source </a> initiatives.',"</div>");Ext.apply(this,Ext.apply(this.initialConfig,{tpl:t,bodyCssClass:"sm-home-widget-body",border:!1,data:[1]})),SM.ResourcesWidget.superclass.initComponent.call(this)}}),Ext.reg("sm-home-widget-resources",SM.ResourcesWidget),SM.StigWidget=Ext.extend(Ext.Panel,{initComponent:function(){Ext.id();var t=new Ext.XTemplate("<div class=sm-home-widget-header>","<div class='sm-home-widget-title'>STIG updates</div>","</div>","<div class='sm-reviews-home-body-text'>Lorum ipsum sit dolor.</div>");Ext.apply(this,Ext.apply(this.initialConfig,{tpl:t,bodyCssClass:"sm-home-widget-body",border:!1,data:[1]})),SM.StigWidget.superclass.initComponent.call(this)}}),Ext.reg("sm-home-widget-stig",SM.StigWidget),Ext.ns("SM"),SM.Dispatcher=new Ext.util.Observable,SM.Dispatcher.addEvents("collectioncreated","collectiondeleted","collectionchanged","assetcreated","assetdeleted","assetchanged","usercreated","userdeleted","userchanged","stigassetschanged","fieldsettingschanged","statussettingschanged"),Ext.ns("Ext.ux.form"),Ext.ux.form.FileUploadField=Ext.extend(Ext.form.TextField,{buttonText:"Browse...",buttonOnly:!1,buttonOffset:3,readOnly:!0,autoSize:Ext.emptyFn,initComponent:function(){Ext.ux.form.FileUploadField.superclass.initComponent.call(this),this.addEvents("fileselected")},onRender:function(t,e){Ext.ux.form.FileUploadField.superclass.onRender.call(this,t,e),this.wrap=this.el.wrap({cls:"x-form-field-wrap x-form-file-wrap"}),this.el.addClass("x-form-file-text"),this.el.dom.removeAttribute("name"),this.createFileInput();e=Ext.applyIf(this.buttonCfg||{},{text:this.buttonText});this.button=new Ext.Button(Ext.apply(e,{renderTo:this.wrap,cls:"x-form-file-btn"+(e.iconCls?" x-btn-icon":"")})),this.buttonOnly&&(this.el.hide(),this.wrap.setWidth(this.button.getEl().getWidth())),this.bindListeners(),this.resizeEl=this.positionEl=this.wrap},bindListeners:function(){this.fileInput.on({scope:this,mouseenter:function(){this.button.addClass(["x-btn-over","x-btn-focus"])},mouseleave:function(){this.button.removeClass(["x-btn-over","x-btn-focus","x-btn-click"])},mousedown:function(){this.button.addClass("x-btn-click")},mouseup:function(){this.button.removeClass(["x-btn-over","x-btn-focus","x-btn-click"])},change:function(){var t=(t=this.fileInput.dom.value).replace(/^.*[\\\/]/,"");this.setValue(t),this.fireEvent("fileselected",this,t)}})},createFileInput:function(){this.fileInput=this.wrap.createChild({id:this.getFileInputId(),name:this.name||this.getId(),cls:"x-form-file",tag:"input",type:"file",title:" ",accept:this.accept||"*"}),this.multiple&&this.fileInput.dom.setAttribute("multiple",""),this.webkitdirectory&&this.fileInput.dom.setAttribute("webkitdirectory",""),this.style&&this.fileInput.dom.setAttribute("style",this.style)},reset:function(){this.rendered&&(this.fileInput.remove(),this.createFileInput(),this.bindListeners()),Ext.ux.form.FileUploadField.superclass.reset.call(this)},getFileInputId:function(){return this.id+"-file"},onResize:function(t,e){Ext.ux.form.FileUploadField.superclass.onResize.call(this,t,e),this.wrap.setWidth(t),this.buttonOnly||(t=this.wrap.getWidth()-this.button.getEl().getWidth()-this.buttonOffset,this.el.setWidth(t))},onDestroy:function(){Ext.ux.form.FileUploadField.superclass.onDestroy.call(this),Ext.destroy(this.fileInput,this.button,this.wrap)},onDisable:function(){Ext.ux.form.FileUploadField.superclass.onDisable.call(this),this.doDisable(!0)},onEnable:function(){Ext.ux.form.FileUploadField.superclass.onEnable.call(this),this.doDisable(!1)},doDisable:function(t){this.fileInput.dom.disabled=t,this.button.setDisabled(t)},preFocus:Ext.emptyFn,alignErrorIcon:function(){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])}}),Ext.reg("fileuploadfield",Ext.ux.form.FileUploadField),Ext.form.FileUploadField=Ext.ux.form.FileUploadField,Ext.MessageBox=function(){function i(t){f[t].blur(),a.isVisible()&&(a.hide(),e(),Ext.callback(l.fn,l.scope||window,[t,p.dom.value,l],1))}function e(){l&&l.cls&&a.el.removeClass(l.cls),u.reset()}var a,l,d,s,r,h,c,u,o,f,p,m,g="",x="",E=["ok","yes","no","cancel"];return{getDialog:function(t){var e;return a||(e=[],f={},Ext.each(E,function(t){e.push(f[t]=new Ext.Button({text:this.buttonText[t],handler:i.createCallback(t),hideMode:"offsets"}))},this),(a=new Ext.Window({autoCreate:!0,title:t,resizable:!1,constrain:!0,constrainHeader:!0,minimizable:!1,maximizable:!1,stateful:!1,modal:!0,shim:!0,buttonAlign:"center",width:400,height:100,minHeight:80,plain:!0,footer:!0,closable:!0,close:function(){l&&l.buttons&&l.buttons.no&&!l.buttons.cancel?i("no"):i("cancel")},fbar:new Ext.Toolbar({items:e,enableOverflow:!1})})).render(Ext.getBody()),a.getEl().addClass("x-window-dlg"),d=a.mask,s=a.body.createChild({html:'<div class="ext-mb-icon"></div><div class="ext-mb-content"><span class="ext-mb-text"></span><br /><div class="ext-mb-fix-cursor"><input type="text" class="ext-mb-input" /><textarea class="ext-mb-textarea"></textarea></div></div>'}),o=Ext.get(s.dom.firstChild),t=s.dom.childNodes[1],r=Ext.get(t.firstChild),(h=Ext.get(t.childNodes[2].firstChild)).enableDisplayMode(),h.addKeyListener([10,13],function(){a.isVisible()&&l&&l.buttons&&(l.buttons.ok?i("ok"):l.buttons.yes&&i("yes"))}),(c=Ext.get(t.childNodes[2].childNodes[1])).enableDisplayMode(),u=new Ext.ProgressBar({renderTo:s}),s.createChild({cls:"x-clear"})),a},updateText:function(t){a.isVisible()||l.width||a.setSize(this.maxWidth,100),r.update(t?t+" ":"&#160;");var e=""!=x?o.getWidth()+o.getMargins("lr"):0,i=r.getWidth()+r.getMargins("lr"),s=a.getFrameWidth("lr"),n=a.body.getFrameWidth("lr"),i=Math.max(Math.min(l.width||e+i+s+n,l.maxWidth||this.maxWidth),Math.max(l.minWidth||this.minWidth,m||0));return!0===l.prompt&&p.setWidth(i-e-s-n),!0!==l.progress&&!0!==l.wait||u.setSize(i-e-s-n),Ext.isIE9m&&i==m&&(i+=4),r.update(t||"&#160;"),a.setSize(i,"auto").center(),this},updateProgress:function(t,e,i){return u.updateProgress(t,e),i&&this.updateText(i),this},isVisible:function(){return a&&a.isVisible()},hide:function(){var t=a?a.activeGhost:null;return(this.isVisible()||t)&&(a.hide(),e(),t&&a.unghost(!1,!1)),this},show:function(t){this.isVisible()&&this.hide(),l=t;var e=this.getDialog(l.title||"&#160;");e.setTitle(SM.he(l.title)||"&#160;");var i,s,n,r,o=!1!==l.closable&&!0!==l.progress&&!0!==l.wait;return e.tools.close.setDisplayed(o),p=h,l.prompt=l.prompt||!!l.multiline,l.prompt?l.multiline?(h.hide(),c.show(),c.setHeight(Ext.isNumber(l.multiline)?l.multiline:this.defaultTextHeight),p=c):(h.show(),c.hide()):(h.hide(),c.hide()),p.dom.value=l.value||"",l.prompt?e.focusEl=p:(i=null,(t=l.buttons)&&t.ok?i=f.ok:t&&t.yes&&(i=f.yes),i&&(e.focusEl=i)),Ext.isDefined(l.iconCls)&&e.setIconClass(l.iconCls),this.setIcon(Ext.isDefined(l.icon)?l.icon:g),s=l.buttons,r=0,s?(a.footer.dom.style.display="",Ext.iterate(f,function(t,e){(n=s[t])?(e.show(),e.setText(Ext.isString(n)?n:Ext.MessageBox.buttonText[t]),r+=e.getEl().getWidth()+15):e.hide()})):Ext.each(E,function(t){f[t].hide()}),m=r,u.setVisible(!0===l.progress||!0===l.wait),this.updateProgress(0,l.progressText),this.updateText(l.msg),l.cls&&e.el.addClass(l.cls),e.proxyDrag=!0===l.proxyDrag,e.modal=!1!==l.modal,e.mask=!1!==l.modal&&d,e.isVisible()||(Ext.getBody().appendChild(a.el.dom),e.setAnimateTarget(l.animEl),e.on("show",function(){!0==o?e.keyMap.enable():e.keyMap.disable()},this,{single:!0}),e.show(l.animEl)),!0===l.wait&&u.wait(l.waitConfig),this},setIcon:function(t){if(a)return g=void 0,x=t&&""!=t?(o.removeClass("x-hidden"),o.replaceClass(x,t),s.addClass("x-dlg-icon"),t):(o.replaceClass(x,"x-hidden"),s.removeClass("x-dlg-icon"),""),this;g=t},progress:function(t,e,i){return this.show({title:t,msg:e,buttons:!1,progress:!0,closable:!1,minWidth:this.minProgressWidth,progressText:i}),this},wait:function(t,e,i){return this.show({title:e,msg:t,buttons:!1,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:i}),this},alert:function(t,e,i,s){return this.show({title:t,msg:e,buttons:this.OK,fn:i,scope:s,minWidth:this.minWidth}),this},confirm:function(t,e,i,s){return this.show({title:t,msg:e,buttons:this.YESNO,fn:i,scope:s,icon:this.QUESTION,minWidth:this.minWidth}),this},prompt:function(t,e,i,s,n,r){return this.show({title:t,msg:e,buttons:this.OKCANCEL,fn:i,minWidth:this.minPromptWidth,scope:s,prompt:!0,multiline:n,value:r}),this},OK:{ok:!0},CANCEL:{cancel:!0},OKCANCEL:{ok:!0,cancel:!0},YESNO:{yes:!0,no:!0},YESNOCANCEL:{yes:!0,no:!0,cancel:!0},INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}}}(),Ext.Msg=Ext.MessageBox,Ext.override(Ext.grid.CheckboxSelectionModel,{onMouseDown:function(t,e){if(0===t.button&&"x-grid3-row-checker"==e.className){t.stopEvent();var i,t=t.getTarget(".x-grid3-row");t&&(i=t.rowIndex,this.isSelected(i)?this.deselectRow(i):(this.selectRow(i,!0),this.grid.getView().focusRow(i)));const s=this.grid.view.innerHd.querySelector(".x-grid3-hd-row .x-grid3-td-checker .x-grid3-hd-checker");s&&(i=0===this.selections.length?null:this.grid.store.getCount()===this.selections.length?"on":"ind",s.classList.remove("x-grid3-hd-checker-on"),s.classList.remove("x-grid3-hd-checker-ind"),i&&s.classList.add("x-grid3-hd-checker-"+i))}},onHdMouseDown:function(t,e){var i;"x-grid3-hd-checker"==e.className&&(t.stopEvent(),t=(i=Ext.fly(e.parentNode)).hasClass("x-grid3-hd-checker-on"),e=i.hasClass("x-grid3-hd-checker-ind"),t||e?(i.removeClass("x-grid3-hd-checker-on"),i.removeClass("x-grid3-hd-checker-ind"),this.clearSelections()):(i.addClass("x-grid3-hd-checker-on"),this.selectAll()))}});const origGetBody=Ext.getBody;Ext.getBody=function(){return SM.contentEl||origGetBody()},Ext.LoadMask.prototype.onBeforeLoad=function(){this.disabled||this.store.smMaskDelay||(this.smTask=new Ext.util.DelayedTask(function(){this.el.mask(this.msg,this.msgCls)},this),this.smTask.delay(this.store.smMaskDelay))},Ext.LoadMask.prototype.onLoad=function(){this.smTask&&this.smTask.cancel(),this.el.unmask(this.removeMask)},Ext.dd.DragDropMgr.getZIndex=function(t){var e,i=document.body,s=-1;for(t=Ext.getDom(t);t&&t!==i;)isNaN(e=Number(Ext.fly(t).getStyle("zIndex")))||(s=e),t=t.parentNode;return s},Ext.override(Ext.tree.TreeLoader,{requestData:function(t,e,i){var s;!1!==this.fireEvent("beforeload",this,t,e)?this.directFn?((s=this.getParams(t)).push(this.processDirectResponse.createDelegate(this,[{callback:e,node:t,scope:i}],!0)),this.directFn.apply(t,s)):this.transId=Ext.Ajax.request({method:this.requestMethod,url:this.dataUrl||this.url,success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{callback:e,node:t,scope:i},params:this.getParams(t)}):this.runCallback(e,i||t,[])}}),Ext.override(Ext.form.Checkbox,{onClick:function(t,e){!0===this.readOnly?t.preventDefault():this.el.dom.checked!=this.checked&&this.setValue(this.el.dom.checked)}}),Object.defineProperty(Array.prototype,"remove",{enumerable:!1}),Ext.grid.Column.types.timestampcolumn=Ext.extend(Ext.grid.Column,{format:"Y-m-d H:i:s",constructor:function(t){Ext.grid.Column.types.timestampcolumn.superclass.constructor.call(this,t),this.renderer=t=>t?Ext.util.Format.date(new Date(1e3*t),this.format):"None"}}),Ext.override(Ext.Window,{cls:"sm-round-panel",frame:!1,resizable:!1,shadow:!1}),Ext.override(Ext.form.BasicForm,{getFieldValues:function(e,i){var s,n,r,o={};return this.items.each(function(t){t.disabled&&!i||!0===e&&!t.isDirty()||(s=t.getName(),n=o[s],r=t.getValue(),Ext.isDefined(n)?Ext.isArray(n)?o[s].push(r):o[s]=[n,r]:o[s]=r)}),o}}),Ext.override(Ext.Ajax,{requestPromise:function(t){return new Promise((i,s)=>{this.request({...t,success:function(t,e){i({response:t,options:e})},failure:function(t,e){s({message:`${e.method} ${e.url}
`+t.responseText,response:t,options:e})}})})}}),SM.confirmPromise=function(t,s){return new Promise((e,i)=>{callback=function(t){(void 0!==t?e:i)(t)},Ext.Msg.confirm(t,s,callback)})},Ext.apply(Ext.form.VTypes,{IPAddress:function(t){return/^(?=\d+\.\d+\.\d+\.\d+$)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.?){4}$/.test(t)},IPAddressText:"Must be an IP address (n.n.n.n)",IPAddressMask:/[\d\.]/i}),Ext.override(Ext.layout.FormLayout,{getTemplateArgs:function(t){var e=!t.fieldLabel||t.hideLabel,i=(void 0===t.labelSeparator?this:t).labelSeparator;return!1===t.allowBlank&&(i+='<span style="color: rgb(255, 0, 0); padding-left: 2px;">*</span>'),{id:t.id,label:t.fieldLabel,labelStyle:t.labelStyle||this.labelStyle||"",elementStyle:this.elementStyle||"",labelSeparator:e?"":i,itemCls:(t.itemCls||this.container.itemCls||"")+(t.hideLabel?" x-hide-label":""),clearCls:t.clearCls||"x-form-clear-left"}}}),Ext.override(Ext.TabPanel,{idDelimiter:"!!"}),Ext.override(Ext.grid.GridView,{onLoad:function(){this.holdPosition||this.scrollToTop()}}),Ext.override(Ext.form.TextField,{enableKeyEvents:!0,onKeyDown:function(t){1!=this.readOnly&&0!=this.editable||t.getCharCode()!=t.BACKSPACE||t.preventDefault(),this.fireEvent("keydown",this,t)}}),Ext.override(Ext.form.TextArea,{enableKeyEvents:!0,onKeyDown:function(t){1!=this.readOnly&&0!=this.editable||t.getCharCode()!=t.BACKSPACE||t.preventDefault(),this.fireEvent("keydown",this,t)}}),Ext.override(Ext.form.BasicForm,{clearDirty:function(){for(var t,e=this.items.items,i=e.length,s=0;s<i;s++)if((t=e[s]).originalValue=String(t.getValue()),"compositefield"==t.xtype)for(var n,r=t.items.items,o=r.length,a=0;a<o;a++)(n=r[a]).originalValue=String(n.getValue())}}),Ext.isDefined(Ext.webKitVersion)||(Ext.webKitVersion=Ext.isWebKit?parseFloat(/AppleWebKit\/([\d.]+)/.exec(navigator.userAgent)[1],10):NaN),Ext.isWebKit&&535.2<=Ext.webKitVersion&&(Ext.override(Ext.grid.ColumnModel,{getTotalWidth:function(t){if(!this.totalWidth)for(var e=this.totalWidth=0,i=this.config.length;e<i;e++)!t&&this.isHidden(e)||(this.totalWidth+=this.getColumnWidth(e)+2);return this.totalWidth}}),Ext.onReady(function(){Ext.get(document.body).addClass("ext-chrome-fixes"),Ext.util.CSS.createStyleSheet("@media screen and (-webkit-min-device-pixel-ratio:0) {.x-grid3-cell{box-sizing: border-box !important;}}","chrome-fixes-box-sizing")})),Ext.override(Ext.layout.BorderLayout,{onLayout:function(t,e){var i=e.getViewSize(),s=i.width,n=i.height;if(!this.rendered){e.position(),e.addClass("x-border-layout-ct");for(var r=[],o=t.items.items,a=0,l=o.length;a<l;a++){var d=(u=o[a]).region;u.collapsed&&r.push(u),u.collapsed=!1;var h,c=this[d]=new("center"!=d&&u.split?Ext.layout.BorderLayout.SplitRegion:Ext.layout.BorderLayout.Region)(this,u.initialConfig,d);"north"==d||"south"==d?("string"==typeof u.height&&void 0===u.relHeight&&(h=u.height.match(/(\d+)%/))[1]&&(u.relHeight=.01*parseInt(h[1],10)),void 0!==u.relHeight&&("number"!=typeof u.relHeight&&(u.relHeight=parseFloat(u.relHeight)),u.height=n*u.relHeight),c.minSize=c.minSize||c.minHeight,c.maxSize=c.maxSize||c.maxHeight):"east"!=d&&"west"!=d||("string"==typeof u.width&&void 0===u.relWidth&&(h=u.width.match(/(\d+)%/))[1]&&(u.relWidth=.01*parseInt(h[1],10)),void 0!==u.relWidth&&("number"!=typeof u.relWidth&&(u.relWidth=parseFloat(u.relWidth)),u.width=s*u.relWidth),c.minSize=c.minSize||c.minWidth,c.maxSize=c.maxSize||c.maxWidth),u.rendered||(u.cls=u.cls?u.cls+" x-border-panel":"x-border-panel",u.render(e,a)),c.render(e,u)}this.rendered=!0}if(s<20||n<20)r&&(this.restoreCollapsed=r);else{this.restoreCollapsed&&(r=this.restoreCollapsed,delete this.restoreCollapsed);var u,f,p,m,g=s,x=n,E=0,v=0,y=this.north,b=this.south,w=this.west,i=this.east;if(!(u=this.center)&&!1!==Ext.layout.BorderLayout.WARN)throw"No center region defined in BorderLayout "+t.id;if(y&&y.isVisible()&&(f=y.getSize(),m=y.getMargins(),f.width=s-(m.left+m.right),void 0!==y.panel.relHeight&&(y.height=Math.round(n*y.panel.relHeight),f.height=y.minSize&&y.height<y.minSize?y.minSize:y.maxSize&&y.height>y.maxSize?y.maxSize:y.height),f.x=m.left,f.y=m.top,x-=E=f.height+f.y+m.bottom,y.applyLayout(f)),b&&b.isVisible()&&(f=b.getSize(),m=b.getMargins(),f.width=s-(m.left+m.right),void 0!==b.panel.relHeight&&(b.height=Math.round(n*b.panel.relHeight),f.height=b.minSize&&b.height<b.minSize?b.minSize:b.maxSize&&b.height>b.maxSize?b.maxSize:b.height),f.x=m.left,y=f.height+m.top+m.bottom,f.y=n-y+m.top,x-=y,b.applyLayout(f)),w&&w.isVisible()&&(f=w.getSize(),m=w.getMargins(),f.height=x-(m.top+m.bottom),void 0!==w.panel.relWidth&&(w.width=Math.round(s*w.panel.relWidth),f.width=w.minSize&&w.width<w.minSize?w.minSize:w.maxSize&&w.width>w.maxSize?w.maxSize:w.width),f.x=m.left,f.y=E+m.top,v+=p=f.width+m.left+m.right,g-=p,w.applyLayout(f)),i&&i.isVisible()&&(f=i.getSize(),m=i.getMargins(),f.height=x-(m.top+m.bottom),void 0!==i.panel.relWidth&&(i.width=Math.round(s*i.panel.relWidth),f.width=i.minSize&&i.width<i.minSize?i.minSize:i.maxSize&&i.width>i.maxSize?i.maxSize:i.width),p=f.width+m.left+m.right,f.x=s-p+m.left,f.y=E+m.top,g-=p,i.applyLayout(f)),u&&(m={x:v+(m=u.getMargins()).left,y:E+m.top,width:g-(m.left+m.right),height:x-(m.top+m.bottom)},u.applyLayout(m)),r)for(a=0,l=r.length;a<l;a++)r[a].collapse(!1);Ext.isIE&&Ext.isStrict&&e.repaint()}}}),Ext.override(Ext.layout.BorderLayout.SplitRegion,{onSplitMove:function(t,e){var i=this.panel.getSize();return this.lastSplitSize=e,"north"==this.position||"south"==this.position?(this.panel.setSize(i.width,e),void 0!==this.panel.relHeight?this.state.relHeight=this.panel.relHeight*=e/this.height:this.state.height=e):(this.panel.setSize(e,i.height),void 0!==this.panel.relWidth?this.state.relWidth=this.panel.relWidth*=e/this.width:this.state.width=e),this.layout.layout(),this.panel.saveState(),!1}}),Ext.override(Ext.form.ComboBox,{setValue:function(t,e){var i,s=t;return this.valueField&&((i=this.findRecord(this.valueField,t))?(s=i.data[this.displayField],e&&(e=this.store.indexOf(i),this.selectedIndex=e,this.fireEvent("select",this,i,e))):Ext.isDefined(this.valueNotFoundText)&&(s=this.valueNotFoundText)),this.lastSelectionText=s,this.hiddenField&&(this.hiddenField.value=t),Ext.form.ComboBox.superclass.setValue.call(this,s),this.value=t,this}}),Ext.override(Ext.grid.RowSelectionModel,{handleMouseDown:function(t,e,i){var s,n;0!==i.button||this.isLocked()||(s=this.grid.getView(),i.shiftKey&&!this.singleSelect&&!1!==this.last?(n=this.last,this.selectRange(n,e,i.ctrlKey||i.shiftKey),this.last=n,s.focusRow(e)):(n=this.isSelected(e),i.ctrlKey&&n?this.deselectRow(e):(!n||1<this.getCount())&&(this.selectRow(e,i.ctrlKey||i.shiftKey),s.focusRow(e))))}}),Ext.override(Ext.QuickTip,{tagConfig:{namespace:"ext",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",dismissDelay:"qdmdelay"},onTargetOver:function(t){if(!this.disabled){this.targetXY=t.getXY();var e=t.getTarget();if(e&&1===e.nodeType&&e!=document&&e!=document.body){if(this.activeTarget&&(e==this.activeTarget.el||Ext.fly(this.activeTarget.el).contains(e)))return this.clearTimer("hide"),void this.show();if(e&&this.targets[e.id])return this.activeTarget=this.targets[e.id],this.activeTarget.el=e,this.anchor=this.activeTarget.anchor,this.anchor&&(this.anchorTarget=e),void this.delayShow();var i,s=Ext.fly(e),n=this.tagConfig,r=n.namespace;(i=this.getTipCfg(t))&&(t=s.getAttribute(n.hide,r),this.activeTarget={el:e,text:i,width:s.getAttribute(n.width,r),autoHide:"user"!=t&&"false"!==t,title:s.getAttribute(n.title,r),cls:s.getAttribute(n.cls,r),align:s.getAttribute(n.align,r),dismissDelay:parseInt(s.getAttribute(n.dismissDelay,r),10)},this.anchor=s.getAttribute(n.anchor,r),this.anchor&&(this.anchorTarget=e),this.delayShow())}}}}),SM.TabEnhancements=function(){let o;function t(t){t.preventDefault();const e=o.findTargets(t);var i=t.browserEvent.button,s=t.browserEvent.which,n=t.browserEvent.detail,r=null==s?1==i:2==s,s=null==s?0==i:1==s;e.item&&(!e.close&&e.item.sm_treePath&&Ext.getCmp("app-nav-tree").selectPath(e.item.sm_treePath),s&&2===n&&"ephemeral"===e.item.sm_tabMode&&e.item.makePermanent(),r&&(e.item.closable?!1!==e.item.fireEvent("beforeclose",e.item)&&(e.item.fireEvent("close",e.item),o.remove(e.item)):t.stopPropagation()))}function e(){o.strip.on("mousedown",t)}this.init=function(t){o=t,o.on("render",e)}},Ext.override(Ext.grid.GridView,{masterTpl:new Ext.Template('<div class="x-grid3" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header">','<div class="x-grid3-header-inner">','<div class="x-grid3-header-offset" style="{ostyle}">{header}</div>',"</div>",'<div class="x-clear"></div>',"</div>",'<div class="x-grid3-scroller">','<div class="x-grid3-body" style="{bstyle}">{body}</div>','<a class="x-grid3-focus" tabIndex="-1"></a>',"</div>","</div>",'<div class="x-grid3-resize-marker">&#160;</div>','<div class="x-grid3-resize-proxy">&#160;</div>',"</div>"),doRender:function(t,e,i,s,n,r){for(var o,a,l,d,h,c=this.templates,u=c.cell,f=c.row,p=n-1,m=[],g=[],x={tstyle:"width:"+this.getTotalWidth()+";"},E={},v=e.length,y=0;y<v;y++){for(l=e[y],g=[],h=y+s,d=0;d<n;d++)a=t[d],E.id=a.id,E.css=0===d?"x-grid3-cell-first ":d==p?"x-grid3-cell-last ":"",E.attr=E.cellAttr="",E.style=a.style,E.value=a.renderer.call(a.scope,"string"==typeof l.data[a.name]?SM.he(l.data[a.name]):l.data[a.name],E,l,h,d,i),Ext.isEmpty(E.value)&&(E.value="&#160;"),this.markDirty&&l.dirty&&void 0!==l.modified[a.name]&&(E.css+=" x-grid3-dirty-cell"),g[g.length]=u.apply(E);o=[],r&&(h+1)%2==0&&(o[0]="x-grid3-row-alt"),l.dirty&&(o[1]=" x-grid3-dirty-row"),x.cols=n,this.getRowClass&&(o[2]=this.getRowClass(l,h,x,i)),x.alt=o.join(" "),x.cells=g.join(""),m[m.length]=f.apply(x)}return m.join("")},refreshRow:function(t){var e,i,s,n,r,o=this.ds,a=this.cm.getColumnCount(),l=this.getColumnData(),d=a-1,h=["x-grid3-row"],c={tstyle:String.format("width: {0};",this.getTotalWidth())},u=[],f=this.templates.cell;if(Ext.isNumber(t)?(e=t,t=o.getAt(e)):e=o.indexOf(t),t&&!(e<0)){for(r=0;r<a;r++)(n={id:(s=l[r]).id,style:s.style,css:0==r?"x-grid3-cell-first":r==d?"x-grid3-cell-last ":"",attr:"",cellAttr:""}).value=s.renderer.call(s.scope,"string"==typeof t.data[s.name]?SM.he(t.data[s.name]):t.data[s.name],n,t,e,r,o),Ext.isEmpty(n.value)&&(n.value="&#160;"),this.markDirty&&t.dirty&&void 0!==t.modified[s.name]&&(n.css+=" x-grid3-dirty-cell"),u[r]=f.apply(n);(i=this.getRow(e)).className="",this.grid.stripeRows&&(e+1)%2==0&&h.push("x-grid3-row-alt"),this.getRowClass&&(c.cols=a,h.push(this.getRowClass(t,e,c,o))),this.fly(i).addClass(h).setStyle(c.tstyle),c.cells=u.join(""),i.innerHTML=this.templates.rowInner.apply(c),this.fireEvent("rowupdated",this,e,t)}}}),Ext.override(Ext.tree.TreeNodeUI,{renderElements:function(t,e,i,s){this.indentMarkup=t.parentNode?t.parentNode.ui.getChildIndent():"";var n,r=Ext.isBoolean(e.checked),e=(this.getHref(e.href),['<li class="x-tree-node"><div ext:tree-node-id="',t.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',e.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img alt="" src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />',r?'<input class="x-tree-node-cb" type="checkbox" '+(e.checked?'checked="checked" />':"/>"):"",'<img alt="" src="',e.icon||this.emptyIcon,'" class="x-tree-node-icon',e.icon?" x-tree-node-inline-icon":"",e.iconCls?" "+e.iconCls:"",'" unselectable="on" />','<a hidefocus="on" class="x-tree-node-anchor" tabIndex="1" ',e.hrefTarget?' target="'+e.hrefTarget+'"':"",'><span unselectable="on">',t.text,"</span></a></div>",'<ul class="x-tree-node-ct" style="display:none;"></ul>',"</li>"].join(""));!0!==s&&t.nextSibling&&(n=t.nextSibling.ui.getEl())?this.wrap=Ext.DomHelper.insertHtml("beforeBegin",n,e):this.wrap=Ext.DomHelper.insertHtml("beforeEnd",i,e),this.elNode=this.wrap.childNodes[0],this.ctNode=this.wrap.childNodes[1];i=this.elNode.childNodes;this.indentNode=i[0],this.ecNode=i[1];e=3;r?(this.iconNode=i[3],this.checkbox=i[2],this.checkbox.defaultChecked=this.checkbox.checked,e++):this.iconNode=i[2],this.anchor=i[e],this.textNode=i[e].firstChild}}),Ext.override(Ext.TabPanel,{itemTpl:new Ext.Template('<li class="{cls}" id="{id}"><a class="x-tab-strip-close"></a>','<a class="x-tab-right"><em class="x-tab-left">','<span class="x-tab-strip-inner"><span class="x-tab-strip-text {iconCls}">{text}</span></span>',"</em></a></li>")}),Ext.override(Ext.data.HttpProxy,{doRequest:function(t,e,i,s,n,r,o){s={method:this.api[t]?this.api[t].method:void 0,request:{callback:n,scope:r,arg:o},reader:s,callback:this.createCallback(t,e),scope:this};if(i.jsonData){let{jsonData:t,...e}=i;s.jsonData=t,s.params=e||{}}else i.xmlData?s.xmlData=i.xmlData:s.params=i||{};this.conn.url=this.buildUrl(t,e),this.useAjax?(Ext.applyIf(s,this.conn),t==Ext.data.Api.actions.read&&this.activeRequest[t]&&Ext.Ajax.abort(this.activeRequest[t]),this.activeRequest[t]=Ext.Ajax.request(s)):this.conn.request(s),this.conn.url=null}}),Ext.override(Ext.data.JsonStore,{loadPromise:function(t){return new Promise((s,n)=>{this.load({params:t,callback:function(t,e,i){i?s({records:t,options:e}):n("Load failed")}})})}}),Ext.ns("Ext.ux.grid"),Ext.ux.grid.RowEditor=Ext.extend(Ext.Panel,{floating:!0,shadow:!1,layout:"hbox",cls:"x-small-editor",buttonAlign:"center",baseCls:"x-row-editor",elements:"header,footer,body",frameWidth:5,buttonPad:3,clicksToEdit:"auto",monitorValid:!0,focusDelay:250,errorSummary:!0,saveText:"Save",cancelText:"Cancel",commitChangesText:"You need to commit or cancel your changes",errorText:"Errors",defaults:{normalWidth:!0},initComponent:function(){Ext.ux.grid.RowEditor.superclass.initComponent.call(this),this.addEvents("beforeedit","canceledit","validateedit","afteredit")},init:function(t){this.grid=t,this.ownerCt=t,2===this.clicksToEdit?t.on("rowdblclick",this.onRowDblClick,this):(t.on("rowclick",this.onRowClick,this),Ext.isIE&&t.on("rowdblclick",this.onRowDblClick,this)),t.getStore().on("remove",function(){this.stopEditing(!1)},this),t.on({scope:this,keydown:this.onGridKey,columnresize:this.verifyLayout,columnmove:this.refreshFields,reconfigure:this.refreshFields,beforedestroy:this.beforedestroy,destroy:this.destroy,bodyscroll:{buffer:250,fn:this.positionButtons}}),t.getColumnModel().on("hiddenchange",this.verifyLayout,this,{delay:1}),t.getView().on("refresh",this.stopEditing.createDelegate(this,[]))},beforedestroy:function(){this.stopMonitoring(),this.grid.getStore().un("remove",this.onStoreRemove,this),this.stopEditing(!1),Ext.destroy(this.btns,this.tooltip)},refreshFields:function(){this.initFields(),this.verifyLayout()},isDirty:function(){var e;return this.items.each(function(t){if(String(this.values[t.id])!==String(t.getValue()))return!(e=!0)},this),e},startEditing:function(t,e){if(this.editing&&this.isDirty())this.showTooltip(this.commitChangesText);else if(Ext.isObject(t)&&(t=this.grid.getStore().indexOf(t)),!1!==this.fireEvent("beforeedit",this,t)){this.grid.getEl().mask(),this.editing=!0;var i=this.grid,s=i.getView(),n=s.getRow(t),r=i.store.getAt(t);this.record=r,this.rowIndex=t,this.values={},this.rendered||this.render(s.getEditorParent());s=Ext.fly(n).getWidth();this.setSize(s),this.initialized||this.initFields();for(var o,a,l=i.getColumnModel(),d=this.items.items,h=0,c=l.getColumnCount();h<c;h++)a=this.preEditValue(r,l.getDataIndex(h)),(o=d[h]).setValue(a),this.values[o.id]=Ext.isEmpty(a)?"":a;this.verifyLayout(!0),this.isVisible()?this.el.setXY(Ext.fly(n).getXY(),{duration:.15}):this.setPagePosition(Ext.fly(n).getXY()),this.isVisible()||this.show().doLayout(),!1!==e&&this.doFocus.defer(this.focusDelay,this)}},stopEditing:function(t){if(this.editing=!1,this.grid.getEl()?.unmask(),this.isVisible()){if(!1===t||!this.isValid())return this.hide(),void this.fireEvent("canceledit",this,!1===t);for(var e,i,s,n={},r=this.record,o=!1,a=this.grid.colModel,l=this.items.items,d=0,h=a.getColumnCount();d<h;d++)a.isHidden(d)||(e=a.getDataIndex(d),Ext.isEmpty(e)||(i=r.data[e],s=this.postEditValue(l[d].getValue(),i,r,e),String(i)!==String(s)&&(n[e]=s,o=!0)));o&&!1!==this.fireEvent("validateedit",this,n,r,this.rowIndex)?(r.beginEdit(),Ext.iterate(n,function(t,e){r.set(t,e)}),r.endEdit(),this.fireEvent("afteredit",this,n,r,this.rowIndex)):this.fireEvent("canceledit",this,!1),this.hide()}},verifyLayout:function(t){if(this.el&&(this.isVisible()||!0===t)){t=this.grid.getView().getRow(this.rowIndex);this.setSize(Ext.fly(t).getWidth(),Ext.isIE?Ext.fly(t).getHeight()+9:void 0);for(var e,i=this.grid.colModel,s=this.items.items,n=0,r=i.getColumnCount();n<r;n++)i.isHidden(n)?s[n].hide():(e=0,e+=n===r-1?3:1,s[n].show(),s[n].setWidth(i.getColumnWidth(n)-e));this.doLayout(),this.positionButtons()}},slideHide:function(){this.hide()},initFields:function(){var t=this.grid.getColumnModel(),e=Ext.layout.ContainerLayout.prototype.parseMargins;this.removeAll(!1);for(var i=0,s=t.getColumnCount();i<s;i++){var n=t.getColumnAt(i),r=(r=n.getEditor())||(n.displayEditor||new Ext.form.DisplayField);0==i?r.margins=e("0 1 2 1"):i==s-1?r.margins=e("0 0 2 1"):Ext.isIE?r.margins=e("0 0 2 0"):r.margins=e("0 1 2 0"),r.setWidth(t.getColumnWidth(i)),r.column=n,r.ownerCt!==this&&(r.on("focus",this.ensureVisible,this),r.on("specialkey",this.onKey,this)),this.insert(i,r)}this.initialized=!0},onKey:function(t,e){e.getKey()===e.ENTER&&(this.stopEditing(!0),e.stopPropagation())},onGridKey:function(t){var e;t.getKey()!==t.ENTER||this.isVisible()||(e=this.grid.getSelectionModel().getSelected())&&(e=this.grid.store.indexOf(e),this.startEditing(e),t.stopPropagation())},ensureVisible:function(t){this.isVisible()&&this.grid.getView().ensureVisible(this.rowIndex,this.grid.colModel.getIndexById(t.column.id),!0)},onRowClick:function(t,e,i){if("auto"==this.clicksToEdit&&(this.lastClickIndex!=(this.lastClickIndex=e)&&!this.isVisible()))return;this.startEditing(e,!1),this.doFocus.defer(this.focusDelay,this,[i.getPoint()])},onRowDblClick:function(t,e,i){this.startEditing(e,!1),this.doFocus.defer(this.focusDelay,this,[i.getPoint()])},onRender:function(){Ext.ux.grid.RowEditor.superclass.onRender.apply(this,arguments),this.el.swallowEvent(["keydown","keyup","keypress"]),this.btns=new Ext.Panel({baseCls:"x-plain",cls:"x-btns",elements:"body",layout:"table",width:2*this.minButtonWidth+2*this.frameWidth+4*this.buttonPad,items:[{ref:"saveBtn",itemId:"saveBtn",xtype:"button",text:this.saveText,width:this.minButtonWidth,handler:this.stopEditing.createDelegate(this,[!0])},{xtype:"button",text:this.cancelText,width:this.minButtonWidth,handler:this.stopEditing.createDelegate(this,[!1])}]}),this.btns.render(this.bwrap)},afterRender:function(){Ext.ux.grid.RowEditor.superclass.afterRender.apply(this,arguments),this.positionButtons(),this.monitorValid&&this.startMonitoring()},onShow:function(){this.monitorValid&&this.startMonitoring(),Ext.ux.grid.RowEditor.superclass.onShow.apply(this,arguments)},onHide:function(){Ext.ux.grid.RowEditor.superclass.onHide.apply(this,arguments),this.stopMonitoring(),this.grid.getView().focusRow(this.rowIndex)},positionButtons:function(){var t,e,i,s;this.btns&&(s=this.grid,t=this.el.dom.clientHeight,e=s.getView().scroller.dom.scrollLeft,i=this.btns.getWidth(),s=Math.min(s.getWidth(),s.getColumnModel().getTotalWidth()),this.btns.el.shift({left:s/2-i/2+e,top:t-2,stopFx:!0,duration:.2}))},preEditValue:function(t,e){e=t.data[e];return this.autoEncode&&"string"==typeof e?Ext.util.Format.htmlDecode(e):e},postEditValue:function(t,e,i,s){return this.autoEncode&&"string"==typeof t?SM.he(t):t},doFocus:function(t){if(this.isVisible())for(var e,i=0,s=this.grid.getColumnModel(),n=(i=t?this.getTargetColumnIndex(t):i)||0,r=s.getColumnCount();n<r;n++)if(!(e=s.getColumnAt(n)).hidden&&e.getEditor()){e.getEditor().focus();break}},getTargetColumnIndex:function(t){var e,i=this.grid,s=i.view,n=t.left,r=i.colModel.config,o=0,a=!1;for(r.length;e=r[o];o++)if(!e.hidden&&Ext.fly(s.getHeaderCell(o)).getRegion().right>=n){a=o;break}return a},startMonitoring:function(){!this.bound&&this.monitorValid&&(this.bound=!0,Ext.TaskMgr.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this}))},stopMonitoring:function(){this.bound=!1,this.tooltip&&this.tooltip.hide()},isValid:function(){var e=!0;return this.items.each(function(t){if(!t.isValid(!0))return e=!1}),e},bindHandler:function(){if(!this.bound)return!1;var t=this.isValid();!t&&this.errorSummary&&this.showTooltip(this.getErrorText().join("")),this.btns.saveBtn.setDisabled(!t),this.fireEvent("validation",this,t)},lastVisibleColumn:function(){for(var t,e=this.items.getCount()-1;0<=e;e--)if(!(t=this.items.items[e]).hidden)return t},showTooltip:function(t){var e=(e=this.tooltip)||(this.tooltip=new Ext.ToolTip({maxWidth:600,cls:"errorTip",width:300,title:this.errorText,autoHide:!1,anchor:"left",anchorToTarget:!0,mouseOffset:[40,0]})),i=this.grid.getView(),s=parseInt(this.el.dom.style.top,10);i.scroller.dom.scrollTop<=s+this.el.getHeight()?(e.initTarget(this.lastVisibleColumn().getEl()),e.rendered||(e.show(),e.hide()),e.body.update(t),e.doAutoWidth(20),e.show()):e.rendered&&e.hide()},getErrorText:function(){var e=["<ul>"];return this.items.each(function(t){t.isValid(!0)||e.push("<li>",t.getActiveError(),"</li>")}),e.push("</ul>"),e}}),Ext.preg("roweditor",Ext.ux.grid.RowEditor),Ext.ns("Ext.ux.grid"),Ext.ux.grid.RowExpander=Ext.extend(Ext.util.Observable,{expandOnEnter:!0,expandOnDblClick:!1,header:"",width:20,sortable:!1,fixed:!0,hideable:!1,menuDisabled:!0,dataIndex:"",id:"expander",lazyRender:!1,enableCaching:!1,constructor:function(t){Ext.apply(this,t),this.addEvents({beforeexpand:!0,expand:!0,beforecollapse:!0,collapse:!0}),Ext.ux.grid.RowExpander.superclass.constructor.call(this),this.tpl&&("string"==typeof this.tpl&&(this.tpl=new Ext.Template(this.tpl)),this.tpl.compile()),this.state={},this.bodyContent={}},getRowClass:function(t,e,i,s){i.cols=i.cols-1;var n=this.bodyContent[t.id];return n||this.lazyRender||(n=this.getBodyContent(t,e)),i.body=n,this.state[t.id]?"x-grid3-row-expanded":"x-grid3-row-collapsed"},init:function(t){var e=(this.grid=t).getView();e.getRowClass=this.getRowClass.createDelegate(this),e.enableRowBody=!0,t.on("render",this.onRender,this),t.on("destroy",this.onDestroy,this)},onRender:function(){var t=this.grid;t.getView().mainBody.on("mousedown",this.onMouseDown,this,{delegate:".x-grid3-row-expander"}),this.expandOnEnter&&(this.keyNav=new Ext.KeyNav(this.grid.getGridEl(),{enter:this.onEnter,scope:this})),this.expandOnDblClick&&t.on("rowdblclick",this.onRowDblClick,this)},onDestroy:function(){this.keyNav&&(this.keyNav.disable(),delete this.keyNav);var t=this.grid.getView().mainBody;t&&t.un("mousedown",this.onMouseDown,this)},onRowDblClick:function(t,e,i){this.toggleRow(e)},onEnter:function(t){for(var e=this.grid,i=e.getSelectionModel().getSelections(),s=0,n=i.length;s<n;s++){var r=e.getStore().indexOf(i[s]);this.toggleRow(r)}},getBodyContent:function(t,e){if(!this.enableCaching)return this.tpl.apply(t.data);var i=this.bodyContent[t.id];return i||(i=this.tpl.apply(t.data),this.bodyContent[t.id]=i),i},onMouseDown:function(t,e){t.stopEvent();t=t.getTarget(".x-grid3-row");this.toggleRow(t)},renderer:function(t,e,i){return e.cellAttr='rowspan="2"','<div class="x-grid3-row-expander">&#160;</div>'},beforeExpand:function(t,e,i){return!1!==this.fireEvent("beforeexpand",this,t,e,i)&&(this.tpl&&this.lazyRender&&(e.innerHTML=this.getBodyContent(t,i)),!0)},toggleRow:function(t){"number"==typeof t&&(t=this.grid.view.getRow(t)),this[Ext.fly(t).hasClass("x-grid3-row-collapsed")?"expandRow":"collapseRow"](t)},expandRow:function(t){"number"==typeof t&&(t=this.grid.view.getRow(t));var e=this.grid.store.getAt(t.rowIndex),i=Ext.DomQuery.selectNode("tr:nth(2) div.x-grid3-row-body",t);this.beforeExpand(e,i,t.rowIndex)&&(this.state[e.id]=!0,Ext.fly(t).replaceClass("x-grid3-row-collapsed","x-grid3-row-expanded"),this.fireEvent("expand",this,e,i,t.rowIndex))},collapseRow:function(t){"number"==typeof t&&(t=this.grid.view.getRow(t));var e=this.grid.store.getAt(t.rowIndex),i=Ext.fly(t).child("tr:nth(1) div.x-grid3-row-body",!0);!1!==this.fireEvent("beforecollapse",this,e,i,t.rowIndex)&&(this.state[e.id]=!1,Ext.fly(t).replaceClass("x-grid3-row-expanded","x-grid3-row-collapsed"),this.fireEvent("collapse",this,e,i,t.rowIndex))}}),Ext.preg("rowexpander",Ext.ux.grid.RowExpander),Ext.grid.RowExpander=Ext.ux.grid.RowExpander,Ext.ns("SM"),SM.SelectingGridToolbar=Ext.extend(Ext.Toolbar,{initComponent:function(){this.filterField=new Ext.form.TriggerField({id:this.triggerId||void 0,toolbar:this,hidden:!0,triggerClass:"x-form-clear-trigger",onTriggerClick:function(){this.triggerBlur(),this.blur(),this.setValue(""),this.toolbar.filterFn.call(Ext.getCmp(this.toolbar.gridId),"",!this.toolbar.button.pressed)},width:200,submitValue:!1,enableKeyEvents:!0,emptyText:this.triggerEmptyText,listeners:{keyup:function(t,e){return this.toolbar.filterFn.call(Ext.getCmp(this.toolbar.gridId),this.getValue(),this.toolbar.button.pressed),!1}}}),this.separator=new Ext.Toolbar.Separator({hidden:!0}),this.button=new Ext.Button({id:this.btnId||void 0,icon:"img/tick_white.png",toolbar:this,text:this.btnText||"Select items",style:{marginRight:"10px"},tooltip:this.btnTooltipText||"Select items",toggleGroup:"record-selector",enableToggle:!0,allowDepress:!0,toggleHandler:function(t,e){e?(this.toolbar.filterField.show(),this.toolbar.separator.show()):(this.toolbar.filterField.setValue(""),this.toolbar.filterField.hide(),this.toolbar.separator.hide()),this.toolbar.filterFn.call(Ext.getCmp(this.toolbar.gridId),this.toolbar.filterField.getValue(),this.pressed),Ext.getCmp(this.toolbar.gridId).onEditChange(e)}});var t=[{xtype:"tbfill"},this.filterField,{xtype:"tbseparator",hidden:!0},this.button];this.appendItems=this.appendItems||[],this.prependItems=this.prependItems||[];t=this.prependItems.concat(t).concat(this.appendItems);Ext.apply(this,Ext.apply(this.initialConfig,{items:t})),SM.SelectingGridToolbar.superclass.initComponent.call(this)}}),Ext.reg("sm-sel-grid-toolbar",SM.SelectingGridToolbar),Ext.ns("SM");let doWoWindow;async function addOrUpdateCollection(i,s,n){try{let t,e;e=i?(t=STIGMAN.Env.apiBase+`/collections/${i}?elevate=`+n.elevate,"PUT"):(t=STIGMAN.Env.apiBase+"/collections?elevate="+n.elevate,"POST");var r=await Ext.Ajax.requestPromise({url:t,method:e,headers:{"Content-Type":"application/json;charset=utf-8"},params:{projection:["owners","statistics"]},jsonData:s}),o=JSON.parse(r.response.responseText);await SM.GetUserObject();var a=i?"collectionchanged":"collectioncreated";SM.Dispatcher.fireEvent(a,o,n)}catch(t){alert(t.message)}}async function showAssetProps(a,t){try{let o=new SM.AssetProperties({id:"dev-test",padding:"10px 15px 10px 15px",initialCollectionId:t,btnHandler:async function(){try{if(o.getForm().isValid()){let t=o.getForm().getFieldValues(!1,!0);delete t.undefined;var e=a?"PUT":"POST",i=a?STIGMAN.Env.apiBase+"/assets/"+a:STIGMAN.Env.apiBase+"/assets",s=await Ext.Ajax.requestPromise({url:i,method:e,params:{projection:["stigs","statusStats"]},headers:{"Content-Type":"application/json;charset=utf-8"},jsonData:t}),n=JSON.parse(s.response.responseText),r=a?"assetchanged":"assetcreated";SM.Dispatcher.fireEvent(r,n),l.close()}}catch(t){alert(t.message)}}});var l=new Ext.Window({id:"assetPropsWindow",cls:"sm-dialog-window sm-round-panel",title:a?"Asset Properties, ID "+a:"Create new Asset",modal:!0,hidden:!0,width:660,height:666,layout:"fit",plain:!0,bodyStyle:"padding:5px;",buttonAlign:"right",items:o});if(l.render(Ext.getBody()),a){var e=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/assets/"+a,params:{projection:["stigs"]},method:"GET"});let t=JSON.parse(e.response.responseText);t.collectionId=t.collection.collectionId,delete t.collection,o.getForm().setValues(t)}Ext.getBody().unmask(),l.show(document.body)}catch(t){"object"==typeof t&&(t=t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t),2):JSON.stringify(t)),alert(t),Ext.getBody().unmask()}}async function showCollectionStigProps(e,r){try{var i=r.collectionId;let n=new SM.CollectionStigProperties({collectionId:i,benchmarkId:e,stigFilteringStore:r.store,btnHandler:async function(t){try{var e,i,s;n.getForm().isValid()&&(e=n.getForm().getFieldValues(!1,!0),i=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${t.collectionId}/stigs/${e.benchmarkId}/assets`,method:"PUT",params:{elevate:curUser.privileges.canAdmin},headers:{"Content-Type":"application/json;charset=utf-8"},jsonData:e.assets}),s=JSON.parse(i.response.responseText),r.getStore().reload(),SM.Dispatcher.fireEvent("stigassetschanged",t.collectionId,e.benchmarkId,s),o.close())}catch(t){alert(t.stack)}}});var s,o=new Ext.Window({title:"STIG Targets, Collection ID "+i,cls:"sm-dialog-window sm-round-panel",modal:!0,hidden:!0,width:510,height:660,layout:"fit",plain:!0,bodyStyle:"padding:10px;",buttonAlign:"right",items:n});o.render(Ext.getBody()),await n.initPanel();let t;t=e?(s=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+`/collections/${i}/stigs/${e}/assets`,params:{elevate:curUser.privileges.canAdmin},method:"GET"}),JSON.parse(s.response.responseText)):[],n.getForm().setValues({benchmarkId:e,assets:t}),o.show(document.body)}catch(t){"object"==typeof t&&(t=t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t),2):JSON.stringify(t)),alert(t),Ext.getBody().unmask()}}async function showUserProps(l){try{let a=new SM.UserProperties({registeredUser:l,padding:"10px 15px 10px 15px",btnHandler:async function(){try{if(a.getForm().isValid()){var e=a.getForm().getFieldValues(!1,!0);let t={collectionGrants:e.collectionGrants};var i=l?"PATCH":"POST",s=l?STIGMAN.Env.apiBase+"/users/"+l:STIGMAN.Env.apiBase+"/users";l||(t.username=e.username);var n=await Ext.Ajax.requestPromise({url:s,method:i,params:{elevate:curUser.privileges.canAdmin,projection:["collectionGrants","statistics"]},headers:{"Content-Type":"application/json;charset=utf-8"},jsonData:t}),r=JSON.parse(n.response.responseText),o=l?"userchanged":"usercreated";SM.Dispatcher.fireEvent(o,r),d.close()}}catch(t){alert(t.message)}}});var d=new Ext.Window({title:l?"User Grants, ID "+l:"Pre-register User Grants",cls:"sm-dialog-window sm-round-panel",modal:!0,hidden:!0,width:660,height:l?650:440,layout:"fit",plain:!0,bodyStyle:"padding:5px;",buttonAlign:"right",items:a});d.render(document.body);const s=new Function("obj","return obj?."+STIGMAN.Env.oauth.claims.privileges+" || [];");if(l){var t=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/users/"+l,params:{elevate:curUser.privileges.canAdmin,projection:["statistics","collectionGrants"]},method:"GET"});let e=JSON.parse(t.response.responseText);["iat","exp","auth_time"].forEach(t=>{e.statistics.lastClaims[t]&&(e.statistics.lastClaims[t]=new Date(1e3*e.statistics.lastClaims[t]))}),e.statistics.lastClaims.scope&&(e.statistics.lastClaims.scope=e.statistics.lastClaims.scope.split(" "));var i={username:e.username,name:e.statistics.lastClaims?.[STIGMAN.Env.oauth.claims.name],email:e.statistics.lastClaims?.[STIGMAN.Env.oauth.claims.email],canCreateCollection:s(e.statistics.lastClaims).includes("create_collection"),canAdmin:s(e.statistics.lastClaims).includes("admin"),lastClaims:e.statistics.lastClaims,collectionGrants:e.collectionGrants||[]};a.getForm().setValues(i)}Ext.getBody().unmask(),d.show(document.body)}catch(t){"object"==typeof t&&(t=t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t),2):JSON.stringify(t)),alert(t),Ext.getBody().unmask()}}async function showUserAccess(n,r){try{let i,s=new SM.AssignmentPanel({collectionId:n,userId:r});i=new Ext.Window({title:"Access Grants (ID: "+r+")",cls:"sm-dialog-window sm-round-panel",modal:!0,hidden:!0,width:900,height:600,layout:"fit",plain:!0,bodyStyle:"padding:20px;",buttonAlign:"right",items:s,buttons:[{text:"Cancel",handler:function(){i.close()}},{text:"Save",formBind:!0,id:"submit-button",handler:async function(){try{var t=s.assignmentGrid.getValue(),e=STIGMAN.Env.apiBase+`/collections/${n}/grants/${r}/access`;await Ext.Ajax.requestPromise({url:e,method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},jsonData:t})}catch(t){alert(t.message)}finally{i.close()}}}]}),s.appwindow=i,i.render(document.body);var t=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+`/collections/${n}/grants/${r}/access`,method:"GET"}),e=JSON.parse(t.response.responseText);s.assignmentGrid.setValue(e),Ext.getBody().unmask(),i.show()}catch(t){"object"==typeof t&&(t=t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t),2):JSON.stringify(t)),alert(t),Ext.getBody().unmask()}}SM.NodeSorter=(t,e)=>t.attributes.sortToTop||!e.attributes.sortToTop&&t.text.toUpperCase()<e.text.toUpperCase()?-1:1,SM.CollectionNodeConfig=function(e){let t=[],i=[{id:e.collectionId+"-findings-node",text:"Findings",collectionId:e.collectionId,collectionName:e.name,iconCls:"sm-report-icon",action:"findings",leaf:!0}];var s=curUser.collectionGrants.find(t=>t.collection.collectionId===e.collectionId);return s&&3<=s.accessLevel&&t.push({id:e.collectionId+"-pkgconfig-node",text:"Manage",collectionId:e.collectionId,collectionName:e.name,action:"collection-management",iconCls:"sm-setting-icon",leaf:!0}),i.push({id:e.collectionId+"-findings-status-node",text:"Status",collectionId:e.collectionId,collectionName:e.name,action:"collection-status",iconCls:"sm-report-icon",leaf:!0}),t.push({id:e.collectionId+"-stigs-node",node:"stigs",text:"STIGs",iconCls:"sm-stig-icon",onAssetChanged:async(t,e)=>{let i=e.stigs.map(t=>t.benchmarkId);var s,n,r,o=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/collections/"+e.collection.collectionId,method:"GET",params:{projection:"stigs"}});let a=JSON.parse(o.response.responseText).stigs,l=a.map(t=>t.benchmarkId),d=[],h=[];for(s of t.childNodes)if(l.includes(s.attributes.benchmarkId)){if(d.push(s.attributes.benchmarkId),s.isExpanded()){let t=s.findChild("assetId",e.assetId);stigIsMappedToAsset=i.includes(s.attributes.benchmarkId),stigIsMappedToAsset?t?t.attributes.text!==SM.he(e.name)&&(t.setText(SM.he(e.name)),s.sort(SM.NodeSorter)):(s.appendChild(SM.StigAssetNodeConfig(s.attributes,e)),s.sort(SM.NodeSorter)):t&&t.remove(!0)}}else h.push(s);for(n of h)n.remove(!0);for(r of a)d.includes(r.benchmarkId)||(t.appendChild(SM.StigNodeConfig(e.collection.collectionId,r)),t.sort(SM.NodeSorter))},onAssetDeleted:async(t,e)=>{var i,s,n=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/collections/"+e.collection.collectionId,method:"GET",params:{projection:"stigs"}});let r=JSON.parse(n.response.responseText).stigs,o=r.map(t=>t.benchmarkId),a=[],l=[];for(i of t.childNodes)if(o.includes(i.attributes.benchmarkId)){if(a.push(i.attributes.benchmarkId),i.isExpanded()){let t=i.findChild("assetId",e.assetId);t&&t.remove(!0)}}else l.push(i);for(s of l)s.remove(!0)}},{id:e.collectionId+"-assets-node",node:"assets",text:"Assets",iconCls:"sm-asset-icon"},{id:e.collectionId+"-reports-node",text:"Reports",collectionId:e.collectionId,collectionName:e.name,iconCls:"sm-report-icon",children:i}),{id:e.collectionId+"-collection-node",node:"collection",text:SM.he(e.name),collectionId:e.collectionId,collectionName:e.name,iconCls:"sm-collection-icon",children:t}},SM.AssetNodeConfig=function(t,e){return{id:`${t}-${e.assetId}-assets-asset-node`,text:SM.he(e.name),name:e.name,report:"asset",collectionId:t,assetId:e.assetId,iconCls:"sm-asset-icon",qtip:SM.he(e.name),onAssetChanged:(e,i)=>{let s=i.stigs.map(t=>t.benchmarkId);if(e.attributes.text!==SM.he(i.name)&&(e.setText(SM.he(i.name)),e.parentNode.sort(SM.NodeSorter)),e.isExpanded()){let t=[];const a=[];for(var n of e.childNodes)s.includes(n.attributes.benchmarkId)?t.push(n.attributes.benchmarkId):a.push(n);for(var r of a)r.remove(!0);for(var o of i.stigs)t.includes(o.benchmarkId)||(e.appendChild(SM.AssetStigNodeConfig(i,o)),e.sort(SM.NodeSorter))}}}},SM.AssetStigNodeConfig=function(t,e){return{id:`${t.collection.collectionId}-${t.assetId}-${e.benchmarkId}-leaf`,text:SM.he(e.benchmarkId),leaf:!0,report:"review",iconCls:"sm-stig-icon",stigName:e.benchmarkId,assetName:t.name,assetId:t.assetId,collectionId:t.collection.collectionId,workflow:t.collection.workflow,benchmarkId:e.benchmarkId,qtip:SM.he(e.title)}},SM.StigNodeConfig=function(t,e){return{collectionId:t,text:SM.he(e.benchmarkId),report:"stig",iconCls:"sm-stig-icon",id:`${t}-${e.benchmarkId}-stigs-stig-node`,benchmarkId:e.benchmarkId,qtip:SM.he(e.title)}},SM.StigAssetNodeConfig=function(t,e){return{id:`${e.collectionId}-${t.benchmarkId}-${e.assetId}-leaf`,text:SM.he(e.name),leaf:!0,report:"review",iconCls:"sm-asset-icon",stigName:t.benchmarkId,assetName:e.name,assetId:e.assetId,collectionId:e.collectionId??e.collection?.collectionId,benchmarkId:t.benchmarkId,qtip:SM.he(e.name)}},SM.StigBatchNodeConfig=function(t,e){return{id:e+`-batch-${t}-leaf`,sortToTop:!0,text:"Collection review",collectionGrant:curUser.collectionGrants.find(t=>t.collection.collectionId===e).accessLevel,cls:"sm-tree-node-collection-review",leaf:!0,report:"collection-review",iconCls:"sm-collection-icon",collectionId:e,benchmarkId:t,qtip:"Review multiple assets"}},SM.LibraryStigNodeConfig=function(t){return{id:`library-${t.benchmarkId}-leaf`,text:SM.he(t.benchmarkId),leaf:!0,report:"library",iconCls:"sm-stig-icon",benchmarkId:t.benchmarkId,lastRevisionStr:t.lastRevisionStr,stigTitle:t.title,qtip:SM.he(t.title)}},SM.LibraryNodesConfig=function(t){const e=/^[a-e]/i,i=/^[f-m]/i,s=/^[n-v]/i,n=/^[w-z]/i;return[{id:"library-a-e-folder",text:"A-E",iconCls:"sm-folder-icon",children:t.filter(t=>e.test(t.benchmarkId)).map(t=>SM.LibraryStigNodeConfig(t))},{id:"library-f-m-folder",text:"F-M",iconCls:"sm-folder-icon",children:t.filter(t=>i.test(t.benchmarkId)).map(t=>SM.LibraryStigNodeConfig(t))},{id:"library-n-v-folder",text:"N-V",iconCls:"sm-folder-icon",children:t.filter(t=>s.test(t.benchmarkId)).map(t=>SM.LibraryStigNodeConfig(t))},{id:"library-w-z-folder",text:"W-Z",iconCls:"sm-folder-icon",children:t.filter(t=>n.test(t.benchmarkId)).map(t=>SM.LibraryStigNodeConfig(t))}]},SM.AppNavTree=Ext.extend(Ext.tree.TreePanel,{initComponent:function(){let f=this;var t={autoScroll:!0,split:!0,collapsible:!0,title:`<span onclick="window.oidcProvider.logout()">${"USER"===curUser.display?SM.he(curUser.username):SM.he(curUser.display)} - Logout</span>`,bodyStyle:"padding:5px;",width:f.width||300,minSize:220,root:{nodeType:"async",id:"stigman-root",expanded:!0},rootVisible:!1,loader:new Ext.tree.TreeLoader({directFn:f.loadTree}),loadMask:"Loading...",listeners:{click:f.treeClick,render:this.treeRender,collapsenode:function(t){t.loaded=!1}}};this.onCollectionCreated=function(i,s){if(curUser.collectionGrants.find(t=>t.collection.collectionId===i.collectionId)){let t=f.getNodeById("collections-root"),e=t.appendChild(SM.CollectionNodeConfig(i));t.sort(function(t,e){return"collection-create-leaf"===t.attributes.id?-1:"collection-create-leaf"===e.attributes.id?1:t.text.toUpperCase()<e.text.toUpperCase()?-1:t.text.toUpperCase()>e.text.toUpperCase()?1:0}),s.showManager&&f.selectPath(""+e.getPath()+f.pathSeparator+e.attributes.children[0].id,void 0,(t,e)=>{t&&e.getUI().elNode.click()})}},this.sortNodes=(t,e)=>t.text<e.text?-1:1,this.onAssetChanged=e=>{let i=f.getNodeById(e.collection.collectionId+"-assets-node");if(i&&i.isExpanded()){let t=i.findChild("assetId",e.assetId);t&&t.attributes.onAssetChanged(t,e)}let t=f.getNodeById(e.collection.collectionId+"-stigs-node");t&&t.isExpanded()&&t.attributes.onAssetChanged(t,e)},this.onAssetCreated=t=>{let e=f.getNodeById(t.collection.collectionId+"-assets-node",!0);e&&e.isExpanded()&&(e.appendChild(SM.AssetNodeConfig(t.collection.collectionId,t)),e.sort(SM.NodeSorter));let i=f.getNodeById(t.collection.collectionId+"-stigs-node");i&&i.isExpanded()&&i.attributes.onAssetChanged(i,t)},this.onAssetDeleted=e=>{let i=f.getNodeById(e.collection.collectionId+"-assets-node",!0);if(i&&i.isExpanded()){let t=i.findChild("assetId",e.assetId);t&&t.remove(!0)}let t=f.getNodeById(e.collection.collectionId+"-stigs-node");t&&t.isExpanded()&&t.attributes.onAssetDeleted(t,e)},this.onCollectionChanged=function(i){if("name"in i){let t=f.getNodeById("collections-root"),e=t.findChild("id",i.collectionId+"-collection-node",!0);e&&(e.setText(SM.he(i.name)),e.collectionName=i.name,e.eachChild(t=>{t.attributes.collectionName&&(t.attributes.collectionName=i.name)})),t.sort(function(t,e){return"collection-create-leaf"===t.attributes.id?-1:"collection-create-leaf"===e.attributes.id?1:t.text.toUpperCase()<e.text.toUpperCase()?-1:t.text.toUpperCase()>e.text.toUpperCase()?1:0})}},this.onCollectionDeleted=function(t){let e=f.getNodeById("collections-root"),i=e.findChild("id",t+"-collection-node",!0);i&&i.remove()},this.onStigAssetsChanged=async(e,i,s)=>{let n=s.map(t=>t.assetId);var r=await f.getApiStig(i);let t=f.getNodeById(e+"-assets-node");if(t&&t.isExpanded())for(const d of t.childNodes)if(d.isExpanded()){let t=d.findChild("benchmarkId",i);n.includes(d.attributes.assetId)?t||(d.appendChild(SM.AssetStigNodeConfig({collection:{collectionId:d.attributes.collectionId},assetId:d.attributes.assetId,name:d.attributes.name},r)),d.sort(SM.NodeSorter)):t&&t.remove(!0)}let o=f.getNodeById(e+"-stigs-node");if(o&&o.isExpanded()){let t=f.getNodeById(e+`-${i}-stigs-stig-node`);if(!t)return o.appendChild(SM.StigNodeConfig(e,r)),void o.sort(SM.NodeSorter);if(0===n.length)return t?void t.remove(!0):void 0;if(t&&t.isExpanded()){const h=[],c=[];for(const u of t.childNodes)n.includes(u.attributes.assetId)?c.push(u.attributes.assetId):h.push(u);for(var a of h)a.remove(!0);for(var l of s)c.includes(l.assetId)||(l.collection={collectionId:e},t.appendChild(SM.StigAssetNodeConfig(r,l)));t.sort(SM.NodeSorter)}}},this.getApiStig=async t=>{try{var e=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/stigs/"+t,method:"GET"});return JSON.parse(e.response.responseText)}catch(t){alert(t.message)}},Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.AppNavTree.superclass.initComponent.call(this),SM.Dispatcher.addListener("collectioncreated",this.onCollectionCreated),SM.Dispatcher.addListener("collectionchanged",this.onCollectionChanged),SM.Dispatcher.addListener("collectiondeleted",this.onCollectionDeleted),SM.Dispatcher.addListener("assetchanged",this.onAssetChanged,f),SM.Dispatcher.addListener("assetcreated",this.onAssetCreated,f),SM.Dispatcher.addListener("assetdeleted",this.onAssetDeleted,f),SM.Dispatcher.addListener("stigassetschanged",this.onStigAssetsChanged,f)},loadTree:async function(t,n){try{let s;if("stigman-root"==t){let t=[];return curUser.privileges.canAdmin&&t.push({id:"admin-root",node:"admin",text:"Application Management",iconCls:"sm-setting-icon",expanded:!0,children:[{id:"collection-admin",text:"Collections",leaf:!0,iconCls:"sm-collection-icon"},{id:"user-admin",text:"User Grants",leaf:!0,iconCls:"sm-users-icon"},{id:"stig-admin",text:"STIG and SCAP Benchmarks",leaf:!0,iconCls:"sm-stig-icon"},{id:"appdata-admin",text:'Application Data <span class="sm-navtree-sprite">experimental</span>',leaf:!0,iconCls:"sm-database-save-icon"}]}),t.push({id:"collections-root",node:"collections",text:"Collections",iconCls:"sm-collection-icon",expanded:!0}),t.push({id:"library-root",node:"library",text:"STIG Library",iconCls:"sm-library-icon",expanded:!1}),void n(t,{status:!0})}if("library-root"===t){var e=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/stigs",method:"GET"}),i=JSON.parse(e.response.responseText);return void n(SM.LibraryNodesConfig(i),{status:!0})}if("collections-root"===t){var r=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/collections",method:"GET"});let t=JSON.parse(r.response.responseText),e=t.map(t=>SM.CollectionNodeConfig(t));return curUser.privileges.canCreateCollection&&e.unshift({id:"collection-create-leaf",action:"collection-create",text:"Create Collection...",cls:"sm-tree-node-create",iconCls:"sm-add-icon",qtip:"Create a new STIG Manager Collection",leaf:!0}),void n(e,{status:!0})}if(s=t.match(/^(\d+)-assets-node$/),s){let e=s[1];var o=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/collections/"+e,method:"GET",params:{projection:"assets"}});let t=JSON.parse(o.response.responseText);return void n(t.assets.map(t=>SM.AssetNodeConfig(e,t)),{status:!0})}if(s=t.match(/^(\d+)-(\d+)-assets-asset-node$/),s){s[1];var a=s[2],l=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/assets/"+a,method:"GET",params:{projection:"stigs"}});let e=JSON.parse(l.response.responseText);return void n(e.stigs.map(t=>SM.AssetStigNodeConfig(e,t)),{status:!0})}if(s=t.match(/^(\d+)-stigs-node$/),s){let e=s[1];var d=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/collections/"+e,method:"GET",params:{projection:"stigs"}});let t=JSON.parse(d.response.responseText);return void n(t.stigs.map(t=>SM.StigNodeConfig(e,t)),{status:!0})}if(s=t.match(/^(\d+)-(.*)-stigs-stig-node$/),s){var h=s[1];let e=s[2];var c,u=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${h}/stigs/${e}/assets`,method:"GET"});let t=JSON.parse(u.response.responseText),i=[];return 0<t.length&&(i.push(SM.StigBatchNodeConfig(e,h)),c=t.map(t=>SM.StigAssetNodeConfig({benchmarkId:e},t)),i=i.concat(c)),void n(i,{status:!0})}}catch(t){Ext.Msg.alert("Status","AJAX request failed in loadTree()")}},treeClick:function(i,t){let e,s;if(i.leaf){if(console.log("in treeClick() with "+t.type),"library"==i.attributes.report&&addLibraryStig({benchmarkId:i.attributes.benchmarkId,revisionStr:i.attributes.lastRevisionStr,stigTitle:i.attributes.stigTitle,treePath:i.getPath()}),"review"==i.attributes.report&&(e="-"+i.attributes.assetId+"-"+i.attributes.benchmarkId.replace(".","_"),s=Ext.getCmp("main-tab-panel").getItem("reviewTab"+e),s?(2===t.browserEvent.detail&&s.makePermanent(),s.show()):addReview({leaf:i.attributes,treePath:i.getPath()})),"collection-review"==i.attributes.report&&(e="-"+i.attributes.collectionId+"-"+i.attributes.benchmarkId.replace(".","_"),s=Ext.getCmp("main-tab-panel").getItem("collection-review-tab"+e),s?(2===t.browserEvent.detail&&s.makePermanent(),s.show()):addCollectionReview({leaf:i.attributes,treePath:i.getPath()})),"findings"==i.attributes.action&&(s=Ext.getCmp("main-tab-panel").getItem("findingsTab-"+i.attributes.collectionId),s?(2===t.browserEvent.detail&&s.makePermanent(),s.show()):addFindingsSummary({collectionId:i.attributes.collectionId,collectionName:i.attributes.collectionName,treePath:i.getPath()})),"collection-create"==i.attributes.action){i.parentNode;let t=new SM.Collection.CreateForm({btnText:"Create",btnHandler:async()=>{try{await addOrUpdateCollection(0,t.getForm().getFieldValues(),{elevate:!1,showManager:!0})}catch(t){alert(t.message)}finally{e.close()}}});t.getForm().setValues({grants:[{user:{userId:curUser.userId,username:curUser.username},accessLevel:4}]});let e=new Ext.Window({id:"window-project-info",cls:"sm-dialog-window sm-round-panel",title:"Create Collection",modal:!0,width:460,height:560,layout:"fit",plain:!1,buttonAlign:"right",items:t});e.show(document.body)}switch("collection-management"==i.attributes.action&&addCollectionManager({collectionId:i.attributes.collectionId,collectionName:i.attributes.collectionName,treePath:i.getPath()}),"collection-status"==i.attributes.action&&(s=Ext.getCmp("main-tab-panel").getItem("completionTab-"+i.attributes.collectionId),s?(2===t.browserEvent.detail&&s.makePermanent(),s.show()):addCompletionStatus({collectionId:i.attributes.collectionId,collectionName:i.attributes.collectionName,treePath:i.getPath()})),i.id){case"collection-admin":addCollectionAdmin({treePath:i.getPath()});break;case"user-admin":addUserAdmin({treePath:i.getPath()});break;case"stig-admin":addStigAdmin({treePath:i.getPath()});break;case"appdata-admin":addAppDataAdmin({treePath:i.getPath()});break;case"wo-admin":!function(){var t=window.innerWidth/2-200,e=window.innerHeight/2-200;doWoWindow=window.open(window.oidcProvider.createLoginUrl({scope:"stig-manager"}),"doWo",`top=${e},left=${t},width=400,height=400,resizeable,scrollbars,status`);doWoWindow}()}}},treeRender:function(t){new Ext.ToolTip({target:t.header,showDelay:2e3,dismissDelay:0,autoWidth:!0,title:"OAuth2 token payload",listeners:{show:function(t){let e={...window.oidcProvider.tokenParsed},i=new Date(1e3*e.exp),s=new Date(1e3*e.iat),n=new Date(1e3*e.auth_time);e.exp=`${e.exp} (${i.format("Y-m-d H:i:s")})`,e.iat=`${e.iat} (${s.format("Y-m-d H:i:s")})`,e.auth_time=`${e.auth_time} (${n.format("Y-m-d H:i:s")})`,t.update("<pre>"+JSON.stringify(e,null,2)+"</pre>")}}}).getId()}}),Ext.ns("SM"),SM.RowEditorToolbar=Ext.extend(Ext.Toolbar,{initComponent:function(){this.newButton=new SM.RowEditorNewBtn({toolbar:this,itemString:this.itemString,title:this.newTitle,editor:this.editor,gridId:this.gridId,newRecord:this.newRecord}),this.delButton=new SM.RowEditorDelBtn({itemString:this.itemString,title:this.deleteTitle,deleteProperty:this.deleteProperty,editor:this.editor,gridId:this.gridId,disabled:!0});var t={newRecordValues:this.newRecordValues||{},items:[{xtype:"tbspacer"},this.newButton,"-",this.delButton]};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.RowEditorToolbar.superclass.initComponent.call(this)}}),Ext.reg("sm-row-editor-toolbar",SM.RowEditorToolbar),SM.RowEditorNewBtn=Ext.extend(Ext.Button,{initComponent:function(){var t={iconCls:"icon-add",text:this.title??"New "+this.itemString,handler:this.btnHandler};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.RowEditorNewBtn.superclass.initComponent.call(this)},btnHandler:function(t,e){this.grid=Ext.getCmp(this.gridId),this.editor.stopEditing(!1),this.grid.store.suspendEvents(!1);let i=new this.newRecord({...this.toolbar.newRecordValues});i.editing=!0,this.grid.store.insert(0,i),this.grid.store.resumeEvents(),this.grid.getView().refresh(),this.grid.getSelectionModel().selectRow(0),this.editor.startEditing(0)}}),Ext.reg("sm-new-button",SM.RowEditorNewBtn),SM.RowEditorDelBtn=Ext.extend(Ext.Button,{initComponent:function(){var t={iconCls:"icon-del",text:this.title??"Delete "+this.itemString,itemString:this.itemString,deleteProperty:this.deleteProperty,handler:this.btnHandler};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.RowEditorDelBtn.superclass.initComponent.call(this)},btnHandler:function(t,e){this.grid=Ext.getCmp(this.gridId),this.editor.stopEditing();var i=this.grid.getSelectionModel().getSelections(),s=i[0].data[this.deleteProperty];Ext.Msg.show({title:`Delete ${this.itemString}?`,store:this.grid.store,record:i[0],msg:`You are about to delete ${this.itemString} "${SM.he(s)}". Do you wish to continue?`,buttons:Ext.Msg.YESNO,fn:function(t,e,i){"ok"!==t&&"yes"!==t||i.store.remove(i.record)},icon:Ext.MessageBox.QUESTION})}}),Ext.reg("sm-del-button",SM.RowEditorDelBtn),Ext.ns("SM"),Ext.ns("SM.Collection"),SM.WorkflowComboBox=Ext.extend(Ext.form.ComboBox,{initComponent:function(){let e=this;this.store=new Ext.data.SimpleStore({fields:["value","display"]}),this.store.on("load",function(t){e.setValue(e.value)}),Ext.apply(this,Ext.apply(this.initialConfig,{displayField:"display",valueField:"value",triggerAction:"all",mode:"local",editable:!1})),SM.WorkflowComboBox.superclass.initComponent.call(this),this.store.loadData([["emass","RMF Package"],["continuous","Continuous"]])}}),Ext.reg("sm-workflow-combo",SM.WorkflowComboBox),SM.CollectionDescriptionTextArea=Ext.extend(Ext.form.TextArea,{initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,{cls:"sm-review-result-textarea",lastSavedData:"",allowBlank:!0,fieldLabel:"Description",labelSeparator:"",autoScroll:"auto",enableKeyEvents:!0})),SM.CollectionDescriptionTextArea.superclass.initComponent.call(this)}}),SM.AccessLevelStrings=["Undefined","Restricted","Full","Manage","Owner"],SM.AccessLevelField=Ext.extend(Ext.form.ComboBox,{initComponent:function(){let e=this;var t={displayField:"display",valueField:"value",triggerAction:"all",mode:"local",editable:!1,validator:t=>0==e.grid.editor.editing||(""===t?"Blank values no allowed":void 0)},i=[[1,SM.AccessLevelStrings[1]],[2,SM.AccessLevelStrings[2]],[3,SM.AccessLevelStrings[3]],[4,SM.AccessLevelStrings[4]]];this.store=new Ext.data.SimpleStore({fields:["value","display"]}),this.store.on("load",function(t){e.setValue(t.getAt(0).get("value"))}),Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.AccessLevelField.superclass.initComponent.call(this),this.store.loadData(i)}}),Ext.reg("sm-accesslevel-field",SM.AccessLevelField),SM.MetadataGrid=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){const e=this;var t=Ext.data.Record.create(["key","value"]);this.newRecordConstructor=Ext.data.Record.create(["key","value"]),this.editor=new Ext.ux.grid.RowEditor({saveText:"Save",grid:this,clicksToEdit:2,errorSummary:!1,listeners:{canceledit:function(t,e){!0===t.record.editing&&(this.grid.store.suspendEvents(!1),this.grid.store.remove(t.record),this.grid.store.resumeEvents(),this.grid.getView().refresh())},afteredit:function(t,e,i,s){let n=i.store.data;var r=i.id;i.id=i.data.key,i.phantom=!1,delete n.map[r],n.map[i.id]=i;for(let t=0,e=n.keys.length;t<e;t++)n.keys[t]===r&&(n.keys[t]=i.id);t.grid.fireEvent("metadatachanged",t.grid)}}}),this.totalTextCmp=new Ext.Toolbar.TextItem({text:"0 records",width:80});var i=new Ext.data.DataWriter;let s=new SM.RowEditorToolbar({itemString:"key",editor:this.editor,gridId:this.id,deleteProperty:"key",newRecord:this.newRecordConstructor});s.delButton.disable();t={isFormField:!0,ignoreKeys:e.ignoreKeys||[],allowBlank:!0,layout:"fit",height:150,border:!0,plugins:[this.editor],style:{},listeners:{},store:new Ext.data.ArrayStore({grid:this,writer:i,autoSave:!1,fields:t,sortInfo:{field:"key",direction:"ASC"},root:"",restful:!0,idProperty:"key",listeners:{remove:(t,e,i)=>{t.grid.fireEvent("metadatachanged",t.grid)}}}),view:new SM.ColumnFilters.GridView({emptyText:this.emptyText||"No records to display",deferEmptyText:!1,forceFit:!0}),sm:new Ext.grid.RowSelectionModel({singleSelect:!0,listeners:{selectionchange:function(t){s.delButton.setDisabled(!t.hasSelection())}}}),cm:new Ext.grid.ColumnModel({columns:[{header:"Key",dataIndex:"key",sortable:!0,width:150,editor:new Ext.form.TextField({grid:this,submitValue:!1,validator:function(t){if(0==this.grid.editor.editing)return!0;if(""===t)return"Blank values no allowed";var e=this.grid.store.findExact("key",t),t=this.grid.selModel.isSelected(e);return!(-1!=e&&!t)||"Duplicate keys not allowed"}})},{header:"Value",dataIndex:"value",sortable:!1,width:250,editor:new Ext.form.TextField({submitValue:!1})}]}),tbar:s,getValue:function(){let e={};return this.store.data.items.forEach(t=>{e[t.data.key]=t.data.value}),e},markInvalid:function(){},clearInvalid:function(){},isValid:function(){return!0},disabled:!1,getName:function(){return this.name},validate:function(){return!0},setValue:function(t){t=e.ignoreKeys.length?Object.entries(t).filter(t=>!e.ignoreKeys.includes(t[0])):Object.entries(t);this.store.loadData(t)}};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.MetadataGrid.superclass.initComponent.call(this)}}),Ext.reg("sm-metadata-grid",SM.MetadataGrid),SM.UserSelectionField=Ext.extend(Ext.form.ComboBox,{initComponent:function(){let e=this;var t={store:new Ext.data.JsonStore({fields:[{name:"userId",type:"string"},{name:"username",type:"string"}],autoLoad:!0,url:STIGMAN.Env.apiBase+"/users",root:"",sortInfo:{field:"username",direction:"ASC"},idProperty:"userId"}),filteringStore:this.filteringStore||null,displayField:"username",valueField:"userId",mode:"local",forceSelection:!0,typeAhead:!0,minChars:0,hideTrigger:!1,triggerAction:"all",lastQuery:"",validator:t=>0==e.grid.editor.editing||(""===t?"Blank values no allowed":void 0),doQuery:function(t,e){var i={query:t=Ext.isEmpty(t)?"":t,forceAll:e,combo:this,cancel:!1};if(!1===this.fireEvent("beforequery",i)||i.cancel)return!1;t=i.query,(!0===(e=i.forceAll)||t.length>=this.minChars)&&(this.lastQuery!==t?(this.lastQuery=t,"local"==this.mode?(this.selectedIndex=-1,e?this.store.clearFilter():this.store.filter(this.displayField,t,!1,!1),this.onLoad()):(this.store.baseParams[this.queryParam]=t,this.store.load({params:this.getParams(t)}),this.expand())):(this.selectedIndex=-1,this.onLoad()))},listeners:{afterrender:t=>{t.getEl().dom.setAttribute("spellcheck","false")},expand:i=>{i.filteringStore&&i.store.filterBy(function(t,e){return-1===i.filteringStore.indexOfId(e)})}}};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.UserSelectionField.superclass.initComponent.call(this)}}),Ext.reg("sm-user-selection-field",SM.UserSelectionField),SM.UserGrantsGrid=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){const o=this;var t=[{name:"userId"},{name:"username"},{name:"accessLevel"}];this.newRecordConstructor=Ext.data.Record.create(t);const s=new Ext.Toolbar.TextItem({text:"0 records",width:80});this.proxy=new Ext.data.HttpProxy({restful:!0,url:this.url,headers:{"Content-Type":"application/json;charset=utf-8"},listeners:{exception:function(t,e,i,s,n,r){let o;o=n.responseText||"Unknown error",Ext.Msg.alert("Error",o)}}});const i=new Ext.data.JsonStore({grid:this,proxy:this.proxy,baseParams:this.baseParams,root:"",fields:t,idProperty:"userId",sortInfo:{field:"username",direction:"ASC"},listeners:{load:function(t,e){s.setText(e.length+" records")},remove:function(t,e,i){s.setText(t.getCount()+" records"),t.grid.fireEvent("grantschanged",t.grid)}}});var e=new SM.UserSelectionField({submitValue:!1,grid:this,filteringStore:i}),n=new SM.AccessLevelField({submitValue:!1,grid:this}),t=[{header:"Username",width:150,dataIndex:"username",sortable:!0,editor:e},{header:"Access Level",width:100,dataIndex:"accessLevel",sortable:!0,renderer:t=>SM.AccessLevelStrings[t],editor:n}];this.editor=new Ext.ux.grid.RowEditor({saveText:"Save",grid:this,userSelectionField:e,accessLevelField:n,clicksToEdit:2,errorSummary:!1,listeners:{validateedit:function(e,i,t,s){if(i.hasOwnProperty("username")){let t=e.userSelectionField;e=t.store.getAt(t.selectedIndex);i.username=e.data.username,i.userId=e.data.userId}},canceledit:function(t,e){!0===t.record.editing&&(this.grid.store.suspendEvents(!1),this.grid.store.remove(t.record),this.grid.store.resumeEvents(),this.grid.getView().refresh())},afteredit:function(t,e,i,s){let n=i.store.data;var r=i.id;i.id=i.data.userId,i.phantom=!1,i.dirty=!1,delete n.map[r],n.map[i.id]=i;for(let t=0,e=n.keys.length;t<e;t++)n.keys[t]===r&&(n.keys[t]=i.id);o.showAccessBtn&&o.accessBtn.setDisabled(1!=i.data.accessLevel),t.grid.fireEvent("grantschanged",t.grid)}}});const r=new SM.RowEditorToolbar({itemString:"Grant",editor:this.editor,gridId:this.id,deleteProperty:"userId",newRecord:this.newRecordConstructor});this.showAccessBtn&&(r.addSeparator(),this.accessBtn=r.addButton({iconCls:"sm-asset-icon",disabled:!0,text:"User access...",handler:function(){var t=o.getSelectionModel().getSelected();Ext.getBody().mask("Getting access list for "+t.get("username")+"..."),showUserAccess(o.collectionId,t.get("userId"))}}));t={isFormField:!0,name:"grants",allowBlank:!1,layout:"fit",height:150,plugins:[this.editor],store:i,cm:new Ext.grid.ColumnModel({columns:t}),sm:new Ext.grid.RowSelectionModel({singleSelect:!0,listeners:{rowselect:function(t,e,i){o.showAccessBtn&&o.accessBtn.setDisabled(1!=i.data.accessLevel)},selectionchange:function(t){r.delButton.setDisabled(!t.hasSelection())}}}),view:new SM.ColumnFilters.GridView({emptyText:this.emptyText||"No records to display",deferEmptyText:!1,forceFit:!0,markDirty:!1}),listeners:{},tbar:r,getValue:function(){let e=[];return i.data.items.forEach(t=>{e.push({userId:t.data.userId,accessLevel:t.data.accessLevel})}),e},setValue:function(t){t=t.map(t=>({userId:t.user.userId,username:t.user.username,accessLevel:t.accessLevel}));i.loadData(t)},validator:function(t){},markInvalid:function(){},clearInvalid:function(){},isValid:function(){const t=o.getValue();return 0<t.filter(t=>4===t.accessLevel).length},getName:()=>this.name,validate:function(){}};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.UserGrantsGrid.superclass.initComponent.call(this)}}),Ext.reg("sm-user-grants-grid",SM.UserGrantsGrid),SM.Collection.CreateForm=Ext.extend(Ext.form.FormPanel,{initComponent:function(){const t=this,s=new Ext.form.TextField({fieldLabel:"Name",labelStyle:"font-weight: 600;",name:"name",allowBlank:!1,anchor:"100%",enableKeyEvents:!0,keys:[{key:Ext.EventObject.ENTER,fn:(t,e,i)=>{s.getEl().blur()}}],listeners:{specialkey:(t,e)=>{e.getKey()==e.ENTER&&t.getEl().blur()},change:async(t,e,i)=>{e?.trim()||t.setValue(i)}}}),e=new Ext.form.TextArea({fieldLabel:"Description",labelStyle:"font-weight: 600;",name:"description",anchor:"100% 0"}),i=new SM.MetadataGrid({title:"Metadata",iconCls:"sm-database-save-icon",name:"metadata",ignoreKeys:["fieldSettings","statusSettings"],anchor:"100% 0",border:!0}),n=new SM.Collection.FieldSettings.ReviewFields({iconCls:"sm-stig-icon",border:!0,autoHeight:!0}),r=new SM.Collection.StatusSettings.StatusFields({iconCls:"sm-star-icon-16",border:!0,autoHeight:!0}),o=new SM.UserGrantsGrid({iconCls:"sm-users-icon",showAccessBtn:!1,title:"Grants",border:!0});var a={baseCls:"x-plain",cls:"sm-collection-manage-layout sm-round-panel",bodyStyle:"padding: 9px;",border:!1,labelWidth:100,monitorValid:!0,setFieldValues:function(t){s.setValue(t.name),e.setValue(t.description),i.setValue(t.metadata),t.metadata.fieldSettings&&n.setValues(JSON.parse(t.metadata.fieldSettings)),t.metadata.statusSettings&&r.setValues(JSON.parse(t.metadata.statusSettings)),o.setValue(t.grants)},getFieldValues:function(e){let i={},s,n,r;return this.items.each(function(t){!1===t.submitValue||t.disabled||!0===e&&!t.isDirty()||(s=t.getName(),n=i[s],r=t.getValue(),Ext.isDefined(n)?Ext.isArray(n)?i[s].push(r):i[s]=[n,r]:i[s]=r)}),t.serializeFieldSettings(i),t.serializeStatusSettings(i),i},items:[{layout:"border",anchor:"100% 0",hideLabels:!0,border:!1,baseCls:"x-plain",items:[{layoutConfig:{getLayoutTargetSize:function(){var t=this.container.getLayoutTarget(),e={};return t&&(e=t.getViewSize(),(e=Ext.isIE9m&&Ext.isStrict&&0==e.width?t.getStyleSize():e).width-=t.getPadding("lr"),e.height-=t.getPadding("tb"),e.height-=30),e}},xtype:"fieldset",region:"north",height:180,split:!1,title:"Information",items:[s,e]},{xtype:"hidden",name:"workflow",value:"emass"},{xtype:"tabpanel",style:{paddingTop:"10px"},region:"center",activeTab:0,border:!1,items:[o,{xtype:"panel",title:"Settings",layout:"form",iconCls:"sm-setting-icon",border:!0,padding:10,items:[n,r]},i]}]}],buttons:[{text:this.btnText||"Save",formBind:!0,handler:this.btnHandler||function(){}}]};Ext.apply(this,Ext.apply(this.initialConfig,a)),SM.Collection.CreateForm.superclass.initComponent.call(this)},serializeFieldSettings:function(t){const e={};for(const i of["commentEnabled","commentRequired","detailEnabled","detailRequired"])e[i]=t[i],delete t[i];t.metadata?t.metadata.fieldSettings=JSON.stringify(e):t.metadata={fieldSettings:JSON.stringify(e)}},serializeStatusSettings:function(t){const e={};for(const i of["canAccept","minGrant","resetCriteria"])e[i]=t[i],delete t[i];t.metadata?t.metadata.statusSettings=JSON.stringify(e):t.metadata={statusSettings:JSON.stringify(e)}}}),SM.Collection.ManagePanel=Ext.extend(Ext.form.FormPanel,{initComponent:function(){let r=this;async function s(t,e){e=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${r.collectionId}/metadata/keys/`+t,method:"PUT",jsonData:JSON.stringify(e)});return e.response.responseText?JSON.parse(e.response.responseText):""}async function n(t){t=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${r.collectionId}/metadata/keys/`+t,method:"GET"});return t.response.responseText?JSON.parse(t.response.responseText):null}const o=new Ext.form.TextField({fieldLabel:"Name",labelStyle:"font-weight: 600;",value:r.apiCollection?.name,name:"name",allowBlank:!1,anchor:"100%",enableKeyEvents:!0,keys:[{key:Ext.EventObject.ENTER,fn:(t,e,i)=>{o.getEl().blur()}}],listeners:{specialkey:(t,e)=>{e.getKey()==e.ENTER&&t.getEl().blur()},change:async(e,t,i)=>{if(t?.trim())try{var s=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/collections/"+r.collectionId,method:"PATCH",jsonData:{name:t.trim()}}),n=JSON.parse(s.response.responseText);SM.Dispatcher.fireEvent("collectionchanged",n)}catch(t){alert("Name update failed"),e.setValue(i)}else e.setValue(i)}}});var t=new Ext.Button({iconCls:"sm-trash-icon",width:25,template:new Ext.Template('<table id="{4}" cellspacing="0" class="x-btn {3}"><tbody class="{1}">','<tr><td class="x-btn-tl" style="background-image:none;"><i>&#160;</i></td><td class="x-btn-tc" style="background-image:none;"></td><td class="x-btn-tr" style="background-image:none;"><i>&#160;</i></td></tr>','<tr><td class="x-btn-ml" style="background-image:none;"><i>&#160;</i></td><td class="x-btn-mc" style="background-image:none;"><em class="{2} x-unselectable" unselectable="on"><button type="{0}"></button></em></td><td class="x-btn-mr" style="background-image:none;"><i>&#160;</i></td></tr>','<tr><td class="x-btn-bl" style="background-image:none;"><i>&#160;</i></td><td class="x-btn-bc" style="background-image:none;"></td><td class="x-btn-br" style="background-image:none;"><i>&#160;</i></td></tr>',"</tbody></table>"),border:!1,handler:async function(){try{Ext.Msg.confirm("Confirm","Deleting this Collection will <b>permanently remove</b> all data associated with the Collection. This includes all Assets and their associated assessments. The deleted data <b>cannot be recovered</b>.<br><br>Do you wish to delete the Collection?",async function(t,e){"yes"==t&&(t=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/collections/"+r.collectionId,method:"DELETE"}),t=JSON.parse(t.response.responseText),SM.Dispatcher.fireEvent("collectiondeleted",t.collectionId))})}catch(t){alert(t.mes)}}}),e=new Ext.form.TextArea({fieldLabel:"Description",labelStyle:"font-weight: 600;",value:r.apiCollection?.description,name:"description",anchor:"100% 0",listeners:{change:async(e,t,i)=>{try{await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/collections/"+r.collectionId,method:"PATCH",jsonData:{description:t.trim()}})}catch(t){alert("Description update failed"),e.setValue(i)}}}});const i=new SM.MetadataGrid({title:"Metadata",iconCls:"sm-database-save-icon",name:"metadata",ignoreKeys:["fieldSettings","statusSettings"],anchor:"100% 0",border:!0,listeners:{metadatachanged:async t=>{try{var e=t.getValue(),i=(await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${r.collectionId}/metadata`,method:"PATCH",jsonData:e}),t.store.getSortState());t.store.sort([i])}catch(t){alert("Metadata save failed")}}}});i.setValue(r.apiCollection.metadata);var a=new SM.Collection.FieldSettings.ReviewFields({iconCls:"sm-stig-icon",fieldSettings:JSON.parse(r.apiCollection?.metadata?.fieldSettings??null),border:!0,autoHeight:!0,onFieldSelect:async function(e){try{var t=e.serialize();await s("fieldSettings",JSON.stringify(t)),SM.Dispatcher.fireEvent("fieldsettingschanged",r.apiCollection.collectionId,t)}catch(t){alert(t.message);try{var i=await n("fieldSettings");e.setValues(JSON.parse(i))}catch(t){alert(t.message)}}}}),l=new SM.Collection.StatusSettings.StatusFields({iconCls:"sm-star-icon-16",statusSettings:JSON.parse(r.apiCollection?.metadata?.statusSettings??null),border:!0,autoHeight:!0,onFieldsUpdate:async function(e){try{var t=e.serialize();await s("statusSettings",JSON.stringify(t)),SM.Dispatcher.fireEvent("statussettingschanged",r.apiCollection.collectionId,t)}catch(t){alert(t.message);try{var i=await n("statusSettings");e.setValues(JSON.parse(i))}catch(t){alert(t.message)}}}});let d=o;this.allowDelete&&(o.flex=1,d={xtype:"compositefield",labelStyle:"font-weight: 600;",items:[o,t]});const h=new SM.UserGrantsGrid({collectionId:r.apiCollection.collectionId,iconCls:"sm-users-icon",showAccessBtn:!0,url:STIGMAN.Env.apiBase+"/collections/"+r.apiCollection.collectionId,baseParams:{projection:"grants"},title:"Grants",border:!0,listeners:{grantschanged:async t=>{try{var e=t.getValue(),i=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${r.apiCollection.collectionId}?projection=grants`,method:"PATCH",jsonData:{grants:e}}),s=JSON.parse(i.response.responseText);t.setValue(s.grants)}catch(t){alert("Grants save failed")}}}});h.getStore().loadData(r.apiCollection.grants.map(t=>({userId:t.user.userId,username:t.user.username,accessLevel:t.accessLevel})));l={title:this.title||"Collection properties",layout:"form",cls:"sm-collection-manage-layout sm-round-panel",labelWidth:100,padding:15,getFieldValues:function(e){let i={},s,n,r;return this.items.each(function(t){!1===t.submitValue||t.disabled||!0===e&&!t.isDirty()||(s=t.getName(),n=i[s],r=t.getValue(),Ext.isDefined(n)?Ext.isArray(n)?i[s].push(r):i[s]=[n,r]:i[s]=r)}),i},items:[{layout:"border",anchor:"100% 0",hideLabels:!0,border:!1,baseCls:"x-plain",items:[{layoutConfig:{getLayoutTargetSize:function(){var t=this.container.getLayoutTarget(),e={};return t&&(e=t.getViewSize(),(e=Ext.isIE9m&&Ext.isStrict&&0==e.width?t.getStyleSize():e).width-=t.getPadding("lr"),e.height-=t.getPadding("tb"),e.height-=30),e}},xtype:"fieldset",region:"north",height:200,split:!0,title:"Information",items:[d,e]},{xtype:"tabpanel",style:{paddingTop:"10px"},region:"center",activeTab:0,border:!1,items:[h,{xtype:"panel",title:"Settings",layout:"form",iconCls:"sm-setting-icon",border:!0,padding:10,items:[a,l]},i]}]}]};Ext.apply(this,Ext.apply(this.initialConfig,l)),SM.Collection.ManagePanel.superclass.initComponent.call(this)}}),Ext.reg("sm-collection-panel",SM.Collection.ManagePanel),Ext.ns("SM.Collection.FieldSettings"),SM.Collection.FieldSettings.FieldActiveComboBox=Ext.extend(Ext.form.ComboBox,{initComponent:function(){let e=this;this.store=new Ext.data.SimpleStore({fields:["value","display"]}),this.store.on("load",function(t){e.setValue(e.value)}),Ext.apply(this,Ext.apply(this.initialConfig,{displayField:"display",valueField:"value",triggerAction:"all",mode:"local",editable:!1})),SM.Collection.FieldSettings.FieldActiveComboBox.superclass.initComponent.call(this),this.store.loadData([["always","Always"],["findings","Findings only"]])}}),Ext.reg("sm-field-active-combo",SM.Collection.FieldSettings.FieldActiveComboBox),SM.Collection.FieldSettings.FieldRequiredComboBox=Ext.extend(Ext.form.ComboBox,{initComponent:function(){let i=this;let s=[["always","Always"],["findings","Findings only"],["optional","Optional"]],n=[["findings","Findings only"],["optional","Optional"]];this.store=new Ext.data.SimpleStore({fields:["value","display"]}),this.store.on("load",function(t){i.setValue(i.value)}),this.setListByEnabledValue=function(t){var e=i.value||"always";"findings"===t?(i.store.loadData(n),"always"===e?i.setValue("findings"):i.setValue(e)):(i.store.loadData(s),i.setValue(e))},Ext.apply(this,Ext.apply(this.initialConfig,{displayField:"display",valueField:"value",triggerAction:"all",mode:"local",editable:!1})),SM.Collection.FieldSettings.FieldRequiredComboBox.superclass.initComponent.call(this),this.setListByEnabledValue(this.enabledField?.value||"always")}}),Ext.reg("sm-field-required-combo",SM.Collection.FieldSettings.FieldRequiredComboBox),SM.Collection.FieldSettings.ReviewFields=Ext.extend(Ext.form.FieldSet,{initComponent:function(){const s=this;s.fieldSettings=s.fieldSettings??{detailEnabled:"always",detailRequired:"always",commentEnabled:"findings",commentRequired:"findings"};const i=new SM.Collection.FieldSettings.FieldActiveComboBox({name:"detailEnabled",value:s.fieldSettings.detailEnabled,anchor:"-10",listeners:{select:t}}),n=new SM.Collection.FieldSettings.FieldRequiredComboBox({name:"detailRequired",enabledField:i,value:s.fieldSettings.detailRequired,anchor:"100%",listeners:{select:t}});i.requiredField=n;const r=new SM.Collection.FieldSettings.FieldActiveComboBox({name:"commentEnabled",value:s.fieldSettings.commentEnabled,anchor:"-10",listeners:{select:t}}),o=new SM.Collection.FieldSettings.FieldRequiredComboBox({name:"commentRequired",enabledField:r,value:s.fieldSettings.commentRequired,anchor:"100%",listeners:{select:t}});function t(t,e,i){"detailEnabled"!==t.name&&"commentEnabled"!==t.name||t.requiredField.setListByEnabledValue(t.value),s.onFieldSelect&&s.onFieldSelect(s,t,e,i)}r.requiredField=o,s.serialize=function(){const t={};for(const e of[i,n,r,o])t[e.name]=e.value;return t},s.setValues=function(t){i.setValue(t.detailEnabled),n.setValue(t.detailRequired),r.setValue(t.commentEnabled),o.setValue(t.commentRequired)};var e={title:s.title||"Review fields",labelWidth:0,hideLabels:!0,items:[{layout:"column",baseCls:"x-plain",items:[{columnWidth:.34,layout:"form",hideLabels:!0,border:!1,items:[{xtype:"displayfield",submitValue:!1,value:'<span style="font-weight: 600;">Field</span>'},{xtype:"displayfield",submitValue:!1,value:"Detail",height:22},{xtype:"displayfield",submitValue:!1,value:"Comment",height:22}]},{columnWidth:.33,border:!1,hideLabels:!0,layout:"form",items:[{xtype:"displayfield",submitValue:!1,value:'<span style="font-weight: 600;">Enabled</span>'},i,r]},{columnWidth:.33,layout:"form",hideLabels:!0,border:!1,items:[{xtype:"displayfield",submitValue:!1,value:'<span style="font-weight: 600;">Required to submit</span>'},n,o]}]}]};Ext.apply(this,Ext.apply(this.initialConfig,e)),SM.Collection.FieldSettings.ReviewFields.superclass.initComponent.call(this)}}),Ext.reg("sm-collection-settings-review-fields",SM.Collection.FieldSettings.ReviewFields),Ext.ns("SM.Collection.StatusSettings"),SM.Collection.StatusSettings.AcceptCheckbox=Ext.extend(Ext.form.Checkbox,{initComponent:function(){var t={boxLabel:this.boxLabel||"Accept or Reject reviews"};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.Collection.StatusSettings.AcceptCheckbox.superclass.initComponent.call(this)}}),SM.Collection.StatusSettings.GrantComboBox=Ext.extend(Ext.form.ComboBox,{initComponent:function(){let e=this;this.store=new Ext.data.SimpleStore({fields:["value","display"]}),this.store.on("load",function(t){e.setValue(e.value)}),Ext.apply(this,Ext.apply(this.initialConfig,{displayField:"display",valueField:"value",triggerAction:"all",mode:"local",editable:!1})),SM.Collection.StatusSettings.GrantComboBox.superclass.initComponent.call(this),this.store.loadData([[3,"Manage or Owner"],[4,"Owner"]])}}),SM.Collection.StatusSettings.CriteriaComboBox=Ext.extend(Ext.form.ComboBox,{initComponent:function(){let e=this;this.store=new Ext.data.SimpleStore({fields:["value","display"]}),this.store.on("load",function(t){e.setValue(e.value)}),Ext.apply(this,Ext.apply(this.initialConfig,{displayField:"display",valueField:"value",triggerAction:"all",mode:"local",editable:!1})),SM.Collection.StatusSettings.CriteriaComboBox.superclass.initComponent.call(this),this.store.loadData([["result","Review result"],["any","any Review field"]])}}),SM.Collection.StatusSettings.StatusFields=Ext.extend(Ext.form.FieldSet,{initComponent:function(){const s=this;s.statusSettings=s.statusSettings??{canAccept:!0,minGrant:3,resetCriteria:"result"};const i=new SM.Collection.StatusSettings.AcceptCheckbox({name:"canAccept",ctCls:"sm-cb",hideLabel:!0,boxLabel:"Reviews can be Accepted or Rejected",checked:s.statusSettings.canAccept,listeners:{check:function(t,e){n.setDisabled(!e),s.onFieldsUpdate&&s.onFieldsUpdate(s,t,e)}}}),n=new SM.Collection.StatusSettings.GrantComboBox({name:"minGrant",fieldLabel:'<span style="padding-left: 18px;">Grant required to set Accept or Reject</span>',disabled:!s.statusSettings.canAccept,width:125,value:s.statusSettings.minGrant||3,listeners:{select:t}}),r=new SM.Collection.StatusSettings.CriteriaComboBox({name:"resetCriteria",fieldLabel:'Reset to <img src="img/disk-16.png" width=12 height=12 ext:qtip="Saved" style="padding: 1px 3px 0px 0px;vertical-align:text-top;"/>Saved upon change to',width:125,value:s.statusSettings.resetCriteria||"result",listeners:{select:t}});function t(t,e,i){s.onFieldsUpdate&&s.onFieldsUpdate(s,t,e)}s.serialize=function(){const t={};for(const e of[r,i,n])t[e.name]=e.getValue();return t},s.setValues=function(t){r.setValue(t.resetCriteria||"result"),i.setValue(t.canAccept||!1),n.setValue(t.minGrant||3),n.setDisabled(!t.canAccept)};var e={title:s.title||"Review status",labelWidth:220,items:[r,i,n]};Ext.apply(this,Ext.apply(this.initialConfig,e)),SM.Collection.StatusSettings.StatusFields.superclass.initComponent.call(this)}}),Ext.ns("SM"),SM.CollectionAssetGrid=Ext.extend(Ext.grid.GridPanel,{onAssetChangedOrCreated:function(t){t.collection.collectionId===this.collectionId&&(this.store.loadData(t,!0),t=this.store.getSortState(),this.store.sort(t.field,t.direction))},initComponent:function(){const l=this;Ext.id();var t=Ext.data.Record.create([{name:"assetId",type:"string"},{name:"name",type:"string"},{name:"fqdn",type:"string"},{name:"description",type:"string"},{name:"ip",type:"string"},{name:"mac",type:"string"},{name:"noncomputing",type:"boolean"},{name:"ruleCount",type:"integer",mapping:"statusStats.ruleCount"},{name:"stigCount",type:"integer",mapping:"statusStats.stigCount"},{name:"savedPct",convert:(t,e)=>e.statusStats.ruleCount?(e.statusStats.savedCount+e.statusStats.submittedCount+e.statusStats.acceptedCount+e.statusStats.rejectedCount)/e.statusStats.ruleCount*100:0},{name:"submittedPct",convert:(t,e)=>e.statusStats.ruleCount?(e.statusStats.submittedCount+e.statusStats.acceptedCount+e.statusStats.rejectedCount)/e.statusStats.ruleCount*100:0},{name:"acceptedPct",convert:(t,e)=>e.statusStats.ruleCount?e.statusStats.acceptedCount/e.statusStats.ruleCount*100:0},{name:"rejectedPct",convert:(t,e)=>e.statusStats.ruleCount?e.statusStats.rejectedCount/e.statusStats.ruleCount*100:0},{name:"stigUnassignedCount",type:"integer",convert:(t,e)=>e.statusStats.stigCount-e.statusStats.stigAssignedCount},{name:"minTs",type:"date",mapping:"statusStats.minTs"},{name:"maxTs",type:"date",mapping:"statusStats.maxTs"},{name:"metadata"}]);this.proxy=new Ext.data.HttpProxy({restful:!0,url:this.url,headers:{"Content-Type":"application/json;charset=utf-8"},listeners:{exception:function(t,e,i,s,n,r){let o;o=n.responseText||"Unknown error",Ext.Msg.alert("Error",o)}}});const s=new Ext.data.JsonStore({grid:this,smMaskDelay:250,proxy:this.proxy,baseParams:{collectionId:this.collectionId,projection:["statusStats"]},root:"",fields:t,idProperty:"assetId",sortInfo:{field:"name",direction:"ASC"}});l.totalTextCmp=new SM.RowCountTextItem({store:s});t=[{header:"Asset",width:100,dataIndex:"name",sortable:!0,filter:{type:"string"}},{header:"FQDN",width:100,dataIndex:"fqdn",sortable:!0,hidden:!0,renderer:SM.styledEmptyRenderer,filter:{type:"string"}},{header:"IP",fixed:!0,width:100,dataIndex:"ip",sortable:!0,renderer:SM.styledEmptyRenderer},{header:"MAC",hidden:!0,fixed:!0,width:110,dataIndex:"mac",sortable:!0,renderer:SM.styledEmptyRenderer,filter:{type:"string"}},{header:"STIGs",width:50,fixed:!0,dataIndex:"stigCount",align:"center",tooltip:"Total STIGs Assigned",sortable:!0},{header:"Checks",width:50,fixed:!0,dataIndex:"ruleCount",align:"center",sortable:!0},{header:"Oldest",width:50,fixed:!0,dataIndex:"minTs",align:"center",sortable:!0,renderer:renderDurationToNow},{header:"Newest",width:50,fixed:!0,dataIndex:"maxTs",align:"center",sortable:!0,renderer:renderDurationToNow},{header:"Reviewed",width:100,fixed:!0,dataIndex:"savedPct",align:"center",sortable:!0,renderer:renderPct},{header:"Submitted",width:100,fixed:!0,dataIndex:"submittedPct",align:"center",sortable:!0,renderer:renderPct},{header:"Accepted",width:100,fixed:!0,dataIndex:"acceptedPct",align:"center",sortable:!0,renderer:renderPct},{header:"Rejected",width:100,fixed:!0,dataIndex:"rejectedPct",align:"center",sortable:!0,renderer:renderPctAllHigh}];const r=new Ext.Button({iconCls:"sm-export-icon",text:"Export CKLs...",disabled:!0,handler:function(){showExportCklFiles(l.collectionId,l.collectionName,"asset",l.getSelectionModel().getSelections().map(t=>t.data))}}),o=new Ext.Button({iconCls:"icon-del",text:"Delete...",disabled:!0,handler:async function(){try{var e=l.getSelectionModel().getSelections(),t=1<e.length,i=`Deleting ${t?"<b>multiple assets</b>":"this asset"} will <b>permanently remove</b> all data associated with the asset${t?"s":""}. This includes all the corresponding STIG assessments. The deleted data <b>cannot be recovered</b>.<br><br>Do you wish to continue?`;if("yes"==await SM.confirmPromise("Confirm Delete",i)){var s=e.length;for(let t=0;t<s;t++){Ext.getBody().mask(`Deleting ${t+1}/${s} Assets`);var n=l.store.getById(e[t].id),r=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/assets/"+n.data.assetId,method:"DELETE"}),o=JSON.parse(r.response.responseText);l.store.remove(n),SM.Dispatcher.fireEvent("assetdeleted",o)}}}catch(t){alert(t.stack)}finally{Ext.getBody().unmask()}}}),a=new SM.TransferAssets.TransferBtn({iconCls:"sm-collection-icon",disabled:!0,srcCollectionId:l.collectionId,text:"Transfer To",onItemClick:async function(e){try{var i=e.parentMenu.srcAssets,t=1<i?.length,s=`Transfering ${t?"these assets":"this asset"} to ${e.text} will <b>transfer all data</b> associated with the asset${t?"s":""}. This includes all the corresponding STIG assessments.<br><br>Do you wish to continue?`;if("yes"==await SM.confirmPromise("Confirm transfer",s)){var n=i?.length||0;for(let t=0;t<n;t++){Ext.getBody().mask(`Transferring ${t+1}/${n} Assets`);var r=l.store.getById(i[t].assetId),o=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/assets/"+r.data.assetId,method:"PATCH",params:{projection:["stigs","statusStats"]},jsonData:{collectionId:e.collectionId}}),a=JSON.parse(o.response.responseText);l.store.remove(r),SM.Dispatcher.fireEvent("assetdeleted",{...a,collection:{collectionId:l.collectionId}}),SM.Dispatcher.fireEvent("assetcreated",a)}}}catch(t){alert(t.stack)}finally{Ext.getBody().unmask()}},handler:function(t){const e=l.getSelectionModel().getSelections();t.setSrcAssets(e.map(t=>t.data))}}),d=new Ext.Button({iconCls:"sm-asset-icon",disabled:!0,text:"Properties...",handler:function(){var t=l.getSelectionModel().getSelected();Ext.getBody().mask("Getting properties..."),showAssetProps(t.get("assetId"),l.collectionId)}});t={layout:"fit",loadMask:!0,store:s,cm:new Ext.grid.ColumnModel({columns:t}),sm:new Ext.grid.RowSelectionModel({singleSelect:!1,listeners:{selectionchange:function(t){d.setDisabled(1!==t.getCount());var e=t.hasSelection();let i=!1;if(e){const s=t.getSelections();i=s.some(t=>0<t.data.stigCount)}for(const n of[o,a])n.setDisabled(!e);r.setDisabled(!(e&&i))}}}),view:new SM.ColumnFilters.GridView({emptyText:this.emptyText||"No records to display",deferEmptyText:!1,forceFit:!0,listeners:{filterschanged:function(t,e,i){s.filter(t.getFilterFns())}}}),listeners:{rowdblclick:function(t,e,i){e=t.getStore().getAt(e);Ext.getBody().mask("Getting properties..."),showAssetProps(e.get("assetId"),l.collectionId)},beforedestroy:function(t){SM.Dispatcher.removeListener("assetchanged",l.onAssetChangedOrCreated,l),SM.Dispatcher.removeListener("assetcreated",l.onAssetChangedOrCreated,l)}},tbar:new Ext.Toolbar({items:[{iconCls:"icon-add",text:"Create...",handler:function(){showAssetProps(null,l.collectionId)}},"-",{iconCls:"sm-import-icon",text:"Import CKL or SCAP...",handler:function(){showImportResultFiles(l.collectionId,{fieldSettings:l.apiFieldSettings})}},"-",r,"-",o,"-",a,"-",d]}),bbar:new Ext.Toolbar({items:[{xtype:"tbbutton",grid:this,iconCls:"icon-refresh",tooltip:"Reload this grid",width:20,handler:function(t){var e=t.grid.store.smMaskDelay;t.grid.store.smMaskDelay=0,t.grid.store.reload(),t.grid.store.smMaskDelay=e}},{xtype:"tbseparator"},{xtype:"exportbutton",hasMenu:!1,gridBasename:"Assets (grid)",storeBasename:"Assets (store)",iconCls:"sm-export-icon",text:"CSV"},{xtype:"tbfill"},{xtype:"tbseparator"},this.totalTextCmp]})};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.CollectionAssetGrid.superclass.initComponent.call(this),SM.Dispatcher.addListener("assetchanged",this.onAssetChangedOrCreated,this),SM.Dispatcher.addListener("assetcreated",this.onAssetChangedOrCreated,this)}}),Ext.reg("sm-collection-asset-grid",SM.CollectionAssetGrid),SM.StigSelectionField=Ext.extend(Ext.form.ComboBox,{initComponent:function(){let n=this;var t={store:new Ext.data.JsonStore({fields:[{name:"benchmarkId",type:"string"},{name:"title",type:"string"},{name:"lastRevisionStr",type:"string"},{name:"lastRevisionDate",type:"string"},{name:"ruleCount",type:"integer"}],autoLoad:this.autoLoad,url:this.url||STIGMAN.Env.apiBase+"/stigs",root:this.root||"",sortInfo:{field:"benchmarkId",direction:"ASC"},idProperty:"benchmarkId",listeners:{load:(t,e,i)=>{var s;n.includeAllItem&&(t.suspendEvents(),s={benchmarkId:n.includeAllItem},t.loadData(n.root?{[n.root]:s}:{allRecord:s},!0),t.sort("benchmarkId","ASC"),t.resumeEvents())}}}),filteringStore:this.filteringStore||null,displayField:"benchmarkId",valueField:"benchmarkId",mode:"local",forceSelection:!0,typeAhead:!0,minChars:0,triggerAction:this.triggerAction||"query",listeners:{afterrender:t=>{t.getEl().dom.setAttribute("spellcheck","false")}},doQuery:(e,t)=>{var i={query:e=Ext.isEmpty(e)?"":e,forceAll:t,combo:this,cancel:!1};if(!1===this.fireEvent("beforequery",i)||i.cancel)return!1;if(e=i.query,!0===(t=i.forceAll)||e.length>=this.minChars)if("local"==this.mode){if(this.selectedIndex=-1,t)this.store.clearFilter();else{let t=[];this.filteringStore&&t.push({fn:t=>-1===this.filteringStore.indexOfId(t.id),scope:this}),e&&t.push({property:this.displayField,value:e}),this.store.filter(t)}this.onLoad()}else this.store.baseParams[this.queryParam]=e,this.store.load({params:this.getParams(e)}),this.expand()},validator:t=>!(!n.grid||!n.grid.editor||n.grid.editor.editing)||(""===t?"Blank values not allowed":void 0)};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.StigSelectionField.superclass.initComponent.call(this)}}),Ext.reg("sm-stig-selection-field",SM.StigSelectionField),SM.AssetStigsGrid=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){var t=[{name:"benchmarkId",type:"string"},{name:"ruleCount",type:"integer"}];this.newRecordConstructor=Ext.data.Record.create(t);const s=new Ext.data.JsonStore({grid:this,root:"",fields:t,idProperty:"benchmarkId",sortInfo:{field:"benchmarkId",direction:"ASC"}});var e=new SM.StigSelectionField({submitValue:!1,autoLoad:!0,grid:this,filteringStore:s}),t=[{header:"BenchmarkId",width:375,dataIndex:"benchmarkId",sortable:!0,editor:e,filter:{type:"string"}},{header:"Rules",width:125,dataIndex:"ruleCount",align:"center",sortable:!0}];this.editor=new Ext.ux.grid.RowEditor({saveText:"OK",grid:this,stigSelectionField:e,clicksToEdit:2,onRowDblClick:Ext.emptyFn,errorSummary:!1,listeners:{canceledit:function(t,e){!0===t.record.editing&&(this.grid.store.suspendEvents(!1),this.grid.store.remove(t.record),this.grid.store.resumeEvents(),this.grid.getView().refresh())},validateedit:function(t,e,i,s){let n=t.items.items[0];e.ruleCount=n.store.getAt(n.selectedIndex).data.ruleCount},afteredit:function(t,e,i,s){let n=i.store.data;var r=i.id;i.id=i.data.benchmarkId,i.phantom=!1,i.dirty=!1,delete n.map[r],n.map[i.id]=i;for(let t=0,e=n.keys.length;t<e;t++)n.keys[t]===r&&(n.keys[t]=i.id);t.removeAll(!1),t.initialized=!1}}});let i=new SM.RowEditorToolbar({itemString:"STIG",newTitle:"Assign STIG",deleteTitle:"Unassign STIG",editor:this.editor,gridId:this.id,deleteProperty:"benchmarkId",newRecord:this.newRecordConstructor});i.delButton.disable();t={isFormField:!0,submitValue:!0,allowBlank:!1,forceSelection:!0,layout:"fit",plugins:[this.editor],border:!0,store:s,cm:new Ext.grid.ColumnModel({columns:t}),sm:new Ext.grid.RowSelectionModel({singleSelect:!0,listeners:{selectionchange:function(t){i.delButton.setDisabled(!t.hasSelection())}}}),view:new SM.ColumnFilters.GridView({emptyText:this.emptyText||"No records to display",deferEmptyText:!1,forceFit:!0,markDirty:!1,listeners:{filterschanged:function(t,e,i){s.filter(t.getFilterFns())}}}),listeners:{},tbar:i,getValue:function(){let e=[];return s.data.items.forEach(t=>{e.push(t.data.benchmarkId)}),e},setValue:function(t){t=t.map(t=>({benchmarkId:t.benchmarkId,ruleCount:t.ruleCount}));s.loadData(t)},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,isValid:()=>!0,getName:()=>this.name,validate:()=>!0};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.AssetStigsGrid.superclass.initComponent.call(this)}}),Ext.reg("sm-asset-stigs-grid",SM.AssetStigsGrid),SM.AssetProperties=Ext.extend(Ext.form.FormPanel,{initComponent:function(){if(this.stigGrid=new SM.AssetStigsGrid({name:"stigs"}),!this.initialCollectionId)throw new Error("missing property initialCollectionId");var t={baseCls:"x-plain",region:"south",labelWidth:70,monitorValid:!0,trackResetOnLoad:!0,items:[{xtype:"fieldset",title:"<b>Asset information</b>",items:[{layout:"column",baseCls:"x-plain",border:!1,items:[{columnWidth:.4,layout:"form",padding:"0px 10px 0px 0px",border:!1,items:[{xtype:"textfield",fieldLabel:"Name",anchor:"100%",emptyText:"Enter asset name...",allowBlank:!1,name:"name"}]},{columnWidth:.6,layout:"form",border:!1,items:[{xtype:"textfield",fieldLabel:"Description",anchor:"100%",emptyText:"Enter asset description...",allowBlank:!0,name:"description"}]}]},{layout:"column",baseCls:"x-plain",border:!1,items:[{columnWidth:.5,layout:"form",padding:"0px 10px 0px 0px",border:!1,items:[{xtype:"textfield",anchor:"100%",fieldLabel:"FQDN",emptyText:"Enter FQDN",allowBlank:!0,name:"fqdn"}]},{columnWidth:.25,layout:"form",border:!1,padding:"0px 10px 0px 0px",labelWidth:20,items:[{xtype:"textfield",fieldLabel:"IP",anchor:"100%",emptyText:"Enter IP",allowBlank:!0,name:"ip"}]},{columnWidth:.25,layout:"form",border:!1,labelWidth:30,items:[{xtype:"textfield",fieldLabel:"MAC",anchor:"100%",emptyText:"Enter MAC",allowBlank:!0,name:"mac"}]}]},{xtype:"checkbox",name:"noncomputing",hideLabel:!1,checked:!1,boxLabel:"Non-computing"},{xtype:"sm-metadata-grid",submitValue:!0,fieldLabel:"Metadata",name:"metadata",anchor:"100%"},{xtype:"hidden",name:"collectionId",value:this.initialCollectionId}]},{xtype:"fieldset",title:"<b>STIG Assignments</b>",anchor:"100% -260",layout:"fit",items:[this.stigGrid]}],buttons:[{text:this.btnText||"Save",formBind:!0,handler:this.btnHandler||Ext.emptyFn}]};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.AssetProperties.superclass.initComponent.call(this),this.getForm().getFieldValues=function(e,i){var s,n,r,o={};return this.items.each(function(t){!t.submitValue||t.disabled&&!i||!0===e&&!t.isDirty()||(s=t.getName(),n=o[s],r=t.getValue(),Ext.isDefined(n)?Ext.isArray(n)?o[s].push(r):o[s]=[n,r]:o[s]=r)}),o}}}),Ext.ns("SM"),SM.CollectionStigsGrid=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){let i=this;Ext.id();var t=Ext.data.Record.create([{name:"benchmarkId",type:"string"},{name:"title",type:"string"},{name:"lastRevisionStr",type:"string"},{name:"lastRevisionDate",type:"string"},{name:"ruleCount",type:"integer"},{name:"assetCount",type:"integer"},{name:"minTs",type:"date"},{name:"maxTs",type:"date"},{name:"checkCount",type:"integer",convert:(t,e)=>e.ruleCount*e.assetCount},{name:"acceptedPct",type:"integer",convert:(t,e)=>e.acceptedCount/(e.ruleCount*e.assetCount)*100},{name:"rejectedPct",type:"integer",convert:(t,e)=>e.rejectedCount/(e.ruleCount*e.assetCount)*100},{name:"submittedPct",type:"integer",convert:(t,e)=>(e.rejectedCount+e.acceptedCount+e.submittedCount)/(e.ruleCount*e.assetCount)*100},{name:"savedPct",type:"integer",convert:(t,e)=>(e.rejectedCount+e.acceptedCount+e.submittedCount+e.savedCount)/(e.ruleCount*e.assetCount)*100}]);this.proxy=new Ext.data.HttpProxy({restful:!0,url:this.url,headers:{"Content-Type":"application/json;charset=utf-8"},listeners:{exception:function(t,e,i,s,n,r){let o;o=n.responseText||"Unknown error",Ext.Msg.alert("Error",o)}}});let s=new Ext.data.JsonStore({grid:this,smMaskDelay:250,proxy:this.proxy,root:"",fields:t,idProperty:"benchmarkId",sortInfo:{field:"benchmarkId",direction:"ASC"}});i.totalTextCmp=new SM.RowCountTextItem({store:s});t=[{header:"BenchmarkId",width:100,dataIndex:"benchmarkId",sortable:!0,filter:{type:"string"}},{header:"Revision",width:50,dataIndex:"lastRevisionStr",align:"center",sortable:!0},{header:"Date",width:50,dataIndex:"lastRevisionDate",align:"center",sortable:!0},{header:"Rules",width:70,fixed:!0,dataIndex:"ruleCount",align:"center",sortable:!0},{header:"Assets",width:70,fixed:!0,dataIndex:"assetCount",align:"center",sortable:!0},{header:"Oldest",width:50,fixed:!0,dataIndex:"minTs",align:"center",sortable:!0,renderer:renderDurationToNow},{header:"Newest",width:50,fixed:!0,dataIndex:"maxTs",align:"center",sortable:!0,renderer:renderDurationToNow},{header:"Reviewed",width:100,fixed:!0,dataIndex:"savedPct",align:"center",sortable:!0,renderer:renderPct},{header:"Submitted",width:100,fixed:!0,dataIndex:"submittedPct",align:"center",sortable:!0,renderer:renderPct},{header:"Accepted",width:100,fixed:!0,dataIndex:"acceptedPct",align:"center",sortable:!0,renderer:renderPct},{header:"Rejected",width:100,fixed:!0,dataIndex:"rejectedPct",align:"center",sortable:!0,renderer:renderPctAllHigh}];const e=new Ext.Button({iconCls:"sm-export-icon",text:"Export CKLs...",disabled:!0,handler:function(){showExportCklFiles(i.collectionId,i.collectionName,"stig",i.getSelectionModel().getSelections().map(t=>t.data))}}),n=new Ext.Button({iconCls:"sm-asset-icon",disabled:!0,text:"Change STIG targets...",handler:function(){showCollectionStigProps(i.getSelectionModel().getSelected().get("benchmarkId"),i)}}),r=new Ext.Button({iconCls:"icon-del",text:"Unassign STIG",disabled:!0,handler:function(){try{Ext.Msg.confirm("Confirm","Removing this STIG will remove all related Asset assignments. If the STIG is added in the future, the assignments will need to be established again.",async function(t,e){"yes"==t&&(t=i.getSelectionModel().getSelected(),await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${i.collectionId}/stigs/${t.data.benchmarkId}/assets`,method:"PUT",jsonData:[]}),i.store.remove(t),SM.Dispatcher.fireEvent("stigassetschanged",i.collectionId,t.data.benchmarkId,[]))})}catch(t){alert("Error removing STIG mapping")}}});t={layout:"fit",loadMask:!0,store:s,cm:new Ext.grid.ColumnModel({columns:t}),sm:new Ext.grid.RowSelectionModel({singleSelect:!1,listeners:{selectionchange:function(t){n.setDisabled(1!==t.getCount()),r.setDisabled(1!==t.getCount()),e.setDisabled(!t.hasSelection())}}}),view:new SM.ColumnFilters.GridView({emptyText:this.emptyText||"No records to display",deferEmptyText:!1,forceFit:!0,listeners:{filterschanged:function(t,e,i){s.filter(t.getFilterFns())}}}),listeners:{rowdblclick:{fn:function(t,e,i){showCollectionStigProps(t.getStore().getAt(e).get("benchmarkId"),t)}}},tbar:new Ext.Toolbar({items:[{iconCls:"icon-add",text:"Assign STIG...",grid:i,handler:function(t){showCollectionStigProps(null,t.grid)}},"-",e,"-",r,"-",n]}),bbar:new Ext.Toolbar({items:[{xtype:"tbbutton",grid:this,iconCls:"icon-refresh",tooltip:"Reload this grid",width:20,handler:function(t){var e=t.grid.store.smMaskDelay;t.grid.store.smMaskDelay=0,t.grid.store.reload(),t.grid.store.smMaskDelay=e}},{xtype:"tbseparator"},{xtype:"exportbutton",hasMenu:!1,gridBasename:"STIGs (grid)",storeBasename:"STIGs (store)",iconCls:"sm-export-icon",text:"CSV"},{xtype:"tbfill"},{xtype:"tbseparator"},this.totalTextCmp]})};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.CollectionStigsGrid.superclass.initComponent.call(this)}}),Ext.reg("sm-collection-stigs-grid",SM.CollectionStigsGrid),SM.StigAssetsGrid=Ext.extend(Ext.grid.GridPanel,{filterStore:function(){var t=!this.getTopToolbar().button.pressed,e=this.getTopToolbar().filterField.getValue(),i=this.getSelectionModel();e&&""!==e?t?this.store.filter([{property:"name",value:e,anyMatch:!0,caseSensitive:!1},{fn:i.isSelected,scope:i}]):this.store.filter({property:"name",value:e,anyMatch:!0,caseSensitive:!1}):t?this.store.filterBy(i.isSelected,i):this.store.clearFilter()},initComponent:function(){var t=new Ext.data.JsonReader({idProperty:"benchmarkId",root:"",fields:[{name:"assetId",type:"string"},{name:"name",type:"string"}]}),e=Ext.data.Record.create([{name:"assetId",type:"string"},{name:"name",type:"string"}]);let r=new Ext.data.JsonStore({url:STIGMAN.Env.apiBase+"/assets",baseParams:{elevate:curUser.privileges.canAdmin,collectionId:this.collectionId},grid:this,reader:t,autoLoad:!1,restful:!0,encode:!1,idProperty:"assetId",sortInfo:{field:"name",direction:"ASC"},fields:e,listeners:{load:function(t,e){t.grid.filterStore.call(t.grid)}}});e=new SM.RowCountTextItem({store:r});let i=new Ext.grid.CheckboxSelectionModel({checkOnly:!0,listeners:{},onRefresh:function(){for(var t=this.grid.store,e=this.getSelections(),i=0,s=e.length;i<s;i++){var n=e[i];-1!=(n=t.indexOfId(n.id))&&this.grid.view.addRowClass(n,this.grid.view.selectedRowClass)}}});e={isFormField:!0,editingCls:"red-panel",editing:!1,layout:"fit",store:r,listeners:{viewready:function(t){t.view.refresh()}},columns:[i,{header:"Asset",width:150,dataIndex:"name",sortable:!0,renderer:function(t,e,i,s,n,r){return"<b>"+t+"</b>"}}],border:!0,loadMask:!0,stripeRows:!0,sm:i,view:new SM.ColumnFilters.GridView({forceFit:!0,emptyText:"No Assets to display",selectedRowClass:"x-grid3-row-selected-checkonly",listeners:{refresh:function(t){t.grid.getEl().unmask()}}}),onEditChange:function(t){this.view.selectedRowClass=t?"x-grid3-row-selected":"x-grid3-row-selected-checkonly",this.view.refresh(),this.editing=t,this.fireEvent("mouseover")},tbar:new SM.SelectingGridToolbar({filterFn:this.filterStore,triggerEmptyText:"Name filter...",btnText:"Assign Assets",gridId:this.id}),bbar:new Ext.Toolbar({items:[{xtype:"tbbutton",grid:this,iconCls:"icon-refresh",tooltip:"Reload this grid",width:20,handler:function(t){t.grid.store.reload()}},{xtype:"tbseparator"},{xtype:"exportbutton",hasMenu:!1,gridBasename:"Assets (grid)",storeBasename:"Assets (store)",iconCls:"sm-export-icon",text:"CSV"},{xtype:"tbfill"},{xtype:"tbseparator"},e]}),getValue:function(){return JSON.parse(encodeSm(i,"assetId"))},setValue:function(t){let e=this.getSelectionModel();var i=t.map(t=>t.assetId);let s=[];for(let t=0;t<i.length;t++){var n=r.getById(i[t]);s.push(n)}this.store.clearFilter(!0);t=e.silent;e.silent=!0,e.selectRecords(s),e.silent=t,this.filterStore.call(this)},markInvalid:function(){},clearInvalid:function(){},isValid:()=>0<this.getSelectionModel().getCount(),getName:()=>this.name,validate:()=>!0};Ext.apply(this,Ext.apply(this.initialConfig,e)),SM.StigAssetsGrid.superclass.initComponent.call(this)}}),Ext.reg("sm-stig-assets-grid",SM.StigAssetsGrid),SM.CollectionStigProperties=Ext.extend(Ext.form.FormPanel,{initComponent:function(){Ext.id();if(this.stigAssetsGrid=new SM.StigAssetsGrid({name:"assets",benchmarkId:this.benchmarkId,collectionId:this.collectionId}),!this.collectionId)throw"missing property collectionId";let t;t=this.benchmarkId?new Ext.form.TextField({fieldLabel:"BenchmarkId",allowBlank:!0,anchor:"100%",readOnly:!0,name:"benchmarkId",value:this.benchmarkId}):new SM.StigSelectionField({name:"benchmarkId",submitValue:!1,fieldLabel:"BenchmarkId",hideTrigger:!1,anchor:"100%",autoLoad:!0,allowBlank:!1,filteringStore:this.stigFilteringStore});var e={baseCls:"x-plain",labelWidth:80,monitorValid:!0,trackResetOnLoad:!0,items:[{xtype:"fieldset",title:"<b>STIG information</b>",items:[t]},{xtype:"fieldset",title:"<b>Asset Assignments</b>",anchor:"100% -70",layout:"fit",items:[this.stigAssetsGrid]}],buttons:[{text:this.btnText||"Save",collectionId:this.collectionId,formBind:!0,handler:this.btnHandler||function(){}}]};Ext.apply(this,Ext.apply(this.initialConfig,e)),SM.CollectionStigProperties.superclass.initComponent.call(this)},initPanel:async function(){try{await this.stigAssetsGrid.store.loadPromise()}catch(t){alert(t)}}}),Ext.ns("SM"),SM.CollectionSelectionField=Ext.extend(Ext.form.ComboBox,{initComponent:function(){let e=this;this.proxy=new Ext.data.HttpProxy({restful:!0,url:this.url||STIGMAN.Env.apiBase+"/collections",method:"GET",headers:{"Content-Type":"application/json;charset=utf-8"},listeners:{exception:function(t,e,i,s,n,r){let o;o=n.responseText||"Unknown error",Ext.Msg.alert("Error",o)}}});var t={store:new Ext.data.JsonStore({fields:[{name:"collectionId",type:"string"},{name:"name",type:"string"}],proxy:this.proxy,autoLoad:this.autoLoad,baseParams:{elevate:curUser.privileges.canAdmin},root:this.root||"",sortInfo:{field:"name",direction:"ASC"},idProperty:"collectionId"}),filteringStore:this.filteringStore||null,displayField:"name",valueField:"collectionId",mode:"local",forceSelection:!0,allowBlank:!0,typeAhead:!0,minChars:0,hideTrigger:!1,triggerAction:this.triggerAction||"query",lastQuery:"",validator:t=>0==e.grid.editor.editing||(""===t?"Blank values no allowed":void 0),doQuery:function(e,t){var i={query:e=Ext.isEmpty(e)?"":e,forceAll:t,combo:this,cancel:!1};if(!1===this.fireEvent("beforequery",i)||i.cancel)return!1;if(e=i.query,!0===(t=i.forceAll)||e.length>=this.minChars)if("local"==this.mode){if(this.selectedIndex=-1,t)this.store.clearFilter();else{let t=[];this.filteringStore&&t.push({fn:t=>-1===this.filteringStore.indexOfId(t.id),scope:this}),e&&t.push({property:this.displayField,value:e}),this.store.filter(t)}this.onLoad()}else this.store.baseParams[this.queryParam]=e,this.store.load({params:this.getParams(e)}),this.expand()},listeners:{afterrender:t=>{t.getEl().dom.setAttribute("spellcheck","false")},expand:i=>{i.filteringStore&&i.store.filterBy(function(t,e){return-1===i.filteringStore.indexOfId(e)})}}};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.CollectionSelectionField.superclass.initComponent.call(this)}}),Ext.reg("sm-collection-selection-field",SM.CollectionSelectionField),SM.CollectionGrantsGrid=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){var t=[{name:"collectionId"},{name:"name"},{name:"accessLevel"}];this.newRecordConstructor=Ext.data.Record.create(t);const s=new Ext.Toolbar.TextItem({text:"0 records",width:80});this.proxy=new Ext.data.HttpProxy({restful:!0,url:this.url,headers:{"Content-Type":"application/json;charset=utf-8"},listeners:{exception:function(t,e,i,s,n,r){let o;o=n.responseText||"Unknown error",Ext.Msg.alert("Error",o)}}});const i=new Ext.data.JsonStore({grid:this,proxy:this.proxy,baseParams:this.baseParams,root:"",fields:t,idProperty:"collectionId",sortInfo:{field:"name",direction:"ASC"},listeners:{load:function(t,e){s.setText(e.length+" records")},remove:function(t,e,i){s.setText(t.getCount()+" records"),t.grid.fireEvent("grantschanged",t.grid)}}});var e=new SM.CollectionSelectionField({submitValue:!1,grid:this,filteringStore:i,autoLoad:!0}),n=new SM.AccessLevelField({submitValue:!1,grid:this}),t=[{header:"Collection",width:150,dataIndex:"name",sortable:!0,editor:e},{header:"Access Level",width:100,dataIndex:"accessLevel",sortable:!0,renderer:t=>SM.AccessLevelStrings[t],editor:n}];this.editor=new Ext.ux.grid.RowEditor({saveText:"Save",grid:this,collectionSelectionField:e,accessLevelField:n,clicksToEdit:2,errorSummary:!1,listeners:{validateedit:function(e,i,t,s){if(i.hasOwnProperty("name")){let t=e.collectionSelectionField;e=t.store.getAt(t.selectedIndex);i.name=e.data.name,i.collectionId=e.data.collectionId}},canceledit:function(t,e){!0===t.record.editing&&(this.grid.store.suspendEvents(!1),this.grid.store.remove(t.record),this.grid.store.resumeEvents(),this.grid.getView().refresh())},afteredit:function(t,e,i,s){let n=i.store.data;var r=i.id;i.id=i.data.userId,i.phantom=!1,i.dirty=!1,delete n.map[r],n.map[i.id]=i;for(let t=0,e=n.keys.length;t<e;t++)n.keys[t]===r&&(n.keys[t]=i.id);t.grid.fireEvent("grantschanged",t.grid)}}});t={isFormField:!0,submitValue:!0,forceSelection:!0,allowBlank:!0,layout:"fit",height:150,plugins:[this.editor],store:i,cm:new Ext.grid.ColumnModel({columns:t}),sm:new Ext.grid.RowSelectionModel({singleSelect:!0,listeners:{selectionchange:function(t){}}}),view:new SM.ColumnFilters.GridView({emptyText:this.emptyText||"No records to display",deferEmptyText:!1,forceFit:!0,markDirty:!1}),listeners:{},tbar:new SM.RowEditorToolbar({itemString:"Grant",editor:this.editor,gridId:this.id,deleteProperty:"userId",newRecord:this.newRecordConstructor}),getValue:function(){let e=[];return i.data.items.forEach(t=>{e.push({collectionId:t.data.collectionId,accessLevel:t.data.accessLevel})}),e},setValue:function(t){t=t.map(t=>({collectionId:t.collection.collectionId,name:t.collection.name,accessLevel:t.accessLevel}));i.loadData(t)},markInvalid:function(){},clearInvalid:function(){},isValid:()=>!0,getName:()=>this.name,validate:()=>!0};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.CollectionGrantsGrid.superclass.initComponent.call(this)}}),Ext.reg("sm-collection-grants-grid",SM.CollectionGrantsGrid),SM.UserProperties=Ext.extend(Ext.form.FormPanel,{initComponent:function(){this.colGrid=new SM.CollectionGrantsGrid({name:"collectionGrants"});var t={baseCls:"x-plain",region:"south",labelWidth:70,monitorValid:!0,trackResetOnLoad:!0,items:[{xtype:"fieldset",title:"<b>User information</b>",items:this.registeredUser?[{layout:"column",baseCls:"x-plain",border:!1,items:[{columnWidth:.5,layout:"form",border:!1,items:[{xtype:"textfield",fieldLabel:"Username",readOnly:!0,anchor:"-20",name:"username"}]},{columnWidth:.5,layout:"form",border:!1,items:[{xtype:"textfield",fieldLabel:"Name",readOnly:!0,anchor:"100%",name:"name"}]}]},{xtype:"textfield",fieldLabel:"Email",anchor:"100%",readOnly:!0,name:"email"},{fieldLabel:"Privileges",allowBlank:!0,anchor:"100%",layout:"hbox",border:!1,items:[{xtype:"checkbox",name:"canCreateCollection",boxLabel:"Create collection",flex:1,readOnly:!0},{xtype:"checkbox",name:"canAdmin",checked:!1,boxLabel:"Administrator",flex:1,readOnly:!0}]},{xtype:"displayfield",allowBlank:!0,style:"border: 1px solid #C1C1C1",fieldLabel:"Last Claims",autoScroll:!0,border:!0,name:"lastClaims",height:150,anchor:"100%",setValue:function(t){var e;0===Object.keys(t).length&&t.constructor===Object||(e=JsonView.createTree(t),t=this.getEl().dom,JsonView.render(e,t),JsonView.expandChildren(e))}}]:[{xtype:"textfield",fieldLabel:"Username",allowBlank:!1,anchor:"100%",name:"username"}]},{xtype:"fieldset",title:"<b>Collection Grants</b>",height:270,layout:"fit",items:[this.colGrid]}],buttons:[{text:this.btnText||"Save",formBind:!0,handler:this.btnHandler||function(){}}]};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.UserProperties.superclass.initComponent.call(this),this.getForm().addListener("beforeadd",(t,e,i)=>{}),this.getForm().getFieldValues=function(e,i){var s,n,r,o={};return this.items.each(function(t){!t.submitValue||t.disabled&&!i||!0===e&&!t.isDirty()||(s=t.getName(),n=o[s],r=t.getValue(),Ext.isDefined(n)?Ext.isArray(n)?o[s].push(r):o[s]=[n,r]:o[s]=r)}),o}}}),Ext.ns("SM.ColumnFilters"),SM.ColumnFilters.GridView=Ext.extend(Ext.grid.GridView,{constructor:function(t){this.addEvents("filterschanged","columnfiltered","columnunfiltered"),SM.ColumnFilters.GridView.superclass.constructor.call(this,t)},handleHdOver:function(t,e){var i,s=this.findHeaderCell(e);s&&!this.headersDisabled&&(i=this.fly(s),this.activeHdRef=e,this.activeHdIndex=this.getCellIndex(s),this.activeHdRegion=i.getRegion(),this.isMenuDisabled(this.activeHdIndex,i)||(i.addClass("x-grid3-hd-over"),this.activeHdBtn=i.child(".x-grid3-hd-btn"),this.activeHdBtn&&(this.activeHdBtn.dom.style.height=s.firstChild.offsetHeight-1+"px")))},handleHdDownOrig:function(t,e){var i,s,n,r,o;Ext.fly(e).hasClass("x-grid3-hd-btn")&&(t.stopEvent(),n=this.cm,i=this.findHeaderCell(e),o=this.getCellIndex(i),s=n.isSortable(o),n=(t=this.hmenu).items,r=this.headerMenuOpenCls,this.hdCtxIndex=o,Ext.fly(i).addClass(r),this.hideSortIcons?(n.get("asc").setVisible(s),n.get("desc").setVisible(s),(o=n.get("sortSep"))&&o.setVisible(s)):(n.get("asc").setDisabled(!s),n.get("desc").setDisabled(!s)),t.on("hide",function(){Ext.fly(i).removeClass(r)},this,{single:!0}),t.show(e,"tl-bl?"))},handleHdDown:function(t,e){var i,s,n,r,o;"x-grid3-hd-checker"!=e.className&&(t.stopEvent(),(!this.lastHide||100<this.lastHide.getElapsed())&&(n=this.cm,i=this.findHeaderCell(e),o=this.getCellIndex(i),s=n.isSortable(o),n=(e=this.hmenu).items,r=this.headerMenuOpenCls,this.hdCtxIndex=o,Ext.fly(i).addClass(r),this.hideSortIcons?(n.get("asc").setVisible(s),n.get("desc").setVisible(s),(o=n.get("sortSep"))&&o.setVisible(s)):(n.get("asc").setDisabled(!s),n.get("desc").setDisabled(!s)),e.on("hide",function(){Ext.fly(i).removeClass(r),this.lastHide=new Date},this,{single:!0}),e.showAt(t.xy)))},onDataChange:function(){SM.ColumnFilters.GridView.superclass.onDataChange.call(this),this.setColumnFilteredStyle()},setColumnFilteredStyle:function(){var e=this.cm.getColumnCount();for(let t=0;t<e;t++){const i=this.getHeaderCell(t);i.getElementsByTagName("a")[0].style.height=i.classList.contains("x-grid3-td-checker")?0:i.firstChild.offsetHeight-1+"px",this.cm.config[t].filtered?i.classList.add("sm-grid3-col-filtered"):i.classList.remove("sm-grid3-col-filtered")}},getFilterFns:function(){var t=this.hmenu,e=t.filterItems.stringItems,t=t.filterItems.selectItems;const s={},i=[];for(const a of e){var n=a.filter.dataIndex,r=a.getValue();r&&(s[n]=r)}for(const l of t)if(!l.checked){var o=l.filter.dataIndex;s[o]=[];for(const d of l.valueItems)!0===d.checked&&s[o].push(d.filter.value)}for(const h of Object.keys(s))i.push({fn:function(t){const e=t.data[h];if(Array.isArray(s[h]))return s[h].includes(e);{const i=e.toLowerCase();t=s[h].toLowerCase();return-1<i.indexOf(t)}}});return i.length?i:null},onFilterChange:function(e,t){switch(e.filter.type){case"string":e.column.filtered=!!e.getValue();break;case"values":const i=this.hmenu.items.items,s=i.filter(t=>"values"===t.filter?.type&&t.filter?.dataIndex===e.filter.dataIndex),n=s.map(t=>t.checked);e.column.filtered=n.includes(!1);break;case"selectall":e.column.filtered=!t}this.fireEvent("filterschanged",this,e,t)},afterRenderUI:function(){const p=this,m=[];SM.ColumnFilters.GridView.superclass.afterRenderUI.call(this);const g=this.hmenu;g.filterItems={stringItems:[],selectItems:[]},g.keyNav=new Ext.KeyNav(document.body,{disabled:!0});const r=g.addItem("-"),o=g.addItem({hideOnClick:!1,activeClass:"",text:"FILTER",iconCls:"sm-menuitem-filter-icon",cls:"sm-menuitem-filter-label"});function n(t,e){const i={};for(const o of g.filterItems.selectItems){var s=o.filter.dataIndex;(i[s]=i[s]||[]).selectAllChecked=o.checked;for(const a of o.valueItems)a.checked&&!e&&i[s].push(a.filter.value),g.remove(a);g.remove(o)}g.filterItems.selectItems=[];for(const l of m){e&&(l.filtered=!1);const d=[];var n=[...new Set(t.map(t=>t.data[l.dataIndex]))].sort(l.filter.comparer);const h=i[l.dataIndex];for(const u of n)d.push({text:l.filter.renderer?l.filter.renderer(u):u||"<i>(No value)</i>",xtype:"menucheckitem",column:l,hideOnClick:!1,checked:!!e||!!h&&(h.selectAllChecked||h.includes(u)),filter:{dataIndex:l.dataIndex,type:"values",value:u},listeners:{checkchange:function(t,e){t.selectAllItem.onValueItemChanged(),p.onFilterChange(t,e)}}});const c=g.addItem({text:"<i>(Select All)</i>",xtype:"menucheckitem",column:l,hideOnClick:!1,checked:!!e||h.selectAllChecked,filter:{dataIndex:l.dataIndex,type:"selectall"},valueItems:[],onValueItemChanged:function(){var t=this.valueItems.every(t=>t.checked);this.setChecked(t,!0)},listeners:{checkchange:function(t,e){for(const i of t.valueItems)i.setChecked(e,!0);p.onFilterChange(t,e)}}});for(const f of d){f.selectAllItem=c;var r=g.addItem(f);c.valueItems.push(r)}g.filterItems.selectItems.push(c)}}this.grid.store.on("load",function(t,e,i){n(t.data.items,!0);for(const s of g.filterItems.stringItems)s.setValue(""),s.column.filtered=!1;p.setColumnFilteredStyle()}),this.grid.store.on("update",function(t,e){n((t.snapshot||t.data).items,!1)}),g.on("beforeshow",function(t){var e,i=p.cm.config[p.hdCtxIndex].dataIndex;let s=!1;for(const n of t.items.items)n.filter&&((e=n.filter.dataIndex===i)&&(s=!0),n.setVisible(e));r.setVisible(s),o.setVisible(s)});for(const e of this.cm.config)switch(e.filter?.type){case"string":e.renderer&&(e.configRenderer=e.renderer,e.renderer=SM.ColumnFilters.Renderers.highlighterShim);var t=g.add(new SM.ColumnFilters.SearchTextField({emptyText:"Contains...",height:24,column:e,filter:{dataIndex:e.dataIndex,type:"string"},enableKeyEvents:!0,hideParent:!0,listeners:{input:function(t,e){p.onFilterChange(t,t.value)},keyup:function(t,e){e.getKey()==e.RETURN&&(e.stopEvent(),g.hide(!0))}}}));g.filterItems.stringItems.push(t);break;case"values":console.log(`Column ${e.header} Type values `),m.push(e)}n(this.grid.store.data.items,!0)}}),SM.ColumnFilters.SearchTextField=Ext.extend(Ext.form.TextField,{initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,{autoCreate:{tag:"input",type:"search",size:"20",autocomplete:"off"}})),SM.ColumnFilters.SearchTextField.superclass.initComponent.call(this),this.addEvents("input")},initEvents:function(){SM.ColumnFilters.SearchTextField.superclass.initEvents.call(this),this.mon(this.el,{scope:this,input:this.onInput})},onInput:function(t){this.column.filter.value=this.getValue(),this.fireEvent("input",this,t)}}),SM.ColumnFilters.Scorers={severity:{low:2,medium:1,high:0}},SM.ColumnFilters.CompareFns={severity:(t,e)=>SM.ColumnFilters.Scorers.severity[t]-SM.ColumnFilters.Scorers.severity[e]},SM.ColumnFilters.Renderers={result:function(t){return t?`<div class="sm-grid-result-sprite ${SM.RenderResult[t]?.css}">${SM.RenderResult[t]?.textDisa}</div>`:"<i>(No value)</i>"},status:function(t){switch(t){case"saved":return'<img src="img/disk-16.png" width=12 height=12 class="sm-menuitem-status-icon">Saved';case"submitted":return'<img src="img/ready-16.png" width=12 height=12 class="sm-menuitem-status-icon">Submitted';case"rejected":return'<img src="img/rejected-16.png" width=12 height=12 class="sm-menuitem-status-icon">Rejected';case"accepted":return'<img src="img/star.svg" width=12 height=12 class="sm-menuitem-status-icon">Accepted';default:return"<i>(No value)</i>"}},severity:function(t){switch(t){case"high":return'<span class="sm-grid-sprite sm-severity-high">CAT 1</span>';case"medium":return'<span class="sm-grid-sprite sm-severity-medium">CAT 2</span>';case"low":return'<span class="sm-grid-sprite sm-severity-low">CAT 3</span>';case"mixed":return'<span class="sm-grid-sprite sm-severity-low">Mixed</span>';default:return'<span class="sm-grid-sprite sm-severity-low">U</span>'}},highlighterShim:function(t,e,i,s,n,r){var o;return"string"===this.filter?.type&&this.filter?.value&&(o=new RegExp(SM.he(this.filter.value),"gi"),t=t.replace(o,'<span class="sm-text-highlight">$&</span>')),this.configRenderer?this.configRenderer.call(this,t,e,i,s,n,r):t}},Ext.ns("SM"),SM.AggregatorCombo=Ext.extend(Ext.form.ComboBox,{initComponent:function(){var t={width:70,forceSelection:!0,editable:!1,mode:"local",triggerAction:"all",displayField:"display",valueField:"aggregator",store:new Ext.data.SimpleStore({fields:["display","aggregator"],data:[["Group","groupId"],["Rule","ruleId"],["CCI","cci"]]})};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.AggregatorCombo.superclass.initComponent.call(this)}}),Ext.reg("sm-aggregator-combo",SM.AggregatorCombo),SM.FindingsParentGrid=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){let s=this;this.aggValue=this.aggValue||"groupId",this.stigAllValue="--- All Collection STIGs ---",this.stigValue=this.stigValue||this.stigAllValue;const i=new Ext.data.JsonStore({proxy:new Ext.data.HttpProxy({url:`${STIGMAN.Env.apiBase}/collections/${this.panel.collectionId}/findings`,method:"GET"}),baseParams:{projection:"stigs"},sortInfo:{field:"assetCount",direction:"DESC"},root:"",fields:[{name:"severity",type:"string",sortType:sortSeverity},{name:"assetCount",type:"int"},{name:"stigs"},{name:"groupId",type:"string",sortType:sortGroupId},{name:"ruleId",type:"string"},{name:"title",type:"string"},{name:"cci",type:"string"},{name:"definition",type:"string"},{name:"apAcronym",type:"string"}],listeners:{load:function(t,e){l(s.aggValue)}}});var t=new SM.RowCountTextItem({store:i});const n=new Ext.grid.ColumnModel([{header:"CAT",hidden:!1,align:"center",width:60,dataIndex:"severity",sortable:!0,renderer:t=>{switch(t){case"high":return'<span class="sm-grid-sprite sm-severity-high">CAT 1</span>';case"medium":return'<span class="sm-grid-sprite sm-severity-medium">CAT 2</span>';case"low":return'<span class="sm-grid-sprite sm-severity-low">CAT 3</span>';case"mixed":return'<span class="sm-grid-sprite sm-severity-low">Mixed</span>';default:return'<span class="sm-grid-sprite sm-severity-low">U</span>'}},filter:{type:"values",comparer:SM.ColumnFilters.CompareFns.severity,renderer:SM.ColumnFilters.Renderers.severity}},{header:"Group",hidden:!1,width:80,dataIndex:"groupId",sortable:!0,filter:{type:"string"}},{header:"Rule",hidden:!0,width:80,dataIndex:"ruleId",sortable:!0,filter:{type:"string"}},{header:"CCI",hidden:!0,width:80,dataIndex:"cci",sortable:!0,filter:{type:"string"}},{header:"AP Acronym",hidden:!0,width:80,dataIndex:"apAcronym",sortable:!0,filter:{type:"string"}},{header:"Title",hidden:!1,width:270,dataIndex:"title",renderer:columnWrap,sortable:!0,filter:{type:"string"}},{header:"Definition",hidden:!0,width:135,dataIndex:"definition",renderer:columnWrap,sortable:!0,filter:{type:"string"}},{header:"Assets",hidden:!1,width:75,align:"center",dataIndex:"assetCount",sortable:!0},{header:"STIGs",hidden:!1,width:120,dataIndex:"stigs",renderer:t=>columnWrap(t.join("\n")),sortable:!0}]);var e=new SM.ColumnFilters.GridView({forceFit:!0,emptyText:"No records found.",listeners:{filterschanged:function(t){i.filter(t.getFilterFns())}}}),r=new Ext.grid.RowSelectionModel({singleSelect:!0,listeners:{rowselect:(t,e,i)=>{s.panel.fireEvent("parentrowselect",t,e,i)}}}),o=new Ext.Toolbar({items:[{xtype:"tbtext",text:"Aggregator:"}," "," "," ",{xtype:"sm-aggregator-combo",value:this.aggValue,listeners:{select:function(t,e,i){s.aggValue=t.getValue(),s.fireEvent("aggregatorchanged",s.aggValue)}}}," "," "," ",{xtype:"tbtext",text:"STIG:  "}," "," "," ",{xtype:"sm-stig-selection-field",url:`${STIGMAN.Env.apiBase}/collections/${this.panel.collectionId}?projection=stigs`,autoLoad:!0,includeAllItem:this.stigAllValue,root:"stigs",width:250,triggerAction:"all",allowBlank:!0,editable:!1,forceSelection:!0,value:this.stigValue,listeners:{select:function(t,e,i){s.stigValue=t.getValue(),s.fireEvent("stigchanged",s.stigValue)}}}]});const a=new SM.GeneratePoamButton({parentGrid:s,iconCls:"icon-excel",text:"Generate POA&M..."});t=new Ext.Toolbar({items:[{xtype:"tbbutton",iconCls:"icon-refresh",tooltip:"Reload this grid",width:20,handler:function(t){i.reload()}},{xtype:"tbseparator"},{xtype:"exportbutton",hasMenu:!1,gridBasename:"Findings",gridSource:s,iconCls:"sm-export-icon",text:"CSV"},{xtype:"tbseparator"},a,{xtype:"tbfill"},{xtype:"tbseparator"},t]});const l=t=>{const e={};for(var[i,s]of n.config.entries())e[s.dataIndex]=i;switch(t){case"ruleId":n.setHidden(e.severity,!1),n.setHidden(e.groupId,!0),n.setHidden(e.ruleId,!1),n.setHidden(e.cci,!0),n.setHidden(e.apAcronym,!0),n.setHidden(e.title,!1),n.setHidden(e.definition,!0);break;case"groupId":n.setHidden(e.severity,!1),n.setHidden(e.groupId,!1),n.setHidden(e.ruleId,!0),n.setHidden(e.cci,!0),n.setHidden(e.apAcronym,!0),n.setHidden(e.title,!1),n.setHidden(e.definition,!0);break;case"cci":n.setHidden(e.severity,!0),n.setHidden(e.groupId,!0),n.setHidden(e.ruleId,!0),n.setHidden(e.cci,!1),n.setHidden(e.apAcronym,!1),n.setHidden(e.title,!0),n.setHidden(e.definition,!1)}};t={loadMask:!0,stripeRows:!0,store:i,colModel:n,view:e,sm:r,tbar:o,bbar:t,listeners:{aggregatorchanged:t=>{const e={aggregator:t};s.stigValue!=s.stigAllValue&&(e.benchmarkId=s.stigValue),i.load({params:e}),a.setDisabled("cci"===t)},stigchanged:t=>{const e={aggregator:s.aggValue};t!=s.stigAllValue&&(e.benchmarkId=t),i.load({params:e})}}};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.FindingsParentGrid.superclass.initComponent.call(this)}}),SM.FindingsChildGrid=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){const s=new Ext.data.JsonStore({proxy:new Ext.data.HttpProxy({url:`${STIGMAN.Env.apiBase}/collections/${this.panel.collectionId}/reviews`,method:"GET"}),baseParams:{result:"fail",projection:"stigs"},sortInfo:{field:"assetName",direction:"ASC"},root:"",fields:[{name:"assetId",type:"string"},{name:"assetName",type:"string"},{name:"stigs"},{name:"ruleId",type:"string"},{name:"severity",type:"string"},{name:"result",type:"string"},{name:"detail",type:"string"},{name:"comment",type:"string"},{name:"autoResult",type:"boolean"},{name:"status",type:"string"},{name:"userId",type:"string"},{name:"username",type:"string"},{name:"ts",type:"string"},{name:"reviewComplete",type:"boolean"}]});var t=new SM.RowCountTextItem({store:s}),e=new Ext.ux.grid.RowExpander({tpl:new Ext.XTemplate("<b>Reviewer:</b> {username}</p>",'<tpl if="detail">',"<p><b>Detail:</b> {[SM.he(values.detail)]}</p>","</tpl>",'<tpl if="comment">',"<p><b>Comment:</b> {[SM.he(values.comment)]}</p>","</tpl>")}),i=[e,{header:"Asset",width:80,dataIndex:"assetName",sortable:!0,filter:{type:"string"}},{header:"Rule",width:80,dataIndex:"ruleId",sortable:!0,filter:{type:"string"}},{header:"Last changed",width:80,dataIndex:"ts",sortable:!0},{header:"STIGs",width:130,dataIndex:"stigs",renderer:t=>columnWrap(t.join("\n")),sortable:!0}],n=new SM.ColumnFilters.GridView({forceFit:!0,emptyText:"Select a finding to the left.",listeners:{filterschanged:function(t,e,i){s.filter(t.getFilterFns())}}}),r=new Ext.grid.RowSelectionModel({singleSelect:!0}),t=new Ext.Toolbar({items:[{xtype:"tbbutton",iconCls:"icon-refresh",tooltip:"Reload this grid",width:20,handler:function(t){s.reload()}},{xtype:"tbseparator"},{xtype:"exportbutton",hasMenu:!1,gridBasename:"Finding Details",gridSource:this,iconCls:"sm-export-icon",text:"CSV"},{xtype:"tbfill"},{xtype:"tbseparator"},t]}),t={loadMask:!0,stripeRows:!0,plugins:e,store:s,columns:i,view:n,sm:r,bbar:t};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.FindingsChildGrid.superclass.initComponent.call(this)}}),SM.PoamStatusComboBox=Ext.extend(Ext.form.ComboBox,{initComponent:function(){let e=this;this.store=new Ext.data.SimpleStore({fields:["value","display"]}),this.store.on("load",function(t){e.setValue(t.getAt(0).get("value"))}),Ext.apply(this,Ext.apply(this.initialConfig,{displayField:"display",valueField:"value",triggerAction:"all",mode:"local",editable:!1})),SM.PoamStatusComboBox.superclass.initComponent.call(this),this.store.loadData([["Ongoing","Ongoing"],["Completed","Completed"]])}}),Ext.reg("sm-poam-status-combo",SM.PoamStatusComboBox),SM.PoamOptionsPanel=Ext.extend(Ext.FormPanel,{initComponent:function(){const t=new Date;t.setDate(t.getDate()+30);var e={baseCls:"x-plain",labelWidth:70,monitorValid:!0,trackResetOnLoad:!0,items:[{xtype:"fieldset",title:"Scheduled Completion Date",items:[new Ext.form.DateField({name:"date",anchor:"100%",hideLabel:!0,value:t})]},{xtype:"fieldset",title:"Office/Org",items:[{xtype:"textfield",anchor:"100%",hideLabel:!0,name:"office",value:"My office info"}]},{xtype:"fieldset",title:"Status",items:[{xtype:"sm-poam-status-combo",anchor:"100%",hideLabel:!0,name:"status",value:"Ongoing"}]}],buttons:[{text:this.btnText||"Generate",iconCls:"icon-excel",height:30,width:120,parentPanel:this,formBind:!0,handler:this.btnHandler||function(){}}]};Ext.apply(this,Ext.apply(this.initialConfig,e)),SM.PoamOptionsPanel.superclass.initComponent.call(this)}}),SM.RequestAndServePoam=async function(e,i){let s;try{s=Ext.MessageBox.wait("Generating POA&M");var n=new URLSearchParams(i).toString(),r=STIGMAN.Env.apiBase+`/collections/${e}/poam?`+n;await window.oidcProvider.updateToken(10);let t=await fetch(r,{method:"GET",headers:new Headers({Authorization:"Bearer "+window.oidcProvider.token})});const l=t.headers.get("content-disposition");var o=l.match(/filename\*?=['"]?(?:UTF-\d['"]*)?([^;\r\n"']*)['"]?;?/)[1],a=await t.blob();s.hide(),function(t,e){let i=document.createElement("a");i.style.display="none";t=window.URL.createObjectURL(t);i.href=t,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(t)}(a,o)}catch(t){s.hide(),alert(t.message)}},SM.GeneratePoamButton=Ext.extend(Ext.Button,{initComponent:function(){const r=this;Ext.apply(this,Ext.apply(this.initialConfig,{listeners:{click:function(t,e){const s=new SM.PoamOptionsPanel({btnText:"Generate POA&M",padding:10,btnHandler:(t,e)=>{const i=s.getForm().getFieldValues();i.date&&i.date instanceof Date&&(i.date=Ext.util.Format.date(i.date,"m/d/Y")),i.aggregator=r.parentGrid.aggValue,r.parentGrid.stigValue&&r.parentGrid.stigValue!==r.parentGrid.stigAllValue&&(i.benchmarkId=r.parentGrid.stigValue),n.close(),SM.RequestAndServePoam(r.parentGrid.panel.collectionId,i)}}),n=new Ext.Window({title:"POA&M Defaults",cls:"sm-dialog-window sm-round-panel",modal:!0,hidden:!0,width:230,height:310,layout:"fit",plain:!0,bodyStyle:"padding:5px;",buttonAlign:"right",items:s});n.show(document.body)}}})),SM.GeneratePoamButton.superclass.initComponent.call(this)}}),Ext.reg("sm-generate-poam-button",SM.GeneratePoamButton),SM.FindingsPanel=Ext.extend(Ext.Panel,{initComponent:function(){const n=new SM.FindingsParentGrid({cls:"sm-round-panel",margins:{top:SM.Margin.top,right:SM.Margin.adjacent,bottom:SM.Margin.bottom,left:SM.Margin.edge},border:!1,region:"center",panel:this,aggValue:this.aggregator||"groupId",title:"Aggregated Findings"}),r=new SM.FindingsChildGrid({cls:"sm-round-panel",margins:{top:SM.Margin.top,right:SM.Margin.edge,bottom:SM.Margin.bottom,left:SM.Margin.adjacent},border:!1,region:"east",width:"50%",split:!0,panel:this,title:"Individual Findings"});n.child=r,r.parent=n,this.parent=n,this.child=r;var t={layout:"border",border:!(onParentRowSelect=(t,e,i)=>{const s={};s[n.aggValue]=i.data[n.aggValue],n.stigValue!==n.stigAllValue&&(s.benchmarkId=n.stigValue),r.store.load({params:s})}),items:[n,r],listeners:{parentrowselect:onParentRowSelect}};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.FindingsPanel.superclass.initComponent.call(this)}}),Ext.ns("SM"),SM.AssignmentNavTree=Ext.extend(Ext.tree.TreePanel,{initComponent:function(){let e=this;var t={autoScroll:!0,bodyStyle:"padding:5px;",minSize:220,root:{nodeType:"async",id:this.collectionId+"-assignment-root",expanded:!0},rootVisible:!1,loader:new Ext.tree.TreeLoader({directFn:e.loadTree}),loadMask:"Loading...",listeners:{click:function(t){e.treeClick(e,t)},beforeexpandnode:function(t){t.loaded=!1}}};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.AssignmentNavTree.superclass.initComponent.call(this)},loadTree:async function(t,r){try{let n;if(n=t.match(/^(\d+)-assignment-root$/),n){var e=n[1];let t=[];return t.push({id:e+"-assignment-stigs-node",node:"stigs",text:"STIGs",iconCls:"sm-stig-icon"},{id:e+"-assignment-assets-node",node:"assets",text:"Assets",iconCls:"sm-asset-icon"}),void r(t,{status:!0})}if(n=t.match(/^(\d+)-assignment-assets-node$/),n){let e=n[1];var i=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/assets",method:"GET",params:{collectionId:e}});let t=JSON.parse(i.response.responseText);return void r(t.map(t=>({id:`${e}-${t.assetId}-assignment-assets-asset-node`,text:SM.he(t.name),name:t.name,node:"asset",collectionId:e,assetId:t.assetId,iconCls:"sm-asset-icon",qtip:SM.he(t.name)})),{status:!0})}if(n=t.match(/^(\d+)-(\d+)-assignment-assets-asset-node$/),n){let e=n[1],i=n[2];var o=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/assets/"+i,method:"GET",params:{projection:"stigs"}});let s=JSON.parse(o.response.responseText);return void r(s.stigs.map(t=>({id:`${e}-${i}-${t.benchmarkId}-assignment-leaf`,text:SM.he(t.benchmarkId),leaf:!0,node:"asset-stig",iconCls:"sm-stig-icon",stigName:t.benchmarkId,assetName:s.name,assetId:s.assetId,collectionId:e,benchmarkId:t.benchmarkId,qtip:SM.he(t.title)})),{status:!0})}if(n=t.match(/^(\d+)-assignment-stigs-node$/),n){let e=n[1];var s=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/collections/"+e,method:"GET",params:{projection:"stigs"}});let t=JSON.parse(s.response.responseText);return void r(t.stigs.map(t=>({collectionId:e,text:SM.he(t.benchmarkId),node:"stig",iconCls:"sm-stig-icon",id:`${e}-${t.benchmarkId}-assignment-stigs-stig-node`,benchmarkId:t.benchmarkId,qtip:SM.he(t.title)})),{status:!0})}if(n=t.match(/^(\d+)-(.*)-assignment-stigs-stig-node$/),n){let e=n[1],i=n[2];var a=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${e}/stigs/${i}/assets`,method:"GET"});let t=JSON.parse(a.response.responseText);return void r(t.map(t=>({id:`${e}-${i}-${t.assetId}-assignment-leaf`,text:SM.he(t.name),leaf:!0,node:"stig-asset",iconCls:"sm-asset-icon",stigName:i,assetName:t.name,assetId:t.assetId,collectionId:e,benchmarkId:i,qtip:SM.he(t.name)})),{status:!0})}}catch(t){Ext.Msg.alert("Status","AJAX request failed in loadTree()")}},treeClick:function(t,e){switch(e.attributes.node){case"collection":case"stig":case"stig-asset":case"asset":case"asset-stig":t.panel.addButton.enable();break;default:t.panel.addButton.disable()}},makeAssignments:async function(e,i){try{let t;switch(e.attributes.node){case"collection":t=await async function(e){try{var s=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/assets/",method:"GET",params:{elevate:""+curUser.privileges.canAdmin,collectionId:e.attributes.collectionId,projection:"stigs"}});let t=Ext.util.JSON.decode(s.response.responseText),i=[];return t.forEach(e=>{e.stigs.forEach(t=>{i.push({benchmarkId:t.benchmarkId,assetName:e.name,assetId:e.assetId})})}),i}catch(t){alert(t.message)}}(e);break;case"stig":t=await async function(e){try{var s=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/assets/",method:"GET",params:{elevate:""+curUser.privileges.canAdmin,collectionId:e.attributes.collectionId,benchmarkId:e.attributes.benchmarkId,projection:"stigs"}});let t=Ext.util.JSON.decode(s.response.responseText),i=[];return t.forEach(e=>{e.stigs.forEach(t=>{i.push({benchmarkId:t.benchmarkId,assetName:e.name,assetId:e.assetId})})}),i}catch(t){alert(t.message)}}(e);break;case"asset":t=await async function(t){try{let e=t.id.match(/^\d+-(\d+)-assignment-assets-asset-node$/)[1];var s=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/assets/"+e,method:"GET",params:{elevate:""+curUser.privileges.canAdmin,projection:"stigs"}});let i=Ext.util.JSON.decode(s.response.responseText);return i.stigs.map(t=>({benchmarkId:t.benchmarkId,assetName:i.name,assetId:e}))}catch(t){alert(t.message)}}(e);break;case"asset-stig":case"stig-asset":t={benchmarkId:e.attributes.benchmarkId,assetId:e.attributes.assetId,assetName:e.attributes.assetName}}t&&i.getStore().loadData(t,!0)}catch(t){alert(t.message)}}}),SM.AssignmentAddBtn=Ext.extend(Ext.Button,{initComponent:function(){let e=this.tree,i=this.grid;Ext.apply(this,Ext.apply(this.initialConfig,{disabled:!0,height:30,width:150,margins:"10 10 10 10",icon:"img/right-arrow-16.png",iconAlign:"right",cls:"x-btn-text-icon",listeners:{click:function(){var t=e.getSelectionModel().getSelectedNode();e.makeAssignments(t,i)}}})),SM.AssignmentAddBtn.superclass.initComponent.call(this)}}),SM.AssignmentRemoveBtn=Ext.extend(Ext.Button,{initComponent:function(){let e=this.grid;Ext.apply(this,Ext.apply(this.initialConfig,{disabled:!0,height:30,width:150,margins:"10 10 10 10",icon:"img/left-arrow-16.png",iconAlign:"left",cls:"x-btn-text-icon",listeners:{click:function(){var t=e.getSelectionModel().getSelections();e.getStore().remove(t)}}})),SM.AssignmentRemoveBtn.superclass.initComponent.call(this)}}),SM.AssignmentGrid=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){let s=this,i=new Ext.data.JsonStore({fields:[{name:"benchmarkId",type:"string"},{name:"assetId",type:"string"},{name:"assetName",type:"string"}],root:this.root||"",sortInfo:{field:"assetName",direction:"ASC"},idProperty:t=>t.benchmarkId+"-"+t.assetId,listeners:{add:function(){s.setTitle("Asset-STIG Assignments ("+i.getCount()+")")},remove:function(){s.setTitle("Asset-STIG Assignments ("+i.getCount()+")"),s.panel.removeButton.disable()}}});var t=new Ext.grid.RowSelectionModel({singleSelect:!1,listeners:{rowselect:function(t,e,i){s.panel.removeButton.enable()},rowdeselect:function(t,e,i){t.getCount()<1&&s.panel.removeButton.disable()}}}),t={name:"access",isFormField:!0,setValue:function(t){t=t.map(t=>({benchmarkId:t.benchmarkId,assetId:t.asset.assetId,assetName:t.asset.name}));i.loadData(t)},getValue:function(){let e=[];return i.each(function(t){e.push({benchmarkId:t.data.benchmarkId,assetId:t.data.assetId})}),e},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,isValid:function(){return!0},disabled:!1,getName:function(){return this.name},validate:function(){return!0},store:i,view:new SM.ColumnFilters.GridView({emptyText:this.emptyText||"No records to display",deferEmptyText:!1,forceFit:!0,markDirty:!1}),stripeRows:!0,sm:t,columns:[{header:'<img src="img/security_firewall_on.png" style="vertical-align: bottom;"> STIG',dataIndex:"benchmarkId",sortable:!0,width:350},{header:'<img src="img/mycomputer1-16.png" style="vertical-align: bottom;"> Asset',dataIndex:"assetName",sortable:!0,width:250}]};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.AssignmentGrid.superclass.initComponent.call(this)}}),SM.AssignmentPanel=Ext.extend(Ext.Panel,{initComponent:function(){var t=new SM.AssignmentNavTree({panel:this,title:"Collection Resources",width:300,collectionId:this.collectionId}),e=new SM.AssignmentGrid({panel:this,title:"Asset-STIG Assignments",flex:1});this.assignmentGrid=e;var i=new SM.AssignmentAddBtn({tree:t,text:"Add Assignment ",grid:e});this.addButton=i;var s=new SM.AssignmentRemoveBtn({tree:t,text:"Remove Assignment ",grid:e});this.removeButton=s;s=new Ext.Panel({bodyStyle:"background-color:transparent;border:none",layout:{type:"vbox",pack:"center"},items:[i,s]});Ext.apply(this,Ext.apply(this.initialConfig,{bodyStyle:"background:transparent;border:none",assignmentGrid:e,layout:"hbox",anchor:"100% -130",layoutConfig:{align:"stretch"},items:[t,s,e]})),SM.AssignmentPanel.superclass.initComponent.call(this)}});var asmCrypto=function(t){var e="undefined"==typeof atob?function(t){return Buffer.from(t,"base64").toString("binary")}:atob,i="undefined"==typeof btoa?function(t){return Buffer.from(t,"binary").toString("base64")}:btoa;function s(t,e){void 0===e&&(e=!1);for(var i=t.length,s=new Uint8Array(e?4*i:i),n=0,r=0;n<i;n++){var o=t.charCodeAt(n);if(e&&55296<=o&&o<=56319){if(++n>=i)throw new Error("Malformed string, low surrogate expected at position "+n);o=(55296^o)<<10|65536|56320^t.charCodeAt(n)}else if(!e&&o>>>8)throw new Error("Wide characters are not allowed.");!e||o<=127?s[r++]=o:(o<=2047?s[r++]=192|o>>6:(o<=65535?s[r++]=224|o>>12:(s[r++]=240|o>>18,s[r++]=128|o>>12&63),s[r++]=128|o>>6&63),s[r++]=128|63&o)}return s.subarray(0,r)}function n(t,e){void 0===e&&(e=!1);for(var i=t.length,s=new Array(i),n=0,r=0;n<i;n++){var o=t[n];if(!e||o<128)s[r++]=o;else if(192<=o&&o<224&&n+1<i)s[r++]=(31&o)<<6|63&t[++n];else if(224<=o&&o<240&&n+2<i)s[r++]=(15&o)<<12|(63&t[++n])<<6|63&t[++n];else{if(!(240<=o&&o<248&&n+3<i))throw new Error("Malformed UTF8 character at byte offset "+n);o=(7&o)<<18|(63&t[++n])<<12|(63&t[++n])<<6|63&t[++n];o<=65535?s[r++]=o:(o^=65536,s[r++]=55296|o>>10,s[r++]=56320|1023&o)}}for(var a="",n=0;n<r;n+=16384)a+=String.fromCharCode.apply(String,s.slice(n,n+16384<=r?n+16384:r));return a}function p(t){return t instanceof Uint8Array}function o(t,e){e=t?t.byteLength:e||65536;if(4095&e||e<=0)throw new Error("heap size must be a positive integer and a multiple of 4096");return t=t||new Uint8Array(new ArrayBuffer(e))}function m(t,e,i,s,n){var r=t.length-e,n=r<n?r:n;return t.set(i.subarray(s,s+n),e),n}function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.reduce(function(t,e){return t+e.length},0),s=new Uint8Array(i),n=0,r=0;r<t.length;r++)s.set(t[r],n),n+=t[r].length;return s}var a,l,d=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),f=(l=Error,d(h,l),h);function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return l.apply(this,t)||this}var c,g=(c=Error,d(u,c),u);function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return c.apply(this,t)||this}var x,E=(x=Error,d(v,x),v);function v(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return x.apply(this,t)||this}var y,b,w,C,S,T,I,k,M=(k=w=!1,R.ENC={ECB:0,CBC:2,CFB:4,OFB:6,CTR:7},R.DEC={ECB:1,CBC:3,CFB:5,OFB:6,CTR:7},R.MAC={CBC:0,GCM:1},R.HEAP_DATA=16384,R);function D(t,e){var i=y[(b[t]+b[e])%255];return i=0===t||0===e?0:i}function A(){function t(t){var e,i,s,n;for(n=y[255-b[t]],i=s=n=0===t?0:n,e=0;e<4;e++)s^=i=255&(i<<1|i>>>7);return s^=99}w||function(){y=[],b=[];for(var t,e=1,i=0;i<255;i++)t=128&(y[i]=e),e<<=1,e&=255,128==t&&(e^=27),e^=y[i],b[y[i]]=i;y[255]=y[0],b[0]=0,w=!0}(),C=[],S=[],T=[[],[],[],[]],I=[[],[],[],[]];for(var e=0;e<256;e++){var i=t(e);C[e]=i,S[i]=e,T[0][e]=D(2,i)<<24|i<<16|i<<8|D(3,i),I[0][i]=D(14,e)<<24|D(9,e)<<16|D(13,e)<<8|D(11,e);for(var s=1;s<4;s++)T[s][e]=T[s-1][e]>>>8|T[s-1][e]<<24,I[s][i]=I[s-1][i]>>>8|I[s-1][i]<<24}k=!0}function R(t,e){k||A();var g=new Uint32Array(e);g.set(C,512),g.set(S,768);for(var i=0;i<4;i++)g.set(T[i],4096+1024*i>>2),g.set(I[i],8192+1024*i>>2);var x=function(t,e){"use asm";var g=0,x=0,E=0,v=0,p=0,m=0,y=0,b=0,n=0,r=0,o=0,a=0,l=0,d=0,h=0,c=0,w=0,C=0,S=0,T=0,u=0;var I=new t.Uint32Array(e),f=new t.Uint8Array(e);function k(t,e,i,s,n,r,o,a){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;r=r|0;o=o|0;a=a|0;var l=0,d=0,h=0,c=0,u=0,f=0,p=0,m=0;l=i|0x400,d=i|0x800,h=i|0xc00;n=n^I[(t|0)>>2],r=r^I[(t|4)>>2],o=o^I[(t|8)>>2],a=a^I[(t|12)>>2];for(m=16;(m|0)<=s<<4;m=m+16|0){c=I[(i|n>>22&1020)>>2]^I[(l|r>>14&1020)>>2]^I[(d|o>>6&1020)>>2]^I[(h|a<<2&1020)>>2]^I[(t|m|0)>>2],u=I[(i|r>>22&1020)>>2]^I[(l|o>>14&1020)>>2]^I[(d|a>>6&1020)>>2]^I[(h|n<<2&1020)>>2]^I[(t|m|4)>>2],f=I[(i|o>>22&1020)>>2]^I[(l|a>>14&1020)>>2]^I[(d|n>>6&1020)>>2]^I[(h|r<<2&1020)>>2]^I[(t|m|8)>>2],p=I[(i|a>>22&1020)>>2]^I[(l|n>>14&1020)>>2]^I[(d|r>>6&1020)>>2]^I[(h|o<<2&1020)>>2]^I[(t|m|12)>>2];n=c,r=u,o=f,a=p}g=I[(e|n>>22&1020)>>2]<<24^I[(e|r>>14&1020)>>2]<<16^I[(e|o>>6&1020)>>2]<<8^I[(e|a<<2&1020)>>2]^I[(t|m|0)>>2],x=I[(e|r>>22&1020)>>2]<<24^I[(e|o>>14&1020)>>2]<<16^I[(e|a>>6&1020)>>2]<<8^I[(e|n<<2&1020)>>2]^I[(t|m|4)>>2],E=I[(e|o>>22&1020)>>2]<<24^I[(e|a>>14&1020)>>2]<<16^I[(e|n>>6&1020)>>2]<<8^I[(e|r<<2&1020)>>2]^I[(t|m|8)>>2],v=I[(e|a>>22&1020)>>2]<<24^I[(e|n>>14&1020)>>2]<<16^I[(e|r>>6&1020)>>2]<<8^I[(e|o<<2&1020)>>2]^I[(t|m|12)>>2]}function M(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;k(0x0000,0x0800,0x1000,u,t,e,i,s)}function D(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;var n=0;k(0x0400,0x0c00,0x2000,u,t,s,i,e);n=x,x=v,v=n}function A(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;k(0x0000,0x0800,0x1000,u,p^t,m^e,y^i,b^s);p=g,m=x,y=E,b=v}function R(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;var n=0;k(0x0400,0x0c00,0x2000,u,t,s,i,e);n=x,x=v,v=n;g=g^p,x=x^m,E=E^y,v=v^b;p=t,m=e,y=i,b=s}function N(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;k(0x0000,0x0800,0x1000,u,p,m,y,b);p=g=g^t,m=x=x^e,y=E=E^i,b=v=v^s}function F(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;k(0x0000,0x0800,0x1000,u,p,m,y,b);g=g^t,x=x^e,E=E^i,v=v^s;p=t,m=e,y=i,b=s}function P(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;k(0x0000,0x0800,0x1000,u,p,m,y,b);p=g,m=x,y=E,b=v;g=g^t,x=x^e,E=E^i,v=v^s}function O(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;k(0x0000,0x0800,0x1000,u,n,r,o,a);a=~c&a|c&a+1;o=~h&o|h&o+((a|0)==0);r=~d&r|d&r+((o|0)==0);n=~l&n|l&n+((r|0)==0);g=g^t;x=x^e;E=E^i;v=v^s}function L(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;var n=0,r=0,o=0,a=0,l=0,d=0,h=0,c=0,u=0,f=0;t=t^p,e=e^m,i=i^y,s=s^b;n=w|0,r=C|0,o=S|0,a=T|0;for(;(u|0)<128;u=u+1|0){if(n>>>31)l=l^t,d=d^e,h=h^i,c=c^s;n=n<<1|r>>>31,r=r<<1|o>>>31,o=o<<1|a>>>31,a=a<<1;f=s&1;s=s>>>1|i<<31,i=i>>>1|e<<31,e=e>>>1|t<<31,t=t>>>1;if(f)t=t^0xe1000000}p=l,m=d,y=h,b=c}function i(t){t=t|0;u=t}function B(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;g=t,x=e,E=i,v=s}function _(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;p=t,m=e,y=i,b=s}function H(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;n=t,r=e,o=i,a=s}function z(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;l=t,d=e,h=i,c=s}function V(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;a=~c&a|c&s,o=~h&o|h&i,r=~d&r|d&e,n=~l&n|l&t}function s(t){t=t|0;if(t&15)return-1;f[t|0]=g>>>24,f[t|1]=g>>>16&255,f[t|2]=g>>>8&255,f[t|3]=g&255,f[t|4]=x>>>24,f[t|5]=x>>>16&255,f[t|6]=x>>>8&255,f[t|7]=x&255,f[t|8]=E>>>24,f[t|9]=E>>>16&255,f[t|10]=E>>>8&255,f[t|11]=E&255,f[t|12]=v>>>24,f[t|13]=v>>>16&255,f[t|14]=v>>>8&255,f[t|15]=v&255;return 16}function G(t){t=t|0;if(t&15)return-1;f[t|0]=p>>>24,f[t|1]=p>>>16&255,f[t|2]=p>>>8&255,f[t|3]=p&255,f[t|4]=m>>>24,f[t|5]=m>>>16&255,f[t|6]=m>>>8&255,f[t|7]=m&255,f[t|8]=y>>>24,f[t|9]=y>>>16&255,f[t|10]=y>>>8&255,f[t|11]=y&255,f[t|12]=b>>>24,f[t|13]=b>>>16&255,f[t|14]=b>>>8&255,f[t|15]=b&255;return 16}function W(){M(0,0,0,0);w=g,C=x,S=E,T=v}function j(t,e,i){t=t|0;e=e|0;i=i|0;var s=0;if(e&15)return-1;while((i|0)>=16){q[t&7](f[e|0]<<24|f[e|1]<<16|f[e|2]<<8|f[e|3],f[e|4]<<24|f[e|5]<<16|f[e|6]<<8|f[e|7],f[e|8]<<24|f[e|9]<<16|f[e|10]<<8|f[e|11],f[e|12]<<24|f[e|13]<<16|f[e|14]<<8|f[e|15]);f[e|0]=g>>>24,f[e|1]=g>>>16&255,f[e|2]=g>>>8&255,f[e|3]=g&255,f[e|4]=x>>>24,f[e|5]=x>>>16&255,f[e|6]=x>>>8&255,f[e|7]=x&255,f[e|8]=E>>>24,f[e|9]=E>>>16&255,f[e|10]=E>>>8&255,f[e|11]=E&255,f[e|12]=v>>>24,f[e|13]=v>>>16&255,f[e|14]=v>>>8&255,f[e|15]=v&255;s=s+16|0,e=e+16|0,i=i-16|0}return s|0}function U(t,e,i){t=t|0;e=e|0;i=i|0;var s=0;if(e&15)return-1;while((i|0)>=16){X[t&1](f[e|0]<<24|f[e|1]<<16|f[e|2]<<8|f[e|3],f[e|4]<<24|f[e|5]<<16|f[e|6]<<8|f[e|7],f[e|8]<<24|f[e|9]<<16|f[e|10]<<8|f[e|11],f[e|12]<<24|f[e|13]<<16|f[e|14]<<8|f[e|15]);s=s+16|0,e=e+16|0,i=i-16|0}return s|0}var q=[M,D,A,R,N,F,P,O];var X=[A,L];return{set_rounds:i,set_state:B,set_iv:_,set_nonce:H,set_mask:z,set_counter:V,get_state:s,get_iv:G,gcm_init:W,cipher:j,mac:U}}({Uint8Array:Uint8Array,Uint32Array:Uint32Array},e);return x.set_key=function(t,e,i,s,n,r,o,a,l){var d=g.subarray(0,60),h=g.subarray(256,316);d.set([e,i,s,n,r,o,a,l]);for(var c=t,u=1;c<4*t+28;c++){var f=d[c-1];(c%t==0||8===t&&c%t==4)&&(f=C[f>>>24]<<24^C[f>>>16&255]<<16^C[f>>>8&255]<<8^C[255&f]),c%t==0&&(f=f<<8^f>>>24^u<<24,u=u<<1^(128&u?27:0)),d[c]=d[c-t]^f}for(var p=0;p<c;p+=4)for(var m=0;m<4;m++){f=d[c-(4+p)+(4-m)%4];h[p+m]=p<4||c-4<=p?f:I[0][C[f>>>24]]^I[1][C[f>>>16&255]]^I[2][C[f>>>8&255]]^I[3][C[255&f]]}x.set_rounds(t+5)},x}var N=(F.prototype.AES_Encrypt_process=function(t){if(!p(t))throw new TypeError("data isn't of expected type");for(var e,i=this.asm,s=this.heap,n=M.ENC[this.mode],r=M.HEAP_DATA,o=this.pos,a=this.len,l=0,d=t.length||0,h=0,c=new Uint8Array(a+d&-16);0<d;)a+=e=m(s,o+a,t,l,d),l+=e,d-=e,(e=i.cipher(n,r+o,a))&&c.set(s.subarray(o,o+e),h),h+=e,e<a?(o+=e,a-=e):a=o=0;return this.pos=o,this.len=a,c},F.prototype.AES_Encrypt_finish=function(){var t=this.asm,e=this.heap,i=M.ENC[this.mode],s=M.HEAP_DATA,n=this.pos,r=this.len,o=16-r%16,a=r;if(this.hasOwnProperty("padding")){if(this.padding){for(var l=0;l<o;++l)e[n+r+l]=o;a=r+=o}else if(r%16)throw new g("data length must be a multiple of the block size")}else r+=o;var d=new Uint8Array(a);return r&&t.cipher(i,s+n,r),a&&d.set(e.subarray(n,n+a)),this.pos=0,this.len=0,d},F.prototype.AES_Decrypt_process=function(t){if(!p(t))throw new TypeError("data isn't of expected type");var e,i=this.asm,s=this.heap,n=M.DEC[this.mode],r=M.HEAP_DATA,o=this.pos,a=this.len,l=0,d=t.length||0,h=0,c=a+d&-16,u=0;this.padding&&(c-=u=a+d-c||16);for(var f=new Uint8Array(c);0<d;)a+=e=m(s,o+a,t,l,d),l+=e,(e=i.cipher(n,r+o,a-((d-=e)?0:u)))&&f.set(s.subarray(o,o+e),h),h+=e,e<a?(o+=e,a-=e):a=o=0;return this.pos=o,this.len=a,f},F.prototype.AES_Decrypt_finish=function(){var t=this.asm,e=this.heap,i=M.DEC[this.mode],s=M.HEAP_DATA,n=this.pos,r=this.len,o=r;if(0<r){if(r%16){if(this.hasOwnProperty("padding"))throw new g("data length must be a multiple of the block size");r+=16-r%16}if(t.cipher(i,s+n,r),this.hasOwnProperty("padding")&&this.padding){var a=e[n+o-1];if(a<1||16<a||o<a)throw new E("bad padding");for(var l=0,d=a;1<d;d--)l|=a^e[n+o-d];if(l)throw new E("bad padding");o-=a}}r=new Uint8Array(o);return 0<o&&r.set(e.subarray(n,n+o)),this.pos=0,this.len=0,r},F);function F(t,e,i,s,n,r){void 0===i&&(i=!0),this.pos=0,this.len=0,this.mode=s,this.heap=n||o().subarray(M.HEAP_DATA),this.asm=r||new M(null,this.heap.buffer),this.pos=0,this.len=0;r=t.length;if(16!==r&&24!==r&&32!==r)throw new g("illegal key size");t=new DataView(t.buffer,t.byteOffset,t.byteLength);if(this.asm.set_key(r>>2,t.getUint32(0),t.getUint32(4),t.getUint32(8),t.getUint32(12),16<r?t.getUint32(16):0,16<r?t.getUint32(20):0,24<r?t.getUint32(24):0,24<r?t.getUint32(28):0),void 0!==e){if(16!==e.length)throw new g("illegal iv size");e=new DataView(e.buffer,e.byteOffset,e.byteLength);this.asm.set_iv(e.getUint32(0),e.getUint32(4),e.getUint32(8),e.getUint32(12))}else this.asm.set_iv(0,0,0,0);this.padding=i}var P=(O.encrypt=function(t,e,i,s){return new O(e,s,i=void 0===i?!0:i).encrypt(t)},O.decrypt=function(t,e,i,s){return new O(e,s,i=void 0===i?!0:i).decrypt(t)},O.prototype.encrypt=function(t){return r(this.aes.AES_Encrypt_process(t),this.aes.AES_Encrypt_finish())},O.prototype.decrypt=function(t){return r(this.aes.AES_Decrypt_process(t),this.aes.AES_Decrypt_finish())},O);function O(t,e,i,s){void 0===i&&(i=!0),this.aes=s||new N(t,e,i,"CBC")}var L=0xffffffffffff0,B=(_.encrypt=function(t,e,i,s,n){return new _(e,i,s,n=void 0===n?16:n,t.length).encrypt(t)},_.decrypt=function(t,e,i,s,n){return new _(e,i,s,n=void 0===n?16:n,t.length-n).decrypt(t)},_.prototype.encrypt=function(t){this.dataLength=t.length||0;var e=this.AES_CCM_Encrypt_process(t),i=this.AES_CCM_Encrypt_finish(),t=new Uint8Array(e.length+i.length);return e.length&&t.set(e),i.length&&t.set(i,e.length),t},_.prototype.decrypt=function(t){this.dataLength=t.length||0;var e=this.AES_CCM_Decrypt_process(t),i=this.AES_CCM_Decrypt_finish(),t=new Uint8Array(e.length+i.length);return e.length&&t.set(e),i.length&&t.set(i,e.length),t},_.prototype.AES_CCM_calculate_iv=function(){var t=this.nonce,e=this.adata,i=this.tagSize,s=this.lengthSize,n=this.dataLength,r=new Uint8Array(16+(e?2+e.length:0));r[0]=(e?64:0)|i-2<<2|s-1,r.set(t,1),6<s&&(r[9]=n/4294967296>>>16&15),5<s&&(r[10]=n/4294967296>>>8&255),4<s&&(r[11]=n/4294967296&255),3<s&&(r[12]=n>>>24),2<s&&(r[13]=n>>>16&255),r[14]=n>>>8&255,r[15]=255&n,e&&(r[16]=e.length>>>8&255,r[17]=255&e.length,r.set(e,18)),this._cbc_mac_process(r),this.aes.asm.get_state(M.HEAP_DATA);r=new Uint8Array(this.aes.heap.subarray(0,16)),r=new DataView(r.buffer,r.byteOffset,r.byteLength);this.aes.asm.set_iv(r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12))},_.prototype._cbc_mac_process=function(t){for(var e=this.aes.heap,i=this.aes.asm,s=0,n=t.length||0,r=0;0<n;){for(r=m(e,0,t,s,n);15&r;)e[r++]=0;s+=r,n-=r,i.mac(M.MAC.CBC,M.HEAP_DATA,r)}},_.prototype.AES_CCM_Encrypt_process=function(t){var e,i=this.aes.asm,s=this.aes.heap,n=0,r=t.length||0,o=this.counter,a=this.aes.pos,l=this.aes.len,d=l+r&-16,h=0;if(L<(o-1<<4)+l+r)throw new RangeError("counter overflow");for(var c=new Uint8Array(d);0<r;)l+=e=m(s,a+l,t,n,r),n+=e,r-=e,e=i.mac(M.MAC.CBC,M.HEAP_DATA+a,l),(e=i.cipher(M.ENC.CTR,M.HEAP_DATA+a,e))&&c.set(s.subarray(a,a+e),h),o+=e>>>4,h+=e,e<l?(a+=e,l-=e):l=a=0;return this.counter=o,this.aes.pos=a,this.aes.len=l,c},_.prototype.AES_CCM_Encrypt_finish=function(){for(var t=this.aes.asm,e=this.aes.heap,i=this.tagSize,s=this.aes.pos,n=this.aes.len,r=new Uint8Array(n+i),o=n;15&o;o++)e[s+o]=0;return t.mac(M.MAC.CBC,M.HEAP_DATA+s,o),t.cipher(M.ENC.CTR,M.HEAP_DATA+s,o),n&&r.set(e.subarray(s,s+n)),t.set_counter(0,0,0,0),t.get_iv(M.HEAP_DATA),t.cipher(M.ENC.CTR,M.HEAP_DATA,16),r.set(e.subarray(0,i),n),this.counter=1,this.aes.pos=0,this.aes.len=0,r},_.prototype.AES_CCM_Decrypt_process=function(t){var e,i=0,s=t.length||0,n=this.aes.asm,r=this.aes.heap,o=this.counter,a=this.tagSize,l=this.aes.pos,d=this.aes.len,h=0,a=a<d+s?d+s-a&-16:0,c=d+s-a;if(L<(o-1<<4)+d+s)throw new RangeError("counter overflow");for(var u=new Uint8Array(a);c<s;)d+=e=m(r,l+d,t,i,s-c),i+=e,s-=e,e=n.cipher(M.DEC.CTR,M.HEAP_DATA+l,e),(e=n.mac(M.MAC.CBC,M.HEAP_DATA+l,e))&&u.set(r.subarray(l,l+e),h),o+=e>>>4,h+=e,d=l=0;return 0<s&&(d+=m(r,0,t,i,s)),this.counter=o,this.aes.pos=l,this.aes.len=d,u},_.prototype.AES_CCM_Decrypt_finish=function(){var t=this.aes.asm,e=this.aes.heap,i=this.tagSize,s=this.aes.pos,n=this.aes.len,r=n-i;if(n<i)throw new f("authentication tag not found");var o=new Uint8Array(r),a=new Uint8Array(e.subarray(s+r,s+n));t.cipher(M.DEC.CTR,M.HEAP_DATA+s,15+r&-16),o.set(e.subarray(s,s+r));for(var l=r;15&l;l++)e[s+l]=0;t.mac(M.MAC.CBC,M.HEAP_DATA+s,l),t.set_counter(0,0,0,0),t.get_iv(M.HEAP_DATA),t.cipher(M.ENC.CTR,M.HEAP_DATA,16);for(var d=0,h=0;h<i;++h)d|=a[h]^e[h];if(d)throw new E("data integrity check failed");return this.counter=1,this.aes.pos=0,this.aes.len=0,o},_.prototype.AES_CTR_set_options=function(t,e,i){if(i<8||48<i)throw new g("illegal counter size");var s=Math.pow(2,i)-1;this.aes.asm.set_mask(0,0,s/4294967296|0,0|s);s=t.length;if(!s||16<s)throw new g("illegal nonce size");this.nonce=t;s=new DataView(new ArrayBuffer(16));if(new Uint8Array(s.buffer).set(t),this.aes.asm.set_nonce(s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)),e<0||e>=Math.pow(2,i))throw new g("illegal counter value");this.counter=e,this.aes.asm.set_counter(0,0,e/4294967296|0,0|e)},_);function _(t,e,i,s,n,r){if(void 0===s&&(s=16),this.counter=1,this.dataLength=-1,this.aes=r||new N(t,void 0,void 0,"CCM"),s<4||16<s||1&s)throw new g("illegal tagSize value");if(this.tagSize=s,(this.nonce=e).length<8||13<e.length)throw new g("illegal nonce length");if(this.lengthSize=15-e.length,(e=new Uint8Array(e.length+1))[0]=this.lengthSize-1,e.set(this.nonce,1),n<0||L<n||n>Math.pow(2,8*this.lengthSize)-16)throw new g("illegal dataLength value");if(void 0!==i){if(65279<i.length)throw new g("illegal adata length");this.adata=i.length?i:void 0}this.dataLength=n,this.counter=1,this.AES_CCM_calculate_iv(),this.AES_CTR_set_options(e,this.counter,8*this.lengthSize)}var H=(z.encrypt=function(t,e,i){return new z(e,i).encrypt(t)},z.decrypt=function(t,e,i){return new z(e,i).decrypt(t)},z.prototype.encrypt=function(t){return r(this.aes.AES_Encrypt_process(t),this.aes.AES_Encrypt_finish())},z.prototype.decrypt=function(t){return r(this.aes.AES_Decrypt_process(t),this.aes.AES_Decrypt_finish())},z);function z(t,e,i){this.aes=i||new N(t,e,!0,"CFB"),delete this.aes.padding}var V=(G.encrypt=function(t,e,i){return new G(e,i=void 0===i?!1:i).encrypt(t)},G.decrypt=function(t,e,i){return new G(e,i=void 0===i?!1:i).decrypt(t)},G.prototype.encrypt=function(t){return r(this.aes.AES_Encrypt_process(t),this.aes.AES_Encrypt_finish())},G.prototype.decrypt=function(t){return r(this.aes.AES_Decrypt_process(t),this.aes.AES_Decrypt_finish())},G);function G(t,e,i){void 0===e&&(e=!1),this.aes=i||new N(t,void 0,e,"ECB")}function W(t){for(var e=128&t[0],i=0;i<15;i++)t[i]=t[i]<<1^(128&t[i+1]?1:0);t[15]=t[15]<<1^(e?135:0)}var j=(U.bytes=function(t,e){return new U(e).process(t).finish().result},U.prototype.process=function(t){var e;return 16<this.bufferLength+t.length?(this.cbc.encrypt(this.buffer.subarray(0,this.bufferLength)),e=(this.bufferLength+t.length-1&-16)-this.bufferLength,this.cbc.encrypt(t.subarray(0,e)),this.buffer.set(t.subarray(e)),this.bufferLength=t.length-e):(this.buffer.set(t,this.bufferLength),this.bufferLength+=t.length),this},U.prototype.finish=function(){if(16!==this.bufferLength){this.buffer[this.bufferLength]=128;for(var t=this.bufferLength+1;t<16;t++)this.buffer[t]=0;W(this.k)}for(t=0;t<16;t++)this.buffer[t]^=this.k[t];return this.result=this.cbc.encrypt(this.buffer),this},U);function U(t){this.bufferLength=0,this.k=new V(t).encrypt(new Uint8Array(16)),W(this.k),this.cbc=new P(t,new Uint8Array(16),!1),this.buffer=new Uint8Array(16),this.result=null}var q=(X.encrypt=function(t,e,i){return new X(e,i).encrypt(t)},X.decrypt=function(t,e,i){return new X(e,i).encrypt(t)},X.prototype.encrypt=function(t){return r(this.aes.AES_Encrypt_process(t),this.aes.AES_Encrypt_finish())},X.prototype.decrypt=function(t){return r(this.aes.AES_Encrypt_process(t),this.aes.AES_Encrypt_finish())},X.prototype.AES_CTR_set_options=function(t,e,i){if(void 0!==i){if(i<8||48<i)throw new g("illegal counter size");var s=Math.pow(2,i)-1;this.aes.asm.set_mask(0,0,s/4294967296|0,0|s)}else i=48,this.aes.asm.set_mask(0,0,65535,4294967295);if(void 0===t)throw new Error("nonce is required");s=t.length;if(!s||16<s)throw new g("illegal nonce size");s=new DataView(new ArrayBuffer(16));if(new Uint8Array(s.buffer).set(t),this.aes.asm.set_nonce(s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)),void 0!==e){if(e<0||e>=Math.pow(2,i))throw new g("illegal counter value");this.aes.asm.set_counter(0,0,e/4294967296|0,0|e)}},X);function X(t,e,i){this.aes=i||new N(t,void 0,!1,"CTR"),delete this.aes.padding,this.AES_CTR_set_options(e)}var Y=68719476704,$=(K.encrypt=function(t,e,i,s,n){return new K(e,i,s,n).encrypt(t)},K.decrypt=function(t,e,i,s,n){return new K(e,i,s,n).decrypt(t)},K.prototype.encrypt=function(t){return this.AES_GCM_encrypt(t)},K.prototype.decrypt=function(t){return this.AES_GCM_decrypt(t)},K.prototype.AES_GCM_Encrypt_process=function(t){var e,i=0,s=t.length||0,n=this.aes.asm,r=this.aes.heap,o=this.counter,a=this.aes.pos,l=this.aes.len,d=0,h=l+s&-16;if(Y<(o-1<<4)+l+s)throw new RangeError("counter overflow");for(var c=new Uint8Array(h);0<s;)l+=e=m(r,a+l,t,i,s),i+=e,s-=e,e=n.cipher(M.ENC.CTR,M.HEAP_DATA+a,l),(e=n.mac(M.MAC.GCM,M.HEAP_DATA+a,e))&&c.set(r.subarray(a,a+e),d),o+=e>>>4,d+=e,e<l?(a+=e,l-=e):l=a=0;return this.counter=o,this.aes.pos=a,this.aes.len=l,c},K.prototype.AES_GCM_Encrypt_finish=function(){var t=this.aes.asm,e=this.aes.heap,i=this.counter,s=this.tagSize,n=this.adata,r=this.aes.pos,o=this.aes.len,a=new Uint8Array(o+s);t.cipher(M.ENC.CTR,M.HEAP_DATA+r,o+15&-16),o&&a.set(e.subarray(r,r+o));for(var l=o;15&l;l++)e[r+l]=0;t.mac(M.MAC.GCM,M.HEAP_DATA+r,l);n=void 0!==n?n.length:0,i=(i-1<<4)+o;return e[0]=0,e[1]=0,e[2]=0,e[3]=n>>>29,e[4]=n>>>21,e[5]=n>>>13&255,e[6]=n>>>5&255,e[7]=n<<3&255,e[8]=e[9]=e[10]=0,e[11]=i>>>29,e[12]=i>>>21&255,e[13]=i>>>13&255,e[14]=i>>>5&255,e[15]=i<<3&255,t.mac(M.MAC.GCM,M.HEAP_DATA,16),t.get_iv(M.HEAP_DATA),t.set_counter(0,0,0,this.gamma0),t.cipher(M.ENC.CTR,M.HEAP_DATA,16),a.set(e.subarray(0,s),o),this.counter=1,this.aes.pos=0,this.aes.len=0,a},K.prototype.AES_GCM_Decrypt_process=function(t){var e,i=0,s=t.length||0,n=this.aes.asm,r=this.aes.heap,o=this.counter,a=this.tagSize,l=this.aes.pos,d=this.aes.len,h=0,a=a<d+s?d+s-a&-16:0,c=d+s-a;if(Y<(o-1<<4)+d+s)throw new RangeError("counter overflow");for(var u=new Uint8Array(a);c<s;)d+=e=m(r,l+d,t,i,s-c),i+=e,s-=e,e=n.mac(M.MAC.GCM,M.HEAP_DATA+l,e),(e=n.cipher(M.DEC.CTR,M.HEAP_DATA+l,e))&&u.set(r.subarray(l,l+e),h),o+=e>>>4,h+=e,d=l=0;return 0<s&&(d+=m(r,0,t,i,s)),this.counter=o,this.aes.pos=l,this.aes.len=d,u},K.prototype.AES_GCM_Decrypt_finish=function(){var t=this.aes.asm,e=this.aes.heap,i=this.tagSize,s=this.adata,n=this.counter,r=this.aes.pos,o=this.aes.len,a=o-i;if(o<i)throw new f("authentication tag not found");for(var l=new Uint8Array(a),d=new Uint8Array(e.subarray(r+a,r+o)),h=a;15&h;h++)e[r+h]=0;t.mac(M.MAC.GCM,M.HEAP_DATA+r,h),t.cipher(M.DEC.CTR,M.HEAP_DATA+r,h),a&&l.set(e.subarray(r,r+a));s=void 0!==s?s.length:0,o=(n-1<<4)+o-i;e[0]=0,e[1]=0,e[2]=0,e[3]=s>>>29,e[4]=s>>>21,e[5]=s>>>13&255,e[6]=s>>>5&255,e[7]=s<<3&255,e[8]=e[9]=e[10]=0,e[11]=o>>>29,e[12]=o>>>21&255,e[13]=o>>>13&255,e[14]=o>>>5&255,e[15]=o<<3&255,t.mac(M.MAC.GCM,M.HEAP_DATA,16),t.get_iv(M.HEAP_DATA),t.set_counter(0,0,0,this.gamma0),t.cipher(M.ENC.CTR,M.HEAP_DATA,16);for(var c=0,u=0;u<i;++u)c|=d[u]^e[u];if(c)throw new E("data integrity check failed");return this.counter=1,this.aes.pos=0,this.aes.len=0,l},K.prototype.AES_GCM_decrypt=function(t){var e=this.AES_GCM_Decrypt_process(t),i=this.AES_GCM_Decrypt_finish(),t=new Uint8Array(e.length+i.length);return e.length&&t.set(e),i.length&&t.set(i,e.length),t},K.prototype.AES_GCM_encrypt=function(t){var e=this.AES_GCM_Encrypt_process(t),i=this.AES_GCM_Encrypt_finish(),t=new Uint8Array(e.length+i.length);return e.length&&t.set(e),i.length&&t.set(i,e.length),t},K.prototype._gcm_mac_process=function(t){for(var e=this.aes.heap,i=this.aes.asm,s=0,n=t.length||0,r=0;0<n;){for(s+=r=m(e,0,t,s,n),n-=r;15&r;)e[r++]=0;i.mac(M.MAC.GCM,M.HEAP_DATA,r)}},K);function K(t,e,i,s,n){if(this.tagSize=s=void 0===s?16:s,this.gamma0=0,this.counter=1,this.aes=n||new N(t,void 0,!1,"CTR"),this.aes.asm.gcm_init(),this.tagSize<4||16<this.tagSize)throw new g("illegal tagSize value");n=e.length||0,t=new Uint8Array(16);12!==n?(this._gcm_mac_process(e),this.aes.heap[0]=0,this.aes.heap[1]=0,this.aes.heap[2]=0,this.aes.heap[3]=0,this.aes.heap[4]=0,this.aes.heap[5]=0,this.aes.heap[6]=0,this.aes.heap[7]=0,this.aes.heap[8]=0,this.aes.heap[9]=0,this.aes.heap[10]=0,this.aes.heap[11]=n>>>29,this.aes.heap[12]=n>>>21&255,this.aes.heap[13]=n>>>13&255,this.aes.heap[14]=n>>>5&255,this.aes.heap[15]=n<<3&255,this.aes.asm.mac(M.MAC.GCM,M.HEAP_DATA,16),this.aes.asm.get_iv(M.HEAP_DATA),this.aes.asm.set_iv(0,0,0,0),t.set(this.aes.heap.subarray(0,16))):(t.set(e),t[15]=1);t=new DataView(t.buffer);if(this.gamma0=t.getUint32(12),this.aes.asm.set_nonce(t.getUint32(0),t.getUint32(4),t.getUint32(8),0),this.aes.asm.set_mask(0,0,0,4294967295),void 0!==i){if(i.length>Y)throw new g("illegal adata length");i.length?(this.adata=i,this._gcm_mac_process(i)):this.adata=void 0}else this.adata=void 0;if(this.counter<1||4294967295<this.counter)throw new RangeError("counter must be a positive 32-bit integer");this.aes.asm.set_counter(0,0,0,this.gamma0+this.counter|0)}var Z=(J.encrypt=function(t,e,i){return new J(e,i).encrypt(t)},J.decrypt=function(t,e,i){return new J(e,i).decrypt(t)},J.prototype.encrypt=function(t){return r(this.aes.AES_Encrypt_process(t),this.aes.AES_Encrypt_finish())},J.prototype.decrypt=function(t){return r(this.aes.AES_Decrypt_process(t),this.aes.AES_Decrypt_finish())},J);function J(t,e,i){this.aes=i||new N(t,e,!1,"OFB")}function Q(t,e,i){"use asm";var s=0;var ft=new t.Uint32Array(i);var pt=t.Math.imul;function n(t){t=t|0;s=t=t+31&-32;return t|0}function y(t){t=t|0;var e=0;e=s;s=e+(t+31&-32)|0;return e|0}function b(t){t=t|0;s=s-(t+31&-32)|0}function w(t,e,i){t=t|0;e=e|0;i=i|0;var s=0;if((e|0)>(i|0))for(;(s|0)<(t|0);s=s+4|0)ft[i+s>>2]=ft[e+s>>2];else for(s=t-4|0;(s|0)>=0;s=s-4|0)ft[i+s>>2]=ft[e+s>>2]}function C(t,e,i){t=t|0;e=e|0;i=i|0;var s=0;for(;(s|0)<(t|0);s=s+4|0)ft[i+s>>2]=e}function d(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;var n=0,r=0,o=0,a=0,l=0;if((s|0)<=0)s=e;if((s|0)<(e|0))e=s;r=1;for(;(l|0)<(e|0);l=l+4|0){n=~ft[t+l>>2];o=(n&0xffff)+r|0;a=(n>>>16)+(o>>>16)|0;ft[i+l>>2]=a<<16|o&0xffff;r=a>>>16}for(;(l|0)<(s|0);l=l+4|0)ft[i+l>>2]=r-1|0;return r|0}function S(t,e,i,s){t=t|0;e=e|0;i=i|0;s=s|0;var n=0,r=0,o=0;if((e|0)>(s|0)){for(o=e-4|0;(o|0)>=(s|0);o=o-4|0)if(ft[t+o>>2]|0)return 1}else for(o=s-4|0;(o|0)>=(e|0);o=o-4|0)if(ft[i+o>>2]|0)return-1;for(;(o|0)>=0;o=o-4|0){n=ft[t+o>>2]|0,r=ft[i+o>>2]|0;if(n>>>0<r>>>0)return-1;if(n>>>0>r>>>0)return 1}return 0}function r(t,e){t=t|0;e=e|0;var i=0;for(i=e-4|0;(i|0)>=0;i=i-4|0)if(ft[t+i>>2]|0)return i+4|0;return 0}function u(t,e,i,s,n,r){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;r=r|0;var o=0,a=0,l=0,d=0,h=0,c=0;if((e|0)<(s|0)){d=t,t=i,i=d;d=e,e=s,s=d}if((r|0)<=0)r=e+4|0;if((r|0)<(s|0))e=s=r;for(;(c|0)<(s|0);c=c+4|0){o=ft[t+c>>2]|0;a=ft[i+c>>2]|0;d=((o&0xffff)+(a&0xffff)|0)+l|0;h=((o>>>16)+(a>>>16)|0)+(d>>>16)|0;ft[n+c>>2]=d&0xffff|h<<16;l=h>>>16}for(;(c|0)<(e|0);c=c+4|0){o=ft[t+c>>2]|0;d=(o&0xffff)+l|0;h=(o>>>16)+(d>>>16)|0;ft[n+c>>2]=d&0xffff|h<<16;l=h>>>16}for(;(c|0)<(r|0);c=c+4|0){ft[n+c>>2]=l|0;l=0}return l|0}function T(t,e,i,s,n,r){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;r=r|0;var o=0,a=0,l=0,d=0,h=0,c=0;if((r|0)<=0)r=(e|0)>(s|0)?e+4|0:s+4|0;if((r|0)<(e|0))e=r;if((r|0)<(s|0))s=r;if((e|0)<(s|0)){for(;(c|0)<(e|0);c=c+4|0){o=ft[t+c>>2]|0;a=ft[i+c>>2]|0;d=((o&0xffff)-(a&0xffff)|0)+l|0;h=((o>>>16)-(a>>>16)|0)+(d>>16)|0;ft[n+c>>2]=d&0xffff|h<<16;l=h>>16}for(;(c|0)<(s|0);c=c+4|0){a=ft[i+c>>2]|0;d=l-(a&0xffff)|0;h=(d>>16)-(a>>>16)|0;ft[n+c>>2]=d&0xffff|h<<16;l=h>>16}}else{for(;(c|0)<(s|0);c=c+4|0){o=ft[t+c>>2]|0;a=ft[i+c>>2]|0;d=((o&0xffff)-(a&0xffff)|0)+l|0;h=((o>>>16)-(a>>>16)|0)+(d>>16)|0;ft[n+c>>2]=d&0xffff|h<<16;l=h>>16}for(;(c|0)<(e|0);c=c+4|0){o=ft[t+c>>2]|0;d=(o&0xffff)+l|0;h=(o>>>16)+(d>>16)|0;ft[n+c>>2]=d&0xffff|h<<16;l=h>>16}}for(;(c|0)<(r|0);c=c+4|0)ft[n+c>>2]=l|0;return l|0}function dt(t,e,i,s,n,r){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;r=r|0;var o=0,a=0,l=0,d=0,h=0,c=0,u=0,f=0,p=0,m=0,g=0,x=0,E=0,v=0,y=0,b=0,w=0,C=0,S=0,T=0,I=0,k=0,M=0,D=0,A=0,R=0,N=0,F=0,P=0,O=0,L=0,B=0,_=0,H=0,z=0,V=0,G=0,W=0,j=0,U=0,q=0,X=0,Y=0,$=0,K=0,Z=0,J=0,Q=0,tt=0,et=0,it=0,st=0,nt=0,rt=0,ot=0,at=0,lt=0;if((e|0)>(s|0)){tt=t,et=e;t=i,e=s;i=tt,s=et}st=e+s|0;if((r|0)>(st|0)|(r|0)<=0)r=st;if((r|0)<(e|0))e=r;if((r|0)<(s|0))s=r;for(;(nt|0)<(e|0);nt=nt+32|0){rt=t+nt|0;p=ft[(rt|0)>>2]|0,m=ft[(rt|4)>>2]|0,g=ft[(rt|8)>>2]|0,x=ft[(rt|12)>>2]|0,E=ft[(rt|16)>>2]|0,v=ft[(rt|20)>>2]|0,y=ft[(rt|24)>>2]|0,b=ft[(rt|28)>>2]|0,o=p&0xffff,a=m&0xffff,l=g&0xffff,d=x&0xffff,h=E&0xffff,c=v&0xffff,u=y&0xffff,f=b&0xffff,p=p>>>16,m=m>>>16,g=g>>>16,x=x>>>16,E=E>>>16,v=v>>>16,y=y>>>16,b=b>>>16;q=X=Y=$=K=Z=J=Q=0;for(ot=0;(ot|0)<(s|0);ot=ot+32|0){at=i+ot|0;lt=n+(nt+ot|0)|0;A=ft[(at|0)>>2]|0,R=ft[(at|4)>>2]|0,N=ft[(at|8)>>2]|0,F=ft[(at|12)>>2]|0,P=ft[(at|16)>>2]|0,O=ft[(at|20)>>2]|0,L=ft[(at|24)>>2]|0,B=ft[(at|28)>>2]|0,w=A&0xffff,C=R&0xffff,S=N&0xffff,T=F&0xffff,I=P&0xffff,k=O&0xffff,M=L&0xffff,D=B&0xffff,A=A>>>16,R=R>>>16,N=N>>>16,F=F>>>16,P=P>>>16,O=O>>>16,L=L>>>16,B=B>>>16;_=ft[(lt|0)>>2]|0,H=ft[(lt|4)>>2]|0,z=ft[(lt|8)>>2]|0,V=ft[(lt|12)>>2]|0,G=ft[(lt|16)>>2]|0,W=ft[(lt|20)>>2]|0,j=ft[(lt|24)>>2]|0,U=ft[(lt|28)>>2]|0;tt=((pt(o,w)|0)+(q&0xffff)|0)+(_&0xffff)|0;et=((pt(p,w)|0)+(q>>>16)|0)+(_>>>16)|0;it=((pt(o,A)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(p,A)|0)+(et>>>16)|0)+(it>>>16)|0;_=it<<16|tt&0xffff;tt=((pt(o,C)|0)+(st&0xffff)|0)+(H&0xffff)|0;et=((pt(p,C)|0)+(st>>>16)|0)+(H>>>16)|0;it=((pt(o,R)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(p,R)|0)+(et>>>16)|0)+(it>>>16)|0;H=it<<16|tt&0xffff;tt=((pt(o,S)|0)+(st&0xffff)|0)+(z&0xffff)|0;et=((pt(p,S)|0)+(st>>>16)|0)+(z>>>16)|0;it=((pt(o,N)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(p,N)|0)+(et>>>16)|0)+(it>>>16)|0;z=it<<16|tt&0xffff;tt=((pt(o,T)|0)+(st&0xffff)|0)+(V&0xffff)|0;et=((pt(p,T)|0)+(st>>>16)|0)+(V>>>16)|0;it=((pt(o,F)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(p,F)|0)+(et>>>16)|0)+(it>>>16)|0;V=it<<16|tt&0xffff;tt=((pt(o,I)|0)+(st&0xffff)|0)+(G&0xffff)|0;et=((pt(p,I)|0)+(st>>>16)|0)+(G>>>16)|0;it=((pt(o,P)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(p,P)|0)+(et>>>16)|0)+(it>>>16)|0;G=it<<16|tt&0xffff;tt=((pt(o,k)|0)+(st&0xffff)|0)+(W&0xffff)|0;et=((pt(p,k)|0)+(st>>>16)|0)+(W>>>16)|0;it=((pt(o,O)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(p,O)|0)+(et>>>16)|0)+(it>>>16)|0;W=it<<16|tt&0xffff;tt=((pt(o,M)|0)+(st&0xffff)|0)+(j&0xffff)|0;et=((pt(p,M)|0)+(st>>>16)|0)+(j>>>16)|0;it=((pt(o,L)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(p,L)|0)+(et>>>16)|0)+(it>>>16)|0;j=it<<16|tt&0xffff;tt=((pt(o,D)|0)+(st&0xffff)|0)+(U&0xffff)|0;et=((pt(p,D)|0)+(st>>>16)|0)+(U>>>16)|0;it=((pt(o,B)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(p,B)|0)+(et>>>16)|0)+(it>>>16)|0;U=it<<16|tt&0xffff;q=st;tt=((pt(a,w)|0)+(X&0xffff)|0)+(H&0xffff)|0;et=((pt(m,w)|0)+(X>>>16)|0)+(H>>>16)|0;it=((pt(a,A)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(m,A)|0)+(et>>>16)|0)+(it>>>16)|0;H=it<<16|tt&0xffff;tt=((pt(a,C)|0)+(st&0xffff)|0)+(z&0xffff)|0;et=((pt(m,C)|0)+(st>>>16)|0)+(z>>>16)|0;it=((pt(a,R)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(m,R)|0)+(et>>>16)|0)+(it>>>16)|0;z=it<<16|tt&0xffff;tt=((pt(a,S)|0)+(st&0xffff)|0)+(V&0xffff)|0;et=((pt(m,S)|0)+(st>>>16)|0)+(V>>>16)|0;it=((pt(a,N)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(m,N)|0)+(et>>>16)|0)+(it>>>16)|0;V=it<<16|tt&0xffff;tt=((pt(a,T)|0)+(st&0xffff)|0)+(G&0xffff)|0;et=((pt(m,T)|0)+(st>>>16)|0)+(G>>>16)|0;it=((pt(a,F)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(m,F)|0)+(et>>>16)|0)+(it>>>16)|0;G=it<<16|tt&0xffff;tt=((pt(a,I)|0)+(st&0xffff)|0)+(W&0xffff)|0;et=((pt(m,I)|0)+(st>>>16)|0)+(W>>>16)|0;it=((pt(a,P)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(m,P)|0)+(et>>>16)|0)+(it>>>16)|0;W=it<<16|tt&0xffff;tt=((pt(a,k)|0)+(st&0xffff)|0)+(j&0xffff)|0;et=((pt(m,k)|0)+(st>>>16)|0)+(j>>>16)|0;it=((pt(a,O)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(m,O)|0)+(et>>>16)|0)+(it>>>16)|0;j=it<<16|tt&0xffff;tt=((pt(a,M)|0)+(st&0xffff)|0)+(U&0xffff)|0;et=((pt(m,M)|0)+(st>>>16)|0)+(U>>>16)|0;it=((pt(a,L)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(m,L)|0)+(et>>>16)|0)+(it>>>16)|0;U=it<<16|tt&0xffff;tt=((pt(a,D)|0)+(st&0xffff)|0)+(q&0xffff)|0;et=((pt(m,D)|0)+(st>>>16)|0)+(q>>>16)|0;it=((pt(a,B)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(m,B)|0)+(et>>>16)|0)+(it>>>16)|0;q=it<<16|tt&0xffff;X=st;tt=((pt(l,w)|0)+(Y&0xffff)|0)+(z&0xffff)|0;et=((pt(g,w)|0)+(Y>>>16)|0)+(z>>>16)|0;it=((pt(l,A)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(g,A)|0)+(et>>>16)|0)+(it>>>16)|0;z=it<<16|tt&0xffff;tt=((pt(l,C)|0)+(st&0xffff)|0)+(V&0xffff)|0;et=((pt(g,C)|0)+(st>>>16)|0)+(V>>>16)|0;it=((pt(l,R)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(g,R)|0)+(et>>>16)|0)+(it>>>16)|0;V=it<<16|tt&0xffff;tt=((pt(l,S)|0)+(st&0xffff)|0)+(G&0xffff)|0;et=((pt(g,S)|0)+(st>>>16)|0)+(G>>>16)|0;it=((pt(l,N)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(g,N)|0)+(et>>>16)|0)+(it>>>16)|0;G=it<<16|tt&0xffff;tt=((pt(l,T)|0)+(st&0xffff)|0)+(W&0xffff)|0;et=((pt(g,T)|0)+(st>>>16)|0)+(W>>>16)|0;it=((pt(l,F)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(g,F)|0)+(et>>>16)|0)+(it>>>16)|0;W=it<<16|tt&0xffff;tt=((pt(l,I)|0)+(st&0xffff)|0)+(j&0xffff)|0;et=((pt(g,I)|0)+(st>>>16)|0)+(j>>>16)|0;it=((pt(l,P)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(g,P)|0)+(et>>>16)|0)+(it>>>16)|0;j=it<<16|tt&0xffff;tt=((pt(l,k)|0)+(st&0xffff)|0)+(U&0xffff)|0;et=((pt(g,k)|0)+(st>>>16)|0)+(U>>>16)|0;it=((pt(l,O)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(g,O)|0)+(et>>>16)|0)+(it>>>16)|0;U=it<<16|tt&0xffff;tt=((pt(l,M)|0)+(st&0xffff)|0)+(q&0xffff)|0;et=((pt(g,M)|0)+(st>>>16)|0)+(q>>>16)|0;it=((pt(l,L)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(g,L)|0)+(et>>>16)|0)+(it>>>16)|0;q=it<<16|tt&0xffff;tt=((pt(l,D)|0)+(st&0xffff)|0)+(X&0xffff)|0;et=((pt(g,D)|0)+(st>>>16)|0)+(X>>>16)|0;it=((pt(l,B)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(g,B)|0)+(et>>>16)|0)+(it>>>16)|0;X=it<<16|tt&0xffff;Y=st;tt=((pt(d,w)|0)+($&0xffff)|0)+(V&0xffff)|0;et=((pt(x,w)|0)+($>>>16)|0)+(V>>>16)|0;it=((pt(d,A)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(x,A)|0)+(et>>>16)|0)+(it>>>16)|0;V=it<<16|tt&0xffff;tt=((pt(d,C)|0)+(st&0xffff)|0)+(G&0xffff)|0;et=((pt(x,C)|0)+(st>>>16)|0)+(G>>>16)|0;it=((pt(d,R)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(x,R)|0)+(et>>>16)|0)+(it>>>16)|0;G=it<<16|tt&0xffff;tt=((pt(d,S)|0)+(st&0xffff)|0)+(W&0xffff)|0;et=((pt(x,S)|0)+(st>>>16)|0)+(W>>>16)|0;it=((pt(d,N)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(x,N)|0)+(et>>>16)|0)+(it>>>16)|0;W=it<<16|tt&0xffff;tt=((pt(d,T)|0)+(st&0xffff)|0)+(j&0xffff)|0;et=((pt(x,T)|0)+(st>>>16)|0)+(j>>>16)|0;it=((pt(d,F)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(x,F)|0)+(et>>>16)|0)+(it>>>16)|0;j=it<<16|tt&0xffff;tt=((pt(d,I)|0)+(st&0xffff)|0)+(U&0xffff)|0;et=((pt(x,I)|0)+(st>>>16)|0)+(U>>>16)|0;it=((pt(d,P)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(x,P)|0)+(et>>>16)|0)+(it>>>16)|0;U=it<<16|tt&0xffff;tt=((pt(d,k)|0)+(st&0xffff)|0)+(q&0xffff)|0;et=((pt(x,k)|0)+(st>>>16)|0)+(q>>>16)|0;it=((pt(d,O)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(x,O)|0)+(et>>>16)|0)+(it>>>16)|0;q=it<<16|tt&0xffff;tt=((pt(d,M)|0)+(st&0xffff)|0)+(X&0xffff)|0;et=((pt(x,M)|0)+(st>>>16)|0)+(X>>>16)|0;it=((pt(d,L)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(x,L)|0)+(et>>>16)|0)+(it>>>16)|0;X=it<<16|tt&0xffff;tt=((pt(d,D)|0)+(st&0xffff)|0)+(Y&0xffff)|0;et=((pt(x,D)|0)+(st>>>16)|0)+(Y>>>16)|0;it=((pt(d,B)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(x,B)|0)+(et>>>16)|0)+(it>>>16)|0;Y=it<<16|tt&0xffff;$=st;tt=((pt(h,w)|0)+(K&0xffff)|0)+(G&0xffff)|0;et=((pt(E,w)|0)+(K>>>16)|0)+(G>>>16)|0;it=((pt(h,A)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(E,A)|0)+(et>>>16)|0)+(it>>>16)|0;G=it<<16|tt&0xffff;tt=((pt(h,C)|0)+(st&0xffff)|0)+(W&0xffff)|0;et=((pt(E,C)|0)+(st>>>16)|0)+(W>>>16)|0;it=((pt(h,R)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(E,R)|0)+(et>>>16)|0)+(it>>>16)|0;W=it<<16|tt&0xffff;tt=((pt(h,S)|0)+(st&0xffff)|0)+(j&0xffff)|0;et=((pt(E,S)|0)+(st>>>16)|0)+(j>>>16)|0;it=((pt(h,N)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(E,N)|0)+(et>>>16)|0)+(it>>>16)|0;j=it<<16|tt&0xffff;tt=((pt(h,T)|0)+(st&0xffff)|0)+(U&0xffff)|0;et=((pt(E,T)|0)+(st>>>16)|0)+(U>>>16)|0;it=((pt(h,F)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(E,F)|0)+(et>>>16)|0)+(it>>>16)|0;U=it<<16|tt&0xffff;tt=((pt(h,I)|0)+(st&0xffff)|0)+(q&0xffff)|0;et=((pt(E,I)|0)+(st>>>16)|0)+(q>>>16)|0;it=((pt(h,P)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(E,P)|0)+(et>>>16)|0)+(it>>>16)|0;q=it<<16|tt&0xffff;tt=((pt(h,k)|0)+(st&0xffff)|0)+(X&0xffff)|0;et=((pt(E,k)|0)+(st>>>16)|0)+(X>>>16)|0;it=((pt(h,O)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(E,O)|0)+(et>>>16)|0)+(it>>>16)|0;X=it<<16|tt&0xffff;tt=((pt(h,M)|0)+(st&0xffff)|0)+(Y&0xffff)|0;et=((pt(E,M)|0)+(st>>>16)|0)+(Y>>>16)|0;it=((pt(h,L)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(E,L)|0)+(et>>>16)|0)+(it>>>16)|0;Y=it<<16|tt&0xffff;tt=((pt(h,D)|0)+(st&0xffff)|0)+($&0xffff)|0;et=((pt(E,D)|0)+(st>>>16)|0)+($>>>16)|0;it=((pt(h,B)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(E,B)|0)+(et>>>16)|0)+(it>>>16)|0;$=it<<16|tt&0xffff;K=st;tt=((pt(c,w)|0)+(Z&0xffff)|0)+(W&0xffff)|0;et=((pt(v,w)|0)+(Z>>>16)|0)+(W>>>16)|0;it=((pt(c,A)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(v,A)|0)+(et>>>16)|0)+(it>>>16)|0;W=it<<16|tt&0xffff;tt=((pt(c,C)|0)+(st&0xffff)|0)+(j&0xffff)|0;et=((pt(v,C)|0)+(st>>>16)|0)+(j>>>16)|0;it=((pt(c,R)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(v,R)|0)+(et>>>16)|0)+(it>>>16)|0;j=it<<16|tt&0xffff;tt=((pt(c,S)|0)+(st&0xffff)|0)+(U&0xffff)|0;et=((pt(v,S)|0)+(st>>>16)|0)+(U>>>16)|0;it=((pt(c,N)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(v,N)|0)+(et>>>16)|0)+(it>>>16)|0;U=it<<16|tt&0xffff;tt=((pt(c,T)|0)+(st&0xffff)|0)+(q&0xffff)|0;et=((pt(v,T)|0)+(st>>>16)|0)+(q>>>16)|0;it=((pt(c,F)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(v,F)|0)+(et>>>16)|0)+(it>>>16)|0;q=it<<16|tt&0xffff;tt=((pt(c,I)|0)+(st&0xffff)|0)+(X&0xffff)|0;et=((pt(v,I)|0)+(st>>>16)|0)+(X>>>16)|0;it=((pt(c,P)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(v,P)|0)+(et>>>16)|0)+(it>>>16)|0;X=it<<16|tt&0xffff;tt=((pt(c,k)|0)+(st&0xffff)|0)+(Y&0xffff)|0;et=((pt(v,k)|0)+(st>>>16)|0)+(Y>>>16)|0;it=((pt(c,O)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(v,O)|0)+(et>>>16)|0)+(it>>>16)|0;Y=it<<16|tt&0xffff;tt=((pt(c,M)|0)+(st&0xffff)|0)+($&0xffff)|0;et=((pt(v,M)|0)+(st>>>16)|0)+($>>>16)|0;it=((pt(c,L)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(v,L)|0)+(et>>>16)|0)+(it>>>16)|0;$=it<<16|tt&0xffff;tt=((pt(c,D)|0)+(st&0xffff)|0)+(K&0xffff)|0;et=((pt(v,D)|0)+(st>>>16)|0)+(K>>>16)|0;it=((pt(c,B)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(v,B)|0)+(et>>>16)|0)+(it>>>16)|0;K=it<<16|tt&0xffff;Z=st;tt=((pt(u,w)|0)+(J&0xffff)|0)+(j&0xffff)|0;et=((pt(y,w)|0)+(J>>>16)|0)+(j>>>16)|0;it=((pt(u,A)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(y,A)|0)+(et>>>16)|0)+(it>>>16)|0;j=it<<16|tt&0xffff;tt=((pt(u,C)|0)+(st&0xffff)|0)+(U&0xffff)|0;et=((pt(y,C)|0)+(st>>>16)|0)+(U>>>16)|0;it=((pt(u,R)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(y,R)|0)+(et>>>16)|0)+(it>>>16)|0;U=it<<16|tt&0xffff;tt=((pt(u,S)|0)+(st&0xffff)|0)+(q&0xffff)|0;et=((pt(y,S)|0)+(st>>>16)|0)+(q>>>16)|0;it=((pt(u,N)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(y,N)|0)+(et>>>16)|0)+(it>>>16)|0;q=it<<16|tt&0xffff;tt=((pt(u,T)|0)+(st&0xffff)|0)+(X&0xffff)|0;et=((pt(y,T)|0)+(st>>>16)|0)+(X>>>16)|0;it=((pt(u,F)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(y,F)|0)+(et>>>16)|0)+(it>>>16)|0;X=it<<16|tt&0xffff;tt=((pt(u,I)|0)+(st&0xffff)|0)+(Y&0xffff)|0;et=((pt(y,I)|0)+(st>>>16)|0)+(Y>>>16)|0;it=((pt(u,P)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(y,P)|0)+(et>>>16)|0)+(it>>>16)|0;Y=it<<16|tt&0xffff;tt=((pt(u,k)|0)+(st&0xffff)|0)+($&0xffff)|0;et=((pt(y,k)|0)+(st>>>16)|0)+($>>>16)|0;it=((pt(u,O)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(y,O)|0)+(et>>>16)|0)+(it>>>16)|0;$=it<<16|tt&0xffff;tt=((pt(u,M)|0)+(st&0xffff)|0)+(K&0xffff)|0;et=((pt(y,M)|0)+(st>>>16)|0)+(K>>>16)|0;it=((pt(u,L)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(y,L)|0)+(et>>>16)|0)+(it>>>16)|0;K=it<<16|tt&0xffff;tt=((pt(u,D)|0)+(st&0xffff)|0)+(Z&0xffff)|0;et=((pt(y,D)|0)+(st>>>16)|0)+(Z>>>16)|0;it=((pt(u,B)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(y,B)|0)+(et>>>16)|0)+(it>>>16)|0;Z=it<<16|tt&0xffff;J=st;tt=((pt(f,w)|0)+(Q&0xffff)|0)+(U&0xffff)|0;et=((pt(b,w)|0)+(Q>>>16)|0)+(U>>>16)|0;it=((pt(f,A)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(b,A)|0)+(et>>>16)|0)+(it>>>16)|0;U=it<<16|tt&0xffff;tt=((pt(f,C)|0)+(st&0xffff)|0)+(q&0xffff)|0;et=((pt(b,C)|0)+(st>>>16)|0)+(q>>>16)|0;it=((pt(f,R)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(b,R)|0)+(et>>>16)|0)+(it>>>16)|0;q=it<<16|tt&0xffff;tt=((pt(f,S)|0)+(st&0xffff)|0)+(X&0xffff)|0;et=((pt(b,S)|0)+(st>>>16)|0)+(X>>>16)|0;it=((pt(f,N)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(b,N)|0)+(et>>>16)|0)+(it>>>16)|0;X=it<<16|tt&0xffff;tt=((pt(f,T)|0)+(st&0xffff)|0)+(Y&0xffff)|0;et=((pt(b,T)|0)+(st>>>16)|0)+(Y>>>16)|0;it=((pt(f,F)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(b,F)|0)+(et>>>16)|0)+(it>>>16)|0;Y=it<<16|tt&0xffff;tt=((pt(f,I)|0)+(st&0xffff)|0)+($&0xffff)|0;et=((pt(b,I)|0)+(st>>>16)|0)+($>>>16)|0;it=((pt(f,P)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(b,P)|0)+(et>>>16)|0)+(it>>>16)|0;$=it<<16|tt&0xffff;tt=((pt(f,k)|0)+(st&0xffff)|0)+(K&0xffff)|0;et=((pt(b,k)|0)+(st>>>16)|0)+(K>>>16)|0;it=((pt(f,O)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(b,O)|0)+(et>>>16)|0)+(it>>>16)|0;K=it<<16|tt&0xffff;tt=((pt(f,M)|0)+(st&0xffff)|0)+(Z&0xffff)|0;et=((pt(b,M)|0)+(st>>>16)|0)+(Z>>>16)|0;it=((pt(f,L)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(b,L)|0)+(et>>>16)|0)+(it>>>16)|0;Z=it<<16|tt&0xffff;tt=((pt(f,D)|0)+(st&0xffff)|0)+(J&0xffff)|0;et=((pt(b,D)|0)+(st>>>16)|0)+(J>>>16)|0;it=((pt(f,B)|0)+(et&0xffff)|0)+(tt>>>16)|0;st=((pt(b,B)|0)+(et>>>16)|0)+(it>>>16)|0;J=it<<16|tt&0xffff;Q=st;ft[(lt|0)>>2]=_,ft[(lt|4)>>2]=H,ft[(lt|8)>>2]=z,ft[(lt|12)>>2]=V,ft[(lt|16)>>2]=G,ft[(lt|20)>>2]=W,ft[(lt|24)>>2]=j,ft[(lt|28)>>2]=U}lt=n+(nt+ot|0)|0;ft[(lt|0)>>2]=q,ft[(lt|4)>>2]=X,ft[(lt|8)>>2]=Y,ft[(lt|12)>>2]=$,ft[(lt|16)>>2]=K,ft[(lt|20)>>2]=Z,ft[(lt|24)>>2]=J,ft[(lt|28)>>2]=Q}}function mt(t,e,i){t=t|0;e=e|0;i=i|0;var s=0,n=0,r=0,o=0,a=0,l=0,d=0,h=0,c=0,u=0,f=0,p=0,m=0,g=0,x=0,E=0,v=0,y=0,b=0,w=0,C=0,S=0,T=0,I=0,k=0,M=0,D=0,A=0,R=0,N=0,F=0,P=0,O=0,L=0,B=0,_=0,H=0,z=0,V=0,G=0,W=0,j=0,U=0,q=0,X=0,Y=0,$=0,K=0,Z=0,J=0,Q=0,tt=0,et=0,it=0,st=0,nt=0,rt=0,ot=0,at=0,lt=0,dt=0,ht=0,ct=0,ut=0;for(;(at|0)<(e|0);at=at+4|0){ut=i+(at<<1)|0;c=ft[t+at>>2]|0,s=c&0xffff,c=c>>>16;Z=pt(s,s)|0;J=(pt(s,c)|0)+(Z>>>17)|0;Q=(pt(c,c)|0)+(J>>>15)|0;ft[ut>>2]=J<<17|Z&0x1ffff;ft[(ut|4)>>2]=Q}for(ot=0;(ot|0)<(e|0);ot=ot+8|0){ht=t+ot|0,ut=i+(ot<<1)|0;c=ft[ht>>2]|0,s=c&0xffff,c=c>>>16;k=ft[(ht|4)>>2]|0,v=k&0xffff,k=k>>>16;Z=pt(s,v)|0;J=(pt(s,k)|0)+(Z>>>16)|0;Q=(pt(c,v)|0)+(J&0xffff)|0;it=((pt(c,k)|0)+(J>>>16)|0)+(Q>>>16)|0;st=ft[(ut|4)>>2]|0;Z=(st&0xffff)+((Z&0xffff)<<1)|0;Q=((st>>>16)+((Q&0xffff)<<1)|0)+(Z>>>16)|0;ft[(ut|4)>>2]=Q<<16|Z&0xffff;tt=Q>>>16;st=ft[(ut|8)>>2]|0;Z=((st&0xffff)+((it&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(it>>>16<<1)|0)+(Z>>>16)|0;ft[(ut|8)>>2]=Q<<16|Z&0xffff;tt=Q>>>16;if(tt){st=ft[(ut|12)>>2]|0;Z=(st&0xffff)+tt|0;Q=(st>>>16)+(Z>>>16)|0;ft[(ut|12)>>2]=Q<<16|Z&0xffff}}for(ot=0;(ot|0)<(e|0);ot=ot+16|0){ht=t+ot|0,ut=i+(ot<<1)|0;c=ft[ht>>2]|0,s=c&0xffff,c=c>>>16,u=ft[(ht|4)>>2]|0,n=u&0xffff,u=u>>>16;k=ft[(ht|8)>>2]|0,v=k&0xffff,k=k>>>16,M=ft[(ht|12)>>2]|0,y=M&0xffff,M=M>>>16;Z=pt(s,v)|0;J=pt(c,v)|0;Q=((pt(s,k)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(c,k)|0)+(J>>>16)|0)+(Q>>>16)|0;O=Q<<16|Z&0xffff;Z=(pt(s,y)|0)+(it&0xffff)|0;J=(pt(c,y)|0)+(it>>>16)|0;Q=((pt(s,M)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(c,M)|0)+(J>>>16)|0)+(Q>>>16)|0;L=Q<<16|Z&0xffff;B=it;Z=(pt(n,v)|0)+(L&0xffff)|0;J=(pt(u,v)|0)+(L>>>16)|0;Q=((pt(n,k)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(u,k)|0)+(J>>>16)|0)+(Q>>>16)|0;L=Q<<16|Z&0xffff;Z=((pt(n,y)|0)+(B&0xffff)|0)+(it&0xffff)|0;J=((pt(u,y)|0)+(B>>>16)|0)+(it>>>16)|0;Q=((pt(n,M)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(u,M)|0)+(J>>>16)|0)+(Q>>>16)|0;B=Q<<16|Z&0xffff;_=it;st=ft[(ut|8)>>2]|0;Z=(st&0xffff)+((O&0xffff)<<1)|0;Q=((st>>>16)+(O>>>16<<1)|0)+(Z>>>16)|0;ft[(ut|8)>>2]=Q<<16|Z&0xffff;tt=Q>>>16;st=ft[(ut|12)>>2]|0;Z=((st&0xffff)+((L&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(L>>>16<<1)|0)+(Z>>>16)|0;ft[(ut|12)>>2]=Q<<16|Z&0xffff;tt=Q>>>16;st=ft[(ut|16)>>2]|0;Z=((st&0xffff)+((B&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(B>>>16<<1)|0)+(Z>>>16)|0;ft[(ut|16)>>2]=Q<<16|Z&0xffff;tt=Q>>>16;st=ft[(ut|20)>>2]|0;Z=((st&0xffff)+((_&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(_>>>16<<1)|0)+(Z>>>16)|0;ft[(ut|20)>>2]=Q<<16|Z&0xffff;tt=Q>>>16;for(dt=24;!!tt&(dt|0)<32;dt=dt+4|0){st=ft[(ut|dt)>>2]|0;Z=(st&0xffff)+tt|0;Q=(st>>>16)+(Z>>>16)|0;ft[(ut|dt)>>2]=Q<<16|Z&0xffff;tt=Q>>>16}}for(ot=0;(ot|0)<(e|0);ot=ot+32|0){ht=t+ot|0,ut=i+(ot<<1)|0;c=ft[ht>>2]|0,s=c&0xffff,c=c>>>16,u=ft[(ht|4)>>2]|0,n=u&0xffff,u=u>>>16,f=ft[(ht|8)>>2]|0,r=f&0xffff,f=f>>>16,p=ft[(ht|12)>>2]|0,o=p&0xffff,p=p>>>16;k=ft[(ht|16)>>2]|0,v=k&0xffff,k=k>>>16,M=ft[(ht|20)>>2]|0,y=M&0xffff,M=M>>>16,D=ft[(ht|24)>>2]|0,b=D&0xffff,D=D>>>16,A=ft[(ht|28)>>2]|0,w=A&0xffff,A=A>>>16;Z=pt(s,v)|0;J=pt(c,v)|0;Q=((pt(s,k)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(c,k)|0)+(J>>>16)|0)+(Q>>>16)|0;O=Q<<16|Z&0xffff;Z=(pt(s,y)|0)+(it&0xffff)|0;J=(pt(c,y)|0)+(it>>>16)|0;Q=((pt(s,M)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(c,M)|0)+(J>>>16)|0)+(Q>>>16)|0;L=Q<<16|Z&0xffff;Z=(pt(s,b)|0)+(it&0xffff)|0;J=(pt(c,b)|0)+(it>>>16)|0;Q=((pt(s,D)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(c,D)|0)+(J>>>16)|0)+(Q>>>16)|0;B=Q<<16|Z&0xffff;Z=(pt(s,w)|0)+(it&0xffff)|0;J=(pt(c,w)|0)+(it>>>16)|0;Q=((pt(s,A)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(c,A)|0)+(J>>>16)|0)+(Q>>>16)|0;_=Q<<16|Z&0xffff;H=it;Z=(pt(n,v)|0)+(L&0xffff)|0;J=(pt(u,v)|0)+(L>>>16)|0;Q=((pt(n,k)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(u,k)|0)+(J>>>16)|0)+(Q>>>16)|0;L=Q<<16|Z&0xffff;Z=((pt(n,y)|0)+(B&0xffff)|0)+(it&0xffff)|0;J=((pt(u,y)|0)+(B>>>16)|0)+(it>>>16)|0;Q=((pt(n,M)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(u,M)|0)+(J>>>16)|0)+(Q>>>16)|0;B=Q<<16|Z&0xffff;Z=((pt(n,b)|0)+(_&0xffff)|0)+(it&0xffff)|0;J=((pt(u,b)|0)+(_>>>16)|0)+(it>>>16)|0;Q=((pt(n,D)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(u,D)|0)+(J>>>16)|0)+(Q>>>16)|0;_=Q<<16|Z&0xffff;Z=((pt(n,w)|0)+(H&0xffff)|0)+(it&0xffff)|0;J=((pt(u,w)|0)+(H>>>16)|0)+(it>>>16)|0;Q=((pt(n,A)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(u,A)|0)+(J>>>16)|0)+(Q>>>16)|0;H=Q<<16|Z&0xffff;z=it;Z=(pt(r,v)|0)+(B&0xffff)|0;J=(pt(f,v)|0)+(B>>>16)|0;Q=((pt(r,k)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(f,k)|0)+(J>>>16)|0)+(Q>>>16)|0;B=Q<<16|Z&0xffff;Z=((pt(r,y)|0)+(_&0xffff)|0)+(it&0xffff)|0;J=((pt(f,y)|0)+(_>>>16)|0)+(it>>>16)|0;Q=((pt(r,M)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(f,M)|0)+(J>>>16)|0)+(Q>>>16)|0;_=Q<<16|Z&0xffff;Z=((pt(r,b)|0)+(H&0xffff)|0)+(it&0xffff)|0;J=((pt(f,b)|0)+(H>>>16)|0)+(it>>>16)|0;Q=((pt(r,D)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(f,D)|0)+(J>>>16)|0)+(Q>>>16)|0;H=Q<<16|Z&0xffff;Z=((pt(r,w)|0)+(z&0xffff)|0)+(it&0xffff)|0;J=((pt(f,w)|0)+(z>>>16)|0)+(it>>>16)|0;Q=((pt(r,A)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(f,A)|0)+(J>>>16)|0)+(Q>>>16)|0;z=Q<<16|Z&0xffff;V=it;Z=(pt(o,v)|0)+(_&0xffff)|0;J=(pt(p,v)|0)+(_>>>16)|0;Q=((pt(o,k)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(p,k)|0)+(J>>>16)|0)+(Q>>>16)|0;_=Q<<16|Z&0xffff;Z=((pt(o,y)|0)+(H&0xffff)|0)+(it&0xffff)|0;J=((pt(p,y)|0)+(H>>>16)|0)+(it>>>16)|0;Q=((pt(o,M)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(p,M)|0)+(J>>>16)|0)+(Q>>>16)|0;H=Q<<16|Z&0xffff;Z=((pt(o,b)|0)+(z&0xffff)|0)+(it&0xffff)|0;J=((pt(p,b)|0)+(z>>>16)|0)+(it>>>16)|0;Q=((pt(o,D)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(p,D)|0)+(J>>>16)|0)+(Q>>>16)|0;z=Q<<16|Z&0xffff;Z=((pt(o,w)|0)+(V&0xffff)|0)+(it&0xffff)|0;J=((pt(p,w)|0)+(V>>>16)|0)+(it>>>16)|0;Q=((pt(o,A)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(p,A)|0)+(J>>>16)|0)+(Q>>>16)|0;V=Q<<16|Z&0xffff;G=it;st=ft[(ut|16)>>2]|0;Z=(st&0xffff)+((O&0xffff)<<1)|0;Q=((st>>>16)+(O>>>16<<1)|0)+(Z>>>16)|0;ft[(ut|16)>>2]=Q<<16|Z&0xffff;tt=Q>>>16;st=ft[(ut|20)>>2]|0;Z=((st&0xffff)+((L&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(L>>>16<<1)|0)+(Z>>>16)|0;ft[(ut|20)>>2]=Q<<16|Z&0xffff;tt=Q>>>16;st=ft[(ut|24)>>2]|0;Z=((st&0xffff)+((B&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(B>>>16<<1)|0)+(Z>>>16)|0;ft[(ut|24)>>2]=Q<<16|Z&0xffff;tt=Q>>>16;st=ft[(ut|28)>>2]|0;Z=((st&0xffff)+((_&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(_>>>16<<1)|0)+(Z>>>16)|0;ft[(ut|28)>>2]=Q<<16|Z&0xffff;tt=Q>>>16;st=ft[ut+32>>2]|0;Z=((st&0xffff)+((H&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(H>>>16<<1)|0)+(Z>>>16)|0;ft[ut+32>>2]=Q<<16|Z&0xffff;tt=Q>>>16;st=ft[ut+36>>2]|0;Z=((st&0xffff)+((z&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(z>>>16<<1)|0)+(Z>>>16)|0;ft[ut+36>>2]=Q<<16|Z&0xffff;tt=Q>>>16;st=ft[ut+40>>2]|0;Z=((st&0xffff)+((V&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(V>>>16<<1)|0)+(Z>>>16)|0;ft[ut+40>>2]=Q<<16|Z&0xffff;tt=Q>>>16;st=ft[ut+44>>2]|0;Z=((st&0xffff)+((G&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(G>>>16<<1)|0)+(Z>>>16)|0;ft[ut+44>>2]=Q<<16|Z&0xffff;tt=Q>>>16;for(dt=48;!!tt&(dt|0)<64;dt=dt+4|0){st=ft[ut+dt>>2]|0;Z=(st&0xffff)+tt|0;Q=(st>>>16)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16}}for(nt=32;(nt|0)<(e|0);nt=nt<<1){rt=nt<<1;for(ot=0;(ot|0)<(e|0);ot=ot+rt|0){ut=i+(ot<<1)|0;et=0;for(at=0;(at|0)<(nt|0);at=at+32|0){ht=(t+ot|0)+at|0;c=ft[ht>>2]|0,s=c&0xffff,c=c>>>16,u=ft[(ht|4)>>2]|0,n=u&0xffff,u=u>>>16,f=ft[(ht|8)>>2]|0,r=f&0xffff,f=f>>>16,p=ft[(ht|12)>>2]|0,o=p&0xffff,p=p>>>16,m=ft[(ht|16)>>2]|0,a=m&0xffff,m=m>>>16,g=ft[(ht|20)>>2]|0,l=g&0xffff,g=g>>>16,x=ft[(ht|24)>>2]|0,d=x&0xffff,x=x>>>16,E=ft[(ht|28)>>2]|0,h=E&0xffff,E=E>>>16;W=j=U=q=X=Y=$=K=tt=0;for(lt=0;(lt|0)<(nt|0);lt=lt+32|0){ct=((t+ot|0)+nt|0)+lt|0;k=ft[ct>>2]|0,v=k&0xffff,k=k>>>16,M=ft[(ct|4)>>2]|0,y=M&0xffff,M=M>>>16,D=ft[(ct|8)>>2]|0,b=D&0xffff,D=D>>>16,A=ft[(ct|12)>>2]|0,w=A&0xffff,A=A>>>16,R=ft[(ct|16)>>2]|0,C=R&0xffff,R=R>>>16,N=ft[(ct|20)>>2]|0,S=N&0xffff,N=N>>>16,F=ft[(ct|24)>>2]|0,T=F&0xffff,F=F>>>16,P=ft[(ct|28)>>2]|0,I=P&0xffff,P=P>>>16;O=L=B=_=H=z=V=G=0;Z=((pt(s,v)|0)+(O&0xffff)|0)+(W&0xffff)|0;J=((pt(c,v)|0)+(O>>>16)|0)+(W>>>16)|0;Q=((pt(s,k)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(c,k)|0)+(J>>>16)|0)+(Q>>>16)|0;O=Q<<16|Z&0xffff;Z=((pt(s,y)|0)+(L&0xffff)|0)+(it&0xffff)|0;J=((pt(c,y)|0)+(L>>>16)|0)+(it>>>16)|0;Q=((pt(s,M)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(c,M)|0)+(J>>>16)|0)+(Q>>>16)|0;L=Q<<16|Z&0xffff;Z=((pt(s,b)|0)+(B&0xffff)|0)+(it&0xffff)|0;J=((pt(c,b)|0)+(B>>>16)|0)+(it>>>16)|0;Q=((pt(s,D)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(c,D)|0)+(J>>>16)|0)+(Q>>>16)|0;B=Q<<16|Z&0xffff;Z=((pt(s,w)|0)+(_&0xffff)|0)+(it&0xffff)|0;J=((pt(c,w)|0)+(_>>>16)|0)+(it>>>16)|0;Q=((pt(s,A)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(c,A)|0)+(J>>>16)|0)+(Q>>>16)|0;_=Q<<16|Z&0xffff;Z=((pt(s,C)|0)+(H&0xffff)|0)+(it&0xffff)|0;J=((pt(c,C)|0)+(H>>>16)|0)+(it>>>16)|0;Q=((pt(s,R)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(c,R)|0)+(J>>>16)|0)+(Q>>>16)|0;H=Q<<16|Z&0xffff;Z=((pt(s,S)|0)+(z&0xffff)|0)+(it&0xffff)|0;J=((pt(c,S)|0)+(z>>>16)|0)+(it>>>16)|0;Q=((pt(s,N)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(c,N)|0)+(J>>>16)|0)+(Q>>>16)|0;z=Q<<16|Z&0xffff;Z=((pt(s,T)|0)+(V&0xffff)|0)+(it&0xffff)|0;J=((pt(c,T)|0)+(V>>>16)|0)+(it>>>16)|0;Q=((pt(s,F)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(c,F)|0)+(J>>>16)|0)+(Q>>>16)|0;V=Q<<16|Z&0xffff;Z=((pt(s,I)|0)+(G&0xffff)|0)+(it&0xffff)|0;J=((pt(c,I)|0)+(G>>>16)|0)+(it>>>16)|0;Q=((pt(s,P)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(c,P)|0)+(J>>>16)|0)+(Q>>>16)|0;G=Q<<16|Z&0xffff;W=it;Z=((pt(n,v)|0)+(L&0xffff)|0)+(j&0xffff)|0;J=((pt(u,v)|0)+(L>>>16)|0)+(j>>>16)|0;Q=((pt(n,k)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(u,k)|0)+(J>>>16)|0)+(Q>>>16)|0;L=Q<<16|Z&0xffff;Z=((pt(n,y)|0)+(B&0xffff)|0)+(it&0xffff)|0;J=((pt(u,y)|0)+(B>>>16)|0)+(it>>>16)|0;Q=((pt(n,M)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(u,M)|0)+(J>>>16)|0)+(Q>>>16)|0;B=Q<<16|Z&0xffff;Z=((pt(n,b)|0)+(_&0xffff)|0)+(it&0xffff)|0;J=((pt(u,b)|0)+(_>>>16)|0)+(it>>>16)|0;Q=((pt(n,D)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(u,D)|0)+(J>>>16)|0)+(Q>>>16)|0;_=Q<<16|Z&0xffff;Z=((pt(n,w)|0)+(H&0xffff)|0)+(it&0xffff)|0;J=((pt(u,w)|0)+(H>>>16)|0)+(it>>>16)|0;Q=((pt(n,A)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(u,A)|0)+(J>>>16)|0)+(Q>>>16)|0;H=Q<<16|Z&0xffff;Z=((pt(n,C)|0)+(z&0xffff)|0)+(it&0xffff)|0;J=((pt(u,C)|0)+(z>>>16)|0)+(it>>>16)|0;Q=((pt(n,R)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(u,R)|0)+(J>>>16)|0)+(Q>>>16)|0;z=Q<<16|Z&0xffff;Z=((pt(n,S)|0)+(V&0xffff)|0)+(it&0xffff)|0;J=((pt(u,S)|0)+(V>>>16)|0)+(it>>>16)|0;Q=((pt(n,N)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(u,N)|0)+(J>>>16)|0)+(Q>>>16)|0;V=Q<<16|Z&0xffff;Z=((pt(n,T)|0)+(G&0xffff)|0)+(it&0xffff)|0;J=((pt(u,T)|0)+(G>>>16)|0)+(it>>>16)|0;Q=((pt(n,F)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(u,F)|0)+(J>>>16)|0)+(Q>>>16)|0;G=Q<<16|Z&0xffff;Z=((pt(n,I)|0)+(W&0xffff)|0)+(it&0xffff)|0;J=((pt(u,I)|0)+(W>>>16)|0)+(it>>>16)|0;Q=((pt(n,P)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(u,P)|0)+(J>>>16)|0)+(Q>>>16)|0;W=Q<<16|Z&0xffff;j=it;Z=((pt(r,v)|0)+(B&0xffff)|0)+(U&0xffff)|0;J=((pt(f,v)|0)+(B>>>16)|0)+(U>>>16)|0;Q=((pt(r,k)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(f,k)|0)+(J>>>16)|0)+(Q>>>16)|0;B=Q<<16|Z&0xffff;Z=((pt(r,y)|0)+(_&0xffff)|0)+(it&0xffff)|0;J=((pt(f,y)|0)+(_>>>16)|0)+(it>>>16)|0;Q=((pt(r,M)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(f,M)|0)+(J>>>16)|0)+(Q>>>16)|0;_=Q<<16|Z&0xffff;Z=((pt(r,b)|0)+(H&0xffff)|0)+(it&0xffff)|0;J=((pt(f,b)|0)+(H>>>16)|0)+(it>>>16)|0;Q=((pt(r,D)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(f,D)|0)+(J>>>16)|0)+(Q>>>16)|0;H=Q<<16|Z&0xffff;Z=((pt(r,w)|0)+(z&0xffff)|0)+(it&0xffff)|0;J=((pt(f,w)|0)+(z>>>16)|0)+(it>>>16)|0;Q=((pt(r,A)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(f,A)|0)+(J>>>16)|0)+(Q>>>16)|0;z=Q<<16|Z&0xffff;Z=((pt(r,C)|0)+(V&0xffff)|0)+(it&0xffff)|0;J=((pt(f,C)|0)+(V>>>16)|0)+(it>>>16)|0;Q=((pt(r,R)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(f,R)|0)+(J>>>16)|0)+(Q>>>16)|0;V=Q<<16|Z&0xffff;Z=((pt(r,S)|0)+(G&0xffff)|0)+(it&0xffff)|0;J=((pt(f,S)|0)+(G>>>16)|0)+(it>>>16)|0;Q=((pt(r,N)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(f,N)|0)+(J>>>16)|0)+(Q>>>16)|0;G=Q<<16|Z&0xffff;Z=((pt(r,T)|0)+(W&0xffff)|0)+(it&0xffff)|0;J=((pt(f,T)|0)+(W>>>16)|0)+(it>>>16)|0;Q=((pt(r,F)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(f,F)|0)+(J>>>16)|0)+(Q>>>16)|0;W=Q<<16|Z&0xffff;Z=((pt(r,I)|0)+(j&0xffff)|0)+(it&0xffff)|0;J=((pt(f,I)|0)+(j>>>16)|0)+(it>>>16)|0;Q=((pt(r,P)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(f,P)|0)+(J>>>16)|0)+(Q>>>16)|0;j=Q<<16|Z&0xffff;U=it;Z=((pt(o,v)|0)+(_&0xffff)|0)+(q&0xffff)|0;J=((pt(p,v)|0)+(_>>>16)|0)+(q>>>16)|0;Q=((pt(o,k)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(p,k)|0)+(J>>>16)|0)+(Q>>>16)|0;_=Q<<16|Z&0xffff;Z=((pt(o,y)|0)+(H&0xffff)|0)+(it&0xffff)|0;J=((pt(p,y)|0)+(H>>>16)|0)+(it>>>16)|0;Q=((pt(o,M)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(p,M)|0)+(J>>>16)|0)+(Q>>>16)|0;H=Q<<16|Z&0xffff;Z=((pt(o,b)|0)+(z&0xffff)|0)+(it&0xffff)|0;J=((pt(p,b)|0)+(z>>>16)|0)+(it>>>16)|0;Q=((pt(o,D)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(p,D)|0)+(J>>>16)|0)+(Q>>>16)|0;z=Q<<16|Z&0xffff;Z=((pt(o,w)|0)+(V&0xffff)|0)+(it&0xffff)|0;J=((pt(p,w)|0)+(V>>>16)|0)+(it>>>16)|0;Q=((pt(o,A)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(p,A)|0)+(J>>>16)|0)+(Q>>>16)|0;V=Q<<16|Z&0xffff;Z=((pt(o,C)|0)+(G&0xffff)|0)+(it&0xffff)|0;J=((pt(p,C)|0)+(G>>>16)|0)+(it>>>16)|0;Q=((pt(o,R)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(p,R)|0)+(J>>>16)|0)+(Q>>>16)|0;G=Q<<16|Z&0xffff;Z=((pt(o,S)|0)+(W&0xffff)|0)+(it&0xffff)|0;J=((pt(p,S)|0)+(W>>>16)|0)+(it>>>16)|0;Q=((pt(o,N)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(p,N)|0)+(J>>>16)|0)+(Q>>>16)|0;W=Q<<16|Z&0xffff;Z=((pt(o,T)|0)+(j&0xffff)|0)+(it&0xffff)|0;J=((pt(p,T)|0)+(j>>>16)|0)+(it>>>16)|0;Q=((pt(o,F)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(p,F)|0)+(J>>>16)|0)+(Q>>>16)|0;j=Q<<16|Z&0xffff;Z=((pt(o,I)|0)+(U&0xffff)|0)+(it&0xffff)|0;J=((pt(p,I)|0)+(U>>>16)|0)+(it>>>16)|0;Q=((pt(o,P)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(p,P)|0)+(J>>>16)|0)+(Q>>>16)|0;U=Q<<16|Z&0xffff;q=it;Z=((pt(a,v)|0)+(H&0xffff)|0)+(X&0xffff)|0;J=((pt(m,v)|0)+(H>>>16)|0)+(X>>>16)|0;Q=((pt(a,k)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(m,k)|0)+(J>>>16)|0)+(Q>>>16)|0;H=Q<<16|Z&0xffff;Z=((pt(a,y)|0)+(z&0xffff)|0)+(it&0xffff)|0;J=((pt(m,y)|0)+(z>>>16)|0)+(it>>>16)|0;Q=((pt(a,M)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(m,M)|0)+(J>>>16)|0)+(Q>>>16)|0;z=Q<<16|Z&0xffff;Z=((pt(a,b)|0)+(V&0xffff)|0)+(it&0xffff)|0;J=((pt(m,b)|0)+(V>>>16)|0)+(it>>>16)|0;Q=((pt(a,D)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(m,D)|0)+(J>>>16)|0)+(Q>>>16)|0;V=Q<<16|Z&0xffff;Z=((pt(a,w)|0)+(G&0xffff)|0)+(it&0xffff)|0;J=((pt(m,w)|0)+(G>>>16)|0)+(it>>>16)|0;Q=((pt(a,A)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(m,A)|0)+(J>>>16)|0)+(Q>>>16)|0;G=Q<<16|Z&0xffff;Z=((pt(a,C)|0)+(W&0xffff)|0)+(it&0xffff)|0;J=((pt(m,C)|0)+(W>>>16)|0)+(it>>>16)|0;Q=((pt(a,R)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(m,R)|0)+(J>>>16)|0)+(Q>>>16)|0;W=Q<<16|Z&0xffff;Z=((pt(a,S)|0)+(j&0xffff)|0)+(it&0xffff)|0;J=((pt(m,S)|0)+(j>>>16)|0)+(it>>>16)|0;Q=((pt(a,N)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(m,N)|0)+(J>>>16)|0)+(Q>>>16)|0;j=Q<<16|Z&0xffff;Z=((pt(a,T)|0)+(U&0xffff)|0)+(it&0xffff)|0;J=((pt(m,T)|0)+(U>>>16)|0)+(it>>>16)|0;Q=((pt(a,F)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(m,F)|0)+(J>>>16)|0)+(Q>>>16)|0;U=Q<<16|Z&0xffff;Z=((pt(a,I)|0)+(q&0xffff)|0)+(it&0xffff)|0;J=((pt(m,I)|0)+(q>>>16)|0)+(it>>>16)|0;Q=((pt(a,P)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(m,P)|0)+(J>>>16)|0)+(Q>>>16)|0;q=Q<<16|Z&0xffff;X=it;Z=((pt(l,v)|0)+(z&0xffff)|0)+(Y&0xffff)|0;J=((pt(g,v)|0)+(z>>>16)|0)+(Y>>>16)|0;Q=((pt(l,k)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(g,k)|0)+(J>>>16)|0)+(Q>>>16)|0;z=Q<<16|Z&0xffff;Z=((pt(l,y)|0)+(V&0xffff)|0)+(it&0xffff)|0;J=((pt(g,y)|0)+(V>>>16)|0)+(it>>>16)|0;Q=((pt(l,M)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(g,M)|0)+(J>>>16)|0)+(Q>>>16)|0;V=Q<<16|Z&0xffff;Z=((pt(l,b)|0)+(G&0xffff)|0)+(it&0xffff)|0;J=((pt(g,b)|0)+(G>>>16)|0)+(it>>>16)|0;Q=((pt(l,D)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(g,D)|0)+(J>>>16)|0)+(Q>>>16)|0;G=Q<<16|Z&0xffff;Z=((pt(l,w)|0)+(W&0xffff)|0)+(it&0xffff)|0;J=((pt(g,w)|0)+(W>>>16)|0)+(it>>>16)|0;Q=((pt(l,A)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(g,A)|0)+(J>>>16)|0)+(Q>>>16)|0;W=Q<<16|Z&0xffff;Z=((pt(l,C)|0)+(j&0xffff)|0)+(it&0xffff)|0;J=((pt(g,C)|0)+(j>>>16)|0)+(it>>>16)|0;Q=((pt(l,R)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(g,R)|0)+(J>>>16)|0)+(Q>>>16)|0;j=Q<<16|Z&0xffff;Z=((pt(l,S)|0)+(U&0xffff)|0)+(it&0xffff)|0;J=((pt(g,S)|0)+(U>>>16)|0)+(it>>>16)|0;Q=((pt(l,N)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(g,N)|0)+(J>>>16)|0)+(Q>>>16)|0;U=Q<<16|Z&0xffff;Z=((pt(l,T)|0)+(q&0xffff)|0)+(it&0xffff)|0;J=((pt(g,T)|0)+(q>>>16)|0)+(it>>>16)|0;Q=((pt(l,F)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(g,F)|0)+(J>>>16)|0)+(Q>>>16)|0;q=Q<<16|Z&0xffff;Z=((pt(l,I)|0)+(X&0xffff)|0)+(it&0xffff)|0;J=((pt(g,I)|0)+(X>>>16)|0)+(it>>>16)|0;Q=((pt(l,P)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(g,P)|0)+(J>>>16)|0)+(Q>>>16)|0;X=Q<<16|Z&0xffff;Y=it;Z=((pt(d,v)|0)+(V&0xffff)|0)+($&0xffff)|0;J=((pt(x,v)|0)+(V>>>16)|0)+($>>>16)|0;Q=((pt(d,k)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(x,k)|0)+(J>>>16)|0)+(Q>>>16)|0;V=Q<<16|Z&0xffff;Z=((pt(d,y)|0)+(G&0xffff)|0)+(it&0xffff)|0;J=((pt(x,y)|0)+(G>>>16)|0)+(it>>>16)|0;Q=((pt(d,M)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(x,M)|0)+(J>>>16)|0)+(Q>>>16)|0;G=Q<<16|Z&0xffff;Z=((pt(d,b)|0)+(W&0xffff)|0)+(it&0xffff)|0;J=((pt(x,b)|0)+(W>>>16)|0)+(it>>>16)|0;Q=((pt(d,D)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(x,D)|0)+(J>>>16)|0)+(Q>>>16)|0;W=Q<<16|Z&0xffff;Z=((pt(d,w)|0)+(j&0xffff)|0)+(it&0xffff)|0;J=((pt(x,w)|0)+(j>>>16)|0)+(it>>>16)|0;Q=((pt(d,A)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(x,A)|0)+(J>>>16)|0)+(Q>>>16)|0;j=Q<<16|Z&0xffff;Z=((pt(d,C)|0)+(U&0xffff)|0)+(it&0xffff)|0;J=((pt(x,C)|0)+(U>>>16)|0)+(it>>>16)|0;Q=((pt(d,R)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(x,R)|0)+(J>>>16)|0)+(Q>>>16)|0;U=Q<<16|Z&0xffff;Z=((pt(d,S)|0)+(q&0xffff)|0)+(it&0xffff)|0;J=((pt(x,S)|0)+(q>>>16)|0)+(it>>>16)|0;Q=((pt(d,N)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(x,N)|0)+(J>>>16)|0)+(Q>>>16)|0;q=Q<<16|Z&0xffff;Z=((pt(d,T)|0)+(X&0xffff)|0)+(it&0xffff)|0;J=((pt(x,T)|0)+(X>>>16)|0)+(it>>>16)|0;Q=((pt(d,F)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(x,F)|0)+(J>>>16)|0)+(Q>>>16)|0;X=Q<<16|Z&0xffff;Z=((pt(d,I)|0)+(Y&0xffff)|0)+(it&0xffff)|0;J=((pt(x,I)|0)+(Y>>>16)|0)+(it>>>16)|0;Q=((pt(d,P)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(x,P)|0)+(J>>>16)|0)+(Q>>>16)|0;Y=Q<<16|Z&0xffff;$=it;Z=((pt(h,v)|0)+(G&0xffff)|0)+(K&0xffff)|0;J=((pt(E,v)|0)+(G>>>16)|0)+(K>>>16)|0;Q=((pt(h,k)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(E,k)|0)+(J>>>16)|0)+(Q>>>16)|0;G=Q<<16|Z&0xffff;Z=((pt(h,y)|0)+(W&0xffff)|0)+(it&0xffff)|0;J=((pt(E,y)|0)+(W>>>16)|0)+(it>>>16)|0;Q=((pt(h,M)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(E,M)|0)+(J>>>16)|0)+(Q>>>16)|0;W=Q<<16|Z&0xffff;Z=((pt(h,b)|0)+(j&0xffff)|0)+(it&0xffff)|0;J=((pt(E,b)|0)+(j>>>16)|0)+(it>>>16)|0;Q=((pt(h,D)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(E,D)|0)+(J>>>16)|0)+(Q>>>16)|0;j=Q<<16|Z&0xffff;Z=((pt(h,w)|0)+(U&0xffff)|0)+(it&0xffff)|0;J=((pt(E,w)|0)+(U>>>16)|0)+(it>>>16)|0;Q=((pt(h,A)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(E,A)|0)+(J>>>16)|0)+(Q>>>16)|0;U=Q<<16|Z&0xffff;Z=((pt(h,C)|0)+(q&0xffff)|0)+(it&0xffff)|0;J=((pt(E,C)|0)+(q>>>16)|0)+(it>>>16)|0;Q=((pt(h,R)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(E,R)|0)+(J>>>16)|0)+(Q>>>16)|0;q=Q<<16|Z&0xffff;Z=((pt(h,S)|0)+(X&0xffff)|0)+(it&0xffff)|0;J=((pt(E,S)|0)+(X>>>16)|0)+(it>>>16)|0;Q=((pt(h,N)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(E,N)|0)+(J>>>16)|0)+(Q>>>16)|0;X=Q<<16|Z&0xffff;Z=((pt(h,T)|0)+(Y&0xffff)|0)+(it&0xffff)|0;J=((pt(E,T)|0)+(Y>>>16)|0)+(it>>>16)|0;Q=((pt(h,F)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(E,F)|0)+(J>>>16)|0)+(Q>>>16)|0;Y=Q<<16|Z&0xffff;Z=((pt(h,I)|0)+($&0xffff)|0)+(it&0xffff)|0;J=((pt(E,I)|0)+($>>>16)|0)+(it>>>16)|0;Q=((pt(h,P)|0)+(J&0xffff)|0)+(Z>>>16)|0;it=((pt(E,P)|0)+(J>>>16)|0)+(Q>>>16)|0;$=Q<<16|Z&0xffff;K=it;dt=nt+(at+lt|0)|0;st=ft[ut+dt>>2]|0;Z=((st&0xffff)+((O&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(O>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16;dt=dt+4|0;st=ft[ut+dt>>2]|0;Z=((st&0xffff)+((L&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(L>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16;dt=dt+4|0;st=ft[ut+dt>>2]|0;Z=((st&0xffff)+((B&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(B>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16;dt=dt+4|0;st=ft[ut+dt>>2]|0;Z=((st&0xffff)+((_&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(_>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16;dt=dt+4|0;st=ft[ut+dt>>2]|0;Z=((st&0xffff)+((H&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(H>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16;dt=dt+4|0;st=ft[ut+dt>>2]|0;Z=((st&0xffff)+((z&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(z>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16;dt=dt+4|0;st=ft[ut+dt>>2]|0;Z=((st&0xffff)+((V&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(V>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16;dt=dt+4|0;st=ft[ut+dt>>2]|0;Z=((st&0xffff)+((G&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(G>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16}dt=nt+(at+lt|0)|0;st=ft[ut+dt>>2]|0;Z=(((st&0xffff)+((W&0xffff)<<1)|0)+tt|0)+et|0;Q=((st>>>16)+(W>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16;dt=dt+4|0;st=ft[ut+dt>>2]|0;Z=((st&0xffff)+((j&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(j>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16;dt=dt+4|0;st=ft[ut+dt>>2]|0;Z=((st&0xffff)+((U&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(U>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16;dt=dt+4|0;st=ft[ut+dt>>2]|0;Z=((st&0xffff)+((q&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(q>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16;dt=dt+4|0;st=ft[ut+dt>>2]|0;Z=((st&0xffff)+((X&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(X>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16;dt=dt+4|0;st=ft[ut+dt>>2]|0;Z=((st&0xffff)+((Y&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(Y>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16;dt=dt+4|0;st=ft[ut+dt>>2]|0;Z=((st&0xffff)+(($&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+($>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;tt=Q>>>16;dt=dt+4|0;st=ft[ut+dt>>2]|0;Z=((st&0xffff)+((K&0xffff)<<1)|0)+tt|0;Q=((st>>>16)+(K>>>16<<1)|0)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;et=Q>>>16}for(dt=dt+4|0;!!et&(dt|0)<rt<<1;dt=dt+4|0){st=ft[ut+dt>>2]|0;Z=(st&0xffff)+et|0;Q=(st>>>16)+(Z>>>16)|0;ft[ut+dt>>2]=Q<<16|Z&0xffff;et=Q>>>16}}}}function I(t,e,i,s,n){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;var r=0,o=0,a=0,l=0,d=0,h=0,c=0,u=0,f=0,p=0,m=0,g=0,x=0,E=0,v=0,y=0,b=0,w=0,C=0;for(b=e-1&-4;(b|0)>=0;b=b-4|0){r=ft[t+b>>2]|0;if(r){e=b;break}}for(b=s-1&-4;(b|0)>=0;b=b-4|0){o=ft[i+b>>2]|0;if(o){s=b;break}}while((o&0x80000000)==0){o=o<<1;a=a+1|0}d=ft[t+e>>2]|0;if(a){l=d>>>(32-a|0);for(b=e-4|0;(b|0)>=0;b=b-4|0){r=ft[t+b>>2]|0;ft[t+b+4>>2]=d<<a|(a?r>>>(32-a|0):0);d=r}ft[t>>2]=d<<a}if(a){h=ft[i+s>>2]|0;for(b=s-4|0;(b|0)>=0;b=b-4|0){o=ft[i+b>>2]|0;ft[i+b+4>>2]=h<<a|o>>>(32-a|0);h=o}ft[i>>2]=h<<a}h=ft[i+s>>2]|0;c=h>>>16,u=h&0xffff;for(b=e;(b|0)>=(s|0);b=b-4|0){w=b-s|0;d=ft[t+b>>2]|0;f=(l>>>0)/(c>>>0)|0,m=(l>>>0)%(c>>>0)|0,x=pt(f,u)|0;while((f|0)==0x10000|x>>>0>(m<<16|d>>>16)>>>0){f=f-1|0,m=m+c|0,x=x-u|0;if((m|0)>=0x10000)break}v=0,y=0;for(C=0;(C|0)<=(s|0);C=C+4|0){o=ft[i+C>>2]|0;x=(pt(f,o&0xffff)|0)+(v>>>16)|0;E=(pt(f,o>>>16)|0)+(x>>>16)|0;o=v&0xffff|x<<16;v=E;r=ft[t+w+C>>2]|0;x=((r&0xffff)-(o&0xffff)|0)+y|0;E=((r>>>16)-(o>>>16)|0)+(x>>16)|0;ft[t+w+C>>2]=E<<16|x&0xffff;y=E>>16}x=((l&0xffff)-(v&0xffff)|0)+y|0;E=((l>>>16)-(v>>>16)|0)+(x>>16)|0;l=E<<16|x&0xffff;y=E>>16;if(y){f=f-1|0;y=0;for(C=0;(C|0)<=(s|0);C=C+4|0){o=ft[i+C>>2]|0;r=ft[t+w+C>>2]|0;x=(r&0xffff)+y|0;E=(r>>>16)+o+(x>>>16)|0;ft[t+w+C>>2]=E<<16|x&0xffff;y=E>>>16}l=l+y|0}d=ft[t+b>>2]|0;r=l<<16|d>>>16;p=(r>>>0)/(c>>>0)|0,g=(r>>>0)%(c>>>0)|0,x=pt(p,u)|0;while((p|0)==0x10000|x>>>0>(g<<16|d&0xffff)>>>0){p=p-1|0,g=g+c|0,x=x-u|0;if((g|0)>=0x10000)break}v=0,y=0;for(C=0;(C|0)<=(s|0);C=C+4|0){o=ft[i+C>>2]|0;x=(pt(p,o&0xffff)|0)+(v&0xffff)|0;E=((pt(p,o>>>16)|0)+(x>>>16)|0)+(v>>>16)|0;o=x&0xffff|E<<16;v=E>>>16;r=ft[t+w+C>>2]|0;x=((r&0xffff)-(o&0xffff)|0)+y|0;E=((r>>>16)-(o>>>16)|0)+(x>>16)|0;y=E>>16;ft[t+w+C>>2]=E<<16|x&0xffff}x=((l&0xffff)-(v&0xffff)|0)+y|0;E=((l>>>16)-(v>>>16)|0)+(x>>16)|0;y=E>>16;if(y){p=p-1|0;y=0;for(C=0;(C|0)<=(s|0);C=C+4|0){o=ft[i+C>>2]|0;r=ft[t+w+C>>2]|0;x=((r&0xffff)+(o&0xffff)|0)+y|0;E=((r>>>16)+(o>>>16)|0)+(x>>>16)|0;y=E>>>16;ft[t+w+C>>2]=x&0xffff|E<<16}}ft[n+w>>2]=f<<16|p;l=ft[t+b>>2]|0}if(a){d=ft[t>>2]|0;for(b=4;(b|0)<=(s|0);b=b+4|0){r=ft[t+b>>2]|0;ft[t+b-4>>2]=r<<(32-a|0)|d>>>a;d=r}ft[t+s>>2]=d>>>a}}function k(t,e,i,s,n,r){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;r=r|0;var o=0,a=0,l=0,d=0,h=0,c=0,u=0,f=0,p=0,m=0,g=0,x=0,E=0,v=0;o=y(s<<1)|0;C(s<<1,0,o);w(e,t,o);for(x=0;(x|0)<(s|0);x=x+4|0){l=ft[o+x>>2]|0,d=l&0xffff,l=l>>>16;c=n>>>16,h=n&0xffff;u=pt(d,h)|0,f=((pt(d,c)|0)+(pt(l,h)|0)|0)+(u>>>16)|0;d=u&0xffff,l=f&0xffff;g=0;for(E=0;(E|0)<(s|0);E=E+4|0){v=x+E|0;c=ft[i+E>>2]|0,h=c&0xffff,c=c>>>16;m=ft[o+v>>2]|0;u=((pt(d,h)|0)+(g&0xffff)|0)+(m&0xffff)|0;f=((pt(d,c)|0)+(g>>>16)|0)+(m>>>16)|0;p=((pt(l,h)|0)+(f&0xffff)|0)+(u>>>16)|0;g=((pt(l,c)|0)+(p>>>16)|0)+(f>>>16)|0;m=p<<16|u&0xffff;ft[o+v>>2]=m}v=x+E|0;m=ft[o+v>>2]|0;u=((m&0xffff)+(g&0xffff)|0)+a|0;f=((m>>>16)+(g>>>16)|0)+(u>>>16)|0;ft[o+v>>2]=f<<16|u&0xffff;a=f>>>16}w(s,o+s|0,r);b(s<<1);if(a|(S(i,s,r,s)|0)<=0)T(r,s,i,s,r,s)|0}return{sreset:n,salloc:y,sfree:b,z:C,tst:r,neg:d,cmp:S,add:u,sub:T,mul:dt,sqr:mt,div:I,mredc:k}}function tt(t,e){var i=t.sign,s=e.sign;i<0&&(t=t.negate()),s<0&&(e=e.negate());var n,r=t.compare(e);r<0&&(l=t,t=e,e=l,n=i,i=s,s=n);for(var o,a,l,d=lt.ONE,h=lt.ZERO,c=e.bitLength,u=lt.ZERO,f=lt.ONE,p=t.bitLength,m=t.divide(e);(o=m.remainder)!==lt.ZERO;)a=m.quotient,m=d.subtract(a.multiply(h).clamp(c)).clamp(c),d=h,h=m,m=u.subtract(a.multiply(f).clamp(p)).clamp(p),u=f,f=m,m=(t=e).divide(e=o);return i<0&&(h=h.negate()),s<0&&(f=f.negate()),r<0&&(l=h,h=f,f=l),{gcd:e,x:h,y:f}}function et(t){if("undefined"==typeof process)if(window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(t);else if(self.crypto&&self.crypto.getRandomValues)self.crypto.getRandomValues(t);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)throw new Error("No secure random number generator available.");window.msCrypto.getRandomValues(t)}else{var e=require("crypto").randomBytes(t.length);t.set(e)}}var it,st,nt=(it=function(t,e){return(it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}it(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),rt={Uint32Array:Uint32Array,Math:Math},ot=new Uint32Array(1048576);void 0===rt.Math.imul?(rt.Math.imul=function(t,e){return t*e|0},st=Q(rt,0,ot.buffer),delete rt.Math.imul):st=Q(rt,0,ot.buffer);var at=new Uint32Array(0),lt=(dt.fromString=function(t){return new dt(s(t))},dt.fromNumber=function(t){var e=at,i=0,s=Math.abs(t),i=4294967295<s?((e=new Uint32Array(2))[0]=0|s,e[1]=s/4294967296|0,52):0<s?((e=new Uint32Array(1))[0]=s,32):(e=at,0);return dt.fromConfig({limbs:e,bitLength:i,sign:t<0?-1:1})},dt.fromArrayBuffer=function(t){return new dt(new Uint8Array(t))},dt.fromConfig=function(t){var e=new dt;return e.limbs=new Uint32Array(t.limbs),e.bitLength=t.bitLength,e.sign=t.sign,e},dt.prototype.toString=function(t){var e=this.limbs,i=this.bitLength,s="";if(16!==(t=t||16))throw new g("bad radix");for(var n=(i+31>>5)-1;0<=n;n--){var r=e[n].toString(16);s+="00000000".substr(r.length),s+=r}return(s=s.replace(/^0+/,"")).length||(s="0"),s=this.sign<0?"-"+s:s},dt.prototype.toBytes=function(){var t=this.bitLength,e=this.limbs;if(0===t)return new Uint8Array(0);for(var i=t+7>>3,s=new Uint8Array(i),n=0;n<i;n++){var r=i-n-1;s[n]=e[r>>2]>>((3&r)<<3)}return s},dt.prototype.valueOf=function(){var t=this.limbs,e=this.bitLength,i=this.sign;if(!i)return 0;if(e<=32)return i*(t[0]>>>0);if(e<=52)return i*(4294967296*(t[1]>>>0)+(t[0]>>>0));for(var s,n=0,r=t.length-1;0<=r;r--)if(0!==(s=t[r])){for(;0==(s<<n&2147483648);)n++;break}return 0===r?i*(t[0]>>>0):i*(1048576*((t[r]<<n|(n?t[r-1]>>>32-n:0))>>>0)+((t[r-1]<<n|(n&&1<r?t[r-2]>>>32-n:0))>>>12))*Math.pow(2,32*r-n-52)},dt.prototype.clamp=function(t){var e=this.limbs;if(this.bitLength<=t)return this;var i=new dt,s=t+31>>5,n=t%32;return i.limbs=new Uint32Array(e.subarray(0,s)),i.bitLength=t,i.sign=this.sign,n&&(i.limbs[s-1]&=-1>>>32-n),i},dt.prototype.slice=function(t,e){var i=this.limbs,s=this.bitLength;if(t<0)throw new RangeError("TODO");if(s<=t)return dt.ZERO;(void 0===e||s-t<e)&&(e=s-t);var n=new dt,r=t>>5,o=t+e+31>>5,s=e+31>>5,a=t%32,t=e%32,l=new Uint32Array(s);if(a){for(var d=0;d<o-r-1;d++)l[d]=i[r+d]>>>a|i[r+d+1]<<32-a;l[d]=i[r+d]>>>a}else l.set(i.subarray(r,o));return t&&(l[s-1]&=-1>>>32-t),n.limbs=l,n.bitLength=e,n.sign=this.sign,n},dt.prototype.negate=function(){var t=new dt;return t.limbs=this.limbs,t.bitLength=this.bitLength,t.sign=-1*this.sign,t},dt.prototype.compare=function(t){var e=this.limbs,i=e.length,s=t.limbs,n=s.length;return this.sign<t.sign?-1:this.sign>t.sign?1:(ot.set(e,0),ot.set(s,i),st.cmp(0,i<<2,i<<2,n<<2)*this.sign)},dt.prototype.add=function(t){if(!this.sign)return t;if(!t.sign)return this;var e,i=this.bitLength,s=this.limbs,n=s.length,r=this.sign,o=t.bitLength,a=t.limbs,l=a.length,d=t.sign,h=new dt,c=(o<i?i:o)+(0<r*d?1:0),u=c+31>>5;st.sreset();t=st.salloc(n<<2),i=st.salloc(l<<2),o=st.salloc(u<<2);return st.z(o-t+(u<<2),0,t),ot.set(s,t>>2),ot.set(a,i>>2),d=0<r*d?(st.add(t,n<<2,i,l<<2,o,u<<2),r):d<r?(e=st.sub(t,n<<2,i,l<<2,o,u<<2))?d:r:(e=st.sub(i,l<<2,t,n<<2,o,u<<2))?r:d,e&&st.neg(o,u<<2,o,u<<2),0===st.tst(o,u<<2)?dt.ZERO:(h.limbs=new Uint32Array(ot.subarray(o>>2,(o>>2)+u)),h.bitLength=c,h.sign=d,h)},dt.prototype.subtract=function(t){return this.add(t.negate())},dt.prototype.square=function(){if(!this.sign)return dt.ZERO;var t=this.bitLength,e=this.limbs,i=e.length,s=new dt,n=t<<1,r=31+n>>5;st.sreset();var o=st.salloc(i<<2),t=st.salloc(r<<2);return st.z(t-o+(r<<2),0,o),ot.set(e,o>>2),st.sqr(o,i<<2,t),s.limbs=new Uint32Array(ot.subarray(t>>2,(t>>2)+r)),s.bitLength=n,s.sign=1,s},dt.prototype.divide=function(t){var e=this.bitLength,i=this.limbs,s=i.length,n=t.bitLength,r=t.limbs,o=r.length,a=dt.ZERO,l=dt.ZERO;st.sreset();var d=st.salloc(s<<2),h=st.salloc(o<<2),c=st.salloc(s<<2);return st.z(c-d+(s<<2),0,d),ot.set(i,d>>2),ot.set(r,h>>2),st.div(d,s<<2,h,o<<2,c),(s=st.tst(c,s<<2)>>2)&&((a=new dt).limbs=new Uint32Array(ot.subarray(c>>2,(c>>2)+s)),a.bitLength=e<s<<5?e:s<<5,a.sign=this.sign*t.sign),(o=st.tst(d,o<<2)>>2)&&((l=new dt).limbs=new Uint32Array(ot.subarray(d>>2,(d>>2)+o)),l.bitLength=n<o<<5?n:o<<5,l.sign=this.sign),{quotient:a,remainder:l}},dt.prototype.multiply=function(t){if(!this.sign||!t.sign)return dt.ZERO;var e=this.bitLength,i=this.limbs,s=i.length,n=t.bitLength,r=t.limbs,o=r.length,a=new dt,l=e+n,d=l+31>>5;st.sreset();var h=st.salloc(s<<2),e=st.salloc(o<<2),n=st.salloc(d<<2);return st.z(n-h+(d<<2),0,h),ot.set(i,h>>2),ot.set(r,e>>2),st.mul(h,s<<2,e,o<<2,n,d<<2),a.limbs=new Uint32Array(ot.subarray(n>>2,(n>>2)+d)),a.sign=this.sign*t.sign,a.bitLength=l,a},dt.prototype.isMillerRabinProbablePrime=function(t){var e=0;for(--(i=dt.fromConfig(this)).limbs[0];0===i.limbs[e>>5];)e+=32;for(;0==(i.limbs[e>>5]>>(31&e)&1);)e++;for(var i=i.slice(e),s=new ct(this),n=this.subtract(dt.ONE),r=dt.fromConfig(this),o=this.limbs.length-1;0===r.limbs[o];)o--;for(;0<=--t;){for(et(r.limbs),r.limbs[0]<2&&(r.limbs[0]+=2);0<=r.compare(n);)r.limbs[o]>>>=1;var a=s.power(r,i);if(0!==a.compare(dt.ONE)&&0!==a.compare(n)){for(var l=e;0<--l;){if(0===(a=a.square().divide(s).remainder).compare(dt.ONE))return!1;if(0===a.compare(n))break}if(0===l)return!1}}return!0},dt.prototype.isProbablePrime=function(t){var e=this.limbs,i=0;if(0==(1&e[0]))return!1;if((t=void 0===t?80:t)<=1)return!0;for(var s=0,n=0,r=0,i=0;i<e.length;i++){for(var o=e[i];o;)s+=3&o,o>>>=2;for(var a=e[i];a;)n+=3&a,n-=3&(a>>>=2),a>>>=2;for(var l=e[i];l;)r+=15&l,r-=15&(l>>>=4),l>>>=4}return!!(s%3&&n%5&&r%17)&&(t<=2||this.isMillerRabinProbablePrime(t>>>1))},dt.extGCD=tt,dt.ZERO=dt.fromNumber(0),dt.ONE=dt.fromNumber(1),dt);function dt(t){var e=at,i=0,s=0;if(void 0!==t){for(var n=0;!t[n];n++);if(!(i=8*(t.length-n)))return dt.ZERO;for(var e=new Uint32Array(i+31>>5),r=t.length-4;n<=r;r-=4)e[t.length-4-r>>2]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3];n-r==3?e[e.length-1]=t[n]:n-r==2?e[e.length-1]=t[n]<<8|t[n+1]:n-r==1&&(e[e.length-1]=t[n]<<16|t[n+1]<<8|t[n+2]),s=1}this.limbs=e,this.bitLength=i,this.sign=s}var ht,ct=(nt(ut,ht=lt),ut.prototype.reduce=function(t){return t.bitLength<=32&&this.bitLength<=32?lt.fromNumber(t.valueOf()%this.valueOf()):t.compare(this)<0?t:t.divide(this).remainder},ut.prototype.inverse=function(t){t=this.reduce(t);t=tt(this,t);if(1!==t.gcd.valueOf())throw new Error("GCD is not 1");return t.y.sign<0?t.y.add(this).clamp(this.bitLength):t.y},ut.prototype.power=function(t,e){for(var i=0,s=0;s<e.limbs.length;s++)for(var n=e.limbs[s];n;)1&n&&i++,n>>>=1;var r=8;e.bitLength<=4536&&(r=7),e.bitLength<=1736&&(r=6),e.bitLength<=630&&(r=5),e.bitLength<=210&&(r=4),e.bitLength<=60&&(r=3),i<=1<<(r=e.bitLength<=12?2:r)-1&&(r=1),t=ut._Montgomery_reduce(this.reduce(t).multiply(this.comodulusRemainderSquare),this);var o=ut._Montgomery_reduce(t.square(),this),a=new Array(1<<r-1);a[0]=t,a[1]=ut._Montgomery_reduce(t.multiply(o),this);for(s=2;s<1<<r-1;s++)a[s]=ut._Montgomery_reduce(a[s-1].multiply(o),this);for(var l=this.comodulusRemainder,d=l,s=e.limbs.length-1;0<=s;s--)for(var n=e.limbs[s],h=32;0<h;)if(2147483648&n){for(var c=n>>>32-r,u=r;0==(1&c);)c>>>=1,u--;for(var f=a[c>>>1];c;)c>>>=1,d!==l&&(d=ut._Montgomery_reduce(d.square(),this));d=d!==l?ut._Montgomery_reduce(d.multiply(f),this):f,n<<=u,h-=u}else d!==l&&(d=ut._Montgomery_reduce(d.square(),this)),n<<=1,h--;return ut._Montgomery_reduce(d,this)},ut._Montgomery_reduce=function(t,e){var i=t.limbs,s=i.length,n=e.limbs,r=n.length,o=e.coefficient;st.sreset();var a=st.salloc(s<<2),l=st.salloc(r<<2),t=st.salloc(r<<2);st.z(t-a+(r<<2),0,a),ot.set(i,a>>2),ot.set(n,l>>2),st.mredc(a,s<<2,l,r<<2,o,t);o=new lt;return o.limbs=new Uint32Array(ot.subarray(t>>2,(t>>2)+r)),o.bitLength=e.bitLength,o.sign=1,o},ut);function ut(t){var e=ht.call(this)||this;if(e.limbs=t.limbs,e.bitLength=t.bitLength,e.sign=t.sign,e.valueOf()<1)throw new RangeError;if(e.bitLength<=32)return e;if(!(1&e.limbs[0]))return e;var i=1+(e.bitLength+31&-32),s=new Uint32Array(31+i>>5);s[s.length-1]=1,(t=new lt).sign=1,t.bitLength=i,t.limbs=s;s=function(t,e){var i,s,n,r,o=t<0?-1:1,a=e<0?-1:1,l=1,d=0,h=0,c=1;for((r=(t*=o)<(e*=a))&&(n=t,t=e,e=n,n=o,o=a,a=n),i=t-(s=Math.floor(t/e))*e;i;)n=l-s*d,l=d,d=n,n=h-s*c,h=c,c=n,t=e,e=i,i=t-(s=Math.floor(t/e))*e;return d*=o,c*=a,r&&(n=d,d=c,c=n),{gcd:e,x:d,y:c}}(4294967296,e.limbs[0]).y;return e.coefficient=s<0?-s:4294967296-s,e.comodulus=t,e.comodulusRemainder=t.divide(e).remainder,e.comodulusRemainderSquare=t.square().divide(e).remainder,e}ft.prototype.reset=function(){return this.result=null,this.pos=0,this.len=0,this.asm.reset(),this},ft.prototype.process=function(t){if(null!==this.result)throw new f("state must be reset before processing new data");for(var e,i=this.asm,s=this.heap,n=this.pos,r=this.len,o=0,a=t.length;0<a;)r+=e=m(s,n+r,t,o,a),o+=e,a-=e,n+=e=i.process(n,r),(r-=e)||(n=0);return this.pos=n,this.len=r,this},ft.prototype.finish=function(){if(null!==this.result)throw new f("state must be reset before processing new data");return this.asm.finish(this.pos,this.len,0),this.result=new Uint8Array(this.HASH_SIZE),this.result.set(this.heap.subarray(0,this.HASH_SIZE)),this.pos=0,this.len=0,this},d=ft;function ft(){this.pos=0,this.len=0}var pt,mt,rt=(pt=function(t,e){return(pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}pt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),gt=(rt(xt,mt=d),xt.NAME="sha1",xt);function xt(){var t=mt.call(this)||this;return t.NAME="sha1",t.BLOCK_SIZE=64,t.HASH_SIZE=20,t.heap=o(),t.asm=function(t,e){"use asm";var Ft=0,Pt=0,Ot=0,Lt=0,Bt=0,g=0,x=0;var E=0,v=0,y=0,b=0,w=0,C=0,S=0,T=0,I=0,k=0;var m=new t.Uint8Array(e);function _t(t,e,i,s,n,r,o,a,l,d,h,c,u,f,p,m){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;r=r|0;o=o|0;a=a|0;l=l|0;d=d|0;h=h|0;c=c|0;u=u|0;f=f|0;p=p|0;m=m|0;var g=0,x=0,E=0,v=0,y=0,b=0,w=0,C=0,S=0,T=0,I=0,k=0,M=0,D=0,A=0,R=0,N=0,F=0,P=0,O=0,L=0,B=0,_=0,H=0,z=0,V=0,G=0,W=0,j=0,U=0,q=0,X=0,Y=0,$=0,K=0,Z=0,J=0,Q=0,tt=0,et=0,it=0,st=0,nt=0,rt=0,ot=0,at=0,lt=0,dt=0,ht=0,ct=0,ut=0,ft=0,pt=0,mt=0,gt=0,xt=0,Et=0,vt=0,yt=0,bt=0,wt=0,Ct=0,St=0,Tt=0,It=0,kt=0,Mt=0,Dt=0,At=0,Rt=0,Nt=0;g=Ft;x=Pt;E=Ot;v=Lt;y=Bt;w=t+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;w=e+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;w=i+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;w=s+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;w=n+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;w=r+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;w=o+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;w=a+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;w=l+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;w=d+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;w=h+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;w=c+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;w=u+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;w=f+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;w=p+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;w=m+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=f^l^i^t;C=b<<1|b>>>31;w=C+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=p^d^s^e;S=b<<1|b>>>31;w=S+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=m^h^n^i;T=b<<1|b>>>31;w=T+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=C^c^r^s;I=b<<1|b>>>31;w=I+(g<<5|g>>>27)+y+(x&E|~x&v)+0x5a827999|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=S^u^o^n;k=b<<1|b>>>31;w=k+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=T^f^a^r;M=b<<1|b>>>31;w=M+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=I^p^l^o;D=b<<1|b>>>31;w=D+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=k^m^d^a;A=b<<1|b>>>31;w=A+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=M^C^h^l;R=b<<1|b>>>31;w=R+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=D^S^c^d;N=b<<1|b>>>31;w=N+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=A^T^u^h;F=b<<1|b>>>31;w=F+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=R^I^f^c;P=b<<1|b>>>31;w=P+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=N^k^p^u;O=b<<1|b>>>31;w=O+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=F^M^m^f;L=b<<1|b>>>31;w=L+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=P^D^C^p;B=b<<1|b>>>31;w=B+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=O^A^S^m;_=b<<1|b>>>31;w=_+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=L^R^T^C;H=b<<1|b>>>31;w=H+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=B^N^I^S;z=b<<1|b>>>31;w=z+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=_^F^k^T;V=b<<1|b>>>31;w=V+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=H^P^M^I;G=b<<1|b>>>31;w=G+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=z^O^D^k;W=b<<1|b>>>31;w=W+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=V^L^A^M;j=b<<1|b>>>31;w=j+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=G^B^R^D;U=b<<1|b>>>31;w=U+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=W^_^N^A;q=b<<1|b>>>31;w=q+(g<<5|g>>>27)+y+(x^E^v)+0x6ed9eba1|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=j^H^F^R;X=b<<1|b>>>31;w=X+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=U^z^P^N;Y=b<<1|b>>>31;w=Y+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=q^V^O^F;$=b<<1|b>>>31;w=$+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=X^G^L^P;K=b<<1|b>>>31;w=K+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=Y^W^B^O;Z=b<<1|b>>>31;w=Z+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=$^j^_^L;J=b<<1|b>>>31;w=J+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=K^U^H^B;Q=b<<1|b>>>31;w=Q+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=Z^q^z^_;tt=b<<1|b>>>31;w=tt+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=J^X^V^H;et=b<<1|b>>>31;w=et+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=Q^Y^G^z;it=b<<1|b>>>31;w=it+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=tt^$^W^V;st=b<<1|b>>>31;w=st+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=et^K^j^G;nt=b<<1|b>>>31;w=nt+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=it^Z^U^W;rt=b<<1|b>>>31;w=rt+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=st^J^q^j;ot=b<<1|b>>>31;w=ot+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=nt^Q^X^U;at=b<<1|b>>>31;w=at+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=rt^tt^Y^q;lt=b<<1|b>>>31;w=lt+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=ot^et^$^X;dt=b<<1|b>>>31;w=dt+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=at^it^K^Y;ht=b<<1|b>>>31;w=ht+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=lt^st^Z^$;ct=b<<1|b>>>31;w=ct+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=dt^nt^J^K;ut=b<<1|b>>>31;w=ut+(g<<5|g>>>27)+y+(x&E|x&v|E&v)-0x70e44324|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=ht^rt^Q^Z;ft=b<<1|b>>>31;w=ft+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=ct^ot^tt^J;pt=b<<1|b>>>31;w=pt+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=ut^at^et^Q;mt=b<<1|b>>>31;w=mt+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=ft^lt^it^tt;gt=b<<1|b>>>31;w=gt+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=pt^dt^st^et;xt=b<<1|b>>>31;w=xt+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=mt^ht^nt^it;Et=b<<1|b>>>31;w=Et+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=gt^ct^rt^st;vt=b<<1|b>>>31;w=vt+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=xt^ut^ot^nt;yt=b<<1|b>>>31;w=yt+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=Et^ft^at^rt;bt=b<<1|b>>>31;w=bt+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=vt^pt^lt^ot;wt=b<<1|b>>>31;w=wt+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=yt^mt^dt^at;Ct=b<<1|b>>>31;w=Ct+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=bt^gt^ht^lt;St=b<<1|b>>>31;w=St+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=wt^xt^ct^dt;Tt=b<<1|b>>>31;w=Tt+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=Ct^Et^ut^ht;It=b<<1|b>>>31;w=It+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=St^vt^ft^ct;kt=b<<1|b>>>31;w=kt+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=Tt^yt^pt^ut;Mt=b<<1|b>>>31;w=Mt+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=It^bt^mt^ft;Dt=b<<1|b>>>31;w=Dt+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=kt^wt^gt^pt;At=b<<1|b>>>31;w=At+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=Mt^Ct^xt^mt;Rt=b<<1|b>>>31;w=Rt+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;b=Dt^St^Et^gt;Nt=b<<1|b>>>31;w=Nt+(g<<5|g>>>27)+y+(x^E^v)-0x359d3e2a|0;y=v;v=E;E=x<<30|x>>>2;x=g;g=w;Ft=Ft+g|0;Pt=Pt+x|0;Ot=Ot+E|0;Lt=Lt+v|0;Bt=Bt+y|0}function r(t){t=t|0;_t(m[t|0]<<24|m[t|1]<<16|m[t|2]<<8|m[t|3],m[t|4]<<24|m[t|5]<<16|m[t|6]<<8|m[t|7],m[t|8]<<24|m[t|9]<<16|m[t|10]<<8|m[t|11],m[t|12]<<24|m[t|13]<<16|m[t|14]<<8|m[t|15],m[t|16]<<24|m[t|17]<<16|m[t|18]<<8|m[t|19],m[t|20]<<24|m[t|21]<<16|m[t|22]<<8|m[t|23],m[t|24]<<24|m[t|25]<<16|m[t|26]<<8|m[t|27],m[t|28]<<24|m[t|29]<<16|m[t|30]<<8|m[t|31],m[t|32]<<24|m[t|33]<<16|m[t|34]<<8|m[t|35],m[t|36]<<24|m[t|37]<<16|m[t|38]<<8|m[t|39],m[t|40]<<24|m[t|41]<<16|m[t|42]<<8|m[t|43],m[t|44]<<24|m[t|45]<<16|m[t|46]<<8|m[t|47],m[t|48]<<24|m[t|49]<<16|m[t|50]<<8|m[t|51],m[t|52]<<24|m[t|53]<<16|m[t|54]<<8|m[t|55],m[t|56]<<24|m[t|57]<<16|m[t|58]<<8|m[t|59],m[t|60]<<24|m[t|61]<<16|m[t|62]<<8|m[t|63])}function M(t){t=t|0;m[t|0]=Ft>>>24;m[t|1]=Ft>>>16&255;m[t|2]=Ft>>>8&255;m[t|3]=Ft&255;m[t|4]=Pt>>>24;m[t|5]=Pt>>>16&255;m[t|6]=Pt>>>8&255;m[t|7]=Pt&255;m[t|8]=Ot>>>24;m[t|9]=Ot>>>16&255;m[t|10]=Ot>>>8&255;m[t|11]=Ot&255;m[t|12]=Lt>>>24;m[t|13]=Lt>>>16&255;m[t|14]=Lt>>>8&255;m[t|15]=Lt&255;m[t|16]=Bt>>>24;m[t|17]=Bt>>>16&255;m[t|18]=Bt>>>8&255;m[t|19]=Bt&255}function D(){Ft=0x67452301;Pt=0xefcdab89;Ot=0x98badcfe;Lt=0x10325476;Bt=0xc3d2e1f0;g=x=0}function a(t,e,i,s,n,r,o){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;r=r|0;o=o|0;Ft=t;Pt=e;Ot=i;Lt=s;Bt=n;g=r;x=o}function o(t,e){t=t|0;e=e|0;var i=0;if(t&63)return-1;while((e|0)>=64){r(t);t=t+64|0;e=e-64|0;i=i+64|0}g=g+i|0;if(g>>>0<i>>>0)x=x+1|0;return i|0}function d(t,e,i){t=t|0;e=e|0;i=i|0;var s=0,n=0;if(t&63)return-1;if(~i)if(i&31)return-1;if((e|0)>=64){s=o(t,e)|0;if((s|0)==-1)return-1;t=t+s|0;e=e-s|0}s=s+e|0;g=g+e|0;if(g>>>0<e>>>0)x=x+1|0;m[t|e]=0x80;if((e|0)>=56){for(n=e+1|0;(n|0)<64;n=n+1|0)m[t|n]=0x00;r(t);e=0;m[t|0]=0}for(n=e+1|0;(n|0)<59;n=n+1|0)m[t|n]=0;m[t|56]=x>>>21&255;m[t|57]=x>>>13&255;m[t|58]=x>>>5&255;m[t|59]=x<<3&255|g>>>29;m[t|60]=g>>>21&255;m[t|61]=g>>>13&255;m[t|62]=g>>>5&255;m[t|63]=g<<3&255;r(t);if(~i)M(i);return s|0}function A(){Ft=E;Pt=v;Ot=y;Lt=b;Bt=w;g=64;x=0}function R(){Ft=C;Pt=S;Ot=T;Lt=I;Bt=k;g=64;x=0}function N(t,e,i,s,n,r,o,a,l,d,h,c,u,f,p,m){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;r=r|0;o=o|0;a=a|0;l=l|0;d=d|0;h=h|0;c=c|0;u=u|0;f=f|0;p=p|0;m=m|0;D();_t(t^0x5c5c5c5c,e^0x5c5c5c5c,i^0x5c5c5c5c,s^0x5c5c5c5c,n^0x5c5c5c5c,r^0x5c5c5c5c,o^0x5c5c5c5c,a^0x5c5c5c5c,l^0x5c5c5c5c,d^0x5c5c5c5c,h^0x5c5c5c5c,c^0x5c5c5c5c,u^0x5c5c5c5c,f^0x5c5c5c5c,p^0x5c5c5c5c,m^0x5c5c5c5c);C=Ft;S=Pt;T=Ot;I=Lt;k=Bt;D();_t(t^0x36363636,e^0x36363636,i^0x36363636,s^0x36363636,n^0x36363636,r^0x36363636,o^0x36363636,a^0x36363636,l^0x36363636,d^0x36363636,h^0x36363636,c^0x36363636,u^0x36363636,f^0x36363636,p^0x36363636,m^0x36363636);E=Ft;v=Pt;y=Ot;b=Lt;w=Bt;g=64;x=0}function F(t,e,i){t=t|0;e=e|0;i=i|0;var s=0,n=0,r=0,o=0,a=0,l=0;if(t&63)return-1;if(~i)if(i&31)return-1;l=d(t,e,-1)|0;s=Ft,n=Pt,r=Ot,o=Lt,a=Bt;R();_t(s,n,r,o,a,0x80000000,0,0,0,0,0,0,0,0,0,672);if(~i)M(i);return l|0}function P(t,e,i,s,n){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;var r=0,o=0,a=0,l=0,d=0,h=0,c=0,u=0,f=0,p=0;if(t&63)return-1;if(~n)if(n&31)return-1;m[t+e|0]=i>>>24;m[t+e+1|0]=i>>>16&255;m[t+e+2|0]=i>>>8&255;m[t+e+3|0]=i&255;F(t,e+4|0,-1)|0;r=h=Ft,o=c=Pt,a=u=Ot,l=f=Lt,d=p=Bt;s=s-1|0;while((s|0)>0){A();_t(h,c,u,f,p,0x80000000,0,0,0,0,0,0,0,0,0,672);h=Ft,c=Pt,u=Ot,f=Lt,p=Bt;R();_t(h,c,u,f,p,0x80000000,0,0,0,0,0,0,0,0,0,672);h=Ft,c=Pt,u=Ot,f=Lt,p=Bt;r=r^Ft;o=o^Pt;a=a^Ot;l=l^Lt;d=d^Bt;s=s-1|0}Ft=r;Pt=o;Ot=a;Lt=l;Bt=d;if(~n)M(n);return 0}return{reset:D,init:a,process:o,finish:d,hmac_reset:A,hmac_init:N,hmac_finish:F,pbkdf2_generate_block:P}}({Uint8Array:Uint8Array},t.heap.buffer),t.reset(),t}var Et,vt,nt=(Et=function(t,e){return(Et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Et(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),yt=(nt(bt,vt=d),bt.NAME="sha256",bt);function bt(){var t=vt.call(this)||this;return t.NAME="sha256",t.BLOCK_SIZE=64,t.HASH_SIZE=32,t.heap=o(),t.asm=function(t,e){"use asm";var S=0,T=0,I=0,k=0,M=0,D=0,A=0,R=0,g=0,x=0;var E=0,v=0,y=0,b=0,w=0,C=0,N=0,F=0,P=0,O=0,L=0,B=0,_=0,H=0,z=0,V=0;var G=new t.Uint8Array(e);function W(t,e,i,s,n,r,o,a,l,d,h,c,u,f,p,m){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;r=r|0;o=o|0;a=a|0;l=l|0;d=d|0;h=h|0;c=c|0;u=u|0;f=f|0;p=p|0;m=m|0;var g=0,x=0,E=0,v=0,y=0,b=0,w=0,C=0;g=S;x=T;E=I;v=k;y=M;b=D;w=A;C=R;C=t+C+(y>>>6^y>>>11^y>>>25^y<<26^y<<21^y<<7)+(w^y&(b^w))+0x428a2f98|0;v=v+C|0;C=C+(g&x^E&(g^x))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;w=e+w+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(b^v&(y^b))+0x71374491|0;E=E+w|0;w=w+(C&g^x&(C^g))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;b=i+b+(E>>>6^E>>>11^E>>>25^E<<26^E<<21^E<<7)+(y^E&(v^y))+0xb5c0fbcf|0;x=x+b|0;b=b+(w&C^g&(w^C))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;y=s+y+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(v^x&(E^v))+0xe9b5dba5|0;g=g+y|0;y=y+(b&w^C&(b^w))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;v=n+v+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(E^g&(x^E))+0x3956c25b|0;C=C+v|0;v=v+(y&b^w&(y^b))+(y>>>2^y>>>13^y>>>22^y<<30^y<<19^y<<10)|0;E=r+E+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(g^x))+0x59f111f1|0;w=w+E|0;E=E+(v&y^b&(v^y))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;x=o+x+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(g^w&(C^g))+0x923f82a4|0;b=b+x|0;x=x+(E&v^y&(E^v))+(E>>>2^E>>>13^E>>>22^E<<30^E<<19^E<<10)|0;g=a+g+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(C^b&(w^C))+0xab1c5ed5|0;y=y+g|0;g=g+(x&E^v&(x^E))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;C=l+C+(y>>>6^y>>>11^y>>>25^y<<26^y<<21^y<<7)+(w^y&(b^w))+0xd807aa98|0;v=v+C|0;C=C+(g&x^E&(g^x))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;w=d+w+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(b^v&(y^b))+0x12835b01|0;E=E+w|0;w=w+(C&g^x&(C^g))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;b=h+b+(E>>>6^E>>>11^E>>>25^E<<26^E<<21^E<<7)+(y^E&(v^y))+0x243185be|0;x=x+b|0;b=b+(w&C^g&(w^C))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;y=c+y+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(v^x&(E^v))+0x550c7dc3|0;g=g+y|0;y=y+(b&w^C&(b^w))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;v=u+v+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(E^g&(x^E))+0x72be5d74|0;C=C+v|0;v=v+(y&b^w&(y^b))+(y>>>2^y>>>13^y>>>22^y<<30^y<<19^y<<10)|0;E=f+E+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(g^x))+0x80deb1fe|0;w=w+E|0;E=E+(v&y^b&(v^y))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;x=p+x+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(g^w&(C^g))+0x9bdc06a7|0;b=b+x|0;x=x+(E&v^y&(E^v))+(E>>>2^E>>>13^E>>>22^E<<30^E<<19^E<<10)|0;g=m+g+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(C^b&(w^C))+0xc19bf174|0;y=y+g|0;g=g+(x&E^v&(x^E))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;t=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+t+d|0;C=t+C+(y>>>6^y>>>11^y>>>25^y<<26^y<<21^y<<7)+(w^y&(b^w))+0xe49b69c1|0;v=v+C|0;C=C+(g&x^E&(g^x))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;e=(i>>>7^i>>>18^i>>>3^i<<25^i<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+e+h|0;w=e+w+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(b^v&(y^b))+0xefbe4786|0;E=E+w|0;w=w+(C&g^x&(C^g))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;i=(s>>>7^s>>>18^s>>>3^s<<25^s<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+i+c|0;b=i+b+(E>>>6^E>>>11^E>>>25^E<<26^E<<21^E<<7)+(y^E&(v^y))+0x0fc19dc6|0;x=x+b|0;b=b+(w&C^g&(w^C))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;s=(n>>>7^n>>>18^n>>>3^n<<25^n<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+s+u|0;y=s+y+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(v^x&(E^v))+0x240ca1cc|0;g=g+y|0;y=y+(b&w^C&(b^w))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;n=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+n+f|0;v=n+v+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(E^g&(x^E))+0x2de92c6f|0;C=C+v|0;v=v+(y&b^w&(y^b))+(y>>>2^y>>>13^y>>>22^y<<30^y<<19^y<<10)|0;r=(o>>>7^o>>>18^o>>>3^o<<25^o<<14)+(s>>>17^s>>>19^s>>>10^s<<15^s<<13)+r+p|0;E=r+E+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(g^x))+0x4a7484aa|0;w=w+E|0;E=E+(v&y^b&(v^y))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;o=(a>>>7^a>>>18^a>>>3^a<<25^a<<14)+(n>>>17^n>>>19^n>>>10^n<<15^n<<13)+o+m|0;x=o+x+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(g^w&(C^g))+0x5cb0a9dc|0;b=b+x|0;x=x+(E&v^y&(E^v))+(E>>>2^E>>>13^E>>>22^E<<30^E<<19^E<<10)|0;a=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+a+t|0;g=a+g+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(C^b&(w^C))+0x76f988da|0;y=y+g|0;g=g+(x&E^v&(x^E))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;l=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(o>>>17^o>>>19^o>>>10^o<<15^o<<13)+l+e|0;C=l+C+(y>>>6^y>>>11^y>>>25^y<<26^y<<21^y<<7)+(w^y&(b^w))+0x983e5152|0;v=v+C|0;C=C+(g&x^E&(g^x))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;d=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(a>>>17^a>>>19^a>>>10^a<<15^a<<13)+d+i|0;w=d+w+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(b^v&(y^b))+0xa831c66d|0;E=E+w|0;w=w+(C&g^x&(C^g))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;h=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+h+s|0;b=h+b+(E>>>6^E>>>11^E>>>25^E<<26^E<<21^E<<7)+(y^E&(v^y))+0xb00327c8|0;x=x+b|0;b=b+(w&C^g&(w^C))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;c=(u>>>7^u>>>18^u>>>3^u<<25^u<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+c+n|0;y=c+y+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(v^x&(E^v))+0xbf597fc7|0;g=g+y|0;y=y+(b&w^C&(b^w))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;u=(f>>>7^f>>>18^f>>>3^f<<25^f<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+u+r|0;v=u+v+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(E^g&(x^E))+0xc6e00bf3|0;C=C+v|0;v=v+(y&b^w&(y^b))+(y>>>2^y>>>13^y>>>22^y<<30^y<<19^y<<10)|0;f=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(c>>>17^c>>>19^c>>>10^c<<15^c<<13)+f+o|0;E=f+E+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(g^x))+0xd5a79147|0;w=w+E|0;E=E+(v&y^b&(v^y))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;p=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(u>>>17^u>>>19^u>>>10^u<<15^u<<13)+p+a|0;x=p+x+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(g^w&(C^g))+0x06ca6351|0;b=b+x|0;x=x+(E&v^y&(E^v))+(E>>>2^E>>>13^E>>>22^E<<30^E<<19^E<<10)|0;m=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(f>>>17^f>>>19^f>>>10^f<<15^f<<13)+m+l|0;g=m+g+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(C^b&(w^C))+0x14292967|0;y=y+g|0;g=g+(x&E^v&(x^E))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;t=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+t+d|0;C=t+C+(y>>>6^y>>>11^y>>>25^y<<26^y<<21^y<<7)+(w^y&(b^w))+0x27b70a85|0;v=v+C|0;C=C+(g&x^E&(g^x))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;e=(i>>>7^i>>>18^i>>>3^i<<25^i<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+e+h|0;w=e+w+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(b^v&(y^b))+0x2e1b2138|0;E=E+w|0;w=w+(C&g^x&(C^g))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;i=(s>>>7^s>>>18^s>>>3^s<<25^s<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+i+c|0;b=i+b+(E>>>6^E>>>11^E>>>25^E<<26^E<<21^E<<7)+(y^E&(v^y))+0x4d2c6dfc|0;x=x+b|0;b=b+(w&C^g&(w^C))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;s=(n>>>7^n>>>18^n>>>3^n<<25^n<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+s+u|0;y=s+y+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(v^x&(E^v))+0x53380d13|0;g=g+y|0;y=y+(b&w^C&(b^w))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;n=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+n+f|0;v=n+v+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(E^g&(x^E))+0x650a7354|0;C=C+v|0;v=v+(y&b^w&(y^b))+(y>>>2^y>>>13^y>>>22^y<<30^y<<19^y<<10)|0;r=(o>>>7^o>>>18^o>>>3^o<<25^o<<14)+(s>>>17^s>>>19^s>>>10^s<<15^s<<13)+r+p|0;E=r+E+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(g^x))+0x766a0abb|0;w=w+E|0;E=E+(v&y^b&(v^y))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;o=(a>>>7^a>>>18^a>>>3^a<<25^a<<14)+(n>>>17^n>>>19^n>>>10^n<<15^n<<13)+o+m|0;x=o+x+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(g^w&(C^g))+0x81c2c92e|0;b=b+x|0;x=x+(E&v^y&(E^v))+(E>>>2^E>>>13^E>>>22^E<<30^E<<19^E<<10)|0;a=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+a+t|0;g=a+g+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(C^b&(w^C))+0x92722c85|0;y=y+g|0;g=g+(x&E^v&(x^E))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;l=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(o>>>17^o>>>19^o>>>10^o<<15^o<<13)+l+e|0;C=l+C+(y>>>6^y>>>11^y>>>25^y<<26^y<<21^y<<7)+(w^y&(b^w))+0xa2bfe8a1|0;v=v+C|0;C=C+(g&x^E&(g^x))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;d=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(a>>>17^a>>>19^a>>>10^a<<15^a<<13)+d+i|0;w=d+w+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(b^v&(y^b))+0xa81a664b|0;E=E+w|0;w=w+(C&g^x&(C^g))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;h=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+h+s|0;b=h+b+(E>>>6^E>>>11^E>>>25^E<<26^E<<21^E<<7)+(y^E&(v^y))+0xc24b8b70|0;x=x+b|0;b=b+(w&C^g&(w^C))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;c=(u>>>7^u>>>18^u>>>3^u<<25^u<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+c+n|0;y=c+y+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(v^x&(E^v))+0xc76c51a3|0;g=g+y|0;y=y+(b&w^C&(b^w))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;u=(f>>>7^f>>>18^f>>>3^f<<25^f<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+u+r|0;v=u+v+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(E^g&(x^E))+0xd192e819|0;C=C+v|0;v=v+(y&b^w&(y^b))+(y>>>2^y>>>13^y>>>22^y<<30^y<<19^y<<10)|0;f=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(c>>>17^c>>>19^c>>>10^c<<15^c<<13)+f+o|0;E=f+E+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(g^x))+0xd6990624|0;w=w+E|0;E=E+(v&y^b&(v^y))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;p=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(u>>>17^u>>>19^u>>>10^u<<15^u<<13)+p+a|0;x=p+x+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(g^w&(C^g))+0xf40e3585|0;b=b+x|0;x=x+(E&v^y&(E^v))+(E>>>2^E>>>13^E>>>22^E<<30^E<<19^E<<10)|0;m=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(f>>>17^f>>>19^f>>>10^f<<15^f<<13)+m+l|0;g=m+g+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(C^b&(w^C))+0x106aa070|0;y=y+g|0;g=g+(x&E^v&(x^E))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;t=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+t+d|0;C=t+C+(y>>>6^y>>>11^y>>>25^y<<26^y<<21^y<<7)+(w^y&(b^w))+0x19a4c116|0;v=v+C|0;C=C+(g&x^E&(g^x))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;e=(i>>>7^i>>>18^i>>>3^i<<25^i<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+e+h|0;w=e+w+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(b^v&(y^b))+0x1e376c08|0;E=E+w|0;w=w+(C&g^x&(C^g))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;i=(s>>>7^s>>>18^s>>>3^s<<25^s<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+i+c|0;b=i+b+(E>>>6^E>>>11^E>>>25^E<<26^E<<21^E<<7)+(y^E&(v^y))+0x2748774c|0;x=x+b|0;b=b+(w&C^g&(w^C))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;s=(n>>>7^n>>>18^n>>>3^n<<25^n<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+s+u|0;y=s+y+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(v^x&(E^v))+0x34b0bcb5|0;g=g+y|0;y=y+(b&w^C&(b^w))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;n=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+n+f|0;v=n+v+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(E^g&(x^E))+0x391c0cb3|0;C=C+v|0;v=v+(y&b^w&(y^b))+(y>>>2^y>>>13^y>>>22^y<<30^y<<19^y<<10)|0;r=(o>>>7^o>>>18^o>>>3^o<<25^o<<14)+(s>>>17^s>>>19^s>>>10^s<<15^s<<13)+r+p|0;E=r+E+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(g^x))+0x4ed8aa4a|0;w=w+E|0;E=E+(v&y^b&(v^y))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;o=(a>>>7^a>>>18^a>>>3^a<<25^a<<14)+(n>>>17^n>>>19^n>>>10^n<<15^n<<13)+o+m|0;x=o+x+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(g^w&(C^g))+0x5b9cca4f|0;b=b+x|0;x=x+(E&v^y&(E^v))+(E>>>2^E>>>13^E>>>22^E<<30^E<<19^E<<10)|0;a=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+a+t|0;g=a+g+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(C^b&(w^C))+0x682e6ff3|0;y=y+g|0;g=g+(x&E^v&(x^E))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;l=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(o>>>17^o>>>19^o>>>10^o<<15^o<<13)+l+e|0;C=l+C+(y>>>6^y>>>11^y>>>25^y<<26^y<<21^y<<7)+(w^y&(b^w))+0x748f82ee|0;v=v+C|0;C=C+(g&x^E&(g^x))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;d=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(a>>>17^a>>>19^a>>>10^a<<15^a<<13)+d+i|0;w=d+w+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(b^v&(y^b))+0x78a5636f|0;E=E+w|0;w=w+(C&g^x&(C^g))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;h=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+h+s|0;b=h+b+(E>>>6^E>>>11^E>>>25^E<<26^E<<21^E<<7)+(y^E&(v^y))+0x84c87814|0;x=x+b|0;b=b+(w&C^g&(w^C))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;c=(u>>>7^u>>>18^u>>>3^u<<25^u<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+c+n|0;y=c+y+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(v^x&(E^v))+0x8cc70208|0;g=g+y|0;y=y+(b&w^C&(b^w))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;u=(f>>>7^f>>>18^f>>>3^f<<25^f<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+u+r|0;v=u+v+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(E^g&(x^E))+0x90befffa|0;C=C+v|0;v=v+(y&b^w&(y^b))+(y>>>2^y>>>13^y>>>22^y<<30^y<<19^y<<10)|0;f=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(c>>>17^c>>>19^c>>>10^c<<15^c<<13)+f+o|0;E=f+E+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(g^x))+0xa4506ceb|0;w=w+E|0;E=E+(v&y^b&(v^y))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;p=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(u>>>17^u>>>19^u>>>10^u<<15^u<<13)+p+a|0;x=p+x+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(g^w&(C^g))+0xbef9a3f7|0;b=b+x|0;x=x+(E&v^y&(E^v))+(E>>>2^E>>>13^E>>>22^E<<30^E<<19^E<<10)|0;m=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(f>>>17^f>>>19^f>>>10^f<<15^f<<13)+m+l|0;g=m+g+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(C^b&(w^C))+0xc67178f2|0;y=y+g|0;g=g+(x&E^v&(x^E))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;S=S+g|0;T=T+x|0;I=I+E|0;k=k+v|0;M=M+y|0;D=D+b|0;A=A+w|0;R=R+C|0}function r(t){t=t|0;W(G[t|0]<<24|G[t|1]<<16|G[t|2]<<8|G[t|3],G[t|4]<<24|G[t|5]<<16|G[t|6]<<8|G[t|7],G[t|8]<<24|G[t|9]<<16|G[t|10]<<8|G[t|11],G[t|12]<<24|G[t|13]<<16|G[t|14]<<8|G[t|15],G[t|16]<<24|G[t|17]<<16|G[t|18]<<8|G[t|19],G[t|20]<<24|G[t|21]<<16|G[t|22]<<8|G[t|23],G[t|24]<<24|G[t|25]<<16|G[t|26]<<8|G[t|27],G[t|28]<<24|G[t|29]<<16|G[t|30]<<8|G[t|31],G[t|32]<<24|G[t|33]<<16|G[t|34]<<8|G[t|35],G[t|36]<<24|G[t|37]<<16|G[t|38]<<8|G[t|39],G[t|40]<<24|G[t|41]<<16|G[t|42]<<8|G[t|43],G[t|44]<<24|G[t|45]<<16|G[t|46]<<8|G[t|47],G[t|48]<<24|G[t|49]<<16|G[t|50]<<8|G[t|51],G[t|52]<<24|G[t|53]<<16|G[t|54]<<8|G[t|55],G[t|56]<<24|G[t|57]<<16|G[t|58]<<8|G[t|59],G[t|60]<<24|G[t|61]<<16|G[t|62]<<8|G[t|63])}function j(t){t=t|0;G[t|0]=S>>>24;G[t|1]=S>>>16&255;G[t|2]=S>>>8&255;G[t|3]=S&255;G[t|4]=T>>>24;G[t|5]=T>>>16&255;G[t|6]=T>>>8&255;G[t|7]=T&255;G[t|8]=I>>>24;G[t|9]=I>>>16&255;G[t|10]=I>>>8&255;G[t|11]=I&255;G[t|12]=k>>>24;G[t|13]=k>>>16&255;G[t|14]=k>>>8&255;G[t|15]=k&255;G[t|16]=M>>>24;G[t|17]=M>>>16&255;G[t|18]=M>>>8&255;G[t|19]=M&255;G[t|20]=D>>>24;G[t|21]=D>>>16&255;G[t|22]=D>>>8&255;G[t|23]=D&255;G[t|24]=A>>>24;G[t|25]=A>>>16&255;G[t|26]=A>>>8&255;G[t|27]=A&255;G[t|28]=R>>>24;G[t|29]=R>>>16&255;G[t|30]=R>>>8&255;G[t|31]=R&255}function U(){S=0x6a09e667;T=0xbb67ae85;I=0x3c6ef372;k=0xa54ff53a;M=0x510e527f;D=0x9b05688c;A=0x1f83d9ab;R=0x5be0cd19;g=x=0}function h(t,e,i,s,n,r,o,a,l,d){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;r=r|0;o=o|0;a=a|0;l=l|0;d=d|0;S=t;T=e;I=i;k=s;M=n;D=r;A=o;R=a;g=l;x=d}function o(t,e){t=t|0;e=e|0;var i=0;if(t&63)return-1;while((e|0)>=64){r(t);t=t+64|0;e=e-64|0;i=i+64|0}g=g+i|0;if(g>>>0<i>>>0)x=x+1|0;return i|0}function u(t,e,i){t=t|0;e=e|0;i=i|0;var s=0,n=0;if(t&63)return-1;if(~i)if(i&31)return-1;if((e|0)>=64){s=o(t,e)|0;if((s|0)==-1)return-1;t=t+s|0;e=e-s|0}s=s+e|0;g=g+e|0;if(g>>>0<e>>>0)x=x+1|0;G[t|e]=0x80;if((e|0)>=56){for(n=e+1|0;(n|0)<64;n=n+1|0)G[t|n]=0x00;r(t);e=0;G[t|0]=0}for(n=e+1|0;(n|0)<59;n=n+1|0)G[t|n]=0;G[t|56]=x>>>21&255;G[t|57]=x>>>13&255;G[t|58]=x>>>5&255;G[t|59]=x<<3&255|g>>>29;G[t|60]=g>>>21&255;G[t|61]=g>>>13&255;G[t|62]=g>>>5&255;G[t|63]=g<<3&255;r(t);if(~i)j(i);return s|0}function q(){S=E;T=v;I=y;k=b;M=w;D=C;A=N;R=F;g=64;x=0}function X(){S=P;T=O;I=L;k=B;M=_;D=H;A=z;R=V;g=64;x=0}function Y(t,e,i,s,n,r,o,a,l,d,h,c,u,f,p,m){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;r=r|0;o=o|0;a=a|0;l=l|0;d=d|0;h=h|0;c=c|0;u=u|0;f=f|0;p=p|0;m=m|0;U();W(t^0x5c5c5c5c,e^0x5c5c5c5c,i^0x5c5c5c5c,s^0x5c5c5c5c,n^0x5c5c5c5c,r^0x5c5c5c5c,o^0x5c5c5c5c,a^0x5c5c5c5c,l^0x5c5c5c5c,d^0x5c5c5c5c,h^0x5c5c5c5c,c^0x5c5c5c5c,u^0x5c5c5c5c,f^0x5c5c5c5c,p^0x5c5c5c5c,m^0x5c5c5c5c);P=S;O=T;L=I;B=k;_=M;H=D;z=A;V=R;U();W(t^0x36363636,e^0x36363636,i^0x36363636,s^0x36363636,n^0x36363636,r^0x36363636,o^0x36363636,a^0x36363636,l^0x36363636,d^0x36363636,h^0x36363636,c^0x36363636,u^0x36363636,f^0x36363636,p^0x36363636,m^0x36363636);E=S;v=T;y=I;b=k;w=M;C=D;N=A;F=R;g=64;x=0}function $(t,e,i){t=t|0;e=e|0;i=i|0;var s=0,n=0,r=0,o=0,a=0,l=0,d=0,h=0,c=0;if(t&63)return-1;if(~i)if(i&31)return-1;c=u(t,e,-1)|0;s=S,n=T,r=I,o=k,a=M,l=D,d=A,h=R;X();W(s,n,r,o,a,l,d,h,0x80000000,0,0,0,0,0,0,768);if(~i)j(i);return c|0}function K(t,e,i,s,n){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;var r=0,o=0,a=0,l=0,d=0,h=0,c=0,u=0,f=0,p=0,m=0,g=0,x=0,E=0,v=0,y=0;if(t&63)return-1;if(~n)if(n&31)return-1;G[t+e|0]=i>>>24;G[t+e+1|0]=i>>>16&255;G[t+e+2|0]=i>>>8&255;G[t+e+3|0]=i&255;$(t,e+4|0,-1)|0;r=f=S,o=p=T,a=m=I,l=g=k,d=x=M,h=E=D,c=v=A,u=y=R;s=s-1|0;while((s|0)>0){q();W(f,p,m,g,x,E,v,y,0x80000000,0,0,0,0,0,0,768);f=S,p=T,m=I,g=k,x=M,E=D,v=A,y=R;X();W(f,p,m,g,x,E,v,y,0x80000000,0,0,0,0,0,0,768);f=S,p=T,m=I,g=k,x=M,E=D,v=A,y=R;r=r^S;o=o^T;a=a^I;l=l^k;d=d^M;h=h^D;c=c^A;u=u^R;s=s-1|0}S=r;T=o;I=a;k=l;M=d;D=h;A=c;R=u;if(~n)j(n);return 0}return{reset:U,init:h,process:o,finish:u,hmac_reset:q,hmac_init:Y,hmac_finish:$,pbkdf2_generate_block:K}}({Uint8Array:Uint8Array},t.heap.buffer),t.reset(),t}var wt,Ct,rt=(wt=function(t,e){return(wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}wt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),St=(rt(Tt,Ct=d),Tt.NAME="sha512",Tt);function Tt(){var t=Ct.call(this)||this;return t.NAME="sha512",t.BLOCK_SIZE=128,t.HASH_SIZE=64,t.heap=o(),t.asm=function(t,e){"use asm";var Z=0,J=0,Q=0,tt=0,et=0,it=0,st=0,nt=0,rt=0,ot=0,at=0,lt=0,dt=0,ht=0,ct=0,ut=0,N=0,F=0;var P=0,O=0,L=0,B=0,_=0,H=0,z=0,V=0,G=0,W=0,j=0,U=0,q=0,X=0,Y=0,$=0,K=0,ft=0,pt=0,mt=0,gt=0,xt=0,Et=0,vt=0,yt=0,bt=0,wt=0,Ct=0,St=0,Tt=0,It=0,kt=0;var Mt=new t.Uint8Array(e);function Dt(t,e,i,s,n,r,o,a,l,d,h,c,u,f,p,m,g,x,E,v,y,b,w,C,S,T,I,k,M,D,A,R){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;r=r|0;o=o|0;a=a|0;l=l|0;d=d|0;h=h|0;c=c|0;u=u|0;f=f|0;p=p|0;m=m|0;g=g|0;x=x|0;E=E|0;v=v|0;y=y|0;b=b|0;w=w|0;C=C|0;S=S|0;T=T|0;I=I|0;k=k|0;M=M|0;D=D|0;A=A|0;R=R|0;var N=0,F=0,P=0,O=0,L=0,B=0,_=0,H=0,z=0,V=0,G=0,W=0,j=0,U=0,q=0,X=0,Y=0,$=0,K=0;N=Z;F=J;P=Q;O=tt;L=et;B=it;_=st;H=nt;z=rt;V=ot;G=at;W=lt;j=dt;U=ht;q=ct;X=ut;$=0xd728ae22+e|0;Y=0x428a2f98+t+($>>>0<e>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;$=0x23ef65cd+s|0;Y=0x71374491+i+($>>>0<s>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;$=0xec4d3b2f+r|0;Y=0xb5c0fbcf+n+($>>>0<r>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;$=0x8189dbbc+a|0;Y=0xe9b5dba5+o+($>>>0<a>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;$=0xf348b538+d|0;Y=0x3956c25b+l+($>>>0<d>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;$=0xb605d019+c|0;Y=0x59f111f1+h+($>>>0<c>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;$=0xaf194f9b+f|0;Y=0x923f82a4+u+($>>>0<f>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;$=0xda6d8118+m|0;Y=0xab1c5ed5+p+($>>>0<m>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;$=0xa3030242+x|0;Y=0xd807aa98+g+($>>>0<x>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;$=0x45706fbe+v|0;Y=0x12835b01+E+($>>>0<v>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;$=0x4ee4b28c+b|0;Y=0x243185be+y+($>>>0<b>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;$=0xd5ffb4e2+C|0;Y=0x550c7dc3+w+($>>>0<C>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;$=0xf27b896f+T|0;Y=0x72be5d74+S+($>>>0<T>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;$=0x3b1696b1+k|0;Y=0x80deb1fe+I+($>>>0<k>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;$=0x25c71235+D|0;Y=0x9bdc06a7+M+($>>>0<D>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;$=0xcf692694+R|0;Y=0xc19bf174+A+($>>>0<R>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;e=e+v|0;t=t+E+(e>>>0<v>>>0?1:0)|0;K=(s>>>1|i<<31)^(s>>>8|i<<24)^(s>>>7|i<<25)|0;e=e+K|0;t=t+((i>>>1|s<<31)^(i>>>8|s<<24)^i>>>7)+(e>>>0<K>>>0?1:0)|0;K=(D>>>19|M<<13)^(D<<3|M>>>29)^(D>>>6|M<<26)|0;e=e+K|0;t=t+((M>>>19|D<<13)^(M<<3|D>>>29)^M>>>6)+(e>>>0<K>>>0?1:0)|0;$=0x9ef14ad2+e|0;Y=0xe49b69c1+t+($>>>0<e>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;s=s+b|0;i=i+y+(s>>>0<b>>>0?1:0)|0;K=(r>>>1|n<<31)^(r>>>8|n<<24)^(r>>>7|n<<25)|0;s=s+K|0;i=i+((n>>>1|r<<31)^(n>>>8|r<<24)^n>>>7)+(s>>>0<K>>>0?1:0)|0;K=(R>>>19|A<<13)^(R<<3|A>>>29)^(R>>>6|A<<26)|0;s=s+K|0;i=i+((A>>>19|R<<13)^(A<<3|R>>>29)^A>>>6)+(s>>>0<K>>>0?1:0)|0;$=0x384f25e3+s|0;Y=0xefbe4786+i+($>>>0<s>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;r=r+C|0;n=n+w+(r>>>0<C>>>0?1:0)|0;K=(a>>>1|o<<31)^(a>>>8|o<<24)^(a>>>7|o<<25)|0;r=r+K|0;n=n+((o>>>1|a<<31)^(o>>>8|a<<24)^o>>>7)+(r>>>0<K>>>0?1:0)|0;K=(e>>>19|t<<13)^(e<<3|t>>>29)^(e>>>6|t<<26)|0;r=r+K|0;n=n+((t>>>19|e<<13)^(t<<3|e>>>29)^t>>>6)+(r>>>0<K>>>0?1:0)|0;$=0x8b8cd5b5+r|0;Y=0xfc19dc6+n+($>>>0<r>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;a=a+T|0;o=o+S+(a>>>0<T>>>0?1:0)|0;K=(d>>>1|l<<31)^(d>>>8|l<<24)^(d>>>7|l<<25)|0;a=a+K|0;o=o+((l>>>1|d<<31)^(l>>>8|d<<24)^l>>>7)+(a>>>0<K>>>0?1:0)|0;K=(s>>>19|i<<13)^(s<<3|i>>>29)^(s>>>6|i<<26)|0;a=a+K|0;o=o+((i>>>19|s<<13)^(i<<3|s>>>29)^i>>>6)+(a>>>0<K>>>0?1:0)|0;$=0x77ac9c65+a|0;Y=0x240ca1cc+o+($>>>0<a>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;d=d+k|0;l=l+I+(d>>>0<k>>>0?1:0)|0;K=(c>>>1|h<<31)^(c>>>8|h<<24)^(c>>>7|h<<25)|0;d=d+K|0;l=l+((h>>>1|c<<31)^(h>>>8|c<<24)^h>>>7)+(d>>>0<K>>>0?1:0)|0;K=(r>>>19|n<<13)^(r<<3|n>>>29)^(r>>>6|n<<26)|0;d=d+K|0;l=l+((n>>>19|r<<13)^(n<<3|r>>>29)^n>>>6)+(d>>>0<K>>>0?1:0)|0;$=0x592b0275+d|0;Y=0x2de92c6f+l+($>>>0<d>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;c=c+D|0;h=h+M+(c>>>0<D>>>0?1:0)|0;K=(f>>>1|u<<31)^(f>>>8|u<<24)^(f>>>7|u<<25)|0;c=c+K|0;h=h+((u>>>1|f<<31)^(u>>>8|f<<24)^u>>>7)+(c>>>0<K>>>0?1:0)|0;K=(a>>>19|o<<13)^(a<<3|o>>>29)^(a>>>6|o<<26)|0;c=c+K|0;h=h+((o>>>19|a<<13)^(o<<3|a>>>29)^o>>>6)+(c>>>0<K>>>0?1:0)|0;$=0x6ea6e483+c|0;Y=0x4a7484aa+h+($>>>0<c>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;f=f+R|0;u=u+A+(f>>>0<R>>>0?1:0)|0;K=(m>>>1|p<<31)^(m>>>8|p<<24)^(m>>>7|p<<25)|0;f=f+K|0;u=u+((p>>>1|m<<31)^(p>>>8|m<<24)^p>>>7)+(f>>>0<K>>>0?1:0)|0;K=(d>>>19|l<<13)^(d<<3|l>>>29)^(d>>>6|l<<26)|0;f=f+K|0;u=u+((l>>>19|d<<13)^(l<<3|d>>>29)^l>>>6)+(f>>>0<K>>>0?1:0)|0;$=0xbd41fbd4+f|0;Y=0x5cb0a9dc+u+($>>>0<f>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;m=m+e|0;p=p+t+(m>>>0<e>>>0?1:0)|0;K=(x>>>1|g<<31)^(x>>>8|g<<24)^(x>>>7|g<<25)|0;m=m+K|0;p=p+((g>>>1|x<<31)^(g>>>8|x<<24)^g>>>7)+(m>>>0<K>>>0?1:0)|0;K=(c>>>19|h<<13)^(c<<3|h>>>29)^(c>>>6|h<<26)|0;m=m+K|0;p=p+((h>>>19|c<<13)^(h<<3|c>>>29)^h>>>6)+(m>>>0<K>>>0?1:0)|0;$=0x831153b5+m|0;Y=0x76f988da+p+($>>>0<m>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;x=x+s|0;g=g+i+(x>>>0<s>>>0?1:0)|0;K=(v>>>1|E<<31)^(v>>>8|E<<24)^(v>>>7|E<<25)|0;x=x+K|0;g=g+((E>>>1|v<<31)^(E>>>8|v<<24)^E>>>7)+(x>>>0<K>>>0?1:0)|0;K=(f>>>19|u<<13)^(f<<3|u>>>29)^(f>>>6|u<<26)|0;x=x+K|0;g=g+((u>>>19|f<<13)^(u<<3|f>>>29)^u>>>6)+(x>>>0<K>>>0?1:0)|0;$=0xee66dfab+x|0;Y=0x983e5152+g+($>>>0<x>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;v=v+r|0;E=E+n+(v>>>0<r>>>0?1:0)|0;K=(b>>>1|y<<31)^(b>>>8|y<<24)^(b>>>7|y<<25)|0;v=v+K|0;E=E+((y>>>1|b<<31)^(y>>>8|b<<24)^y>>>7)+(v>>>0<K>>>0?1:0)|0;K=(m>>>19|p<<13)^(m<<3|p>>>29)^(m>>>6|p<<26)|0;v=v+K|0;E=E+((p>>>19|m<<13)^(p<<3|m>>>29)^p>>>6)+(v>>>0<K>>>0?1:0)|0;$=0x2db43210+v|0;Y=0xa831c66d+E+($>>>0<v>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;b=b+a|0;y=y+o+(b>>>0<a>>>0?1:0)|0;K=(C>>>1|w<<31)^(C>>>8|w<<24)^(C>>>7|w<<25)|0;b=b+K|0;y=y+((w>>>1|C<<31)^(w>>>8|C<<24)^w>>>7)+(b>>>0<K>>>0?1:0)|0;K=(x>>>19|g<<13)^(x<<3|g>>>29)^(x>>>6|g<<26)|0;b=b+K|0;y=y+((g>>>19|x<<13)^(g<<3|x>>>29)^g>>>6)+(b>>>0<K>>>0?1:0)|0;$=0x98fb213f+b|0;Y=0xb00327c8+y+($>>>0<b>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;C=C+d|0;w=w+l+(C>>>0<d>>>0?1:0)|0;K=(T>>>1|S<<31)^(T>>>8|S<<24)^(T>>>7|S<<25)|0;C=C+K|0;w=w+((S>>>1|T<<31)^(S>>>8|T<<24)^S>>>7)+(C>>>0<K>>>0?1:0)|0;K=(v>>>19|E<<13)^(v<<3|E>>>29)^(v>>>6|E<<26)|0;C=C+K|0;w=w+((E>>>19|v<<13)^(E<<3|v>>>29)^E>>>6)+(C>>>0<K>>>0?1:0)|0;$=0xbeef0ee4+C|0;Y=0xbf597fc7+w+($>>>0<C>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;T=T+c|0;S=S+h+(T>>>0<c>>>0?1:0)|0;K=(k>>>1|I<<31)^(k>>>8|I<<24)^(k>>>7|I<<25)|0;T=T+K|0;S=S+((I>>>1|k<<31)^(I>>>8|k<<24)^I>>>7)+(T>>>0<K>>>0?1:0)|0;K=(b>>>19|y<<13)^(b<<3|y>>>29)^(b>>>6|y<<26)|0;T=T+K|0;S=S+((y>>>19|b<<13)^(y<<3|b>>>29)^y>>>6)+(T>>>0<K>>>0?1:0)|0;$=0x3da88fc2+T|0;Y=0xc6e00bf3+S+($>>>0<T>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;k=k+f|0;I=I+u+(k>>>0<f>>>0?1:0)|0;K=(D>>>1|M<<31)^(D>>>8|M<<24)^(D>>>7|M<<25)|0;k=k+K|0;I=I+((M>>>1|D<<31)^(M>>>8|D<<24)^M>>>7)+(k>>>0<K>>>0?1:0)|0;K=(C>>>19|w<<13)^(C<<3|w>>>29)^(C>>>6|w<<26)|0;k=k+K|0;I=I+((w>>>19|C<<13)^(w<<3|C>>>29)^w>>>6)+(k>>>0<K>>>0?1:0)|0;$=0x930aa725+k|0;Y=0xd5a79147+I+($>>>0<k>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;D=D+m|0;M=M+p+(D>>>0<m>>>0?1:0)|0;K=(R>>>1|A<<31)^(R>>>8|A<<24)^(R>>>7|A<<25)|0;D=D+K|0;M=M+((A>>>1|R<<31)^(A>>>8|R<<24)^A>>>7)+(D>>>0<K>>>0?1:0)|0;K=(T>>>19|S<<13)^(T<<3|S>>>29)^(T>>>6|S<<26)|0;D=D+K|0;M=M+((S>>>19|T<<13)^(S<<3|T>>>29)^S>>>6)+(D>>>0<K>>>0?1:0)|0;$=0xe003826f+D|0;Y=0x6ca6351+M+($>>>0<D>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;R=R+x|0;A=A+g+(R>>>0<x>>>0?1:0)|0;K=(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)|0;R=R+K|0;A=A+((t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7)+(R>>>0<K>>>0?1:0)|0;K=(k>>>19|I<<13)^(k<<3|I>>>29)^(k>>>6|I<<26)|0;R=R+K|0;A=A+((I>>>19|k<<13)^(I<<3|k>>>29)^I>>>6)+(R>>>0<K>>>0?1:0)|0;$=0xa0e6e70+R|0;Y=0x14292967+A+($>>>0<R>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;e=e+v|0;t=t+E+(e>>>0<v>>>0?1:0)|0;K=(s>>>1|i<<31)^(s>>>8|i<<24)^(s>>>7|i<<25)|0;e=e+K|0;t=t+((i>>>1|s<<31)^(i>>>8|s<<24)^i>>>7)+(e>>>0<K>>>0?1:0)|0;K=(D>>>19|M<<13)^(D<<3|M>>>29)^(D>>>6|M<<26)|0;e=e+K|0;t=t+((M>>>19|D<<13)^(M<<3|D>>>29)^M>>>6)+(e>>>0<K>>>0?1:0)|0;$=0x46d22ffc+e|0;Y=0x27b70a85+t+($>>>0<e>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;s=s+b|0;i=i+y+(s>>>0<b>>>0?1:0)|0;K=(r>>>1|n<<31)^(r>>>8|n<<24)^(r>>>7|n<<25)|0;s=s+K|0;i=i+((n>>>1|r<<31)^(n>>>8|r<<24)^n>>>7)+(s>>>0<K>>>0?1:0)|0;K=(R>>>19|A<<13)^(R<<3|A>>>29)^(R>>>6|A<<26)|0;s=s+K|0;i=i+((A>>>19|R<<13)^(A<<3|R>>>29)^A>>>6)+(s>>>0<K>>>0?1:0)|0;$=0x5c26c926+s|0;Y=0x2e1b2138+i+($>>>0<s>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;r=r+C|0;n=n+w+(r>>>0<C>>>0?1:0)|0;K=(a>>>1|o<<31)^(a>>>8|o<<24)^(a>>>7|o<<25)|0;r=r+K|0;n=n+((o>>>1|a<<31)^(o>>>8|a<<24)^o>>>7)+(r>>>0<K>>>0?1:0)|0;K=(e>>>19|t<<13)^(e<<3|t>>>29)^(e>>>6|t<<26)|0;r=r+K|0;n=n+((t>>>19|e<<13)^(t<<3|e>>>29)^t>>>6)+(r>>>0<K>>>0?1:0)|0;$=0x5ac42aed+r|0;Y=0x4d2c6dfc+n+($>>>0<r>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;a=a+T|0;o=o+S+(a>>>0<T>>>0?1:0)|0;K=(d>>>1|l<<31)^(d>>>8|l<<24)^(d>>>7|l<<25)|0;a=a+K|0;o=o+((l>>>1|d<<31)^(l>>>8|d<<24)^l>>>7)+(a>>>0<K>>>0?1:0)|0;K=(s>>>19|i<<13)^(s<<3|i>>>29)^(s>>>6|i<<26)|0;a=a+K|0;o=o+((i>>>19|s<<13)^(i<<3|s>>>29)^i>>>6)+(a>>>0<K>>>0?1:0)|0;$=0x9d95b3df+a|0;Y=0x53380d13+o+($>>>0<a>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;d=d+k|0;l=l+I+(d>>>0<k>>>0?1:0)|0;K=(c>>>1|h<<31)^(c>>>8|h<<24)^(c>>>7|h<<25)|0;d=d+K|0;l=l+((h>>>1|c<<31)^(h>>>8|c<<24)^h>>>7)+(d>>>0<K>>>0?1:0)|0;K=(r>>>19|n<<13)^(r<<3|n>>>29)^(r>>>6|n<<26)|0;d=d+K|0;l=l+((n>>>19|r<<13)^(n<<3|r>>>29)^n>>>6)+(d>>>0<K>>>0?1:0)|0;$=0x8baf63de+d|0;Y=0x650a7354+l+($>>>0<d>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;c=c+D|0;h=h+M+(c>>>0<D>>>0?1:0)|0;K=(f>>>1|u<<31)^(f>>>8|u<<24)^(f>>>7|u<<25)|0;c=c+K|0;h=h+((u>>>1|f<<31)^(u>>>8|f<<24)^u>>>7)+(c>>>0<K>>>0?1:0)|0;K=(a>>>19|o<<13)^(a<<3|o>>>29)^(a>>>6|o<<26)|0;c=c+K|0;h=h+((o>>>19|a<<13)^(o<<3|a>>>29)^o>>>6)+(c>>>0<K>>>0?1:0)|0;$=0x3c77b2a8+c|0;Y=0x766a0abb+h+($>>>0<c>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;f=f+R|0;u=u+A+(f>>>0<R>>>0?1:0)|0;K=(m>>>1|p<<31)^(m>>>8|p<<24)^(m>>>7|p<<25)|0;f=f+K|0;u=u+((p>>>1|m<<31)^(p>>>8|m<<24)^p>>>7)+(f>>>0<K>>>0?1:0)|0;K=(d>>>19|l<<13)^(d<<3|l>>>29)^(d>>>6|l<<26)|0;f=f+K|0;u=u+((l>>>19|d<<13)^(l<<3|d>>>29)^l>>>6)+(f>>>0<K>>>0?1:0)|0;$=0x47edaee6+f|0;Y=0x81c2c92e+u+($>>>0<f>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;m=m+e|0;p=p+t+(m>>>0<e>>>0?1:0)|0;K=(x>>>1|g<<31)^(x>>>8|g<<24)^(x>>>7|g<<25)|0;m=m+K|0;p=p+((g>>>1|x<<31)^(g>>>8|x<<24)^g>>>7)+(m>>>0<K>>>0?1:0)|0;K=(c>>>19|h<<13)^(c<<3|h>>>29)^(c>>>6|h<<26)|0;m=m+K|0;p=p+((h>>>19|c<<13)^(h<<3|c>>>29)^h>>>6)+(m>>>0<K>>>0?1:0)|0;$=0x1482353b+m|0;Y=0x92722c85+p+($>>>0<m>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;x=x+s|0;g=g+i+(x>>>0<s>>>0?1:0)|0;K=(v>>>1|E<<31)^(v>>>8|E<<24)^(v>>>7|E<<25)|0;x=x+K|0;g=g+((E>>>1|v<<31)^(E>>>8|v<<24)^E>>>7)+(x>>>0<K>>>0?1:0)|0;K=(f>>>19|u<<13)^(f<<3|u>>>29)^(f>>>6|u<<26)|0;x=x+K|0;g=g+((u>>>19|f<<13)^(u<<3|f>>>29)^u>>>6)+(x>>>0<K>>>0?1:0)|0;$=0x4cf10364+x|0;Y=0xa2bfe8a1+g+($>>>0<x>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;v=v+r|0;E=E+n+(v>>>0<r>>>0?1:0)|0;K=(b>>>1|y<<31)^(b>>>8|y<<24)^(b>>>7|y<<25)|0;v=v+K|0;E=E+((y>>>1|b<<31)^(y>>>8|b<<24)^y>>>7)+(v>>>0<K>>>0?1:0)|0;K=(m>>>19|p<<13)^(m<<3|p>>>29)^(m>>>6|p<<26)|0;v=v+K|0;E=E+((p>>>19|m<<13)^(p<<3|m>>>29)^p>>>6)+(v>>>0<K>>>0?1:0)|0;$=0xbc423001+v|0;Y=0xa81a664b+E+($>>>0<v>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;b=b+a|0;y=y+o+(b>>>0<a>>>0?1:0)|0;K=(C>>>1|w<<31)^(C>>>8|w<<24)^(C>>>7|w<<25)|0;b=b+K|0;y=y+((w>>>1|C<<31)^(w>>>8|C<<24)^w>>>7)+(b>>>0<K>>>0?1:0)|0;K=(x>>>19|g<<13)^(x<<3|g>>>29)^(x>>>6|g<<26)|0;b=b+K|0;y=y+((g>>>19|x<<13)^(g<<3|x>>>29)^g>>>6)+(b>>>0<K>>>0?1:0)|0;$=0xd0f89791+b|0;Y=0xc24b8b70+y+($>>>0<b>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;C=C+d|0;w=w+l+(C>>>0<d>>>0?1:0)|0;K=(T>>>1|S<<31)^(T>>>8|S<<24)^(T>>>7|S<<25)|0;C=C+K|0;w=w+((S>>>1|T<<31)^(S>>>8|T<<24)^S>>>7)+(C>>>0<K>>>0?1:0)|0;K=(v>>>19|E<<13)^(v<<3|E>>>29)^(v>>>6|E<<26)|0;C=C+K|0;w=w+((E>>>19|v<<13)^(E<<3|v>>>29)^E>>>6)+(C>>>0<K>>>0?1:0)|0;$=0x654be30+C|0;Y=0xc76c51a3+w+($>>>0<C>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;T=T+c|0;S=S+h+(T>>>0<c>>>0?1:0)|0;K=(k>>>1|I<<31)^(k>>>8|I<<24)^(k>>>7|I<<25)|0;T=T+K|0;S=S+((I>>>1|k<<31)^(I>>>8|k<<24)^I>>>7)+(T>>>0<K>>>0?1:0)|0;K=(b>>>19|y<<13)^(b<<3|y>>>29)^(b>>>6|y<<26)|0;T=T+K|0;S=S+((y>>>19|b<<13)^(y<<3|b>>>29)^y>>>6)+(T>>>0<K>>>0?1:0)|0;$=0xd6ef5218+T|0;Y=0xd192e819+S+($>>>0<T>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;k=k+f|0;I=I+u+(k>>>0<f>>>0?1:0)|0;K=(D>>>1|M<<31)^(D>>>8|M<<24)^(D>>>7|M<<25)|0;k=k+K|0;I=I+((M>>>1|D<<31)^(M>>>8|D<<24)^M>>>7)+(k>>>0<K>>>0?1:0)|0;K=(C>>>19|w<<13)^(C<<3|w>>>29)^(C>>>6|w<<26)|0;k=k+K|0;I=I+((w>>>19|C<<13)^(w<<3|C>>>29)^w>>>6)+(k>>>0<K>>>0?1:0)|0;$=0x5565a910+k|0;Y=0xd6990624+I+($>>>0<k>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;D=D+m|0;M=M+p+(D>>>0<m>>>0?1:0)|0;K=(R>>>1|A<<31)^(R>>>8|A<<24)^(R>>>7|A<<25)|0;D=D+K|0;M=M+((A>>>1|R<<31)^(A>>>8|R<<24)^A>>>7)+(D>>>0<K>>>0?1:0)|0;K=(T>>>19|S<<13)^(T<<3|S>>>29)^(T>>>6|S<<26)|0;D=D+K|0;M=M+((S>>>19|T<<13)^(S<<3|T>>>29)^S>>>6)+(D>>>0<K>>>0?1:0)|0;$=0x5771202a+D|0;Y=0xf40e3585+M+($>>>0<D>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;R=R+x|0;A=A+g+(R>>>0<x>>>0?1:0)|0;K=(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)|0;R=R+K|0;A=A+((t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7)+(R>>>0<K>>>0?1:0)|0;K=(k>>>19|I<<13)^(k<<3|I>>>29)^(k>>>6|I<<26)|0;R=R+K|0;A=A+((I>>>19|k<<13)^(I<<3|k>>>29)^I>>>6)+(R>>>0<K>>>0?1:0)|0;$=0x32bbd1b8+R|0;Y=0x106aa070+A+($>>>0<R>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;e=e+v|0;t=t+E+(e>>>0<v>>>0?1:0)|0;K=(s>>>1|i<<31)^(s>>>8|i<<24)^(s>>>7|i<<25)|0;e=e+K|0;t=t+((i>>>1|s<<31)^(i>>>8|s<<24)^i>>>7)+(e>>>0<K>>>0?1:0)|0;K=(D>>>19|M<<13)^(D<<3|M>>>29)^(D>>>6|M<<26)|0;e=e+K|0;t=t+((M>>>19|D<<13)^(M<<3|D>>>29)^M>>>6)+(e>>>0<K>>>0?1:0)|0;$=0xb8d2d0c8+e|0;Y=0x19a4c116+t+($>>>0<e>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;s=s+b|0;i=i+y+(s>>>0<b>>>0?1:0)|0;K=(r>>>1|n<<31)^(r>>>8|n<<24)^(r>>>7|n<<25)|0;s=s+K|0;i=i+((n>>>1|r<<31)^(n>>>8|r<<24)^n>>>7)+(s>>>0<K>>>0?1:0)|0;K=(R>>>19|A<<13)^(R<<3|A>>>29)^(R>>>6|A<<26)|0;s=s+K|0;i=i+((A>>>19|R<<13)^(A<<3|R>>>29)^A>>>6)+(s>>>0<K>>>0?1:0)|0;$=0x5141ab53+s|0;Y=0x1e376c08+i+($>>>0<s>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;r=r+C|0;n=n+w+(r>>>0<C>>>0?1:0)|0;K=(a>>>1|o<<31)^(a>>>8|o<<24)^(a>>>7|o<<25)|0;r=r+K|0;n=n+((o>>>1|a<<31)^(o>>>8|a<<24)^o>>>7)+(r>>>0<K>>>0?1:0)|0;K=(e>>>19|t<<13)^(e<<3|t>>>29)^(e>>>6|t<<26)|0;r=r+K|0;n=n+((t>>>19|e<<13)^(t<<3|e>>>29)^t>>>6)+(r>>>0<K>>>0?1:0)|0;$=0xdf8eeb99+r|0;Y=0x2748774c+n+($>>>0<r>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;a=a+T|0;o=o+S+(a>>>0<T>>>0?1:0)|0;K=(d>>>1|l<<31)^(d>>>8|l<<24)^(d>>>7|l<<25)|0;a=a+K|0;o=o+((l>>>1|d<<31)^(l>>>8|d<<24)^l>>>7)+(a>>>0<K>>>0?1:0)|0;K=(s>>>19|i<<13)^(s<<3|i>>>29)^(s>>>6|i<<26)|0;a=a+K|0;o=o+((i>>>19|s<<13)^(i<<3|s>>>29)^i>>>6)+(a>>>0<K>>>0?1:0)|0;$=0xe19b48a8+a|0;Y=0x34b0bcb5+o+($>>>0<a>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;d=d+k|0;l=l+I+(d>>>0<k>>>0?1:0)|0;K=(c>>>1|h<<31)^(c>>>8|h<<24)^(c>>>7|h<<25)|0;d=d+K|0;l=l+((h>>>1|c<<31)^(h>>>8|c<<24)^h>>>7)+(d>>>0<K>>>0?1:0)|0;K=(r>>>19|n<<13)^(r<<3|n>>>29)^(r>>>6|n<<26)|0;d=d+K|0;l=l+((n>>>19|r<<13)^(n<<3|r>>>29)^n>>>6)+(d>>>0<K>>>0?1:0)|0;$=0xc5c95a63+d|0;Y=0x391c0cb3+l+($>>>0<d>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;c=c+D|0;h=h+M+(c>>>0<D>>>0?1:0)|0;K=(f>>>1|u<<31)^(f>>>8|u<<24)^(f>>>7|u<<25)|0;c=c+K|0;h=h+((u>>>1|f<<31)^(u>>>8|f<<24)^u>>>7)+(c>>>0<K>>>0?1:0)|0;K=(a>>>19|o<<13)^(a<<3|o>>>29)^(a>>>6|o<<26)|0;c=c+K|0;h=h+((o>>>19|a<<13)^(o<<3|a>>>29)^o>>>6)+(c>>>0<K>>>0?1:0)|0;$=0xe3418acb+c|0;Y=0x4ed8aa4a+h+($>>>0<c>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;f=f+R|0;u=u+A+(f>>>0<R>>>0?1:0)|0;K=(m>>>1|p<<31)^(m>>>8|p<<24)^(m>>>7|p<<25)|0;f=f+K|0;u=u+((p>>>1|m<<31)^(p>>>8|m<<24)^p>>>7)+(f>>>0<K>>>0?1:0)|0;K=(d>>>19|l<<13)^(d<<3|l>>>29)^(d>>>6|l<<26)|0;f=f+K|0;u=u+((l>>>19|d<<13)^(l<<3|d>>>29)^l>>>6)+(f>>>0<K>>>0?1:0)|0;$=0x7763e373+f|0;Y=0x5b9cca4f+u+($>>>0<f>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;m=m+e|0;p=p+t+(m>>>0<e>>>0?1:0)|0;K=(x>>>1|g<<31)^(x>>>8|g<<24)^(x>>>7|g<<25)|0;m=m+K|0;p=p+((g>>>1|x<<31)^(g>>>8|x<<24)^g>>>7)+(m>>>0<K>>>0?1:0)|0;K=(c>>>19|h<<13)^(c<<3|h>>>29)^(c>>>6|h<<26)|0;m=m+K|0;p=p+((h>>>19|c<<13)^(h<<3|c>>>29)^h>>>6)+(m>>>0<K>>>0?1:0)|0;$=0xd6b2b8a3+m|0;Y=0x682e6ff3+p+($>>>0<m>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;x=x+s|0;g=g+i+(x>>>0<s>>>0?1:0)|0;K=(v>>>1|E<<31)^(v>>>8|E<<24)^(v>>>7|E<<25)|0;x=x+K|0;g=g+((E>>>1|v<<31)^(E>>>8|v<<24)^E>>>7)+(x>>>0<K>>>0?1:0)|0;K=(f>>>19|u<<13)^(f<<3|u>>>29)^(f>>>6|u<<26)|0;x=x+K|0;g=g+((u>>>19|f<<13)^(u<<3|f>>>29)^u>>>6)+(x>>>0<K>>>0?1:0)|0;$=0x5defb2fc+x|0;Y=0x748f82ee+g+($>>>0<x>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;v=v+r|0;E=E+n+(v>>>0<r>>>0?1:0)|0;K=(b>>>1|y<<31)^(b>>>8|y<<24)^(b>>>7|y<<25)|0;v=v+K|0;E=E+((y>>>1|b<<31)^(y>>>8|b<<24)^y>>>7)+(v>>>0<K>>>0?1:0)|0;K=(m>>>19|p<<13)^(m<<3|p>>>29)^(m>>>6|p<<26)|0;v=v+K|0;E=E+((p>>>19|m<<13)^(p<<3|m>>>29)^p>>>6)+(v>>>0<K>>>0?1:0)|0;$=0x43172f60+v|0;Y=0x78a5636f+E+($>>>0<v>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;b=b+a|0;y=y+o+(b>>>0<a>>>0?1:0)|0;K=(C>>>1|w<<31)^(C>>>8|w<<24)^(C>>>7|w<<25)|0;b=b+K|0;y=y+((w>>>1|C<<31)^(w>>>8|C<<24)^w>>>7)+(b>>>0<K>>>0?1:0)|0;K=(x>>>19|g<<13)^(x<<3|g>>>29)^(x>>>6|g<<26)|0;b=b+K|0;y=y+((g>>>19|x<<13)^(g<<3|x>>>29)^g>>>6)+(b>>>0<K>>>0?1:0)|0;$=0xa1f0ab72+b|0;Y=0x84c87814+y+($>>>0<b>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;C=C+d|0;w=w+l+(C>>>0<d>>>0?1:0)|0;K=(T>>>1|S<<31)^(T>>>8|S<<24)^(T>>>7|S<<25)|0;C=C+K|0;w=w+((S>>>1|T<<31)^(S>>>8|T<<24)^S>>>7)+(C>>>0<K>>>0?1:0)|0;K=(v>>>19|E<<13)^(v<<3|E>>>29)^(v>>>6|E<<26)|0;C=C+K|0;w=w+((E>>>19|v<<13)^(E<<3|v>>>29)^E>>>6)+(C>>>0<K>>>0?1:0)|0;$=0x1a6439ec+C|0;Y=0x8cc70208+w+($>>>0<C>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;T=T+c|0;S=S+h+(T>>>0<c>>>0?1:0)|0;K=(k>>>1|I<<31)^(k>>>8|I<<24)^(k>>>7|I<<25)|0;T=T+K|0;S=S+((I>>>1|k<<31)^(I>>>8|k<<24)^I>>>7)+(T>>>0<K>>>0?1:0)|0;K=(b>>>19|y<<13)^(b<<3|y>>>29)^(b>>>6|y<<26)|0;T=T+K|0;S=S+((y>>>19|b<<13)^(y<<3|b>>>29)^y>>>6)+(T>>>0<K>>>0?1:0)|0;$=0x23631e28+T|0;Y=0x90befffa+S+($>>>0<T>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;k=k+f|0;I=I+u+(k>>>0<f>>>0?1:0)|0;K=(D>>>1|M<<31)^(D>>>8|M<<24)^(D>>>7|M<<25)|0;k=k+K|0;I=I+((M>>>1|D<<31)^(M>>>8|D<<24)^M>>>7)+(k>>>0<K>>>0?1:0)|0;K=(C>>>19|w<<13)^(C<<3|w>>>29)^(C>>>6|w<<26)|0;k=k+K|0;I=I+((w>>>19|C<<13)^(w<<3|C>>>29)^w>>>6)+(k>>>0<K>>>0?1:0)|0;$=0xde82bde9+k|0;Y=0xa4506ceb+I+($>>>0<k>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;D=D+m|0;M=M+p+(D>>>0<m>>>0?1:0)|0;K=(R>>>1|A<<31)^(R>>>8|A<<24)^(R>>>7|A<<25)|0;D=D+K|0;M=M+((A>>>1|R<<31)^(A>>>8|R<<24)^A>>>7)+(D>>>0<K>>>0?1:0)|0;K=(T>>>19|S<<13)^(T<<3|S>>>29)^(T>>>6|S<<26)|0;D=D+K|0;M=M+((S>>>19|T<<13)^(S<<3|T>>>29)^S>>>6)+(D>>>0<K>>>0?1:0)|0;$=0xb2c67915+D|0;Y=0xbef9a3f7+M+($>>>0<D>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;R=R+x|0;A=A+g+(R>>>0<x>>>0?1:0)|0;K=(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)|0;R=R+K|0;A=A+((t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7)+(R>>>0<K>>>0?1:0)|0;K=(k>>>19|I<<13)^(k<<3|I>>>29)^(k>>>6|I<<26)|0;R=R+K|0;A=A+((I>>>19|k<<13)^(I<<3|k>>>29)^I>>>6)+(R>>>0<K>>>0?1:0)|0;$=0xe372532b+R|0;Y=0xc67178f2+A+($>>>0<R>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;e=e+v|0;t=t+E+(e>>>0<v>>>0?1:0)|0;K=(s>>>1|i<<31)^(s>>>8|i<<24)^(s>>>7|i<<25)|0;e=e+K|0;t=t+((i>>>1|s<<31)^(i>>>8|s<<24)^i>>>7)+(e>>>0<K>>>0?1:0)|0;K=(D>>>19|M<<13)^(D<<3|M>>>29)^(D>>>6|M<<26)|0;e=e+K|0;t=t+((M>>>19|D<<13)^(M<<3|D>>>29)^M>>>6)+(e>>>0<K>>>0?1:0)|0;$=0xea26619c+e|0;Y=0xca273ece+t+($>>>0<e>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;s=s+b|0;i=i+y+(s>>>0<b>>>0?1:0)|0;K=(r>>>1|n<<31)^(r>>>8|n<<24)^(r>>>7|n<<25)|0;s=s+K|0;i=i+((n>>>1|r<<31)^(n>>>8|r<<24)^n>>>7)+(s>>>0<K>>>0?1:0)|0;K=(R>>>19|A<<13)^(R<<3|A>>>29)^(R>>>6|A<<26)|0;s=s+K|0;i=i+((A>>>19|R<<13)^(A<<3|R>>>29)^A>>>6)+(s>>>0<K>>>0?1:0)|0;$=0x21c0c207+s|0;Y=0xd186b8c7+i+($>>>0<s>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;r=r+C|0;n=n+w+(r>>>0<C>>>0?1:0)|0;K=(a>>>1|o<<31)^(a>>>8|o<<24)^(a>>>7|o<<25)|0;r=r+K|0;n=n+((o>>>1|a<<31)^(o>>>8|a<<24)^o>>>7)+(r>>>0<K>>>0?1:0)|0;K=(e>>>19|t<<13)^(e<<3|t>>>29)^(e>>>6|t<<26)|0;r=r+K|0;n=n+((t>>>19|e<<13)^(t<<3|e>>>29)^t>>>6)+(r>>>0<K>>>0?1:0)|0;$=0xcde0eb1e+r|0;Y=0xeada7dd6+n+($>>>0<r>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;a=a+T|0;o=o+S+(a>>>0<T>>>0?1:0)|0;K=(d>>>1|l<<31)^(d>>>8|l<<24)^(d>>>7|l<<25)|0;a=a+K|0;o=o+((l>>>1|d<<31)^(l>>>8|d<<24)^l>>>7)+(a>>>0<K>>>0?1:0)|0;K=(s>>>19|i<<13)^(s<<3|i>>>29)^(s>>>6|i<<26)|0;a=a+K|0;o=o+((i>>>19|s<<13)^(i<<3|s>>>29)^i>>>6)+(a>>>0<K>>>0?1:0)|0;$=0xee6ed178+a|0;Y=0xf57d4f7f+o+($>>>0<a>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;d=d+k|0;l=l+I+(d>>>0<k>>>0?1:0)|0;K=(c>>>1|h<<31)^(c>>>8|h<<24)^(c>>>7|h<<25)|0;d=d+K|0;l=l+((h>>>1|c<<31)^(h>>>8|c<<24)^h>>>7)+(d>>>0<K>>>0?1:0)|0;K=(r>>>19|n<<13)^(r<<3|n>>>29)^(r>>>6|n<<26)|0;d=d+K|0;l=l+((n>>>19|r<<13)^(n<<3|r>>>29)^n>>>6)+(d>>>0<K>>>0?1:0)|0;$=0x72176fba+d|0;Y=0x6f067aa+l+($>>>0<d>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;c=c+D|0;h=h+M+(c>>>0<D>>>0?1:0)|0;K=(f>>>1|u<<31)^(f>>>8|u<<24)^(f>>>7|u<<25)|0;c=c+K|0;h=h+((u>>>1|f<<31)^(u>>>8|f<<24)^u>>>7)+(c>>>0<K>>>0?1:0)|0;K=(a>>>19|o<<13)^(a<<3|o>>>29)^(a>>>6|o<<26)|0;c=c+K|0;h=h+((o>>>19|a<<13)^(o<<3|a>>>29)^o>>>6)+(c>>>0<K>>>0?1:0)|0;$=0xa2c898a6+c|0;Y=0xa637dc5+h+($>>>0<c>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;f=f+R|0;u=u+A+(f>>>0<R>>>0?1:0)|0;K=(m>>>1|p<<31)^(m>>>8|p<<24)^(m>>>7|p<<25)|0;f=f+K|0;u=u+((p>>>1|m<<31)^(p>>>8|m<<24)^p>>>7)+(f>>>0<K>>>0?1:0)|0;K=(d>>>19|l<<13)^(d<<3|l>>>29)^(d>>>6|l<<26)|0;f=f+K|0;u=u+((l>>>19|d<<13)^(l<<3|d>>>29)^l>>>6)+(f>>>0<K>>>0?1:0)|0;$=0xbef90dae+f|0;Y=0x113f9804+u+($>>>0<f>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;m=m+e|0;p=p+t+(m>>>0<e>>>0?1:0)|0;K=(x>>>1|g<<31)^(x>>>8|g<<24)^(x>>>7|g<<25)|0;m=m+K|0;p=p+((g>>>1|x<<31)^(g>>>8|x<<24)^g>>>7)+(m>>>0<K>>>0?1:0)|0;K=(c>>>19|h<<13)^(c<<3|h>>>29)^(c>>>6|h<<26)|0;m=m+K|0;p=p+((h>>>19|c<<13)^(h<<3|c>>>29)^h>>>6)+(m>>>0<K>>>0?1:0)|0;$=0x131c471b+m|0;Y=0x1b710b35+p+($>>>0<m>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;x=x+s|0;g=g+i+(x>>>0<s>>>0?1:0)|0;K=(v>>>1|E<<31)^(v>>>8|E<<24)^(v>>>7|E<<25)|0;x=x+K|0;g=g+((E>>>1|v<<31)^(E>>>8|v<<24)^E>>>7)+(x>>>0<K>>>0?1:0)|0;K=(f>>>19|u<<13)^(f<<3|u>>>29)^(f>>>6|u<<26)|0;x=x+K|0;g=g+((u>>>19|f<<13)^(u<<3|f>>>29)^u>>>6)+(x>>>0<K>>>0?1:0)|0;$=0x23047d84+x|0;Y=0x28db77f5+g+($>>>0<x>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;v=v+r|0;E=E+n+(v>>>0<r>>>0?1:0)|0;K=(b>>>1|y<<31)^(b>>>8|y<<24)^(b>>>7|y<<25)|0;v=v+K|0;E=E+((y>>>1|b<<31)^(y>>>8|b<<24)^y>>>7)+(v>>>0<K>>>0?1:0)|0;K=(m>>>19|p<<13)^(m<<3|p>>>29)^(m>>>6|p<<26)|0;v=v+K|0;E=E+((p>>>19|m<<13)^(p<<3|m>>>29)^p>>>6)+(v>>>0<K>>>0?1:0)|0;$=0x40c72493+v|0;Y=0x32caab7b+E+($>>>0<v>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;b=b+a|0;y=y+o+(b>>>0<a>>>0?1:0)|0;K=(C>>>1|w<<31)^(C>>>8|w<<24)^(C>>>7|w<<25)|0;b=b+K|0;y=y+((w>>>1|C<<31)^(w>>>8|C<<24)^w>>>7)+(b>>>0<K>>>0?1:0)|0;K=(x>>>19|g<<13)^(x<<3|g>>>29)^(x>>>6|g<<26)|0;b=b+K|0;y=y+((g>>>19|x<<13)^(g<<3|x>>>29)^g>>>6)+(b>>>0<K>>>0?1:0)|0;$=0x15c9bebc+b|0;Y=0x3c9ebe0a+y+($>>>0<b>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;C=C+d|0;w=w+l+(C>>>0<d>>>0?1:0)|0;K=(T>>>1|S<<31)^(T>>>8|S<<24)^(T>>>7|S<<25)|0;C=C+K|0;w=w+((S>>>1|T<<31)^(S>>>8|T<<24)^S>>>7)+(C>>>0<K>>>0?1:0)|0;K=(v>>>19|E<<13)^(v<<3|E>>>29)^(v>>>6|E<<26)|0;C=C+K|0;w=w+((E>>>19|v<<13)^(E<<3|v>>>29)^E>>>6)+(C>>>0<K>>>0?1:0)|0;$=0x9c100d4c+C|0;Y=0x431d67c4+w+($>>>0<C>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;T=T+c|0;S=S+h+(T>>>0<c>>>0?1:0)|0;K=(k>>>1|I<<31)^(k>>>8|I<<24)^(k>>>7|I<<25)|0;T=T+K|0;S=S+((I>>>1|k<<31)^(I>>>8|k<<24)^I>>>7)+(T>>>0<K>>>0?1:0)|0;K=(b>>>19|y<<13)^(b<<3|y>>>29)^(b>>>6|y<<26)|0;T=T+K|0;S=S+((y>>>19|b<<13)^(y<<3|b>>>29)^y>>>6)+(T>>>0<K>>>0?1:0)|0;$=0xcb3e42b6+T|0;Y=0x4cc5d4be+S+($>>>0<T>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;k=k+f|0;I=I+u+(k>>>0<f>>>0?1:0)|0;K=(D>>>1|M<<31)^(D>>>8|M<<24)^(D>>>7|M<<25)|0;k=k+K|0;I=I+((M>>>1|D<<31)^(M>>>8|D<<24)^M>>>7)+(k>>>0<K>>>0?1:0)|0;K=(C>>>19|w<<13)^(C<<3|w>>>29)^(C>>>6|w<<26)|0;k=k+K|0;I=I+((w>>>19|C<<13)^(w<<3|C>>>29)^w>>>6)+(k>>>0<K>>>0?1:0)|0;$=0xfc657e2a+k|0;Y=0x597f299c+I+($>>>0<k>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;D=D+m|0;M=M+p+(D>>>0<m>>>0?1:0)|0;K=(R>>>1|A<<31)^(R>>>8|A<<24)^(R>>>7|A<<25)|0;D=D+K|0;M=M+((A>>>1|R<<31)^(A>>>8|R<<24)^A>>>7)+(D>>>0<K>>>0?1:0)|0;K=(T>>>19|S<<13)^(T<<3|S>>>29)^(T>>>6|S<<26)|0;D=D+K|0;M=M+((S>>>19|T<<13)^(S<<3|T>>>29)^S>>>6)+(D>>>0<K>>>0?1:0)|0;$=0x3ad6faec+D|0;Y=0x5fcb6fab+M+($>>>0<D>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;R=R+x|0;A=A+g+(R>>>0<x>>>0?1:0)|0;K=(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)|0;R=R+K|0;A=A+((t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7)+(R>>>0<K>>>0?1:0)|0;K=(k>>>19|I<<13)^(k<<3|I>>>29)^(k>>>6|I<<26)|0;R=R+K|0;A=A+((I>>>19|k<<13)^(I<<3|k>>>29)^I>>>6)+(R>>>0<K>>>0?1:0)|0;$=0x4a475817+R|0;Y=0x6c44198c+A+($>>>0<R>>>0?1:0)|0;$=$+X|0;Y=Y+q+($>>>0<X>>>0?1:0)|0;K=(V>>>14|z<<18)^(V>>>18|z<<14)^(V<<23|z>>>9)|0;$=$+K|0;Y=Y+((z>>>14|V<<18)^(z>>>18|V<<14)^(z<<23|V>>>9))+($>>>0<K>>>0?1:0)|0;K=U^V&(W^U)|0;$=$+K|0;Y=Y+(j^z&(G^j))+($>>>0<K>>>0?1:0)|0;X=U;q=j;U=W;j=G;W=V;G=z;V=H+$|0;z=_+Y+(V>>>0<H>>>0?1:0)|0;H=B;_=L;B=O;L=P;O=F;P=N;F=$+(O&B^H&(O^B))|0;N=Y+(P&L^_&(P^L))+(F>>>0<$>>>0?1:0)|0;K=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7)|0;F=F+K|0;N=N+((P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7))+(F>>>0<K>>>0?1:0)|0;J=J+F|0;Z=Z+N+(J>>>0<F>>>0?1:0)|0;tt=tt+O|0;Q=Q+P+(tt>>>0<O>>>0?1:0)|0;it=it+B|0;et=et+L+(it>>>0<B>>>0?1:0)|0;nt=nt+H|0;st=st+_+(nt>>>0<H>>>0?1:0)|0;ot=ot+V|0;rt=rt+z+(ot>>>0<V>>>0?1:0)|0;lt=lt+W|0;at=at+G+(lt>>>0<W>>>0?1:0)|0;ht=ht+U|0;dt=dt+j+(ht>>>0<U>>>0?1:0)|0;ut=ut+X|0;ct=ct+q+(ut>>>0<X>>>0?1:0)|0}function r(t){t=t|0;Dt(Mt[t|0]<<24|Mt[t|1]<<16|Mt[t|2]<<8|Mt[t|3],Mt[t|4]<<24|Mt[t|5]<<16|Mt[t|6]<<8|Mt[t|7],Mt[t|8]<<24|Mt[t|9]<<16|Mt[t|10]<<8|Mt[t|11],Mt[t|12]<<24|Mt[t|13]<<16|Mt[t|14]<<8|Mt[t|15],Mt[t|16]<<24|Mt[t|17]<<16|Mt[t|18]<<8|Mt[t|19],Mt[t|20]<<24|Mt[t|21]<<16|Mt[t|22]<<8|Mt[t|23],Mt[t|24]<<24|Mt[t|25]<<16|Mt[t|26]<<8|Mt[t|27],Mt[t|28]<<24|Mt[t|29]<<16|Mt[t|30]<<8|Mt[t|31],Mt[t|32]<<24|Mt[t|33]<<16|Mt[t|34]<<8|Mt[t|35],Mt[t|36]<<24|Mt[t|37]<<16|Mt[t|38]<<8|Mt[t|39],Mt[t|40]<<24|Mt[t|41]<<16|Mt[t|42]<<8|Mt[t|43],Mt[t|44]<<24|Mt[t|45]<<16|Mt[t|46]<<8|Mt[t|47],Mt[t|48]<<24|Mt[t|49]<<16|Mt[t|50]<<8|Mt[t|51],Mt[t|52]<<24|Mt[t|53]<<16|Mt[t|54]<<8|Mt[t|55],Mt[t|56]<<24|Mt[t|57]<<16|Mt[t|58]<<8|Mt[t|59],Mt[t|60]<<24|Mt[t|61]<<16|Mt[t|62]<<8|Mt[t|63],Mt[t|64]<<24|Mt[t|65]<<16|Mt[t|66]<<8|Mt[t|67],Mt[t|68]<<24|Mt[t|69]<<16|Mt[t|70]<<8|Mt[t|71],Mt[t|72]<<24|Mt[t|73]<<16|Mt[t|74]<<8|Mt[t|75],Mt[t|76]<<24|Mt[t|77]<<16|Mt[t|78]<<8|Mt[t|79],Mt[t|80]<<24|Mt[t|81]<<16|Mt[t|82]<<8|Mt[t|83],Mt[t|84]<<24|Mt[t|85]<<16|Mt[t|86]<<8|Mt[t|87],Mt[t|88]<<24|Mt[t|89]<<16|Mt[t|90]<<8|Mt[t|91],Mt[t|92]<<24|Mt[t|93]<<16|Mt[t|94]<<8|Mt[t|95],Mt[t|96]<<24|Mt[t|97]<<16|Mt[t|98]<<8|Mt[t|99],Mt[t|100]<<24|Mt[t|101]<<16|Mt[t|102]<<8|Mt[t|103],Mt[t|104]<<24|Mt[t|105]<<16|Mt[t|106]<<8|Mt[t|107],Mt[t|108]<<24|Mt[t|109]<<16|Mt[t|110]<<8|Mt[t|111],Mt[t|112]<<24|Mt[t|113]<<16|Mt[t|114]<<8|Mt[t|115],Mt[t|116]<<24|Mt[t|117]<<16|Mt[t|118]<<8|Mt[t|119],Mt[t|120]<<24|Mt[t|121]<<16|Mt[t|122]<<8|Mt[t|123],Mt[t|124]<<24|Mt[t|125]<<16|Mt[t|126]<<8|Mt[t|127])}function At(t){t=t|0;Mt[t|0]=Z>>>24;Mt[t|1]=Z>>>16&255;Mt[t|2]=Z>>>8&255;Mt[t|3]=Z&255;Mt[t|4]=J>>>24;Mt[t|5]=J>>>16&255;Mt[t|6]=J>>>8&255;Mt[t|7]=J&255;Mt[t|8]=Q>>>24;Mt[t|9]=Q>>>16&255;Mt[t|10]=Q>>>8&255;Mt[t|11]=Q&255;Mt[t|12]=tt>>>24;Mt[t|13]=tt>>>16&255;Mt[t|14]=tt>>>8&255;Mt[t|15]=tt&255;Mt[t|16]=et>>>24;Mt[t|17]=et>>>16&255;Mt[t|18]=et>>>8&255;Mt[t|19]=et&255;Mt[t|20]=it>>>24;Mt[t|21]=it>>>16&255;Mt[t|22]=it>>>8&255;Mt[t|23]=it&255;Mt[t|24]=st>>>24;Mt[t|25]=st>>>16&255;Mt[t|26]=st>>>8&255;Mt[t|27]=st&255;Mt[t|28]=nt>>>24;Mt[t|29]=nt>>>16&255;Mt[t|30]=nt>>>8&255;Mt[t|31]=nt&255;Mt[t|32]=rt>>>24;Mt[t|33]=rt>>>16&255;Mt[t|34]=rt>>>8&255;Mt[t|35]=rt&255;Mt[t|36]=ot>>>24;Mt[t|37]=ot>>>16&255;Mt[t|38]=ot>>>8&255;Mt[t|39]=ot&255;Mt[t|40]=at>>>24;Mt[t|41]=at>>>16&255;Mt[t|42]=at>>>8&255;Mt[t|43]=at&255;Mt[t|44]=lt>>>24;Mt[t|45]=lt>>>16&255;Mt[t|46]=lt>>>8&255;Mt[t|47]=lt&255;Mt[t|48]=dt>>>24;Mt[t|49]=dt>>>16&255;Mt[t|50]=dt>>>8&255;Mt[t|51]=dt&255;Mt[t|52]=ht>>>24;Mt[t|53]=ht>>>16&255;Mt[t|54]=ht>>>8&255;Mt[t|55]=ht&255;Mt[t|56]=ct>>>24;Mt[t|57]=ct>>>16&255;Mt[t|58]=ct>>>8&255;Mt[t|59]=ct&255;Mt[t|60]=ut>>>24;Mt[t|61]=ut>>>16&255;Mt[t|62]=ut>>>8&255;Mt[t|63]=ut&255}function Rt(){Z=0x6a09e667;J=0xf3bcc908;Q=0xbb67ae85;tt=0x84caa73b;et=0x3c6ef372;it=0xfe94f82b;st=0xa54ff53a;nt=0x5f1d36f1;rt=0x510e527f;ot=0xade682d1;at=0x9b05688c;lt=0x2b3e6c1f;dt=0x1f83d9ab;ht=0xfb41bd6b;ct=0x5be0cd19;ut=0x137e2179;N=F=0}function E(t,e,i,s,n,r,o,a,l,d,h,c,u,f,p,m,g,x){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;r=r|0;o=o|0;a=a|0;l=l|0;d=d|0;h=h|0;c=c|0;u=u|0;f=f|0;p=p|0;m=m|0;g=g|0;x=x|0;Z=t;J=e;Q=i;tt=s;et=n;it=r;st=o;nt=a;rt=l;ot=d;at=h;lt=c;dt=u;ht=f;ct=p;ut=m;N=g;F=x}function o(t,e){t=t|0;e=e|0;var i=0;if(t&127)return-1;while((e|0)>=128){r(t);t=t+128|0;e=e-128|0;i=i+128|0}N=N+i|0;if(N>>>0<i>>>0)F=F+1|0;return i|0}function y(t,e,i){t=t|0;e=e|0;i=i|0;var s=0,n=0;if(t&127)return-1;if(~i)if(i&63)return-1;if((e|0)>=128){s=o(t,e)|0;if((s|0)==-1)return-1;t=t+s|0;e=e-s|0}s=s+e|0;N=N+e|0;if(N>>>0<e>>>0)F=F+1|0;Mt[t|e]=0x80;if((e|0)>=112){for(n=e+1|0;(n|0)<128;n=n+1|0)Mt[t|n]=0x00;r(t);e=0;Mt[t|0]=0}for(n=e+1|0;(n|0)<123;n=n+1|0)Mt[t|n]=0;Mt[t|120]=F>>>21&255;Mt[t|121]=F>>>13&255;Mt[t|122]=F>>>5&255;Mt[t|123]=F<<3&255|N>>>29;Mt[t|124]=N>>>21&255;Mt[t|125]=N>>>13&255;Mt[t|126]=N>>>5&255;Mt[t|127]=N<<3&255;r(t);if(~i)At(i);return s|0}function Nt(){Z=P;J=O;Q=L;tt=B;et=_;it=H;st=z;nt=V;rt=G;ot=W;at=j;lt=U;dt=q;ht=X;ct=Y;ut=$;N=128;F=0}function Ft(){Z=K;J=ft;Q=pt;tt=mt;et=gt;it=xt;st=Et;nt=vt;rt=yt;ot=bt;at=wt;lt=Ct;dt=St;ht=Tt;ct=It;ut=kt;N=128;F=0}function Pt(t,e,i,s,n,r,o,a,l,d,h,c,u,f,p,m,g,x,E,v,y,b,w,C,S,T,I,k,M,D,A,R){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;r=r|0;o=o|0;a=a|0;l=l|0;d=d|0;h=h|0;c=c|0;u=u|0;f=f|0;p=p|0;m=m|0;g=g|0;x=x|0;E=E|0;v=v|0;y=y|0;b=b|0;w=w|0;C=C|0;S=S|0;T=T|0;I=I|0;k=k|0;M=M|0;D=D|0;A=A|0;R=R|0;Rt();Dt(t^0x5c5c5c5c,e^0x5c5c5c5c,i^0x5c5c5c5c,s^0x5c5c5c5c,n^0x5c5c5c5c,r^0x5c5c5c5c,o^0x5c5c5c5c,a^0x5c5c5c5c,l^0x5c5c5c5c,d^0x5c5c5c5c,h^0x5c5c5c5c,c^0x5c5c5c5c,u^0x5c5c5c5c,f^0x5c5c5c5c,p^0x5c5c5c5c,m^0x5c5c5c5c,g^0x5c5c5c5c,x^0x5c5c5c5c,E^0x5c5c5c5c,v^0x5c5c5c5c,y^0x5c5c5c5c,b^0x5c5c5c5c,w^0x5c5c5c5c,C^0x5c5c5c5c,S^0x5c5c5c5c,T^0x5c5c5c5c,I^0x5c5c5c5c,k^0x5c5c5c5c,M^0x5c5c5c5c,D^0x5c5c5c5c,A^0x5c5c5c5c,R^0x5c5c5c5c);K=Z;ft=J;pt=Q;mt=tt;gt=et;xt=it;Et=st;vt=nt;yt=rt;bt=ot;wt=at;Ct=lt;St=dt;Tt=ht;It=ct;kt=ut;Rt();Dt(t^0x36363636,e^0x36363636,i^0x36363636,s^0x36363636,n^0x36363636,r^0x36363636,o^0x36363636,a^0x36363636,l^0x36363636,d^0x36363636,h^0x36363636,c^0x36363636,u^0x36363636,f^0x36363636,p^0x36363636,m^0x36363636,g^0x36363636,x^0x36363636,E^0x36363636,v^0x36363636,y^0x36363636,b^0x36363636,w^0x36363636,C^0x36363636,S^0x36363636,T^0x36363636,I^0x36363636,k^0x36363636,M^0x36363636,D^0x36363636,A^0x36363636,R^0x36363636);P=Z;O=J;L=Q;B=tt;_=et;H=it;z=st;V=nt;G=rt;W=ot;j=at;U=lt;q=dt;X=ht;Y=ct;$=ut;N=128;F=0}function Ot(t,e,i){t=t|0;e=e|0;i=i|0;var s=0,n=0,r=0,o=0,a=0,l=0,d=0,h=0,c=0,u=0,f=0,p=0,m=0,g=0,x=0,E=0,v=0;if(t&127)return-1;if(~i)if(i&63)return-1;v=y(t,e,-1)|0;s=Z;n=J;r=Q;o=tt;a=et;l=it;d=st;h=nt;c=rt;u=ot;f=at;p=lt;m=dt;g=ht;x=ct;E=ut;Ft();Dt(s,n,r,o,a,l,d,h,c,u,f,p,m,g,x,E,0x80000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1536);if(~i)At(i);return v|0}function Lt(t,e,i,s,n){t=t|0;e=e|0;i=i|0;s=s|0;n=n|0;var r=0,o=0,a=0,l=0,d=0,h=0,c=0,u=0,f=0,p=0,m=0,g=0,x=0,E=0,v=0,y=0,b=0,w=0,C=0,S=0,T=0,I=0,k=0,M=0,D=0,A=0,R=0,N=0,F=0,P=0,O=0,L=0;if(t&127)return-1;if(~n)if(n&63)return-1;Mt[t+e|0]=i>>>24;Mt[t+e+1|0]=i>>>16&255;Mt[t+e+2|0]=i>>>8&255;Mt[t+e+3|0]=i&255;Ot(t,e+4|0,-1)|0;r=b=Z;o=w=J;a=C=Q;l=S=tt;d=T=et;h=I=it;c=k=st;u=M=nt;f=D=rt;p=A=ot;m=R=at;g=N=lt;x=F=dt;E=P=ht;v=O=ct;y=L=ut;s=s-1|0;while((s|0)>0){Nt();Dt(b,w,C,S,T,I,k,M,D,A,R,N,F,P,O,L,0x80000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1536);b=Z;w=J;C=Q;S=tt;T=et;I=it;k=st;M=nt;D=rt;A=ot;R=at;N=lt;F=dt;P=ht;O=ct;L=ut;Ft();Dt(b,w,C,S,T,I,k,M,D,A,R,N,F,P,O,L,0x80000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1536);b=Z;w=J;C=Q;S=tt;T=et;I=it;k=st;M=nt;D=rt;A=ot;R=at;N=lt;F=dt;P=ht;O=ct;L=ut;r=r^Z;o=o^J;a=a^Q;l=l^tt;d=d^et;h=h^it;c=c^st;u=u^nt;f=f^rt;p=p^ot;m=m^at;g=g^lt;x=x^dt;E=E^ht;v=v^ct;y=y^ut;s=s-1|0}Z=r;J=o;Q=a;tt=l;et=d;it=h;st=c;nt=u;rt=f;ot=p;at=m;lt=g;dt=x;ht=E;ct=v;ut=y;if(~n)At(n);return 0}return{reset:Rt,init:E,process:o,finish:y,hmac_reset:Nt,hmac_init:Pt,hmac_finish:Ot,pbkdf2_generate_block:Lt}}({Uint8Array:Uint8Array},t.heap.buffer),t.reset(),t}It.prototype.process=function(t){if(null!==this.result)throw new f("state must be reset before processing new data");return this.hash.process(t),this},It.prototype.finish=function(){if(null!==this.result)throw new f("state must be reset before processing new data");for(var t=this.hash.finish().result,e=new Uint8Array(this.key),i=0;i<e.length;++i)e[i]^=92;var s=this.verify,n=this.hash.reset().process(e).process(t).finish().result;if(s){if(s.length!==n.length)throw new Error("HMAC verification failed, lengths doesn't match");for(var r=0,i=0;i<s.length;i++)r|=s[i]^n[i];if(0!==r)throw new Error("HMAC verification failed, hash value doesn't match")}return this.result=n,this},It.prototype._hmac_init_verify=function(t){if(t.length!==this.HMAC_SIZE)throw new g("illegal verification tag size");this.verify=t},nt=It;function It(t,e,i){if(!t.HASH_SIZE)throw new SyntaxError("option 'hash' supplied doesn't seem to be a valid hash function");this.hash=t,this.BLOCK_SIZE=this.hash.BLOCK_SIZE,this.HMAC_SIZE=this.hash.HASH_SIZE,this.result=null,this.key=function(t,e){var i=new Uint8Array(t.BLOCK_SIZE);e.length>t.BLOCK_SIZE?i.set(t.reset().process(e).finish().result):i.set(e);return i}(this.hash,e);for(var s=new Uint8Array(this.key),n=0;n<s.length;++n)s[n]^=54;this.hash.reset().process(s),void 0!==i?this._hmac_init_verify(i):this.verify=null}var kt,Mt,Dt=((kt=function(t,e){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}kt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(At,Mt=nt),At.prototype.reset=function(){this.result=null;var t=this.key;return this.hash.reset().asm.hmac_init(t[0]<<24|t[1]<<16|t[2]<<8|t[3],t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[8]<<24|t[9]<<16|t[10]<<8|t[11],t[12]<<24|t[13]<<16|t[14]<<8|t[15],t[16]<<24|t[17]<<16|t[18]<<8|t[19],t[20]<<24|t[21]<<16|t[22]<<8|t[23],t[24]<<24|t[25]<<16|t[26]<<8|t[27],t[28]<<24|t[29]<<16|t[30]<<8|t[31],t[32]<<24|t[33]<<16|t[34]<<8|t[35],t[36]<<24|t[37]<<16|t[38]<<8|t[39],t[40]<<24|t[41]<<16|t[42]<<8|t[43],t[44]<<24|t[45]<<16|t[46]<<8|t[47],t[48]<<24|t[49]<<16|t[50]<<8|t[51],t[52]<<24|t[53]<<16|t[54]<<8|t[55],t[56]<<24|t[57]<<16|t[58]<<8|t[59],t[60]<<24|t[61]<<16|t[62]<<8|t[63]),this},At.prototype.finish=function(){if(null!==this.result)throw new f("state must be reset before processing new data");var t=this.hash,e=this.hash.asm,i=this.hash.heap;e.hmac_finish(t.pos,t.len,0);var s=this.verify,n=new Uint8Array(20);if(n.set(i.subarray(0,20)),s){if(s.length!==n.length)throw new Error("HMAC verification failed, lengths doesn't match");for(var r=0,o=0;o<s.length;o++)r|=s[o]^n[o];if(0!==r)throw new Error("HMAC verification failed, hash value doesn't match")}else this.result=n;return this},At);function At(t,e){var i=this,s=new gt;return(i=Mt.call(this,s,t,e)||this).reset(),void 0!==e?i._hmac_init_verify(e):i.verify=null,i}var Rt,Nt,Ft=((Rt=function(t,e){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Rt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(Pt,Nt=nt),Pt.prototype.reset=function(){var t=this.key;return this.hash.reset().asm.hmac_init(t[0]<<24|t[1]<<16|t[2]<<8|t[3],t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[8]<<24|t[9]<<16|t[10]<<8|t[11],t[12]<<24|t[13]<<16|t[14]<<8|t[15],t[16]<<24|t[17]<<16|t[18]<<8|t[19],t[20]<<24|t[21]<<16|t[22]<<8|t[23],t[24]<<24|t[25]<<16|t[26]<<8|t[27],t[28]<<24|t[29]<<16|t[30]<<8|t[31],t[32]<<24|t[33]<<16|t[34]<<8|t[35],t[36]<<24|t[37]<<16|t[38]<<8|t[39],t[40]<<24|t[41]<<16|t[42]<<8|t[43],t[44]<<24|t[45]<<16|t[46]<<8|t[47],t[48]<<24|t[49]<<16|t[50]<<8|t[51],t[52]<<24|t[53]<<16|t[54]<<8|t[55],t[56]<<24|t[57]<<16|t[58]<<8|t[59],t[60]<<24|t[61]<<16|t[62]<<8|t[63]),this},Pt.prototype.finish=function(){if(null===this.key)throw new f("no key is associated with the instance");if(null!==this.result)throw new f("state must be reset before processing new data");var t=this.hash,e=this.hash.asm,i=this.hash.heap;e.hmac_finish(t.pos,t.len,0);var s=this.verify,n=new Uint8Array(32);if(n.set(i.subarray(0,32)),s){if(s.length!==n.length)throw new Error("HMAC verification failed, lengths doesn't match");for(var r=0,o=0;o<s.length;o++)r|=s[o]^n[o];if(0!==r)throw new Error("HMAC verification failed, hash value doesn't match")}else this.result=n;return this},Pt);function Pt(t,e){var i=this,s=new yt;return(i=Nt.call(this,s,t,e)||this).reset(),void 0!==e?i._hmac_init_verify(e):i.verify=null,i}var Ot,Lt,Bt=((Ot=function(t,e){return(Ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Ot(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(_t,Lt=nt),_t.prototype.reset=function(){var t=this.key;return this.hash.reset().asm.hmac_init(t[0]<<24|t[1]<<16|t[2]<<8|t[3],t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[8]<<24|t[9]<<16|t[10]<<8|t[11],t[12]<<24|t[13]<<16|t[14]<<8|t[15],t[16]<<24|t[17]<<16|t[18]<<8|t[19],t[20]<<24|t[21]<<16|t[22]<<8|t[23],t[24]<<24|t[25]<<16|t[26]<<8|t[27],t[28]<<24|t[29]<<16|t[30]<<8|t[31],t[32]<<24|t[33]<<16|t[34]<<8|t[35],t[36]<<24|t[37]<<16|t[38]<<8|t[39],t[40]<<24|t[41]<<16|t[42]<<8|t[43],t[44]<<24|t[45]<<16|t[46]<<8|t[47],t[48]<<24|t[49]<<16|t[50]<<8|t[51],t[52]<<24|t[53]<<16|t[54]<<8|t[55],t[56]<<24|t[57]<<16|t[58]<<8|t[59],t[60]<<24|t[61]<<16|t[62]<<8|t[63],t[64]<<24|t[65]<<16|t[66]<<8|t[67],t[68]<<24|t[69]<<16|t[70]<<8|t[71],t[72]<<24|t[73]<<16|t[74]<<8|t[75],t[76]<<24|t[77]<<16|t[78]<<8|t[79],t[80]<<24|t[81]<<16|t[82]<<8|t[83],t[84]<<24|t[85]<<16|t[86]<<8|t[87],t[88]<<24|t[89]<<16|t[90]<<8|t[91],t[92]<<24|t[93]<<16|t[94]<<8|t[95],t[96]<<24|t[97]<<16|t[98]<<8|t[99],t[100]<<24|t[101]<<16|t[102]<<8|t[103],t[104]<<24|t[105]<<16|t[106]<<8|t[107],t[108]<<24|t[109]<<16|t[110]<<8|t[111],t[112]<<24|t[113]<<16|t[114]<<8|t[115],t[116]<<24|t[117]<<16|t[118]<<8|t[119],t[120]<<24|t[121]<<16|t[122]<<8|t[123],t[124]<<24|t[125]<<16|t[126]<<8|t[127]),this},_t.prototype.finish=function(){if(null===this.key)throw new f("no key is associated with the instance");if(null!==this.result)throw new f("state must be reset before processing new data");var t=this.hash,e=this.hash.asm,i=this.hash.heap;e.hmac_finish(t.pos,t.len,0);var s=this.verify,n=new Uint8Array(64);if(n.set(i.subarray(0,64)),s){if(s.length!==n.length)throw new Error("HMAC verification failed, lengths doesn't match");for(var r=0,o=0;o<s.length;o++)r|=s[o]^n[o];if(0!==r)throw new Error("HMAC verification failed, hash value doesn't match")}else this.result=n;return this},_t);function _t(t,e){var i=this,s=new St;return(i=Lt.call(this,s,t,e)||this).reset(),void 0!==e?i._hmac_init_verify(e):i.verify=null,i}function Ht(t,e,i,s){for(var n=new Uint8Array(i),r=Math.ceil(i/t.HMAC_SIZE),o=1;o<=r;++o){var a=(o-1)*t.HMAC_SIZE,l=(o<r?0:i%t.HMAC_SIZE)||t.HMAC_SIZE;t.reset().process(e),t.hash.asm.pbkdf2_generate_block(t.hash.pos,t.hash.len,o,s,0),n.set(t.hash.heap.subarray(0,l),a)}return n}var zt=(Vt.prototype.encrypt=function(t){if(!this.key)throw new f("no key is associated with the instance");if(this.key[0].compare(t)<=0)throw new RangeError("data too large");var e=this.key[0],i=this.key[1],t=e.power(t,i).toBytes(),i=e.bitLength+7>>3;return t.length<i&&((e=new Uint8Array(i)).set(t,i-t.length),t=e),this.result=t,this},Vt.prototype.decrypt=function(t){if(this.key[0].compare(t)<=0)throw new RangeError("data too large");if(void 0!==this.key[3]){for(var e=this.key[0],i=this.key[3],s=this.key[4],n=this.key[5],r=this.key[6],o=this.key[7],n=i.power(t,n),r=s.power(t,r),a=n.subtract(r);a.sign<0;)a=a.add(i);r=i.reduce(o.multiply(a)).multiply(s).add(r).clamp(e.bitLength).toBytes()}else{e=this.key[0];var l=this.key[2];r=e.power(t,l).toBytes()}l=e.bitLength+7>>3;return r.length<l&&((e=new Uint8Array(l)).set(r,l-r.length),r=e),this.result=r,this},Vt);function Vt(t){var e=t.length;if(2!==e&&3!==e&&8!==e)throw new SyntaxError("unexpected key type");var i=new ct(new lt(t[0])),s=new lt(t[1]);this.key={0:i,1:s},2<e&&(this.key[2]=new lt(t[2])),3<e&&(this.key[3]=new ct(new lt(t[3])),this.key[4]=new ct(new lt(t[4])),this.key[5]=new lt(t[5]),this.key[6]=new lt(t[6]),this.key[7]=new lt(t[7]))}Gt.prototype.encrypt=function(t,e){var i=Math.ceil(this.rsa.key[0].bitLength/8),s=this.hash.HASH_SIZE,n=t.byteLength||t.length||0,r=i-n-2*s-2;if(n>i-2*this.hash.HASH_SIZE-2)throw new g("data too large");var i=new Uint8Array(i),o=i.subarray(1,s+1),a=i.subarray(s+1);if(a.set(t,s+r+1),a.set(this.hash.process(this.label||new Uint8Array(0)).finish().result,0),a[s+r]=1,void 0!==e){if(o.length!==e.length)throw new g("random size must equal the hash size");o.set(e)}else et(o);for(var l=this.RSA_MGF1_generate(o,a.length),d=0;d<a.length;d++)a[d]^=l[d];for(var h=this.RSA_MGF1_generate(a,o.length),d=0;d<o.length;d++)o[d]^=h[d];return this.rsa.encrypt(new lt(i)),new Uint8Array(this.rsa.result)},Gt.prototype.decrypt=function(t){if(!this.rsa.key)throw new f("no key is associated with the instance");var e=Math.ceil(this.rsa.key[0].bitLength/8),i=this.hash.HASH_SIZE;if((t.byteLength||t.length||0)!==e)throw new g("bad data");this.rsa.decrypt(new lt(t));var t=this.rsa.result[0],s=this.rsa.result.subarray(1,i+1),n=this.rsa.result.subarray(i+1);if(0!==t)throw new E("decryption failed");for(var r=this.RSA_MGF1_generate(n,s.length),o=0;o<s.length;o++)s[o]^=r[o];for(var a=this.RSA_MGF1_generate(s,n.length),o=0;o<n.length;o++)n[o]^=a[o];for(var l=this.hash.reset().process(this.label||new Uint8Array(0)).finish().result,o=0;o<i;o++)if(l[o]!==n[o])throw new E("decryption failed");for(var d=i;d<n.length;d++){var h=n[d];if(1===h)break;if(0!==h)throw new E("decryption failed")}if(d===n.length)throw new E("decryption failed");return this.rsa.result=n.subarray(d+1),new Uint8Array(this.rsa.result)},Gt.prototype.RSA_MGF1_generate=function(t,e){void 0===e&&(e=0);for(var i=this.hash.HASH_SIZE,s=new Uint8Array(e),n=new Uint8Array(4),r=Math.ceil(e/i),o=0;o<r;o++){n[0]=o>>>24,n[1]=o>>>16&255,n[2]=o>>>8&255,n[3]=255&o;var a=s.subarray(o*i),l=this.hash.reset().process(t).process(n).finish().result;l.length>a.length&&(l=l.subarray(0,a.length)),a.set(l)}return s},rt=Gt;function Gt(t,e,i){this.rsa=new zt(t),this.hash=e,this.label=void 0!==i&&0<i.length?i:null}Wt.prototype.sign=function(t,e){var i=this.rsa.key[0].bitLength,s=this.hash.HASH_SIZE,n=Math.ceil((i-1)/8),r=this.saltLength,o=n-r-s-2,a=new Uint8Array(n),l=a.subarray(n-s-1,n-1),d=a.subarray(0,n-s-1),h=d.subarray(1+o),c=new Uint8Array(8+s+r),u=c.subarray(8,8+s),s=c.subarray(8+s);if(u.set(this.hash.process(t).finish().result),0<r)if(void 0!==e){if(s.length!==e.length)throw new g("random size must equal the salt size");s.set(e)}else et(s);d[o]=1,h.set(s),l.set(this.hash.reset().process(c).finish().result);for(var f=this.RSA_MGF1_generate(l,d.length),p=0;p<d.length;p++)d[p]^=f[p];a[n-1]=188;i=8*n-i+1;return i%8&&(a[0]&=255>>>i),this.rsa.decrypt(new lt(a)),this.rsa.result},Wt.prototype.verify=function(t,e){var i=this.rsa.key[0].bitLength,s=this.hash.HASH_SIZE,n=Math.ceil((i-1)/8),r=this.saltLength,o=n-r-s-2;this.rsa.encrypt(new lt(t));var a=this.rsa.result;if(188!==a[n-1])throw new E("bad signature");var l=a.subarray(n-s-1,n-1),d=a.subarray(0,n-s-1),t=d.subarray(1+o),i=8*n-i+1;if(i%8&&a[0]>>>8-i)throw new E("bad signature");for(var h=this.RSA_MGF1_generate(l,d.length),c=0;c<d.length;c++)d[c]^=h[c];i%8&&(a[0]&=255>>>i);for(c=0;c<o;c++)if(0!==d[c])throw new E("bad signature");if(1!==d[o])throw new E("bad signature");a=new Uint8Array(8+s+r),i=a.subarray(8,8+s),r=a.subarray(8+s);i.set(this.hash.reset().process(e).finish().result),r.set(t);for(var u=this.hash.reset().process(a).finish().result,c=0;c<s;c++)if(l[c]!==u[c])throw new E("bad signature")},Wt.prototype.RSA_MGF1_generate=function(t,e){void 0===e&&(e=0);for(var i=this.hash.HASH_SIZE,s=new Uint8Array(e),n=new Uint8Array(4),r=Math.ceil(e/i),o=0;o<r;o++){n[0]=o>>>24,n[1]=o>>>16&255,n[2]=o>>>8&255,n[3]=255&o;var a=s.subarray(o*i),l=this.hash.reset().process(t).process(n).finish().result;l.length>a.length&&(l=l.subarray(0,a.length)),a.set(l)}return s},d=Wt;function Wt(t,e,i){if(void 0===i&&(i=4),this.rsa=new zt(t),this.hash=e,this.saltLength=i,this.saltLength<0)throw new TypeError("saltLength should be a non-negative number");if(null!==this.rsa.key&&Math.ceil((this.rsa.key[0].bitLength-1)/8)<this.hash.HASH_SIZE+this.saltLength+2)throw new SyntaxError("saltLength is too large")}jt.prototype.sign=function(t){if(!this.rsa.key)throw new f("no key is associated with the instance");var e=qt(this.hash),i=this.hash.HASH_SIZE,s=e.length+i,n=this.rsa.key[0].bitLength+7>>3;if(n<s+11)throw new Error("Message too long");var r=new Uint8Array(i);r.set(this.hash.process(t).finish().result);var o=new Uint8Array(n),a=0;for(o[a++]=0,o[a++]=1;a<n-s-1;a++)o[a]=255;return o[a++]=0,o.set(e,a),o.set(r,o.length-i),this.rsa.decrypt(new lt(o)),this.rsa.result},jt.prototype.verify=function(t,e){var i=qt(this.hash),s=this.hash.HASH_SIZE,n=i.length+s,r=this.rsa.key[0].bitLength+7>>3;if(r<n+11)throw new E("Bad signature");this.rsa.encrypt(new lt(t));var o=new Uint8Array(s);o.set(this.hash.process(e).finish().result);var a=1,l=this.rsa.result,d=0;for(a&=0===l[d++]?1:0,a&=1===l[d++]?1:0;d<r-n-1;d++)a&=255===l[d]?1:0;a&=0===l[d++]?1:0;for(var h=0,c=d+i.length;d<c;d++)a&=l[d]===i[h++]?1:0;for(h=0,c=d+o.length;d<c;d++)a&=l[d]===o[h++]?1:0;if(!a)throw new E("Bad signature")},nt=jt;function jt(t,e){this.rsa=new zt(t),this.hash=e}var Ut={sha1:new Uint8Array([48,33,48,9,6,5,43,14,3,2,26,5,0,4,20]),sha256:new Uint8Array([48,49,48,13,6,9,96,134,72,1,101,3,4,2,1,5,0,4,32]),sha384:new Uint8Array([48,65,48,13,6,9,96,134,72,1,101,3,4,2,2,5,0,4,48]),sha512:new Uint8Array([48,81,48,13,6,9,96,134,72,1,101,3,4,2,3,5,0,4,64])};function qt(t){var e=Ut[t.NAME];if(!e)throw new Error("Cannot get hash prefix for hash algorithm '"+t.NAME+"'");return e}return t.AES_CBC=P,t.AES_CCM=B,t.AES_CFB=H,t.AES_CMAC=j,t.AES_CTR=q,t.AES_ECB=V,t.AES_GCM=$,t.AES_OFB=Z,t.BigNumber=lt,t.HmacSha1=Dt,t.HmacSha256=Ft,t.HmacSha512=Bt,t.IllegalArgumentError=g,t.IllegalStateError=f,t.Modulus=ct,t.Pbkdf2HmacSha1=function(t,e,i,s){return Ht(new Dt(t),e,s,i)},t.Pbkdf2HmacSha256=function(t,e,i,s){return Ht(new Ft(t),e,s,i)},t.Pbkdf2HmacSha512=function(t,e,i,s){return Ht(new Bt(t),e,s,i)},t.RSA=zt,t.RSA_OAEP=rt,t.RSA_PKCS1_v1_5=nt,t.RSA_PSS=d,t.SecurityError=E,t.Sha1=gt,t.Sha256=yt,t.Sha512=St,t.base64_to_bytes=function(t){return s(e(t))},t.bytes_to_base64=function(t){return i(n(t))},t.bytes_to_hex=function(t){for(var e="",i=0;i<t.length;i++){var s=(255&t[i]).toString(16);s.length<2&&(e+="0"),e+=s}return e},t.bytes_to_string=n,t.hex_to_bytes=function(t){var e=t.length;1&e&&(t="0"+t,e++);for(var i=new Uint8Array(e>>1),s=0;s<e;s+=2)i[s>>1]=parseInt(t.substr(s,2),16);return i},t.string_to_bytes=s,t}({}),statusText;function readBinaryStringAsync(s){return new Promise((t,e)=>{let i=new FileReader;i.onload=()=>{t(i.result)},i.onerror=e,i.readAsBinaryString(s)})}function readArrayBufferAsync(s){return new Promise((t,e)=>{let i=new FileReader;i.onload=()=>{t(i.result)},i.onerror=e,i.readAsArrayBuffer(s)})}async function showExportCklFiles(t,s,e="asset",n){try{let i;const o=new Ext.Button({text:"Export",iconCls:"sm-export-icon",disabled:!1,handler:function(){var t=a.getChecked(),e=l.checked;i.close(),exportCklArchive(s,t,e)}});var r={panel:this,width:400,flex:1,collectionId:t,data:n,listeners:{checkstateschanged:function(){var t=Object.keys(a.getChecked()).length;o.setDisabled(0===t)}}};const a=new("asset"===e?SM.ExportsAssetTree:SM.ExportsStigTree)(r);i=new Ext.Window({title:"Export CKL archive",cls:"sm-dialog-window sm-round-panel",modal:!0,hidden:!0,width:450,height:600,layout:"vbox",layoutConfig:{align:"stretch",pack:"start",padding:"0 10 10 10"},plain:!0,bodyStyle:"padding:5px 5px 0 5px;",buttonAlign:"left",items:[{html:`<div class="sm-dialog-panel-title">Select ZIP members</div>
          <div class="sm-dialog-panel-text">Badges: 
            <span class="sm-export-sprite sm-export-sprite-high">Accepted: &lt; 100%</span>
            <span class="sm-export-sprite sm-export-sprite-low">Accepted: 100%</span>
          </div>`,border:!1},a],fbar:[{xtype:"panel",border:!1,html:`<div class="sm-dialog-panel-text" style="padding:12px;">
          <input type="checkbox" name="multi-ckl" id="multi-ckl" style="vertical-align: -2px;"/>
          <label for="multi-ckl">Export multi-STIG CKLs (one file per Asset).</label>
          </div>`},"->",o]}),i.show(document.body);const l=i.getEl().dom.querySelector("#multi-ckl")}catch(t){"object"==typeof t&&(t=t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t),2):JSON.stringify(t)),alert(t),Ext.getBody().unmask()}}async function exportCklArchive(t,e,i){try{const n=new JSZip;initProgress("Exporting checklists","Initializing...");const r=i?async function(t,i){t=Object.entries(t);let s=0;var n,r,o,a=t.length;for([n,{assetName:r,benchmarkIds:o}]of t){let t="";0!==o.length&&(t="?"+o.map(t=>"benchmarkId="+t).join("&")),updateProgress(s/a,"Fetching CKL for "+r),updateStatusText(`Fetching checklist for ${r}: `,!0),await window.oidcProvider.updateToken(10);var l=`${STIGMAN.Env.apiBase}/assets/${n}/checklists`+t;let e=await fetch(l,{method:"GET",headers:new Headers({Authorization:"Bearer "+window.oidcProvider.token})});const h=e.headers.get("content-disposition");var d=h.match(/filename\*?=['"]?(?:UTF-\d['"]*)?([^;\r\n"']*)['"]?;?/)[1];console.log(d);l=await e.blob();updateStatusText("[OK]"),s++,i.file(d,l)}}:async function(t,e){var i,s,n,r,o,a,t=Object.entries(t);let l=0,d=t.length;for([i,{assetName:s,benchmarkIds:n=[]}]of t){if(0===n.length){var h=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/assets/${i}/stigs`,method:"GET"});const f=JSON.parse(h.response.responseText);n.push(...f.map(t=>t.benchmarkId))}d+=n.length}for([r,{assetName:o,benchmarkIds:a=[]}]of t)for(const p of a){updateProgress(l/d,`Fetching CKL for ${o}/`+p),updateStatusText(`Fetching checklist for ${o}/${p}: `,!0),await window.oidcProvider.updateToken(10);var c,u=`${STIGMAN.Env.apiBase}/assets/${r}/checklists/${p}/latest?format=ckl`;let t=await fetch(u,{method:"GET",headers:new Headers({Authorization:"Bearer "+window.oidcProvider.token})});const m=t.headers.get("content-disposition");m?(c=m.match(/filename\*?=['"]?(?:UTF-\d['"]*)?([^;\r\n"']*)['"]?;?/)[1],console.log(c),u=await t.blob(),updateStatusText("[OK]"),l++,e.file(c,u)):updateStatusText("Error: missing 'Content-Disposition'")}};await r(e,n),updateProgress(1,"Generating Zip archive..."),updateStatusText("Generating Zip archive...");var s=await n.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}},t=>{updateProgress(t.percent/100,"Compressing "+t.currentFile)});updateProgress(1,"Done"),updateStatusText("Done"),saveAs(s,t+".zip")}catch(t){alert(t.message+`
`+t.stack)}}Ext.ns("SM.Attachments"),SM.Attachments.Grid=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){const i=this;var t=Ext.id();const r=new Ext.data.JsonStore({grid:this,root:"",fields:["name","size","type","description","digest","user",{name:"date",type:"date",dateFormat:"c"}],idProperty:"digest"});var e=[{header:"Artifact",id:"name-"+t,width:100,dataIndex:"name",sortable:!0,align:"left",renderer:function(t,e,i){var s='<img src="'+getFileIcon(t)+'" class="sm-artifact-file-icon">';return s+="<b>"+t+"</b>",s+="<br><b>Type:</b> "+i.data.type+" <b>Size:</b> "+i.data.size,s+=`<br><i>Attached ${i.data.date.format("Y-m-d")} by ${i.data.user.name}</i>`}},{width:25,header:"download",fixed:!0,dataIndex:"none",renderer:function(t,e,i){return e.css="artifact-view",e.attr='ext:qtip="View artifact"',""}},{width:25,header:"delete",fixed:!0,dataIndex:"none",renderer:function(t,e,i){return e.css="artifact-delete",e.attr='ext:qtip="Unattach the artifact from this review"',""}}];const o=async function(t){t=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${i.collectionId}/reviews/${i.assetId}/${i.ruleId}/metadata/keys/`+t,method:"GET"});return JSON.parse(t.response.responseText)};const s=async function(t){let e;try{e=await n(t),await a(e.attachment.digest,e.data)}catch(t){return void Ext.Msg.alert("Error","Failed to save file data: "+t.message)}try{r.loadData([e.attachment],!0);var i=r.getRange().map(t=>t.data);await a("artifacts",JSON.stringify(i))}catch(t){try{await l(e.attachment.digest)}catch(t){console.log(t),Ext.Msg.alert("Error","Failed to save metadata: "+t.message)}}},n=async function(t){const e=new asmCrypto.Sha256;var i=await readArrayBufferAsync(t),s=new Uint8Array(i),i=asmCrypto.bytes_to_base64(s);e.process(s),e.finish();s=asmCrypto.bytes_to_hex(e.result);return{attachment:{name:t.name,date:new Date,size:t.size,type:t.type,user:{userId:curUser.userId,name:curUser.display},digest:s},data:i}},a=async function(t,e){e=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${i.collectionId}/reviews/${i.assetId}/${i.ruleId}/metadata/keys/`+t,method:"PUT",jsonData:JSON.stringify(e)});return e.response.responseText?JSON.parse(e.response.responseText):""},l=async function(t){t=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${i.collectionId}/reviews/${i.assetId}/${i.ruleId}/metadata/keys/`+t,method:"DELETE"});return t.response.responseText?JSON.parse(t.response.responseText):""};var d=new Ext.ux.form.FileUploadField({buttonOnly:!0,accept:".gif,.jpg,.jpeg,.svg,.png,.bmp",webkitdirectory:!1,multiple:!1,style:"width: 95px;",buttonText:"Attach image...",buttonCfg:{icon:"img/attach-16.png"},listeners:{fileselected:async function(e){try{var t=[...e.fileInput.dom.files];await s(t[0]),e.reset()}catch(t){e.reset(),alert(t.message)}}}}),t={loadArtifacts:async function(){try{r.removeAll();var t=await o("artifacts");return r.loadData(JSON.parse(t)),!0}catch(t){return!1}},fileUploadField:d,disableSelection:!0,layout:"fit",cls:"custom-artifacts",hideHeaders:!0,border:!1,store:r,columns:e,stripeRows:!0,view:new SM.ColumnFilters.GridView({forceFit:!0,emptyText:"No attachments to display.",deferEmptyText:!1}),tbar:new Ext.Toolbar({items:[d]}),loadMask:!0,autoExpandColumn:"name-"+t,emptyText:"No attachments to display",listeners:{cellclick:function(t,e,i,s){var n=t.getStore().getAt(e);switch(t.getColumnModel().getColumnHeader(i)){case"download":!async function(t){const e=new Ext.Panel({bodyStyle:"background-color: #333;"});var i=Ext.getBody().getViewSize(),s=.75*i.height,i=.75*i.width<=1024?.75*i.width:1024;const n=new Ext.Window({title:"Image",modal:!0,resizable:!0,width:i,height:s,layout:"fit",plain:!0,bodyStyle:"padding:5px;",buttonAlign:"center",items:e});n.show();try{var r=await o(t.digest);e.update(`<img style='height: 100%; width: 100%; object-fit: contain' src='data:${t.type};base64,${encodeURI(r)}'></img>`)}catch(t){Ext.Msg.alert("Error","File data not available")}}(n.data);break;case"delete":!async function(t){if("yes"===await SM.confirmPromise("Confirm",`Remove ${t.data.name}?`)){try{await l(t.data.digest)}catch(t){return Ext.Msg.alert("Error","Failed to delete metadata key: "+t.message)}try{r.remove(t);var e=r.getRange().map(t=>t.data);await a("artifacts",JSON.stringify(e))}catch(t){Ext.Msg.alert("Error","Failed to update metadata: "+t.message)}}}(n)}}}};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.Attachments.Grid.superclass.initComponent.call(this)}}),SM.ExportsAssetTree=Ext.extend(Ext.tree.TreePanel,{initComponent:function(){var t={layout:"fit",autoScroll:!0,bodyStyle:"padding:5px;",minSize:220,root:{nodeType:"async",id:this.collectionId+"-assignment-root",checked:!1,expanded:!0},rootVisible:!1,loader:new Ext.tree.TreeLoader({directFn:this.loadTree}),loadMask:"Loading...",listeners:{checkchange:this.onCheckChange}};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.ExportsAssetTree.superclass.initComponent.call(this)},loadTree:async function(t,i){try{let e;if(e=t.match(/^(\d+)-assignment-root$/),e)return void i([{id:e[1]+"-assignment-assets-node",node:"assets",text:'<span style="font-weight: 600;">All Assets</span>',checked:!0,expanded:!0,iconCls:"sm-asset-icon"}],{status:!0});if(e=t.match(/^(\d+)-assignment-assets-node$/),e){let s=e[1];const o=this.ownerTree.data.filter(t=>0<t.stigCount);var n=o.map(t=>{var e=Math.round(t.acceptedPct),i=100===e?"sm-export-sprite-low":50<=e?"sm-export-sprite-medium":"sm-export-sprite-high";return{id:`${s}-${t.assetId}-assignment-assets-asset-node`,text:SM.he(t.name)+` <span class="sm-export-sprite ${i}">${e}%</span>`,node:"asset",collectionId:s,assetId:t.assetId,assetName:t.name,stigCount:t.stigCount,iconCls:"sm-asset-icon",checked:!!this.ui.checkbox.checked,qtip:SM.he(t.name)}});return this.getOwnerTree().assetsNode=this,void i(n,{status:!0})}if(e=t.match(/^(\d+)-(\d+)-assignment-assets-asset-node$/),e){let s=e[1],n=e[2];var r=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${s}/status`,method:"GET",params:{assetId:n}});let t=JSON.parse(r.response.responseText);return void i(t.map(t=>{var e=Math.round(t.status.accepted.total/t.rules.total*100),i=100===e?"sm-export-sprite-low":50<=e?"sm-export-sprite-medium":"sm-export-sprite-high";return{id:`${s}-${n}-${t.benchmarkId}-assignment-leaf`,text:SM.he(t.benchmarkId)+` <span class="sm-export-sprite ${i}">${e}%</span>`,leaf:!0,node:"asset-stig",iconCls:"sm-stig-icon",stigName:t.benchmarkId,assetName:t.assetName,assetId:t.assetId,collectionId:s,benchmarkId:t.benchmarkId,checked:!!this.ui.checkbox.checked}}),{status:!0})}}catch(t){Ext.Msg.alert("Status","AJAX request failed in loadTree()")}},onCheckChange:function(t,i){function s(t){for(const e of t.childNodes)e.ui.checkbox.checked=i,e.attributes.checked=i,e.ui.checkbox.indeterminate=!1,s(e)}s(t);let e=t;for(;e;){const h=e.parentNode;if(h?.ui?.checkbox){const c=[];let t=e;for(;t;){var n=t.ui.checkbox.indeterminate?"indeterminate":t.ui.checkbox.checked?"checked":"unchecked";c.push(n),t=t.nextSibling}t=e;do{var r;t=t.previousSibling,t&&(r=t.ui.checkbox.indeterminate?"indeterminate":t.ui.checkbox.checked?"checked":"unchecked",c.push(r))}while(t);var o=c.every(t=>"checked"===t),a=c.some(t=>"checked"===t),l=c.some(t=>"unchecked"===t),d=c.some(t=>"indeterminate"===t);h.ui.checkbox.checked=o,h.attributes.checked=o,h.ui.checkbox.indeterminate=d||a&&l}e=h}this.fireEvent("checkstateschanged")},getChecked:function(t){t=t||this.assetsNode||this.root;var e={};return t.cascade(function(){return this===t||(this.ui?.checkbox?.checked&&!this.ui?.checkbox?.indeterminate?(e[this.attributes.assetId]||(e[this.attributes.assetId]={assetName:this.attributes.assetName,benchmarkIds:[]}),!!this.attributes.benchmarkId&&(e[this.attributes.assetId].benchmarkIds.push(this.attributes.benchmarkId),!0)):!(!this.ui?.checkbox?.checked&&!this.ui?.checkbox?.indeterminate)&&void 0)}),e}}),SM.ExportsStigTree=Ext.extend(Ext.tree.TreePanel,{initComponent:function(){var t={layout:"fit",autoScroll:!0,bodyStyle:"padding:5px;",minSize:220,root:{nodeType:"async",id:this.collectionId+"-assignment-root",checked:!1,expanded:!0},rootVisible:!1,loader:new Ext.tree.TreeLoader({directFn:this.loadTree,preloadChildren:!0}),loadMask:"Loading...",listeners:{checkchange:this.onCheckChange}};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.ExportsAssetTree.superclass.initComponent.call(this)},loadTree:async function(e,n){try{let t;if(t=e.match(/^(\d+)-assignment-root$/),t)return void n([{id:t[1]+"-assignment-stigs-node",node:"stigs",text:'<span style="font-weight: 600;">All STIGs</span>',checked:!0,expanded:!0,iconCls:"sm-stig-icon"}],{status:!0});if(t=e.match(/^(\d+)-assignment-stigs-node$/),t){var r=t[1];const u=this.getOwnerTree().data;var o=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+`/collections/${r}/status`,method:"GET",params:{benchmarkId:u.map(t=>t.benchmarkId)}}),a=JSON.parse(o.response.responseText);let i={};for(const f of a)i[f.benchmarkId]||(i[f.benchmarkId]=[]),i[f.benchmarkId].push(f);let s=[];for(const p of u){var l=Math.round(p.acceptedPct),d=100===l?"sm-export-sprite-low":50<=l?"sm-export-sprite-medium":"sm-export-sprite-high";let t={id:`${r}-${p.benchmarkId}-assignment-stigs-stig-node`,text:p.benchmarkId+` <span class="sm-export-sprite ${d}">${l}%</span>`,node:"stig",collectionId:r,benchmarkId:p.benchmarkId,iconCls:"sm-stig-icon",checked:!!this.ui.checkbox.checked,qtip:SM.he(p.title)},e=[];for(const m of i[p.benchmarkId]){var h=Math.round(m.status.accepted.total/m.rules.total*100),c=100===h?"sm-export-sprite-low":50<=h?"sm-export-sprite-medium":"sm-export-sprite-high";e.push({id:`${r}-${m.benchmarkId}-${m.assetId}-assignment-leaf`,text:SM.he(m.assetName)+` <span class="sm-export-sprite ${c}">${h}%</span>`,leaf:!0,node:"stig-asset",iconCls:"sm-asset-icon",stigName:m.benchmarkId,assetName:m.assetName,assetId:m.assetId,collectionId:r,benchmarkId:m.benchmarkId,checked:!!this.ui.checkbox.checked})}t.children=e,s.push(t)}this.getOwnerTree().stigsNode=this,n(s,{status:!0});return void this.cascade(function(){this.getOwnerTree().loader.doPreload(this),this.renderChildren()})}}catch(t){Ext.Msg.alert("Status","AJAX request failed in loadTree()")}},onCheckChange:function(t,i){function s(t){for(const e of t.childNodes)e.ui.checkbox.checked=i,e.attributes.checked=i,e.ui.checkbox.indeterminate=!1,s(e)}s(t);let e=t;for(;e;){const h=e.parentNode;if(h?.ui?.checkbox){const c=[];let t=e;for(;t;){var n=t.ui.checkbox.indeterminate?"indeterminate":t.ui.checkbox.checked?"checked":"unchecked";c.push(n),t=t.nextSibling}t=e;do{var r;t=t.previousSibling,t&&(r=t.ui.checkbox.indeterminate?"indeterminate":t.ui.checkbox.checked?"checked":"unchecked",c.push(r))}while(t);var o=c.every(t=>"checked"===t),a=c.some(t=>"checked"===t),l=c.some(t=>"unchecked"===t),d=c.some(t=>"indeterminate"===t);h.ui.checkbox.checked=o,h.attributes.checked=o,h.ui.checkbox.indeterminate=d||a&&l}e=h}this.fireEvent("checkstateschanged")},getChecked:function(t){t=t||this.stigsNode||this.root;var e={};return t.cascade(function(){return this===t||(!this.attributes.assetId||(this.ui?.checkbox?.checked&&!this.ui?.checkbox?.indeterminate?(e[this.attributes.assetId]||(e[this.attributes.assetId]={assetName:this.attributes.assetName,benchmarkIds:[]}),!!this.attributes.benchmarkId&&(e[this.attributes.assetId].benchmarkIds.push(this.attributes.benchmarkId),!0)):!(!this.ui?.checkbox?.checked&&!this.ui?.checkbox?.indeterminate)&&void 0))}),e}});const reviewsFromCkl=function(t,a={},l){a.ignoreNr=!!a.ignoreNr;t=parser.parse(t,{attributeNamePrefix:"",ignoreAttributes:!1,ignoreNameSpace:!0,allowBooleanAttributes:!1,parseNodeValue:!1,parseAttributeValue:!1,trimValues:!0,cdataTagName:"__cdata",cdataPositionChar:"\\c",localeRange:"",parseTrueNumberOnly:!1,arrayMode:!0,tagValueProcessor:t=>function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value}(t)});if(!t.CHECKLIST)throw new Error("No CHECKLIST element");if(!t.CHECKLIST[0].ASSET)throw new Error("No ASSET element");if(!t.CHECKLIST[0].STIGS)throw new Error("No STIGS element");let e={};if(e.target=function(t){let e={name:t.HOST_NAME,description:null,ip:t.HOST_IP||null,fqdn:t.HOST_FQDN||null,mac:t.HOST_MAC||null,noncomputing:"Non-Computing"===t.ASSET_TYPE};const i={};t.ROLE&&(i.cklRole=t.ROLE);t.TECH_AREA&&(i.cklTechArea=t.TECH_AREA);"true"===t.WEB_OR_DATABASE&&(i.cklWebOrDatabase="true",i.cklHostName=t.HOST_NAME,t.WEB_DB_SITE&&(i.cklWebDbSite=t.WEB_DB_SITE),t.WEB_DB_INSTANCE&&(i.cklWebDbInstance=t.WEB_DB_INSTANCE));return e.metadata=i,e}(t.CHECKLIST[0].ASSET[0]),!e.target.name)throw new Error("No host_name in ASSET");if(e.checklists=function(t){let o=[];return t.forEach(t=>{let e={},i=t.STIG_INFO[0].SI_DATA.filter(t=>"stigid"===t.SID_NAME)[0];e.benchmarkId=i.SID_DATA.replace("xccdf_mil.disa.stig_benchmark_","");var s=t.STIG_INFO[0].SI_DATA.filter(t=>"version"===t.SID_NAME)[0].SID_DATA;let n=t.STIG_INFO[0].SI_DATA.filter(t=>"releaseinfo"===t.SID_NAME)[0].SID_DATA;var r=n.match(/Release:\s*(.+?)\s/)[1];e.revisionStr=`V${s}R`+r,e.benchmarkId&&(t=function(t){const e={NotAFinding:"pass",Open:"fail",Not_Applicable:"notapplicable",Not_Reviewed:"notchecked"},s={pass:0,fail:0,notapplicable:0,notchecked:0,notselected:0,informational:0,error:0,fixed:0,unknown:0};let n=[];return t?.forEach(t=>{let i=e[t.STATUS];if(i&&("notchecked"===i&&(t.FINDING_DETAILS||t.COMMENTS)&&(i="informational"),s[i]++,"notchecked"!==i||!a.ignoreNr)){let e;t.STIG_DATA.some(t=>{if("Rule_ID"==t.VULN_ATTRIBUTE)return e=t.ATTRIBUTE_DATA,!0}),e&&(function(t,e,i,s){let n=!1;switch(s.detailRequired){case"optional":n=!0;break;case"findings":("fail"!==t||"fail"===t&&e)&&(n=!0);break;case"always":e&&(n=!0)}let r=!1;switch(s.commentRequired){case"optional":r=!0;break;case"findings":("fail"!==t||"fail"===t&&i)&&(r=!0);break;case"always":i&&(r=!0)}n&&r}(i,t.FINDING_DETAILS,t.COMMENTS,l),n.push({ruleId:e,result:i,detail:a.replaceText?t.FINDING_DETAILS:t.FINDING_DETAILS||null,comment:a.replaceText?t.COMMENTS:t.COMMENTS||null,autoResult:!1}))}}),{reviews:n,stats:s}}(t.VULN),e.reviews=t.reviews,e.stats=t.stats,o.push(e))}),o}(t.CHECKLIST[0].STIGS[0].iSTIG),0===e.checklists.length)throw new Error("STIG_INFO element has no SI_DATA for SID_NAME == stigId");return e},reviewsFromScc=function(i,s={}){{s.ignoreNotChecked=!!s.ignoreNotChecked;var n={attributeNamePrefix:"",ignoreAttributes:!1,ignoreNameSpace:!0,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!0,trimValues:!0,cdataTagName:"__cdata",cdataPositionChar:"\\c",localeRange:"",parseTrueNumberOnly:!1,arrayMode:!1};let t=parser.parse(i,n);if(!t.Benchmark)throw new Error("No Benchmark element");if(!t.Benchmark.TestResult)throw new Error("No TestResult element");if(!t.Benchmark.TestResult["target-facts"])throw new Error("No target-facts element");if(!t.Benchmark.TestResult["rule-result"])throw new Error("No rule-result element");let e=t.Benchmark.id.replace("xccdf_mil.disa.stig_benchmark_","");s.scapBenchmarkMap&&s.scapBenchmarkMap.has(e)&&(e=s.scapBenchmarkMap.get(e));i=function(t){let i={};t.forEach(e=>{if(e["#text"]){let t=e.name.replace("urn:scap:fact:asset:identifier:","");t="ipv4"===t?"ip":t,i[t]=e["#text"]}});const{ip:e,host_name:s,fqdn:n,mac:r,...o}=i;return{name:s,description:"",ip:e,mac:r,fqdn:n,noncomputing:!1,metadata:o}}(t.Benchmark.TestResult["target-facts"].fact);if(!i.name)throw new Error("No host_name fact");n=function(t){const e={pass:0,fail:0,notapplicable:0,notchecked:0,notselected:0,informational:0,error:0,fixed:0,unknown:0};let i=[];return t.forEach(t=>{e[t.result]++,t.result&&("notchecked"===t.result&&s.ignoreNotChecked||i.push({ruleId:t.idref.replace("xccdf_mil.disa.stig_rule_",""),result:t.result,detail:"SCC Reviewed at "+t.time,autoResult:!0,status:"saved"}))}),{reviews:i,stats:e}}(t.Benchmark.TestResult["rule-result"]);return{target:i,checklists:[{benchmarkId:e,revisionStr:null,reviews:n.reviews,stats:n.stats}]}}};function readTextFileAsync(s){return new Promise((t,e)=>{let i=new FileReader;i.onload=()=>{t(i.result)},i.onerror=e,i.readAsText(s)})}Ext.ns("SM.Review.Form"),SM.Review.Form.ResultCombo=Ext.extend(Ext.form.ComboBox,{initComponent:function(){var t={triggerClass:"sm-review-trigger",disabledClass:"sm-review-item-disabled",width:100,lastSavedData:"",cls:"sm-review-combo-input",changed:!1,fieldLabel:'Result<i class= "fa fa-question-circle sm-question-circle"></i>',labelSeparator:"",emptyText:"Your result...",name:"result",hiddenName:"result",mode:"local",triggerAction:"all",editable:!1,store:new Ext.data.SimpleStore({fields:["result","resultStr"],data:[["pass","Not a Finding"],["notapplicable","Not Applicable"],["fail","Open"]]}),valueField:"result",displayField:"resultStr",listeners:{render:function(t){new Ext.ToolTip({target:t.label.dom.getElementsByClassName("fa")[0],showDelay:0,dismissDelay:0,autoWidth:!0,html:SM.ResultTipText}).getId()}}};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.Review.Form.ResultCombo.superclass.initComponent.call(this)}}),SM.Review.Form.DetailTextArea=Ext.extend(Ext.form.TextArea,{initComponent:function(){const e=this;Ext.apply(this,Ext.apply(this.initialConfig,{cls:"sm-review-result-textarea",lastSavedData:"",allowBlank:!0,fieldLabel:'Detail<i class= "fa fa-question-circle sm-question-circle"></i>',labelSeparator:"",autoScroll:"auto",name:"detail",enableKeyEvents:!0,listeners:{render:function(t){t.mon(t.el,"input",e.onInput),e.infoTip=new Ext.ToolTip({target:t.label.dom.getElementsByClassName("fa")[0],showDelay:0,dismissDelay:0,autoWidth:!0,tpl:SM.DetailTipTpl,data:e.fieldSettings})}}})),SM.Review.Form.DetailTextArea.superclass.initComponent.call(this)}}),SM.Review.Form.CommentTextArea=Ext.extend(Ext.form.TextArea,{initComponent:function(){const e=this;Ext.apply(this,Ext.apply(this.initialConfig,{cls:"sm-review-action-textarea",lastSavedData:"",allowBlank:!0,fieldLabel:'Comment<i class= "fa fa-question-circle sm-question-circle"></i>',labelSeparator:"",autoScroll:"auto",name:"comment",listeners:{render:function(t){t.mon(t.el,"input",e.onInput),e.infoTip=new Ext.ToolTip({target:t.label.dom.getElementsByClassName("fa")[0],showDelay:0,dismissDelay:0,autoWidth:!0,tpl:SM.CommentTipTpl,data:e.fieldSettings})}}})),SM.Review.Form.CommentTextArea.superclass.initComponent.call(this)}}),SM.Review.Form.AutoSprite=Ext.extend(Ext.form.DisplayField,{autoCreate:{tag:"span",class:"sm-review-auto-sprite"},setRawValue:function(t){var e=t?"Automated":"Manual";return this.value=!!t,this.rendered&&(this.el.dom.innerHTML=e),!!this.value},getRawValue:function(){return!!this.value},initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,{name:"autoResult",hideLabel:!0})),SM.Review.Form.AutoSprite.superclass.initComponent.call(this)}}),SM.Review.Form.Button=Ext.extend(Ext.Button,{initComponent:function(){Ext.apply(this,Ext.apply(this.initialConfig,{text:"Loading...",disabled:!0})),SM.Review.Form.Button.superclass.initComponent.call(this)}}),SM.Review.Form.Panel=Ext.extend(Ext.form.FormPanel,{initComponent:function(){const l=this,d=new SM.Review.Form.AutoSprite({style:{marginLeft:"10px"}}),h=new SM.Review.Form.ResultCombo({listeners:{select:function(){d.lastSavedData&&(this.value!==this.lastSavedData?d.setValue(!1):d.setValue(!0)),t()}}}),c=new SM.Review.Form.DetailTextArea({anchor:"100%, 50%",fieldSettings:l.fieldSettings,onInput:function(t){l.setReviewFormItemStates()},listeners:{focus:function(t){t.addClass("sm-field-focus")},blur:function(t){t.removeClass("sm-field-focus")}}}),u=new SM.Review.Form.CommentTextArea({anchor:"100%, 50%",fieldSettings:l.fieldSettings,onInput:function(t){l.setReviewFormItemStates()},listeners:{focus:function(t){t.addClass("sm-field-focus")},blur:function(t){t.removeClass("sm-field-focus")}}}),i=new Ext.form.DisplayField({fieldLabel:"Reviewed",hideLabel:!0,allowBlank:!0,name:"editStr",formatValue:function(t){this.setValue(`<span class="sm-review-sprite sm-review-sprite-reviewed"></span>
        <span class="sm-review-sprite sm-review-sprite-date">${new Date(t.ts).format("Y-m-d H:i T")}</span>
        <span class="sm-review-sprite sm-review-sprite-user">${t.username}</span>`)}}),s=new Ext.form.DisplayField({fieldLabel:"Status",hideLabel:!0,allowBlank:!0,name:"status",formatValue:function(t){this.setValue(`<span class="sm-review-sprite sm-review-sprite-${t.label}"></span>
        <span class="sm-review-sprite sm-review-sprite-date">${new Date(t.ts).format("Y-m-d H:i T")}</span>
        <span class="sm-review-sprite sm-review-sprite-user">${t.user.username}<span>`)}}),f=new SM.Review.Form.Button({handler:l.btnHandler}),p=new SM.Review.Form.Button({handler:l.btnHandler});let m="";function n(){null===h.value&&(h.value=""),d.lastSavedData=d.value,h.lastSavedData=h.value,c.lastSavedData=null===c.value?"":c.value,u.lastSavedData=null===u.value?"":u.value}function g(){return!!h.value&&(!("always"===l.fieldSettings.detailRequired&&!c.getValue())&&(!("findings"===l.fieldSettings.detailRequired&&"fail"===h.value&&!c.getValue())&&(!("always"===l.fieldSettings.commentRequired&&!u.getValue())&&!("findings"===l.fieldSettings.commentRequired&&"fail"===h.value&&!u.getValue()))))}function t(){const t=h,e=c,i=u;d;const s=f,n=p,r=l;var o=l.fieldSettings,a=""===m||"saved"===m||"rejected"===m;if(t.setDisabled(!a),e.setDisabled(!a),i.setDisabled(!a),f.setDisabled(!a),p.setDisabled(!a),a&&("always"===o.detailEnabled?e.enable():"findings"===o.detailEnabled&&("fail"===t.value?e.enable():e.disable()),"always"===o.commentEnabled?i.enable():"findings"===o.commentEnabled&&("fail"===t.value?i.enable():i.disable()),""!==t.value&&void 0!==t.value&&null!==t.value||(e.disable(),i.disable())),g())if(r.reviewChanged())switch(m){case"":case"saved":s.enable(),s.setText("Save without submitting"),s.setIconClass("sm-disk-icon"),s.actionType="save",s.setTooltip(""),n.enable(),n.setText("Save and Submit"),n.setIconClass("sm-ready-icon"),n.actionType="save and submit",n.setTooltip("");break;case"submitted":break;case"rejected":s.enable(),s.setText("Save without submitting"),s.setIconClass("sm-disk-icon"),s.actionType="save",s.setTooltip(""),n.enable(),n.setText("Save and Resubmit"),n.setIconClass("sm-ready-icon"),n.actionType="save and submit",n.setTooltip("")}else switch(m){case"":case"saved":s.disable(),s.setText("Save without submitting"),s.setIconClass("sm-disk-icon"),s.actionType="",s.setTooltip("This button is disabled because the review has not been modified."),n.enable(),n.setText("Submit"),n.setIconClass("sm-ready-icon"),n.actionType="submit",n.setTooltip("");break;case"accepted":case"submitted":s.enable(),s.setText("Unsubmit"),s.setIconClass("sm-disk-icon"),s.actionType="unsubmit",s.setTooltip(""),n.disable(),n.setText("Submit"),n.setIconClass("sm-ready-icon"),n.actionType="",n.setTooltip("This button is disabled because the review has already been submitted.");break;case"rejected":s.disable(),s.setText("Save without submitting"),s.setIconClass("sm-disk-icon"),s.actionType="",s.setTooltip("This button is disabled because the review has not been modified."),n.disable(),n.setText("Save and Resubmit"),n.setIconClass("sm-ready-icon"),n.actionType="",n.setTooltip("This button is disabled because the review has not been modified.")}else r.reviewChanged()?(s.enable(),s.setText("Save without submitting"),s.setIconClass("sm-disk-icon"),s.actionType="save and unsubmit",s.setTooltip("")):"submitted"===m?(s.enable(),s.setText("Unsubmit"),s.setIconClass("sm-disk-icon"),s.actionType="unsubmit",s.setTooltip("")):(s.disable(),s.setText("Save without submitting"),s.setIconClass("sm-disk-icon"),s.actionType="",s.setTooltip("This button is disabled because the review has not been modified.")),n.disable(),n.setText("Save and Submit"),n.setIconClass("sm-ready-icon"),n.actionType="",n.setTooltip("This button is disabled because the review is not complete and cannot be submitted.")}var e={cls:"sm-round-panel",bodyCssClass:"sm-review-form",footerCssClass:"sm-review-footer",labelWidth:65,border:!1,isLoaded:!1,groupGridRecord:{},monitorValid:!1,trackResetOnLoad:!1,reviewChanged:function(){return h.lastSavedData!=h.value||d.lastSavedData!=d.getValue()||c.lastSavedData!=c.getValue()||u.lastSavedData!=u.getValue()},loadValues:function(t){const e=l.getForm();e.setValues.call(e,t),m=t.status?.label??"",t.ts&&t.username?i.formatValue(t):i.setValue("--"),t.status?s.formatValue(t.status):s.setValue("--"),n()},initLastSavedData:n,isReviewSubmittable:g,setReviewFormItemStates:t,setReviewFormTips:function(){for(const t of[c,u])t.fieldSettings=l.fieldSettings,t.infoTip.body?t.infoTip.update(l.fieldSettings):t.infoTip.data=t.fieldSettings},fieldSettings:this.fieldSettings||{detailEnabled:"always",detailRequired:"always",commentEnabled:"findings",commentRequired:"findings"},items:[{xtype:"fieldset",layout:"form",layoutConfig:{getLayoutTargetSize:function(){var t=this.container.getLayoutTarget(),e={};return t&&(e=t.getViewSize(),(e=Ext.isIE9m&&Ext.isStrict&&0==e.width?t.getStyleSize():e).width-=t.getPadding("lr"),e.height-=t.getPadding("tb"),e.height-=34),e}},anchor:"100%, -90",title:"Evaluation",items:[{layout:"column",baseCls:"x-plain",items:[{width:170,layout:"form",baseCls:"x-plain",items:[h]},d]},c,u]},{xtype:"fieldset",title:"Attributions",items:[i,s]}],buttons:[f,p],listeners:{render:function(t){t.getForm().waitMsgTarget=t.getEl();t=t.body.dom;const n=new Ext.dd.DropTarget(t,{ddGroup:"gridDDGroup",notifyEnter:function(t,e,i){var s="saved"==l.groupGridRecord.data.status||"rejected"==l.groupGridRecord.data.status||""===l.groupGridRecord.data.status,i=0==i.selections[0].data.autoResult||1==i.selections[0].data.autoResult;if(!s||!i)return n.dropNotAllowed},notifyOver:function(t,e,i){var s="saved"==l.groupGridRecord.data.status||"rejected"==l.groupGridRecord.data.status||""===l.groupGridRecord.data.status,i=0==i.selections[0].data.autoResult||1==i.selections[0].data.autoResult;return s&&i?n.dropAllowed:n.dropNotAllowed},notifyDrop:function(t,e,i){var s="saved"==l.groupGridRecord.data.status||"rejected"==l.groupGridRecord.data.status||""===l.groupGridRecord.data.status,n=0==i.selections[0].data.autoResult||1==i.selections[0].data.autoResult;return s&&n&&(i=i.selections[0],h.disabled||0!=i.data.autoResult||h.setValue(i.data.result),c.setValue(i.data.detail),"fail"===h.getValue()?u.enable():u.disable(),u.disabled||u.setValue(i.data.comment),l.setReviewFormItemStates()),!0}})}}};Ext.apply(this,Ext.apply(this.initialConfig,e)),SM.Review.Form.Panel.superclass.initComponent.call(this)}}),Ext.ns("SM.ReviewsImport"),SM.ReviewsImport.Grid=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){const e=this;const i=new Ext.data.GroupingStore({grid:this,root:"",reader:new Ext.data.JsonReader({fields:[{name:"filename",mapping:"checklist.file.name"},{name:"fullPath",mapping:"checklist.file.fullPath"},{name:"date",mapping:"checklist.file.lastModifiedDate"},{name:"file",mapping:"checklist.file"},{name:"assetId",mapping:"taskAsset.assetProps.assetId"},{name:"assetName",mapping:"taskAsset.assetProps.name"},{name:"ip",mapping:"taskAsset.assetProps.ip"},{name:"noncomputing",mapping:"taskAsset.assetProps.noncomputing"},{name:"metadata",mapping:"taskAsset.assetProps.metadata"},{name:"benchmarkId",mapping:"checklist.benchmarkId"},{name:"newAssignment",mapping:"checklist.newAssignment"},{name:"informational",mapping:"checklist.stats.informational"},{name:"notchecked",mapping:"checklist.stats.notchecked"},{name:"pass",mapping:"checklist.stats.pass"},{name:"fail",mapping:"checklist.stats.fail"},{name:"notapplicable",mapping:"checklist.stats.notapplicable"},{name:"reviews",mapping:"checklist.reviews"},"taskAsset","checklist"],idProperty:t=>`${t.checklist.file.name}-${t.taskAsset.assetProps.name}-`+t.checklist.benchmarkId}),sortInfo:{field:"assetName",direction:"ASC"}});var t=new SM.RowCountTextItem({store:i}),s=[{header:"Asset",width:150,dataIndex:"assetName",sortable:!0,renderer:(t,e,i)=>i.data.assetId?t:"(+) "+t},{header:"IP",hidden:!0,width:100,dataIndex:"ip",sortable:!0,renderer:SM.styledEmptyRenderer},{xtype:"booleancolumn",trueText:"&#x2714;",falseText:"",header:"Non-computing",width:75,dataIndex:"noncomputing",align:"center",sortable:!0,hidden:!0},{header:"STIG",width:150,dataIndex:"benchmarkId",sortable:!0,renderer:(t,e,i)=>i.data.newAssignment?"(+) "+t:t},{header:'<div class="sm-grid-result-sprite sm-result-na">I</div></div>',width:50,align:"center",dataIndex:"informational",sortable:!0,renderer:t=>e.importReviews?t:"--"},{header:'<div class="sm-grid-result-sprite sm-result-na">NR</div></div>',width:50,align:"center",dataIndex:"notchecked",sortable:!0,renderer:t=>e.importReviews?t:"--"},{header:'<div class="sm-grid-result-sprite sm-result-na">NA</div></div>',width:50,align:"center",dataIndex:"notapplicable",sortable:!0,renderer:t=>e.importReviews?t:"--"},{header:'<div class="sm-grid-result-sprite sm-result-pass">NF</div></div>',width:50,align:"center",dataIndex:"pass",sortable:!0,renderer:t=>e.importReviews?t:"--"},{header:'<div class="sm-grid-result-sprite sm-result-fail">O</div></div>',width:50,align:"center",dataIndex:"fail",sortable:!0,renderer:t=>e.importReviews?t:"--"},{header:"File",width:150,dataIndex:"filename",sortable:!0,renderer:(t,e,i)=>(e.attr=`ext:qtip="${i.data.fullPath}"`,t)},{xtype:"datecolumn",format:"Y-m-d H:i:s",header:"Date",width:100,dataIndex:"date",sortable:!0}],t={isFormField:!0,name:"imports",allowBlank:!1,layout:"fit",store:i,cm:new Ext.grid.ColumnModel({columns:s}),sm:new Ext.grid.RowSelectionModel({singleSelect:!0}),view:new Ext.grid.GroupingView({enableGrouping:!0,hideGroupedColumn:!0,forceFit:!0,emptyText:"No records to display",groupTextTpl:'{[SM.he(values.text)]} ({[values.rs.length]} {[values.text.split(":")[0] == "Asset" ? "checklist" : "asset"]}{[values.rs.length > 1 ? "s assigned" : " assigned"]})'}),bbar:new Ext.Toolbar({items:[{xtype:"tbfill"},{xtype:"tbseparator"},t]}),listeners:{},getValue:function(){return!0},setValue:function(t){i.loadData(t)},validator:function(t){},markInvalid:function(){},clearInvalid:function(){},isValid:function(){return!0},getName:()=>this.name,validate:function(){},createObjects:!0,importReviews:!0,enableCreateObjects:(t=!0)=>{(e.createObjects=t)?e.store.clearFilter():e.store.filterBy(t=>t.data.assetId&&!t.data.newAssignment)},enableImportReviews:(t=!0)=>{e.importReviews=t,e.getView().refresh()}};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.ReviewsImport.Grid.superclass.initComponent.call(this)}}),SM.ReviewsImport.ReviewsFilterCombo=Ext.extend(Ext.form.ComboBox,{initComponent:function(){var t={width:140,forceSelection:!0,editable:!1,mode:"local",triggerAction:"all",displayField:"display",valueField:"filter",store:new Ext.data.SimpleStore({fields:["display","filter"],data:[["All results","all"],["Updated results only","resultchange"]]})};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.ReviewsImport.ReviewsFilterCombo.superclass.initComponent.call(this)}}),Ext.reg("sm-reviews-filter-combo",SM.ReviewsImport.ReviewsFilterCombo),SM.ReviewsImport.ReviewsGrid=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){const s=this;var t=Ext.data.Record.create(["new",{name:"groupId",type:"string",mapping:"current.groupId",sortType:sortGroupId},{name:"ruleId",type:"string",mapping:"new.ruleId",sortType:sortRuleId},{name:"groupTitle",mapping:"current.groupTitle",type:"string"},{name:"ruleTitle",mapping:"current.ruleTitle",type:"string"},{name:"severity",type:"string",mapping:"current.severity",sortType:sortSeverity},{name:"result",mapping:"new.result",type:"string"},{name:"curResult",mapping:"current.result",type:"string"},{name:"detail",mapping:"new.detail",type:"string"},{name:"comment",mapping:"new.comment",type:"string"},{name:"status",mapping:"new.status",type:"string"}]);const e=new Ext.data.JsonStore({grid:this,root:"",fields:t,idProperty:"ruleId",sortInfo:{field:"ruleId",direction:"ASC"},listeners:{load:function(t,e){n.setText(e.length+" records")},datachanged:function(t,e,i){n.setText(t.getCount()+" records")}}}),n=new SM.RowCountTextItem({store:e});var i=[{header:"<b>Rule</b>",width:150,fixed:!0,dataIndex:"ruleId",sortable:!0,renderer:t=>`<b>${t}</b>`,align:"left"},{header:"Rule Title",width:220,fixed:!0,dataIndex:"ruleTitle",renderer:columnWrap,sortable:!1},{header:"Group",width:55,dataIndex:"groupId",fixed:!0,sortable:!0,align:"left"},{header:"CAT",fixed:!0,width:48,align:"center",dataIndex:"severity",sortable:!0,renderer:renderSeverity},{header:"Current",align:"center",menuDisabled:!0,width:64,fixed:!0,dataIndex:"curResult",sortable:!0,renderer:renderResult},{header:"New",align:"center",menuDisabled:!0,width:64,fixed:!0,dataIndex:"result",sortable:!0,renderer:renderResult},{header:"Detail",menuDisabled:!0,width:220,dataIndex:"detail",renderer:columnWrap,sortable:!1}],t=new Ext.Toolbar({items:[{xtype:"tbtext",text:"Filter:"}," "," "," ",{xtype:"sm-reviews-filter-combo",value:"all",listeners:{select:function(t,e,i){s.filterValue=t.getValue(),s.fireEvent("filterchanged",s.filterValue)}}}]}),t={layout:"fit",isFormField:!0,loadMask:!0,store:e,columns:i,view:new SM.ColumnFilters.GridView({emptyText:this.emptyText||"No records to display",deferEmptyText:!1,forceFit:!0}),tbar:t,bbar:new Ext.Toolbar({items:[{xtype:"tbfill"},{xtype:"tbseparator"},n]}),listeners:{filterchanged:t=>{"resultchange"===t?e.filterBy(t=>t.data.result!==t.data.curResult):e.clearFilter()}}};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.ReviewsImport.ReviewsGrid.superclass.initComponent.call(this)}}),SM.ReviewsImport.ParseErrorsGrid=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){const s=new Ext.Toolbar.TextItem({text:"0 records",width:80}),e=new Ext.data.GroupingStore({grid:this,root:"",reader:new Ext.data.JsonReader({fields:[{name:"file"},{name:"filename",mapping:"file.name"},{name:"error"}],idProperty:"filename"}),sortInfo:{field:"filename",direction:"ASC"},listeners:{load:function(t,e){s.setText(e.length+" records")},remove:function(t,e,i){s.setText(t.getCount()+" records")}}});var t={isFormField:!0,name:"imports",allowBlank:!1,layout:"fit",store:e,cm:new Ext.grid.ColumnModel({columns:[{header:"File",width:100,dataIndex:"filename",sortable:!0},{header:"Error",width:150,dataIndex:"error",sortable:!0}]}),sm:new Ext.grid.RowSelectionModel({singleSelect:!0}),view:new SM.ColumnFilters.GridView({forceFit:!0,emptyText:"No records to display"}),bbar:new Ext.Toolbar({items:[{xtype:"tbfill"},{xtype:"tbseparator"},s]}),listeners:{},getValue:function(){return!0},setValue:function(t){e.loadData(t)},validator:function(t){},markInvalid:function(){},clearInvalid:function(){},isValid:function(){return!0},getName:()=>this.name,validate:function(){}};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.ReviewsImport.ParseErrorsGrid.superclass.initComponent.call(this)}}),SM.ReviewsImport.WarningPanel=Ext.extend(Ext.Panel,{initComponent:function(){var t={border:!1,layout:"vbox",layoutConfig:{pack:"start",padding:"0 20 20 20"},items:[{html:`<div class="sm-dialog-panel-title">${this.contentTitle}</div>`,border:!1},{html:`<div class="sm-dialog-panel-content">${this.contentText}</div>`,width:500,border:!1}],buttons:[{xtype:"button",text:"Continue",handler:this.continueHandler}],buttonAlign:"right"};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.ReviewsImport.WarningPanel.superclass.initComponent.call(this)}}),SM.ReviewsImport.SelectFilesPanel=Ext.extend(Ext.Panel,{initComponent:function(){const i=this;function s(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy",this.style.border="2px dashed red"}function n(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy",this.style.border=""}const r=new Ext.form.Checkbox({boxLabel:'Remove existing text when &lt;FINDING_DETAILS&gt; or &lt;COMMENTS&gt; is empty<i class= "fa fa-question-circle sm-question-circle"></i>',hideLabel:!0,listeners:{render:function(t){i.sonarCloudInsists=new Ext.ToolTip({target:t.wrap.dom.getElementsByClassName("fa")[0],showDelay:0,dismissDelay:0,width:300,html:SM.TipContent.CklParseOptions.Text})}}}),o=new Ext.form.Checkbox({boxLabel:'Do not import if STIG Revision does not match<i class= "fa fa-question-circle sm-question-circle"></i>',hideLabel:!0,listeners:{render:function(t){i.sonarCloudInsists=new Ext.ToolTip({target:t.wrap.dom.getElementsByClassName("fa")[0],showDelay:0,dismissDelay:0,width:300,html:SM.TipContent.CklParseOptions.Revision})}}});var t=new Ext.form.FieldSet({title:"CKL parse options",items:[r,o]}),t={layout:"vbox",layoutConfig:{align:"stretch",pack:"start",padding:"0 20 20 20"},items:[{html:`<div class="sm-dialog-panel-title">Select or drop file${i.initialConfig.multifile?"s":""}</div>`,width:500,border:!1},{xtype:"displayfield",html:"<p>&nbsp;</p>"},{html:`<div id="droptarget">Drop ${i.initialConfig.multifile?"one or more CKL/XCCDF result files":"a CKL or XCCDF result file"} here</div>`,baseCls:"sm-drop",flex:1,listeners:{render:t=>{const e=t.getEl().dom;e.addEventListener("dragenter",s,!1),e.addEventListener("dragover",s,!1),e.addEventListener("dragleave",n,!1),e.addEventListener("drop",function(t){i.onFileDropped(t,this,{replaceText:r.value,strictRevisionCheck:o.value})},!1)}}},{xtype:"displayfield",html:"<p>&nbsp;</p>"},t,{xtype:"displayfield",html:"<p>&nbsp;</p>"},{xtype:"fileuploadfield",buttonOnly:!0,na_this:"importFile",accept:".xml,.ckl",webkitdirectory:!1,multiple:i.initialConfig.multifile,style:"width: 95px;",buttonText:`Select file${i.initialConfig.multifile?"s":""}...`,buttonCfg:{icon:"img/disc_drive.png"},listeners:{fileselected:t=>{i.onFileSelected(t,{replaceText:r.checked,strictRevisionCheck:o.checked})}}}],listeners:{}};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.ReviewsImport.SelectFilesPanel.superclass.initComponent.call(this)}}),SM.ReviewsImport.ParseErrorsPanel=Ext.extend(Ext.Panel,{initComponent:function(){var t=this;t.errorsGrid=new SM.ReviewsImport.ParseErrorsGrid({flex:1}),t.duplicatesGrid=new SM.ReviewsImport.Grid({flex:1,newIndicator:!1});let e=[];t.errors&&(e.push({html:'<div class="sm-dialog-panel-title">Errors and warnings</div>',width:500,border:!1},t.errorsGrid),t.errorsGrid.store.loadData(t.errors)),t.duplicates&&(e.push({html:'<div class="sm-dialog-panel-title">Duplicates excluded</div>',width:500,border:!1},t.duplicatesGrid),t.duplicatesGrid.store.loadData(t.duplicates));t={border:!1,layout:"vbox",layoutConfig:{align:"stretch",pack:"start",padding:"0 20 20 20"},items:e,buttons:[{xtype:"button",text:"Continue",handler:t.continueHandler}],buttonAlign:"right"};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.ReviewsImport.ParseErrorsPanel.superclass.initComponent.call(this)}}),SM.ReviewsImport.ParseErrorPanel=Ext.extend(Ext.Panel,{initComponent:function(){var t={border:!1,layout:"vbox",layoutConfig:{pack:"start",padding:"0 20 20 20"},items:[{html:'<div class="sm-dialog-panel-title">There is a problem with your file</div>',border:!1},{html:this.error,width:500,border:!1}],buttons:[{xtype:"button",text:"Exit",handler:this.exitHandler}],buttonAlign:"right"};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.ReviewsImport.ParseErrorPanel.superclass.initComponent.call(this)}}),SM.ReviewsImport.OptionsPanel=Ext.extend(Ext.Panel,{initComponent:function(){const t=this,i=new SM.ReviewsImport.Grid({border:!0,flex:1,panel:this});i.store.loadData(t.gridData);var e={layout:"vbox",layoutConfig:{align:"stretch",pack:"start",padding:"0 20 20 20"},border:!1,items:[{html:'<div class="sm-dialog-panel-title">Choose options</div>',width:500,border:!1},new Ext.Panel({region:"south",border:!1,height:40,layout:"hbox",layoutConfig:{align:"middle",defaultMargins:"0 5",pack:"start"},items:[{xtype:"checkbox",checked:!0,boxLabel:"Create or update Assets and STIG associations",margins:"0 15 -2 0",listeners:{check:function(t,e){i.enableCreateObjects(e)}}},{xtype:"checkbox",checked:!0,boxLabel:"Import reviews",margins:"0 0 -2 0",listeners:{check:function(t,e){i.enableImportReviews(e)}}}]}),i],buttons:[{xtype:"button",iconCls:"sm-import-icon",text:"Add to Collection...",margins:"0 25",grid:i,handler:async()=>{await t.addHandler(t.taskAssets,i.createObjects,i.importReviews)}}],buttonAlign:"right",grid:i};Ext.apply(this,Ext.apply(this.initialConfig,e)),SM.ReviewsImport.OptionsPanel.superclass.initComponent.call(this)}}),SM.ReviewsImport.ReviewsPanel=Ext.extend(Ext.form.FormPanel,{initComponent:function(){const e=this,i=new SM.ReviewsImport.ReviewsGrid({border:!0,name:"reviews",flex:1,emptyText:"No reviews found",getValue:function(){},setValue:function(){},markInvalid:function(){},clearInvalid:function(){},validate:()=>!0,getName:()=>this.name,isValid:function(){return 0<this.getStore().getCount()},panel:this});var t=e.checklistFromApi.map(t=>[t.ruleId,t]),s=Object.fromEntries(t);const n=[],r=[],o=[];for(const d of e.checklistFromFile.reviews)s[d.ruleId]?"notchecked"===d.result?o.push(d.ruleId):n.push({new:d,current:s[d.ruleId]}):r.push(d.ruleId);i.store.loadData(n);const a=[{html:`<div class="sm-dialog-panel-title">Reviews matched against ${e.benchmarkId} ${e.revisionStr}</div>`,border:!1},i];(0<o.length||0<r.length)&&(l=[{html:'<div class="sm-dialog-panel-title">Not reviewed</div>',border:!1},new Ext.form.TextArea({border:!0,emptyText:"No unreviewed rules",readOnly:!0,value:o.join("\n"),margins:"0 20 0 0",flex:1}),{html:'<div class="sm-dialog-panel-title">Unmatched rules</div>',border:!1},new Ext.form.TextArea({border:!0,emptyText:"No unmatched rules",readOnly:!0,value:r.join("\n"),flex:1})],a.push({flex:.25,layout:"hbox",margins:"20 0 0 0",layoutConfig:{align:"stretch",pack:"start"},border:!1,items:l}));var l={monitorValid:!0,layout:"vbox",layoutConfig:{align:"stretch",pack:"start",padding:"0 20 20 20"},border:!1,items:a,buttons:[{formBind:!0,iconCls:"sm-import-icon",text:"Import matched reviews",margins:"0 25",grid:i,handler:async()=>{var t=i.store.getRange().map(t=>t.data.new);await e.importHandler(t)}}],buttonAlign:"right",grid:i};Ext.apply(this,Ext.apply(this.initialConfig,l)),SM.ReviewsImport.ReviewsPanel.superclass.initComponent.call(this)}}),SM.ReviewsImport.ImportProgressPanel=Ext.extend(Ext.Panel,{initComponent:function(){var t=new Ext.ProgressBar({text:"",border:!1}),e=new Ext.form.TextArea({cls:"sm-progress-textarea",readOnly:!0,flex:3,margins:{top:10,bottom:0,left:0,right:0}}),e={layout:"vbox",layoutConfig:{align:"stretch",pack:"start",padding:"0 20 20 20"},border:!1,items:[{html:'<div class="sm-dialog-panel-title">Importing data</div>',width:500,border:!1},t,e],buttons:[{xtype:"button",text:"Done",margins:"0 25",handler:this.doneHandler}],buttonAlign:"right",pb:t,st:e};Ext.apply(this,Ext.apply(this.initialConfig,e)),SM.ReviewsImport.ImportProgressPanel.superclass.initComponent.call(this)}});class TaskObject{constructor({apiAssets:t=[],apiStigs:e=[],parsedResults:i=[],collectionId:s,config:n}){this.parsedResults=i,this.collectionId=s,this.config=n??{strictRevisionChecks:!1,createObjects:!0},this.apiAssets=t,this.mappedAssetNames=new Map,this.mappedCklHostnames=new Map;for(const r of t)if(r.stigs=r.stigs.map(t=>t.benchmarkId),this.mappedAssetNames.set(r.name.toLowerCase(),r),r.metadata?.cklHostName){const o=this.mappedCklHostnames.get(r.metadata.cklHostName.toLowerCase());o?o.push(r):this.mappedCklHostnames.set(r.metadata.cklHostName.toLowerCase(),[r])}this.mappedStigs=new Map;for(const a of e)this.mappedStigs.set(a.benchmarkId,a.revisionStrs);this.errors=[],this.taskAssets=this._createTaskAssets()}_findAssetFromParsedTarget(e){if(!e.metadata.cklHostName)return this.mappedAssetNames.get(e.name.toLowerCase());const t=this.mappedCklHostnames.get(e.metadata.cklHostName.toLowerCase());if(!t)return null;var i=t.find(t=>t.metadata.cklWebDbInstance===e.metadata.cklWebDbInstance&&t.metadata.cklWebDbSite===e.metadata.cklWebDbSite);return i||null}_createTaskAssets(){const s=new Map;for(const l of this.parsedResults){let t,i=l.target.metadata;t=i.cklHostName?`${i.cklHostName}-${i.cklWebDbSite??"NA"}-`+(i.cklWebDbInstance??"NA"):l.target.name.toLowerCase();var n=this._findAssetFromParsedTarget(l.target);if(n||this.config.createObjects){let e=s.get(t);e||(e={knownAsset:!1,assetProps:null,hasNewAssignment:!1,newAssignments:[],checklists:new Map,checklistsIgnored:[],reviews:[]},n?(e.knownAsset=!0,e.assetProps={...n,collectionId:this.collectionId}):i.cklHostName?e.assetProps={...l.target,name:t,collectionId:this.collectionId,stigs:[]}:e.assetProps={...l.target,collectionId:this.collectionId,stigs:[]},s.set(t,e));var r=({benchmarkId:t,revisionStr:e})=>{const i=this.mappedStigs.get(t);return!!i&&(!e||!this.config.strictRevisionCheck||i.includes(e))};const d=({benchmarkId:t})=>e.assetProps.stigs.includes(t);var o=(t,e)=>{let i=t.checklists.get(e.benchmarkId);i?i.push(e):t.checklists.set(e.benchmarkId,[e])};for(const h of l.checklists)h.file=l.file,r(h)?d(h)?(h.newAssignment=(a=h.benchmarkId,e.newAssignments.includes(a)),o(e,h)):this.config.createObjects?(a=h.benchmarkId,d(a)||(e.hasNewAssignment=!0,e.newAssignments.push(a),e.assetProps.stigs.push(a)),h.newAssignment=!0,o(e,h)):(h.ignored="Not mapped to Asset",e.checklistsIgnored.push(h)):(h.ignored="Not installed",e.checklistsIgnored.push(h))}else this.errors.push({file:l.file,message:"asset does not exist for target",target:l.target})}var a;return s}}async function showImportResultFiles(w,C){try{const S={ignoreNr:!0};var t=new SM.ReviewsImport.SelectFilesPanel({border:!1,autoScroll:!0,multifile:!0,onFileSelected:async function(t,e){t=t.fileInput.dom;const i=[...t.files];i.sort((t,e)=>t.lastModified-e.lastModified),Object.assign(S,e),r(i)},onFileDropped:async function(e,i,s){try{e.currentTarget.innerText="Searching for result files...",e.stopPropagation(),e.preventDefault(),i.style.border="";let t=[];if(!e.dataTransfer)throw"Event is missing the dataTransfer property";for(const n of await async function(r,o){try{let e=0,i=0,s=[],n=[];for(let t=0;t<r.length;t++)n.push(r[t].webkitGetAsEntry());for(;0<n.length;){let t=n.shift();e++,t.isFile&&t.name.toLowerCase().endsWith(".ckl")?(s.push(t),i++,o.innerText=`Searching... Searched ${e} files, found ${i} results files`):t.isDirectory&&n.push(...await async function(i){try{let t=[],e=await a(i);for(;0<e?.length;)t.push(...e),e=await a(i);return t}catch(t){alert(t)}}(t.createReader()))}return o.innerText=`Finished. Searched ${e} files, found ${i} results files`,s}catch(t){alert(t)}}(e.dataTransfer.items,e.currentTarget))t.push(await async function(s){try{return await new Promise((e,t)=>{let i=s.fullPath;s.file(t=>{t.fullPath=i,e(t)},t)})}catch(t){alert(t)}}(n));t.sort((t,e)=>t.lastModified-e.lastModified),Object.assign(S,s),r(t)}catch(e){alert(e)}async function a(i){try{return await new Promise((t,e)=>{i.readEntries(t,e)})}catch(t){alert(t)}}}}),e=Ext.getBody().getViewSize(),i=.75*e.height,s=.75*e.width<=1024?.75*e.width:1024;const u=new Ext.Window({title:"Import results from CKL or XCCDF files",cls:"sm-dialog-window sm-round-panel",modal:!0,resizable:!1,width:s,height:i,layout:"fit",plain:!0,bodyStyle:"padding:5px;",buttonAlign:"center",items:t});function r(t){var e;function i(){!async function(t){try{var e=new Ext.ProgressBar({text:"",border:!1});const s=new Ext.Panel({layout:"vbox",layoutConfig:{align:"stretch",pack:"start",padding:"0 20 20 20"},border:!1,items:[{html:'<div class="sm-dialog-panel-title">Parsing your files</div>',width:500,margins:"0 0",border:!1},e]}),n=new Ext.util.DelayedTask(function(){u.removeAll(),u.add(s),u.doLayout()});n.delay(250);var i=await async function(e,i){try{var s=Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/assets",params:{collectionId:w,projection:"stigs"},method:"GET"}),n=Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/stigs",method:"GET"}),r=await getScapBenchmarkMap();let t=0;const u={success:[],fail:[]};for(const m of e){i.updateText(m.name);var o=m.name.substring(m.name.lastIndexOf(".")+1),a=await readTextFileAsync(m);if("ckl"===o)try{const g=reviewsFromCkl(a,S,C);g.file=m,u.success.push(g)}catch(t){u.fail.push({file:m,error:t.message})}if("xml"===o)try{const x=reviewsFromScc(a,{ignoreNotChecked:!1,scapBenchmarkMap:r});x.file=m,u.success.push(x)}catch(t){u.fail.push({file:m,error:t.message})}t++,i.updateProgress(t/e.length)}s=await s;var l=JSON.parse(s.response.responseText);n=await n;var d=JSON.parse(n.response.responseText),h={createObjects:!0,strictRevisionCheck:S.strictRevisionCheck};const f=new TaskObject({apiAssets:l,apiStigs:d,parsedResults:u.success,collectionId:w,config:h}),p={taskAssets:f.taskAssets,rows:[],dupedRows:[],errors:u.fail,hasDuplicates:!1};for(const E of f.taskAssets.values()){for(const v of E.checklists.values()){if(1<v.length){p.hasDuplicates=!0;const y=v.slice(0,-1);var c=y.map(t=>({taskAsset:E,checklist:t}));p.dupedRows.push(...c)}p.rows.push({taskAsset:E,checklist:v.slice(-1)[0]})}for(const b of E.checklistsIgnored)p.errors.push({file:b.file,error:`Ignoring ${b.benchmarkId} ${b.revisionStr}. `+b.ignored})}return p}catch(t){throw t}}(t,e);n.cancel(),(0<i.errors.length||i.hasDuplicates?function(t){var e=new SM.ReviewsImport.ParseErrorsPanel({errors:0<t.errors.length?t.errors:null,duplicates:t.hasDuplicates?t.dupedRows:null,continueHandler:function(){o(t)},backHandler:function(){}});u.removeAll(),u.setAutoScroll(!0),u.add(e),u.doLayout()}:o)(i)}catch(t){alert(t)}}(t)}250<=t.length?(e=new SM.ReviewsImport.WarningPanel({continueHandler:i,contentTitle:`<b>We notice you have selected ${t.length} files to process.</b>`,contentText:`This browser app is not optimized for parsing a large number of files and performance is highly dependent on your available client resources.<br><br>
                    <b>Recommendations</b><br><br>
                    <ul>
                    <li>Process your files in smaller batches.</li>
                    <li>Consider using STIG Manager Watcher</li>
                    </ul>
                    <div class="sm-dialog-panel-callout">
                    <img src="img/watcher-icon.svg" width=40px height=40px align="left" style="padding-right: 16px;"/>
                    If you have an on-going requirement to process large batches of files you should use STIG Manager Watcher, a CLI client that
                    can monitor your file system, process large numbers of test result files asynchronously, and post the results to your Collection.<br><br>
                    Watcher is suitable for use as a service or daemon, as a scheduled task, in automated testing pipelines, or from the command line. 
                    Available from <a href="https://github.com/NUWCDIVNPT/stigman-watcher">https://github.com/NUWCDIVNPT/stigman-watcher</a> 
                    and as an NPM module.</div>`}),u.removeAll(),u.setAutoScroll(!0),u.add(e),u.doLayout()):i()}function o(t){t=new SM.ReviewsImport.OptionsPanel({gridData:t.rows,taskAssets:t.taskAssets,addHandler:n});u.removeAll(),u.add(t),u.doLayout()}async function n(s,n,r){let i="",o;try{o=new SM.ReviewsImport.ImportProgressPanel({doneHandler:()=>{u.close()}}),u.removeAll(),u.add(o),u.doLayout();let t=0;for(const h of s.values())try{let e=h.assetProps.assetId,i=!1;if(l(t/s.size,h.assetProps.name),!n||h.knownAsset&&!h.hasNewAssignment||(e=await async function(s){{let t,e,i;i=s.knownAsset&&s.hasNewAssignment?(t=STIGMAN.Env.apiBase+"/assets/"+s.assetProps.assetId,e="PATCH",{collectionId:s.assetProps.collectionId,stigs:s.assetProps.stigs}):(t=STIGMAN.Env.apiBase+"/assets",e="POST",s.assetProps),d(e+" "+s.assetProps.name,!0);var n=await Ext.Ajax.requestPromise({url:t,method:e,params:{projection:["stigs","statusStats"]},headers:{"Content-Type":"application/json;charset=utf-8"},jsonData:i}),s=JSON.parse(n.response.responseText),n="POST"===e?"assetcreated":"assetchanged";return SM.Dispatcher.fireEvent(n,s),s.assetId}}(h),d(` OK (${h.assetProps.name}, id: ${e})`),i=!0),r){let t=[];for(const c of h.checklists.keys())t=t.concat(h.checklists.get(c).slice(-1)[0].reviews);await async function(t,e,i){{t=STIGMAN.Env.apiBase+`/collections/${t}/reviews/`+e;d("POST reviews for assetId "+e,!0);i=await Ext.Ajax.requestPromise({url:t,method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},jsonData:i});return JSON.parse(i.response.responseText)}}(w,e,t),d(" OK"),i=!0}var a;i?(a=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/assets/"+e,method:"GET",params:{projection:["stigs","statusStats"]},headers:{"Content-Type":"application/json;charset=utf-8"}}),apiAsset=JSON.parse(a.response.responseText),SM.Dispatcher.fireEvent("assetchanged",apiAsset)):d(" Nothing to do for "+h.assetProps.name)}catch(t){d(` ERROR (${t.message})`)}finally{t++,l(t/s.size,h.assetProps.name)}l(0,"Finished")}catch(t){alert(t.message)}function l(t,e){o.pb.updateProgress(t,SM.he(e))}function d(t,e){e=e||!1;i+=e?t:t+"\n",o.st.setRawValue(i),o.st.getEl().dom.scrollTop=99999}}u.show(document.body)}catch(t){"object"==typeof t&&(t=t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t),2):JSON.stringify(t)),alert(t),Ext.getBody().unmask()}}async function showImportResultFile(c){const u={ignoreNr:!0};try{var t=new SM.ReviewsImport.SelectFilesPanel({border:!1,autoScroll:!0,multifile:!1,onFileSelected:async function(t,e){t=t.fileInput.dom;t=[...t.files];Object.assign(u,e),await a(t[0],u)},onFileDropped:async function(e,t,i){e.stopPropagation(),e.preventDefault(),t.style.border="";let s=[],n=[];for(let t=0;t<e.dataTransfer.items.length;t++)s.push(e.dataTransfer.items[t].webkitGetAsEntry());for(const o of s){var r=await function(e){return new Promise((i,t)=>{let s=0;const n=[];function r(t){if(t.isFile){s++;let e=t.fullPath;t.file(t=>{s--,t.fullPath=e,n.push(t),0===s&&i(n)})}else t.isDirectory&&(t=t.createReader(),s++,t.readEntries(function(t){s--;for(const e of t)r(e);0===s&&i(n)}))}r(e)})}(o);n.push(...r)}Object.assign(u,i),a(n[0])}}),e=Ext.getBody().getViewSize(),i=.75*e.height,s=.75*e.width<=1024?.75*e.width:1024;fpwindow=new Ext.Window({title:`Import results (${SM.he(c.benchmarkId)} on ${SM.he(c.assetName)})`,modal:!0,resizable:!1,width:s,height:i,layout:"fit",plain:!0,bodyStyle:"padding:5px;",buttonAlign:"center",items:t}),fpwindow.show()}catch(t){"object"==typeof t&&(t=t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t),2):JSON.stringify(t)),alert(t),Ext.getBody().unmask()}async function a(e){let i;try{var s=new Ext.ProgressBar({text:e.name,border:!1});const l=new Ext.Panel({layout:"vbox",layoutConfig:{align:"stretch",pack:"start",padding:"0 20 20 20"},border:!1,items:[{html:'<div class="sm-dialog-panel-title">Parsing your file</div>',width:500,margins:"0 0",border:!1},s]});i=new Ext.util.DelayedTask(function(){fpwindow.removeAll(),fpwindow.add(l),fpwindow.doLayout()}),i.delay(250);const[d,h]=await Promise.all([Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/assets/"+c.assetId,method:"GET"}),async function(t){let e=t.name.substring(t.name.lastIndexOf(".")+1),i=await readTextFileAsync(t),s;if("ckl"===e)s=reviewsFromCkl(i,u,c.fieldSettings);else{if("xml"!==e)throw new Error("Unknown file extension");s=reviewsFromScc(i,{ignoreNotChecked:!1})}return s.file=t,s}(e)]);var n=JSON.parse(d.response.responseText);let t=!1;if(t=h.target.metadata.cklHostName||n.metadata.cklHostName?n.metadata.cklHostName===h.target.metadata.cklHostName&&n.metadata.cklWebDbSite===h.target.metadata.cklWebDbSite&&n.metadata.cklWebDbInstance===h.target.metadata.cklWebDbInstance:h.target.name===n.name,!t){let t;throw t=h.target.metadata.cklHostName||n.metadata.cklHostName?`CKL elements and values:<br><br>
                    &lt;WEB_DB_SITE&gt; = ${h.target.metadata.cklWebDbSite??'<span style="color:grey;font-style:italic">No value</span>'}<br>
                    &lt;WEB_DB_INSTANCE&gt = ${h.target.metadata.cklWebDbInstance??'<span style="color:grey;font-style:italic">No value</span>'}<br><br>
                    Asset metadata properties and values:<br><br>
                    cklWebDbSite = ${n.metadata.cklWebDbSite??'<span style="color:grey;font-style:italic">No property</span>'}<br>
                    cklWebDbInstance = ${n.metadata.cklWebDbInstance??'<span style="color:grey;font-style:italic">No property</span>'}<br><br>
                    The corresponding values do not match.
                    </div>`:"The CKL file contains reviews for "+h.target.name,new Error(`<b>The file does not include reviews for this asset.</b><br><div class="sm-dialog-panel-callout">${t}</div>`)}var r=h.checklists.filter(t=>t.benchmarkId===c.benchmarkId)[0];if(!r)throw new Error(`The file does not include reviews for STIG: <b>${c.benchmarkId}</b><br>The file includes reviews for: ${h.checklists[0].benchmarkId}</p>`);if(u.strictRevisionCheck&&r.revisionStr&&r.revisionStr!==c.revisionStr)throw new Error(`The file does not include reviews for STIG: <b>${c.benchmarkId}, revision ${c.revisionStr}</b><br>The file includes reviews for revision: ${r.revisionStr}</p>`);var o=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/assets/${c.assetId}/checklists/${c.benchmarkId}/`+c.revisionStr,method:"GET"}),a=JSON.parse(o.response.responseText);i.cancel(),function(t,e,i,s){s=new SM.ReviewsImport.ReviewsPanel({checklistFromFile:t,checklistFromApi:e,benchmarkId:i,revisionStr:s,importHandler:f});fpwindow.removeAll(),fpwindow.add(s),fpwindow.doLayout()}(r,a,c.benchmarkId,c.revisionStr)}catch(t){i.cancel(),function(t){t=new SM.ReviewsImport.ParseErrorPanel({error:t.message,exitHandler:function(){fpwindow.close()}});fpwindow.removeAll(),fpwindow.setAutoScroll(!0),fpwindow.add(t),fpwindow.doLayout()}(t)}}async function f(t){let i="",s;try{s=new SM.ReviewsImport.ImportProgressPanel({doneHandler:()=>{fpwindow.close()}}),fpwindow.removeAll(),fpwindow.add(s),fpwindow.doLayout(),n("Importing...");var e=await async function(t){try{var e=`${STIGMAN.Env.apiBase}/collections/${c.collectionId}/reviews/`+c.assetId;r("POST reviews for assetId "+c.assetId,!0);var i=await Ext.Ajax.requestPromise({url:e,method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},jsonData:t});return apiReviews=JSON.parse(i.response.responseText),apiReviews}catch(t){throw t}}(t);r(JSON.stringify(e,null,2)),r(" OK"),n(0,"Finished"),c.store.reload()}catch(t){alert(t.message)}function n(t,e){s.pb.updateProgress(t,SM.he(e))}function r(t,e){e=e||!1;i+=e?t:t+"\n",s.st.setRawValue(i),s.st.getEl().dom.scrollTop=99999}}}async function getScapBenchmarkMap(){var t=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/stigs/scap-maps",method:"GET"});return apiScapMaps=JSON.parse(t.response.responseText),new Map(apiScapMaps.map(t=>[t.scapBenchmarkId,t.benchmarkId]))}async function addLibraryStig(i){var{benchmarkId:s,revisionStr:n="latest",stigTitle:r,treePath:i}=i;try{const l=Ext.getCmp("main-tab-panel").getItem(`library-stig-${s}-tab`);if(l)return void l.show();const d=new SM.Library.StigPanel({id:`library-stig-${s}-tab`,benchmarkId:s,revisionStr:n,stigTitle:r,sm_tabMode:"ephemeral",sm_treePath:i});d.updateTitle=function(){this.setTitle(("ephemeral"===this.sm_tabMode?"<i>":"")+this.benchmarkId+("ephemeral"===this.sm_tabMode?"</i>":""))},d.makePermanent=function(){this.sm_tabMode="permanent",this.updateTitle.call(this)};let t=Ext.getCmp("main-tab-panel");var o,a=t.items.findIndex("sm_tabMode","ephemeral");let e;e=-1!==a?(o=t.items.itemAt(a),t.remove(o),t.insert(a,d)):t.add(d),e.updateTitle.call(e),e.show(),d.load(s)}catch(t){console.error(t),alert(t.message)}}function renderPct(t,e,i){var s=0<t&&t<=.5?1:99.5<=t&&t<100?99:Math.round(t);return`
	<div class="sm-cell-thermometer-text">
		${0<t&&t<1?"<":99<t&&t<100?">":""}${s}%
	</div>
	<div class="sm-cell-thermometer-bg">
		<div class="${100<=s?"sm-cell-mercury-low":50<=s?"sm-cell-mercury-medium":"sm-cell-mercury-high"}" style="width: ${s}%;">&nbsp;</div>
	</div>`}function renderPctAllHigh(t,e,i,s,n,r){var o=0<t&&t<=.5?1:99.5<=t&&t<100?99:Math.round(t);return`
	<div class="sm-cell-thermometer-text">
		${0<t&&t<1?"<":99<t&&t<100?">":""}${o}%
	</div>
	<div class="sm-cell-thermometer-bg">
		<div class="sm-cell-mercury-high" style="width: ${o}%;">&nbsp;</div>
	</div>`}function renderDurationToNow(t,e){if(!t)return"-";let i=Math.abs(t-new Date)/1e3;const s={},n={day:86400,hour:3600,minute:60,second:1};Object.keys(n).forEach(function(t){s[t]=Math.floor(i/n[t]),i-=s[t]*n[t]});var r=0<s.day?s.day+" d":0<s.hour?s.hour+" h":0<s.minute?s.minute+" m":"now",t=Ext.util.Format.date(t,"Y-m-d H:i T");return e.attr=` ext:qwidth=130 ext:qtip="${t}"`,r}function initProgress(t,e,i,s){var n=new Ext.ProgressBar({text:e,id:"pbar1",flex:0,textLog:"",listeners:{destroy:function(){}}}),e=new Ext.form.TextArea({id:"statusText1",cls:"sm-progress-textarea",readOnly:!0,flex:3,margins:{top:10,bottom:0,left:0,right:0}}),r=new Ext.Window({title:t,modal:!0,closable:!0,width:"50%",height:600,id:"uploadWindow",layout:{type:"vbox",align:"stretch"},plain:!0,bodyStyle:"padding:5px;",listeners:{close:function(){null!=i&&reloadStore(i)}},buttons:[{xtype:"tbbutton",text:"Save log...",download:"log.txt",disabled:!1,handler:function(e,t){var i=Ext.getCmp("statusText1").getRawValue(),i=new Blob([i],{type:"text/plain;charset=utf-8"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(i,e.download);else{let t=window.document.createElement("a");t.style.display="none",t.href=window.URL.createObjectURL(i),t.download=e.download,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}},{text:"Close",disabled:!1,handler:function(t,e){r.close()}}],buttonAlign:"center",items:[n,e]});statusText="",r.show(document.body)}function updateProgress(t,e){Ext.getCmp("pbar1").updateProgress(t,SM.he(e))}function updateStatusText(t,e,i){var e=e||!1,s=Ext.getCmp("statusText1");statusText+=e?t:t+"\n",s.setRawValue(statusText),s.getEl().dom.scrollTop=99999}function resetProgress(){Ext.getCmp("pbar1").updateProgress(0,"")}function closeProgress(){Ext.getCmp("uploadWindow").close()}function reloadStore(t){Ext.StoreMgr.lookup(t).reload()}function Sm_HistoryData(t){const s=this;this.fields=Ext.data.Record.create([{name:"result",type:"string"},{name:"detail",type:"string"},{name:"comment",type:"string"},{name:"autoResult",type:"boolean"},{name:"userId",type:"string"},{name:"username",type:"string"},{name:"touchTs",type:"date",dateFormat:"c"},{name:"statusLabel",type:"string",mapping:"status.label"},"status"]),this.store=new Ext.data.JsonStore({root:"",storeId:"historyStore"+t,fields:this.fields,sortInfo:{field:"touchTs",direction:"DESC"},idProperty:t=>t.touchTs}),expander=new Ext.ux.grid.RowExpander({tpl:new Ext.XTemplate('<tpl if="detail">',"<p><b>Detail:</b> {[SM.he(values.detail)]}</p>","</tpl>",'<tpl if="comment">',"<p><b>Comment:</b> {[SM.he(values.comment)]}</p>","</tpl>",'<tpl if="status">',"<p><b>Status user:</b> {[SM.he(values.status.user.username)]}</p>","</tpl>",'<tpl if="status">',"<p><b>Status text:</b> {[SM.he(values.status.text)]}</p>","</tpl>")});var e=new SM.RowCountTextItem({store:this.store}),i=new Ext.ux.ExportButton({hasMenu:!1,exportType:"grid",gridBasename:"Log",iconCls:"sm-export-icon",text:"CSV"});this.grid=new Ext.grid.GridPanel({layout:"fit",enableDragDrop:!0,ddGroup:"gridDDGroup",plugins:expander,border:!1,id:"historyGrid"+t,store:this.store,stripeRows:!0,view:new SM.ColumnFilters.GridView({forceFit:!0,emptyText:"No log to display.",deferEmptyText:!1,listeners:{filterschanged:function(t,e,i){s.store.filter(t.getFilterFns())}}}),bbar:new Ext.Toolbar({items:[i,"->",e]}),columns:[expander,{header:"Timestamp",width:120,resizeable:!1,dataIndex:"touchTs",sortable:!0,align:"left",xtype:"datecolumn",format:"Y-m-d H:i:s T"},{header:"Status",width:50,fixed:!0,dataIndex:"statusLabel",sortable:!0,renderer:renderStatuses,filter:{type:"values",renderer:SM.ColumnFilters.Renderers.status}},{id:"result"+t,header:"Result",width:50,fixed:!0,dataIndex:"result",renderer:renderResult,sortable:!0,filter:{type:"values",renderer:SM.ColumnFilters.Renderers.result}},{header:"User",width:50,dataIndex:"username",sortable:!0,filter:{type:"values"}}]})}function sortGroupId(t){var e=t.match(/^V-(\d+)/);return null==e?t:(1e15+e[1]+"").slice(-8)}function sortRuleId(t){var e=t.match(/^SV-(\d+)r*/);return null==e?t:(1e15+e[1]+"").slice(-8)}function sortSeverity(t){switch(t){case"mixed":return 0;case"low":return 1;case"medium":return 2;case"high":return 3}}function getFileIcon(t){switch(t.substr(2+(~-t.lastIndexOf(".")>>>0)).toLowerCase()){case"doc":case"docx":return"img/page_word.png";case"pdf":return"img/page_white_acrobat.png";case"jpg":case"png":case"gif":case"bmp":return"img/page_white_camera.png";case"xls":case"xlsx":return"img/page_excel.png";case"ppt":case"pptx":return"img/page_white_powerpoint.png";case"zip":return"img/page_white_compressed.png";default:return"img/page.png"}}function encodeSm(t,e){for(var i=new Array,s=t.getSelections(),n=0;n<s.length;n++)i.push(s[n].data[e]);return Ext.util.JSON.encode(i)}function renderResult(t,e,i,s,n,r){return t?`<div class="sm-grid-result-sprite ${SM.RenderResult[t]?.css}" ext:qtip="${t}">${SM.RenderResult[t]?.textDisa}</div>`:""}function renderStatuses(t,e,i,s,n,r){var o="";const a=[];switch(t){case"saved":a.push("Saved"),o+='<img src="img/disk-16.png" width=12 height=12 ext:qtip="Saved" style="padding-top: 1px;">';break;case"submitted":a.push("Submitted"),o+='<img src="img/ready-16.png" width=12 height=12 ext:qtip="Submitted" style="padding-top: 1px;">';break;case"rejected":a.push("Rejected"),o+='<img src="img/rejected-16.png" width=12 height=12 ext:qtip="Rejected" style="padding-top: 1px;">';break;case"accepted":a.push("Accepted"),o+='<img src="img/star.svg" width=12 height=12 ext:qtip="Accepted" style="padding-top: 1px;">';break;default:o+='<img src="img/pixel.gif" width=12 height=12>'}return o+='<img src="img/pixel.gif" width=4 height=12>',i.data.autoResult?(a.push("Auto"),o+='<img src="img/bot.svg" width=12 height=12 ext:qtip="Automated evaluation" style="padding-top: 1px;">'):o+='<img src="img/pixel.gif" width=12 height=12>',e.attr=`exportvalue="${a.join(",")}"`,o}function renderStatus(t){switch(t){case"submitted":return'<img src="img/ready-16.png" width=12 height=12 ext:qtip="Submitted">';case"rejected":return'<img src="img/rejected-16.png" width=12 height=12 ext:qtip="Rejected">';case"accepted":return'<img src="img/star.svg" width=12 height=12 ext:qtip="Accepted">';default:return'<img src="img/pixel.gif" width=12 height=12>'}}Ext.ns("SM.TransferAssets"),SM.TransferAssets.TransferBtn=Ext.extend(Ext.Button,{initComponent:function(){const e=this;e.setSrcAssets=function(t){e.menu.srcAssets=t},e.menu=new Ext.menu.Menu({srcCollectionId:e.srcCollectionId,listeners:{beforeshow:function(t){!function(e){e.removeAll();for(const t of curUser.collectionGrants.filter(t=>t.collection.collectionId!==e.srcCollectionId&&3<=t.accessLevel))e.addMenuItem({iconCls:"sm-collection-icon",text:SM.he(t.collection.name),collectionId:t.collection.collectionId})}(t)},itemClick:e.onItemClick||Ext.emptyFn}}),Ext.apply(this,Ext.apply(this.initialConfig,{})),SM.TransferAssets.TransferBtn.superclass.initComponent.call(this)}}),Ext.reg("sm-transferassets-btn",SM.TransferAssets.TransferBtn),Ext.ns("SM.Library"),SM.Library.ChecklistGrid=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){const n=this;this.benchmarkId=this.benchmarkId||"RHEL_8_STIG",this.revisionStr=this.revisionStr||"latest";var t=this.stigTitle,e=[{name:"groupId",type:"string",sortType:sortGroupId},{name:"ruleId",type:"string",sortType:sortRuleId},{name:"groupTitle",type:"string"},{name:"title",type:"string"},{name:"severity",type:"string",sortType:sortSeverity},{name:"check",mapping:"checks[0]?.content"},{name:"fix",mapping:"fixes[0]?.text"},{name:"discussion",mapping:"detail.vulnDiscussion"}];const r=new Ext.ux.ExportButton({hasMenu:!1,exportType:"grid",gridBasename:"STIG",iconCls:"sm-export-icon",text:"CSV",gridSource:this}),o=new Ext.data.JsonStore({fields:e,root:"",idProperty:"ruleId",sortInfo:{field:"ruleId",direction:"ASC"},listeners:{load:function(t,e){n.getSelectionModel().selectFirstRow(),i.setText(t.getCount()+" records")},reload:function(t,e){n.getSelectionModel().selectFirstRow(),i.setText(t.getCount()+" records")}}}),i=new SM.RowCountTextItem({store:o});var s=Ext.id(),a=[{header:"CAT",fixed:!0,width:48,align:"left",dataIndex:"severity",sortable:!0,renderer:renderSeverity,filter:{type:"values",comparer:SM.ColumnFilters.CompareFns.severity,renderer:SM.ColumnFilters.Renderers.severity}},{header:"Group",width:75,dataIndex:"groupId",sortable:!0,align:"left",filter:{type:"string"}},{header:"Group Title",width:200,dataIndex:"groupTitle",renderer:columnWrap,sortable:!0,filter:{type:"string"}},{header:"Rule Id",width:150,dataIndex:"ruleId",sortable:!0,align:"left",filter:{type:"string"}},{id:s,header:"Rule Title",width:300,dataIndex:"title",renderer:columnWrap,sortable:!0,filter:{type:"string"}},{header:"Check",width:300,dataIndex:"check",renderer:columnWrap,sortable:!0,filter:{type:"string"}},{header:"Fix",width:300,dataIndex:"fix",renderer:columnWrap,sortable:!0,filter:{type:"string"}},{header:"Discussion",width:300,dataIndex:"discussion",renderer:columnWrap,sortable:!0,filter:{type:"string"}}],l=new SM.ColumnFilters.GridView({emptyText:this.emptyText||"No records to display",deferEmptyText:!1,forceFit:!0,rowOverCls:"sm-null",selectedRowClass:"sm-null",listeners:{filterschanged:function(t,e,i){o.filter(t.getFilterFns())}}});const d=new Ext.data.JsonStore({fields:["benchmarkId","revisionStr","version","release","benchmarkDate","status","statusDate",{name:"display",convert:(t,e)=>`Version ${e.version} Release ${e.release} (${e.benchmarkDate})`}],url:`${STIGMAN.Env.apiBase}/stigs/${n.benchmarkId}/revisions`}),h=new Ext.form.ComboBox({store:d,displayField:"display",valueField:"revisionStr",triggerAction:"all",mode:"local",editable:!1,listeners:{select:function(t,e,i){n.revisionStr=t.getValue(),n.loadStig()}}});var c=new Ext.Toolbar({items:["Revision",h]}),e=new Ext.Toolbar({items:[r,"->",i]});this.loadStig=async function(t=n.benchmarkId,e=n.revisionStr||"latest"){try{r.gridBasename=t,n.benchmarkId=t,n.getEl().mask("Please wait");var i=(s=e,s=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+`/stigs/${t}/revisions/${e}/rules?projection=checks&projection=fixes&projection=detail`,method:"GET",params:{projection:["checks","fixes","detail"]}}),await JSON.parse(s.response.responseText));o.loadData(i)}catch(t){console.error(t.message)}finally{n.getEl().unmask()}var s},this.loadRevisions=async function(t=n.benchmarkId,e=n.revisionStr){try{await d.loadPromise(),h.setValue(e)}catch(t){console.error(t.message)}};s={title:t,store:o,columns:a,view:l,tbar:c,bbar:e,autoExpandColumn:s,stripeRows:!0,loadMask:!0};Ext.apply(this,Ext.apply(this.initialConfig,s)),SM.Library.ChecklistGrid.superclass.initComponent.call(this)}}),SM.Library.RuleContentPanel=Ext.extend(Ext.Panel,{initComponent:function(){var t={padding:20,autoScroll:!0,title:"Rule",tpl:SM.RuleContentTpl};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.Library.RuleContentPanel.superclass.initComponent.call(this)}}),SM.Library.StigPanel=Ext.extend(Ext.Panel,{initComponent:function(){const t=new SM.Library.ChecklistGrid({benchmarkId:this.benchmarkId,revisionStr:this.revisionStr||"latest",stigTitle:this.stigTitle,cls:"sm-round-panel",margins:{top:SM.Margin.top,right:SM.Margin.adjacent,bottom:SM.Margin.bottom,left:SM.Margin.edge},border:!1,region:"center"});this.load=async function(){await t.loadStig(this.benchmarkId),await t.loadRevisions(this.benchmarkId)},t.getSelectionModel().on("rowselect",async function(t,e,i){try{var s=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/stigs/rules/"+i.data.ruleId,method:"GET",params:{projection:["detail","ccis","checks","fixes"]}});JSON.parse(s.response.responseText)}catch(t){console.log(t),alert(t.message)}});var e={iconCls:"sm-stig-icon",closable:!0,layout:"border",layoutConfig:{targetCls:"sm-border-layout-ct"},items:[t]};Ext.apply(this,Ext.apply(this.initialConfig,e)),SM.Library.RuleContentPanel.superclass.initComponent.call(this)}}),Ext.ns("SM.StigRevision"),SM.StigRevision.RevisionMenuBtn=Ext.extend(Ext.Button,{initComponent:function(){menu=new SM.StigRevision.RevisionMenu({iconCls:"icon-del"});var t={menu:menu};Ext.apply(this,Ext.apply(this.initialConfig,t)),SM.StigRevision.RevisionMenuBtn.superclass.initComponent.call(this)}}),SM.StigRevision.RevisionMenu=Ext.extend(Ext.menu.Menu,{load:async function(t){this.removeAll();const e=/^V([\d,\.]{1,5})R([\d,\.]{1,5})$/;for(const s of t.data.revisionStrs){var i=e.exec(s);i&&3===i.length&&(i=`Version ${SM.he(i[1])} Release `+SM.he(i[2])+(s===t.data.lastRevisionStr?'<span class="sm-navtree-sprite">latest</span>':""),this.addItem({iconCls:"icon-del",text:i,revisionStr:s,benchmarkId:t.data.benchmarkId,record:t}))}this.addItem("-"),this.addItem({iconCls:"icon-del",text:"Remove all revisions",benchmarkId:t.data.benchmarkId,record:t})}}),SM.StigRevision.removeStig=async function(t){t=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/stigs/"+t,method:"DELETE"});return JSON.parse(t.response.responseText)},SM.StigRevision.removeStigRevision=async function(t,e){e=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+`/stigs/${t}/revisions/`+e,method:"DELETE"});return JSON.parse(e.response.responseText)},SM.StigRevision.getStig=async function(t){t=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/stigs/"+t,method:"GET"});return JSON.parse(t.response.responseText)},SM.StigRevision.StigGrid=Ext.extend(Ext.grid.GridPanel,{initComponent:function(){const r=this;var t=Ext.data.Record.create(["benchmarkId","title","status","lastRevisionStr","lastRevisionDate","ruleCount","autoCount","revisionStrs"]),e=new Ext.grid.CheckboxSelectionModel({singleSelect:!1,checkOnly:!1,listeners:{selectionchange:function(t){var e=t.getCount();1===e?(2<=(t=t.getSelected()).data.revisionStrs.length?(d.load(t),h.setVisible(!0),l.setVisible(!1)):(h.setVisible(!1),l.setVisible(!0),l.setDisabled(!1),l.setText("Remove STIG")),a.setDisabled(!1)):(a.setDisabled(!0),h.setVisible(!1),0<e?(l.setText(`Remove STIG (${e})`),l.setDisabled(!1)):(l.setText("Remove"),l.setDisabled(!0)),l.setVisible(!0));const i=this.grid.view.innerHd.querySelector(".x-grid3-hd-row .x-grid3-td-checker .x-grid3-hd-checker");i&&(e=0===this.selections.length?null:this.grid.store.getCount()===this.selections.length?"on":"ind",i.classList.remove("x-grid3-hd-checker-on"),i.classList.remove("x-grid3-hd-checker-ind"),e&&i.classList.add("x-grid3-hd-checker-"+e))}}}),i=[e,{header:"Benchmark ID",width:300,dataIndex:"benchmarkId",sortable:!0,filter:{type:"string"}},{header:"Title",id:"stigGrid-title-column",width:350,dataIndex:"title",sortable:!0,filter:{type:"string"}},{header:"Status",width:150,align:"center",dataIndex:"status",sortable:!0,filter:{type:"values"}},{header:"Latest revision",width:150,align:"center",dataIndex:"lastRevisionStr",sortable:!0},{header:"Revision date",width:150,align:"center",dataIndex:"lastRevisionDate",xtype:"datecolumn",format:"Y-m-d",sortable:!0},{header:"Earlier revisions",width:150,align:"center",dataIndex:"revisionStrs",sortable:!0,renderer:(t,e,i)=>t.filter(t=>t!==i.data.lastRevisionStr).join(", ")||"--"},{header:"Rules",width:150,align:"center",dataIndex:"ruleCount",sortable:!0},{header:"SCAP Rules",width:150,align:"center",dataIndex:"autoCount",sortable:!0,renderer:t=>t||"--"}];const s=new Ext.data.JsonStore({proxy:new Ext.data.HttpProxy({url:STIGMAN.Env.apiBase+"/stigs",method:"GET"}),root:"",fields:t,idProperty:"benchmarkId",sortInfo:{field:"benchmarkId",direction:"ASC"},listeners:{}});var n=new SM.RowCountTextItem({store:s}),o=new SM.ColumnFilters.GridView({forceFit:!0,listeners:{beforerefresh:function(t){t.scrollTop=t.scroller.dom.scrollTop,t.scrollHeight=t.scroller.dom.scrollHeight},refresh:function(t){setTimeout(function(){t.scroller.dom.scrollTop=t.scrollTop+(0==t.scrollTop?0:t.scroller.dom.scrollHeight-t.scrollHeight)},100)},filterschanged:function(t){s.filter(t.getFilterFns())}},deferEmptyText:!1}),t=new Ext.Button({iconCls:"sm-import-icon",text:"Import STIGs",disabled:!1,handler:function(){SM.StigRevision.ImportStigs(r)}});const a=new Ext.Button({iconCls:"sm-library-icon",text:"Open in Library",disabled:!0,handler:function(){var t=r.getSelectionModel().getSelected();addLibraryStig({benchmarkId:t.data.benchmarkId,revisionStr:t.data.lastRevisionStr,stigTitle:t.data.title})}}),l=new Ext.Button({iconCls:"icon-del",text:"Remove",disabled:!0,handler:async function(){try{const e=r.getSelectionModel().getSelections(),i=e.map(t=>SM.he(t.data.benchmarkId));let t;t=25<i.length?`The ${i.length} selected STIGs`:i.join("<br>");Ext.MessageBox.minWidth;if(Ext.MessageBox.minWidth=400,Ext.MessageBox.buttonText.yes="Remove",Ext.MessageBox.buttonText.no="Cancel","yes"===await SM.confirmPromise("Confirm",`Do you wish to remove:<br/><br/>${t}<br/>`)){Ext.getBody().mask("Removing");for(const s of e)await SM.StigRevision.removeStig(s.data.benchmarkId),r.store.remove(s)}}catch(t){alert("Error removing STIGs")}finally{Ext.getBody().unmask()}}}),d=new SM.StigRevision.RevisionMenu({listeners:{itemclick:async function(t,e){try{if(Ext.MessageBox.minWidth=400,Ext.MessageBox.buttonText.yes="Remove",Ext.MessageBox.buttonText.no="Cancel","yes"===await SM.confirmPromise("Confirm",`Do you wish to remove:<br><br>${t.benchmarkId} ${t.revisionStr||""}<br/>`)){Ext.getBody().mask("Removing");const s=t.record;if(t.revisionStr){await SM.StigRevision.removeStigRevision(t.benchmarkId,t.revisionStr);var i=await SM.StigRevision.getStig(t.benchmarkId);s.data=i,s.commit();const n=r.getSelectionModel();n.onRefresh(),n.fireEvent("selectionchange",n)}else await SM.StigRevision.removeStig(t.benchmarkId),r.store.remove(s)}}catch(e){alert("Error removing revision(s)")}finally{Ext.getBody().unmask()}}}}),h=new Ext.Button({iconCls:"icon-del",text:"Remove Revision",hidden:!0,menu:d});t=[t,"-",l,h,"-",a],n=new Ext.Toolbar({items:[{xtype:"exportbutton",hasMenu:!1,gridBasename:"Installed-STIGs",exportType:"grid",iconCls:"sm-export-icon",text:"CSV"},{xtype:"tbfill"},{xtype:"tbseparator"},n]}),e={store:s,columns:i,view:o,tbar:t,bbar:n,sm:e,listeners:{rowdblclick:function(t,e){e=t.store.getAt(e);addLibraryStig({benchmarkId:e.data.benchmarkId,revisionStr:e.data.lastRevisionStr,stigTitle:e.data.title})}}};Ext.apply(this,Ext.apply(this.initialConfig,e)),SM.StigRevision.StigGrid.superclass.initComponent.call(this)}}),SM.StigRevision.ImportStigs=function(t){const r=new Ext.FormPanel({padding:10,standardSubmit:!1,fileUpload:!0,baseCls:"x-plain",monitorValid:!0,autoHeight:!0,labelWidth:1,hideLabel:!0,defaults:{anchor:"100%",allowBlank:!1},items:[{xtype:"fieldset",title:"Instructions",autoHeight:!0,items:[{xtype:"displayfield",id:"infoText1",name:"infoText",html:"Please browse for STIG"}]},{xtype:"fileuploadfield",id:"form-file",emptyText:"Browse for a file...",name:"importFile",accept:".zip,.xml",buttonText:"Browse...",buttonCfg:{icon:"img/disc_drive.png"}},{xtype:"displayfield",id:"infoText2",name:"infoText",html:"<i><b>IMPORTANT: Results from the imported file will overwrite any existing results!</b></i>"}],buttonAlign:"center",buttons:[{text:"Import",icon:"img/page_white_get.png",tooltip:"Import the archive",formBind:!0,handler:async function(){try{var e=document.getElementById("form-file-file");let i=e.files[0],t=i.name.substring(i.name.lastIndexOf(".")+1);if("xml"===t.toLowerCase()){var s=r.getForm().getEl().dom;let t=new FormData(s);t.set("replace","true"),o.close(),initProgress("Importing file","Initializing..."),updateStatusText(i.name),await window.oidcProvider.updateToken(10);let e=await fetch(STIGMAN.Env.apiBase+"/stigs",{method:"POST",headers:new Headers({Authorization:"Bearer "+window.oidcProvider.token}),body:t});var n=await e.json();updateStatusText(JSON.stringify(n,null,2)),updateStatusText("------------------------------------"),updateStatusText("Done"),updateProgress(0,"Done")}else"zip"===t?(o.close(),initProgress("Importing file","Initializing..."),await async function r(i){try{let o=new JSZip,t=await o.loadAsync(i),e=Object.keys(t.files),a=e.filter(t=>t.toLowerCase().endsWith(".xml")),n=e.filter(t=>t.toLowerCase().endsWith(".zip"));for(let r=0,t=a.length;r<t;r++){let t=a[r];updateStatusText(t);let e=await o.files[t].async("blob"),i=new FormData;i.append("importFile",e,t),i.append("replace","true"),await window.oidcProvider.updateToken(10);let s=await fetch(STIGMAN.Env.apiBase+"/stigs",{method:"POST",headers:new Headers({Authorization:"Bearer "+window.oidcProvider.token}),body:i}),n=await s.json();updateStatusText(JSON.stringify(n,null,2)),updateStatusText("------------------------------------")}for(let i=0,s=n.length;i<s;i++){let t=n[i];updateProgress((i+1)/s,t.slice(t.lastIndexOf("/")+1)),updateStatusText("Extracting member "+t);let e=await o.files[t].async("blob");updateStatusText("Processing member "+t),await r(e)}updateProgress(0,"")}catch(t){updateStatusText("Error processing ZIP: "+t.message),updateStatusText("------------------------------------")}}(e.files[0]),updateStatusText("Done"),updateProgress(0,"Done")):alert("No handler for "+t)}catch(t){alert(t)}finally{t?.getStore()?.reload()}}},{text:"Cancel",handler:function(){o.close()}}]}),o=new Ext.Window({title:"Import STIG ZIP archive or XCCDF file",cls:"sm-dialog-window sm-round-panel",modal:!0,width:500,layout:"fit",plain:!0,bodyStyle:"padding:5px;",buttonAlign:"center",items:r});o.show(document.body)};const renderSeverity=t=>{switch(t){case"high":return'<span class="sm-grid-sprite sm-severity-high">CAT 1</span>';case"medium":return'<span class="sm-grid-sprite sm-severity-medium">CAT 2</span>';case"low":return'<span class="sm-grid-sprite sm-severity-low">CAT 3</span>';case"mixed":return'<span class="sm-grid-sprite sm-severity-low">Mixed</span>';default:return'<span class="sm-grid-sprite sm-severity-low">U</span>'}};function columnWrap(t){return'<div style="white-space:normal !important;">'+(t=null!=t?t.replace(/\n/g,"<br//>"):t)+"</div>"}function addUserAdmin(t){var e=t["treePath"];const i=Ext.getCmp("main-tab-panel").getItem("user-admin-tab");if(i)return void i.show();t=Ext.data.Record.create([{name:"userId",type:"string"},{name:"username",type:"string"},{name:"name",type:"string",mapping:"statistics.lastClaims?.name"},{name:"created",type:"date",mapping:"statistics.created"},{name:"lastAccess",type:"integer",mapping:"statistics.lastAccess"},{name:"collectionGrantCount",type:"integer",mapping:"statistics.collectionGrantCount"},{name:"statistics"}]);const r=new Ext.data.JsonStore({proxy:new Ext.data.HttpProxy({url:STIGMAN.Env.apiBase+"/users",method:"GET"}),baseParams:{elevate:curUser.privileges.canAdmin,projection:["statistics"]},root:"",fields:t,isLoaded:!1,idProperty:"userId",sortInfo:{field:"username",direction:"ASC"},listeners:{load:function(t,e){t.isLoaded=!0,o.getSelectionModel().selectFirstRow()}}}),s=new Function("obj","return obj?."+STIGMAN.Env.oauth.claims.privileges+" || [];");t=new SM.RowCountTextItem({store:r});function n(t){r.loadData(t,!0);var e=r.getSortState();r.sort(e.field,e.direction),o.getSelectionModel().selectRow(r.findExact("userId",t.userId))}const o=new Ext.grid.GridPanel({cls:"sm-round-panel",margins:{top:SM.Margin.top,right:SM.Margin.edge,bottom:SM.Margin.bottom,left:SM.Margin.edge},region:"center",id:"userGrid",store:r,border:!0,stripeRows:!0,sm:new Ext.grid.RowSelectionModel({singleSelect:!0}),columns:[{header:"Username",width:150,dataIndex:"username",sortable:!0,filter:{type:"string"}},{header:"Name",width:150,dataIndex:"name",sortable:!0,filter:{type:"string"}},{header:"Grants",width:50,align:"center",dataIndex:"collectionGrantCount",sortable:!0},{header:"Added",xtype:"datecolumn",format:"Y-m-d H:i T",width:150,dataIndex:"created",sortable:!0},{header:"Last Access",width:150,dataIndex:"lastAccess",sortable:!0,renderer:t=>t?Ext.util.Format.date(new Date(1e3*t),"Y-m-d H:i T"):SM.styledEmptyRenderer()},{header:"Create Collection",width:100,align:"center",renderer:function(t,e,i){return s(i.data.statistics.lastClaims).includes("create_collection")?"&#x2714;":""}},{header:"Administrator",width:100,align:"center",renderer:function(t,e,i){return s(i.data.statistics.lastClaims).includes("admin")?"&#x2714;":""}},{header:"userId",width:100,dataIndex:"userId",sortable:!0}],view:new SM.ColumnFilters.GridView({forceFit:!0,listeners:{filterschanged:function(t){r.filter(t.getFilterFns())},beforerefresh:function(t){t.scrollTop=t.scroller.dom.scrollTop,t.scrollHeight=t.scroller.dom.scrollHeight},refresh:function(t){setTimeout(function(){t.scroller.dom.scrollTop=t.scrollTop+(0==t.scrollTop?0:t.scroller.dom.scrollHeight-t.scrollHeight)},100)}},deferEmptyText:!1}),listeners:{rowdblclick:{fn:function(t,e,i){e=t.getStore().getAt(e);Ext.getBody().mask("Getting grants for "+e.get("name")+"..."),showUserProps(e.get("userId"))}}},tbar:[{iconCls:"icon-add",text:"Pre-register User",disabled:!curUser.privileges.canAdmin,handler:function(){Ext.getBody().mask("Loading form..."),showUserProps(0)}},"-",{ref:"../removeBtn",iconCls:"icon-del",text:"Unregister User",disabled:!curUser.privileges.canAdmin,handler:function(){let n=o.getSelectionModel().getSelected();var t=`Unregister user ${n.data.username}?<br><br>This will remove all Collection Grants for the user and is not reversable.`;Ext.Msg.show({title:"Confirm unregister action",icon:Ext.Msg.WARNING,msg:t,buttons:{yes:"Unregister",no:"Cancel"},fn:async function(t,e){try{var i,s;"yes"==t&&(i=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/users/${n.data.userId}?elevate=`+curUser.privileges.canAdmin,method:"DELETE"}),s=JSON.parse(i.response.responseText),r.remove(n),SM.Dispatcher.fireEvent("userdeleted",s))}catch(t){alert(t.message)}}})}},"-",{iconCls:"icon-edit",text:"Modify User",handler:function(){var t=o.getSelectionModel().getSelected();Ext.getBody().mask("Getting properties..."),showUserProps(t.get("userId"))}}],bbar:new Ext.Toolbar({items:[{xtype:"tbbutton",iconCls:"icon-refresh",tooltip:"Reload this grid",width:20,handler:function(t){o.getStore().reload()}},{xtype:"tbseparator"},{xtype:"tbfill"},{xtype:"tbseparator"},t]}),width:"50%",loadMask:!0});SM.Dispatcher.addListener("userchanged",n);function a(t){r.loadData(t,!0);var e=r.getSortState();r.sort(e.field,e.direction),o.getSelectionModel().selectRow(r.findExact("userId",t.userId))}SM.Dispatcher.addListener("usercreated",a);const l=Ext.getCmp("main-tab-panel").add({id:"user-admin-tab",sm_treePath:e,iconCls:"sm-users-icon",title:"User Grants",closable:!0,layout:"border",border:!1,items:[o],listeners:{beforedestroy:function(t){SM.Dispatcher.removeListener("userchanged",n),SM.Dispatcher.removeListener("usercreated",a)}}});l.show(),o.getStore().load()}function addCollectionAdmin(t){var e=t["treePath"];const i=Ext.getCmp("main-tab-panel").getItem("collection-admin-tab");if(i)return void i.show();t=Ext.data.Record.create([{name:"collectionId",type:"string"},{name:"name",type:"string"},{name:"description",type:"string"},{name:"metadata"},{name:"owners"},{name:"assets",type:"integer",mapping:"statistics.assetCount"},{name:"grants",type:"integer",mapping:"statistics.grantCount"},{name:"checklists",type:"integer",mapping:"statistics.checklistCount"},{name:"created",type:"date",mapping:"statistics.created"}]);const s=new Ext.data.JsonStore({proxy:new Ext.data.HttpProxy({url:STIGMAN.Env.apiBase+"/collections",method:"GET"}),baseParams:{elevate:curUser.privileges.canAdmin,projection:["owners","statistics"]},root:"",fields:t,isLoaded:!1,idProperty:"collectionId",sortInfo:{field:"name",direction:"ASC"},listeners:{load:function(t,e){t.isLoaded=!0,n.getSelectionModel().selectFirstRow()}}});t=new SM.RowCountTextItem({store:s});const n=new Ext.grid.GridPanel({cls:"sm-round-panel",margins:{top:SM.Margin.top,right:SM.Margin.edge,bottom:SM.Margin.bottom,left:SM.Margin.edge},region:"center",id:"collectionGrid",store:s,border:!0,stripeRows:!0,sm:new Ext.grid.RowSelectionModel({singleSelect:!0}),columns:[{header:"Name",width:150,dataIndex:"name",sortable:!0,filter:{type:"string"}},{header:"Description",width:300,dataIndex:"description",sortable:!0,filter:{type:"string"}},{header:"Owners",width:150,dataIndex:"owners",sortable:!0,renderer:t=>columnWrap(t.map(t=>t.username).join("\n"))},{header:"Grants",width:150,dataIndex:"grants",sortable:!0},{header:"Assets",width:150,dataIndex:"assets",sortable:!0},{header:"Checklists",width:150,dataIndex:"checklists",sortable:!0},{header:"Created",xtype:"datecolumn",format:"Y-m-d H:i T",width:150,dataIndex:"created",sortable:!0},{header:"ID",width:150,dataIndex:"collectionId",sortable:!0}],view:new SM.ColumnFilters.GridView({forceFit:!1,listeners:{filterschanged:function(t,e,i){s.filter(t.getFilterFns())},beforerefresh:function(t){t.scrollTop=t.scroller.dom.scrollTop,t.scrollHeight=t.scroller.dom.scrollHeight},refresh:function(t){setTimeout(function(){t.scroller.dom.scrollTop=t.scrollTop+(0==t.scrollTop?0:t.scroller.dom.scrollHeight-t.scrollHeight)},100)}},deferEmptyText:!1}),listeners:{rowdblclick:{fn:function(t,e,i){showCollectionProps(t.getStore().getAt(e).get("collectionId"))}}},tbar:[{iconCls:"icon-add",text:"New Collection",disabled:!curUser.privileges.canAdmin,handler:function(){showCollectionProps(0)}},"-",{ref:"../removeBtn",iconCls:"icon-del",text:"Delete Collection",disabled:!curUser.privileges.canAdmin,handler:function(){let i=n.getSelectionModel().getSelected();var t="Delete collection, "+i.data.name+"?";Ext.Msg.confirm("Confirm",t,async function(t,e){try{"yes"==t&&(Ext.getBody().mask("Deleting collection"),await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${i.data.collectionId}?elevate=true`,method:"DELETE"}),SM.Dispatcher.fireEvent("collectiondeleted",i.data.collectionId))}catch(t){alert(t.message)}finally{Ext.getBody().unmask()}})}},"-",{iconCls:"icon-edit",text:"Collection Properties",handler:function(){showCollectionProps(n.getSelectionModel().getSelected().get("collectionId"))}}],bbar:new Ext.Toolbar({items:[{xtype:"tbbutton",iconCls:"icon-refresh",tooltip:"Reload this grid",width:20,handler:function(t){n.getStore().reload()}},{xtype:"tbseparator"},{xtype:"exportbutton",hasMenu:!1,gridBasename:"Collection-Info",exportType:"grid",iconCls:"sm-export-icon",text:"CSV"},{xtype:"tbfill"},{xtype:"tbseparator"},t]}),width:"50%",loadMask:!0});function r(t){s.reload()}function o(t){s.reload()}function a(t){s.reload()}SM.Dispatcher.addListener("collectionchanged",r),SM.Dispatcher.addListener("collectioncreated",o),SM.Dispatcher.addListener("collectiondeleted",a);const l=Ext.getCmp("main-tab-panel").add({id:"collection-admin-tab",sm_treePath:e,iconCls:"sm-collection-icon",title:"Collections",closable:!0,layout:"border",border:!1,items:[n],listeners:{beforedestroy:function(){SM.Dispatcher.removeListener("collectionchanged",r),SM.Dispatcher.removeListener("collectioncreated",o),SM.Dispatcher.removeListener("collectiondeleted",a)}}});l.show(),n.getStore().load()}async function showCollectionProps(s){try{let e=new SM.Collection.CreateForm({btnText:s?"Update":"Create",btnHandler:async()=>{try{var t=e.getForm().getFieldValues();await addOrUpdateCollection(s,t,{elevate:!0,showManager:!1})}catch(t){alert(t.message)}finally{i.close()}}});var t,n;s&&(t=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/collections/"+s,params:{elevate:curUser.privileges.canAdmin,projection:"grants"},method:"GET"}),n=JSON.parse(t.response.responseText),e.setFieldValues(n));let i=new Ext.Window({id:"window-project-info",cls:"sm-dialog-window sm-round-panel",title:s?"Modify Collection":"Create Collection",modal:!0,width:460,height:560,layout:"fit",plain:!1,buttonAlign:"right",items:e});i.show(document.body)}catch(t){alert(e.message)}}async function addCollectionManager(t){let{collectionId:d,collectionName:h,treePath:c}=t;try{const x=Ext.getCmp("main-tab-panel").getItem(d+"-collection-manager-tab");if(x)return void x.show();var u=curUser.collectionGrants.find(t=>t.collection.collectionId===d),f=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/collections/"+d,params:{projection:"grants"},method:"GET"});let i=JSON.parse(f.response.responseText),s=i.metadata.fieldSettings?JSON.parse(i.metadata.fieldSettings):{detailEnabled:"always",detailRequired:"always",commentEnabled:"findings",commentRequired:"findings"};var p=new SM.Collection.ManagePanel({collectionId:d,apiCollection:i,title:`Collection Properties (ID ${d})`,cls:"sm-round-panel",margins:{top:SM.Margin.top,right:SM.Margin.adjacent,bottom:SM.Margin.bottom,left:SM.Margin.edge},region:"west",width:"30%",minWidth:430,padding:"10px 10px 10px 10px",border:!1,split:!0,layout:"fit",allowDelete:4===u.accessLevel});let n=new SM.CollectionAssetGrid({collectionId:d,collectionName:h,apiFieldSettings:s,url:STIGMAN.Env.apiBase+"/assets",cls:"sm-round-panel",margins:{top:SM.Margin.top,right:SM.Margin.edge,bottom:SM.Margin.adjacent,left:SM.Margin.adjacent},title:"Assets",region:"north",border:!1,split:!0,height:"50%"}),e=new SM.CollectionStigsGrid({collectionId:d,collectionName:h,url:`${STIGMAN.Env.apiBase}/collections/${d}/stigs`,cls:"sm-round-panel",margins:{top:SM.Margin.adjacent,right:SM.Margin.edge,bottom:SM.Margin.bottom,left:SM.Margin.adjacent},border:!1,title:"STIGs",region:"center"}),t=new Ext.Panel({id:d+"-collection-manager-tab",collectionId:d,collectionName:h,iconCls:"sm-collection-tab-icon",sm_tabMode:"permanent",sm_treePath:c,closable:!0,layout:"border",layoutConfig:{targetCls:"sm-border-layout-ct"},listeners:{beforedestroy:()=>{SM.Dispatcher.removeListener("assetchanged",r),SM.Dispatcher.removeListener("assetcreated",r),SM.Dispatcher.removeListener("assetdeleted",r),SM.Dispatcher.removeListener("stigassetschanged",o)}},items:[p,{region:"center",layout:"border",border:!1,layoutConfig:{targetCls:"sm-border-layout-ct"},items:[n,e]}]}),r=t=>{t.collection.collectionId===d&&(n.getStore().reload(),e.getStore().reload())},o=t=>{t===d&&(n.getStore().reload(),e.getStore().reload())};t.updateTitle=function(){t.setTitle(("ephemeral"===t.sm_tabMode?"<i>":"")+SM.he(t.collectionName)+" / Manage"+("ephemeral"===this.sm_tabMode?"</i>":""))},t.makePermanent=function(){t.sm_tabMode="permanent",t.updateTitle.call(t)};let a=Ext.getCmp("main-tab-panel");var m,g=a.items.findIndex("sm_tabMode","ephemeral");let l;l=-1!==g?(m=a.items.itemAt(g),a.remove(m),a.insert(g,t)):a.add(t),l.updateTitle.call(l),l.show(),n.getStore().load(),e.getStore().load(),SM.Dispatcher.addListener("assetchanged",r),SM.Dispatcher.addListener("assetcreated",r),SM.Dispatcher.addListener("assetdeleted",r),SM.Dispatcher.addListener("stigassetschanged",o),SM.Dispatcher.addListener("fieldsettingschanged",function(t,e){t===i.collectionId&&(s=e,n.apiFieldSettings=s)})}catch(t){throw t}}function addStigAdmin(t){t=t.treePath;const e=Ext.getCmp("main-tab-panel").getItem("stig-admin-tab");if(e)e.show();else{const i=new SM.StigRevision.StigGrid({cls:"sm-round-panel",margins:{top:SM.Margin.top,right:SM.Margin.edge,bottom:SM.Margin.bottom,left:SM.Margin.edge},region:"center",stripeRows:!0,loadMask:!0});Ext.getCmp("main-tab-panel").add({id:"stig-admin-tab",sm_treePath:t,iconCls:"sm-stig-icon",title:"STIG checklists",closable:!0,layout:"border",items:[i]}).show(),i.getStore().load()}}function addAppDataAdmin(t){var e=t["treePath"];const i=Ext.getCmp("main-tab-panel").getItem("appdata-admin-tab");if(i)return void i.show();t=new Ext.Panel({cls:"sm-round-panel",margins:{top:SM.Margin.top,right:SM.Margin.edge,bottom:SM.Margin.bottom,left:SM.Margin.edge},region:"center",labelWidth:1,hideLabel:!0,padding:10,defaults:{anchor:"100%",allowBlank:!1},items:[{xtype:"fieldset",title:"Export",items:[{xtype:"button",id:"appdata-admin-form-export-btn",text:"Download Application Data",iconCls:"sm-export-icon",handler:async function(){try{Ext.getBody().mask("Waiting for JSON...");var t=await s();n(t.blob,t.filename)}catch(t){alert(t.blob)}finally{Ext.getBody().unmask()}}}]},{xtype:"fieldset",title:"Import",items:[{xtype:"button",id:"appdata-admin-form-import-btn",text:"Replace Application Data...",iconCls:"sm-import-icon",handler:function(t,e){let l=new Ext.FormPanel({standardSubmit:!1,fileUpload:!0,baseCls:"x-plain",monitorValid:!0,autoHeight:!0,labelWidth:1,hideLabel:!0,defaults:{anchor:"100%",allowBlank:!1},items:[{xtype:"fieldset",title:"Instructions",autoHeight:!0,items:[{xtype:"displayfield",id:"infoText1",name:"infoText",html:"Please browse for an Application Data file"}]},{xtype:"fileuploadfield",id:"form-file",emptyText:"Browse for a file...",name:"importFile",accept:".json,.zip",buttonText:"Browse...",buttonCfg:{icon:"img/disc_drive.png"}},{xtype:"displayfield",id:"infoText2",name:"infoText",html:"<i><b>IMPORTANT: Content from the imported file will replace ALL existing application data!</b></i>"}],buttonAlign:"center",buttons:[{text:"Import",icon:"img/page_white_get.png",tooltip:"Import the data",formBind:!0,handler:async function(){try{document.getElementById("form-file-file").files[0];var e=l.getForm().getEl().dom,i=new FormData(e);initProgress("Importing file","Waiting for response..."),updateStatusText("Waiting for API response..."),await window.oidcProvider.updateToken(10);let t=await fetch(STIGMAN.Env.apiBase+"/op/appdata?elevate=true",{method:"POST",headers:new Headers({Authorization:"Bearer "+window.oidcProvider.token}),body:i});const o=t.body.getReader(),a=new TextDecoder("utf-8");var s;do{var{value:n,done:r}=await o.read();updateStatusText(a.decode(n),!0),s=r}while(!s);updateProgress(0,"Done")}catch(t){alert(t)}}},{text:"Cancel",handler:function(){i.close()}}]});var i=new Ext.Window({title:"Initialize Application Data",cls:"sm-dialog-window sm-round-panel",modal:!0,width:500,layout:"fit",plain:!0,bodyStyle:"padding:5px;",buttonAlign:"center",items:l});i.show(document.body)}}]}]});const s=async function(){try{var e=STIGMAN.Env.apiBase+"/op/appdata?elevate=true";await window.oidcProvider.updateToken(10);let t=await fetch(e,{method:"GET",headers:new Headers({Authorization:"Bearer "+window.oidcProvider.token})});const s=t.headers.get("content-disposition");var i=s.match(/filename\*?=['"]?(?:UTF-\d['"]*)?([^;\r\n"']*)['"]?;?/)[1];return{blob:await t.blob(),filename:i}}catch(t){alert(t.message)}},n=function(t,e){let i=document.createElement("a");i.style.display="none";t=window.URL.createObjectURL(t);i.href=t,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(t)},r=Ext.getCmp("main-tab-panel").add({id:"appdata-admin-tab",sm_treePath:e,iconCls:"sm-database-save-icon",title:"Application Data",closable:!0,layout:"border",border:!1,items:[t]});r.show()}function getAdministrationItems(){return getTree()}function adminTreeClick(t){var e=Ext.getCmp("admin-center-tab").getItem("admin-tab-"+t.attributes.id);e?e.show():addAdminTab(t.attributes)}function addAdminTab(t){switch(t.id){case"user-admin":addUserAdmin();break;case"collection-admin":addCollectionAdmin();break;case"stig-admin":addStigAdmin();break;case"artifact-admin":addArtifactAdmin();break;case"appdata-admin":addAppDataAdmin()}}function getTree(){let t=[];return curUser.privileges.canAdmin&&t.push({id:"appdata-admin",text:"Application Data ",leaf:!0,iconCls:"sm-database-save-icon"},{id:"department-admin",text:"Departments",leaf:!0,iconCls:"sm-department-icon"}),!curUser.privileges.canAdmin&&3!==curUser.accessLevel||t.push({id:"collection-admin",text:"Collections",leaf:!0,iconCls:"sm-collection-icon"}),t.push({id:"user-admin",text:"Users",leaf:!0,iconCls:"sm-users-icon"},{id:"stig-admin",text:"STIG checklists",leaf:!0,iconCls:"sm-stig-icon"}),new Ext.tree.AsyncTreeNode({id:"global-admin",text:"Administration areas",icon:"img/Settings-icon-16.png",expanded:!0,children:t})}function addCompletionStatus(t){const{collectionId:e,collectionName:i,treePath:s}=t;var n=new Ext.ux.grid.GroupSummary,r=new Ext.data.GroupingStore({proxy:new Ext.data.HttpProxy({url:`${STIGMAN.Env.apiBase}/collections/${e}/status`,method:"GET"}),sortInfo:{field:"assetName"},groupField:"assetName",reader:new Ext.data.JsonReader({root:"",fields:[{name:"assetId",type:"int"},"assetName",{name:"benchmarkId",type:"string"},{name:"rulesAuto",type:"int",mapping:"rules.auto"},{name:"rulesTotal",type:"int",mapping:"rules.total"},{name:"savedTotal",type:"int",mapping:"status.saved.total"},{name:"submittedTotal",type:"int",mapping:"status.submitted.total"},{name:"rejectedTotal",type:"int",mapping:"status.rejected.total"},{name:"acceptedTotal",type:"int",mapping:"status.accepted.total"},{name:"highCount",type:"int",mapping:"findings.high"},{name:"mediumCount",type:"int",mapping:"findings.medium"},{name:"lowCount",type:"int",mapping:"findings.low"},{name:"minTs",type:"date"},{name:"maxTs",type:"date"},{name:"notCheckedTotal",type:"int",convert:function(t,e){return e.rules.total-(e.status.saved.total+e.status.submitted.total+e.status.rejected.total+e.status.accepted.total)}}],idProperty:t=>t.assetId+t.benchmarkId})}),t=new SM.RowCountTextItem({store:r}),o=new Ext.grid.GridPanel({id:"completionGrid-"+e,cls:"sm-round-panel",margins:{top:SM.Margin.top,right:SM.Margin.edge,bottom:SM.Margin.bottom,left:SM.Margin.edge},plugins:n,region:"center",layout:"fit",store:r,columns:[{header:"Asset",width:35,dataIndex:"assetName",sortable:!0,summaryRenderer:function(t,e,i){return"Totals"}},{header:"Checklist",width:35,dataIndex:"benchmarkId",sortable:!0,id:"completionGrid-"+e+"becnhmarkId",summaryRenderer:function(t,e,i){return"Totals"}},{header:"Checks",width:10,dataIndex:"rulesTotal",sortable:!0,align:"right",renderer:renderGrey,summaryType:"sum"},{header:"Not Checked",width:10,dataIndex:"notCheckedTotal",sortable:!0,align:"right",renderer:renderCat23,summaryType:"sum"},{header:"Oldest",width:10,dataIndex:"minTs",sortable:!0,align:"center",renderer:renderDurationToNow,summaryType:"min"},{header:"Newest",width:10,dataIndex:"maxTs",sortable:!0,align:"center",renderer:renderDurationToNow,summaryType:"max"},{header:"Saved",width:10,dataIndex:"savedTotal",sortable:!0,align:"right",renderer:renderGrey,summaryType:"sum"},{header:"<img src=img/ready-16.png width=12 height=12> Submitted",width:10,dataIndex:"submittedTotal",sortable:!0,align:"right",renderer:renderGrey,summaryType:"sum"},{header:"<img src=img/rejected-16.png width=12 height=12> Rejected",width:10,dataIndex:"rejectedTotal",sortable:!0,align:"right",renderer:renderGrey,summaryType:"sum"},{header:"<img src=img/star.svg width=12 height=12> Accepted",width:10,dataIndex:"acceptedTotal",sortable:!0,align:"right",renderer:renderGrey,summaryType:"sum"},{header:"Cat 1",width:10,dataIndex:"highCount",sortable:!0,align:"right",renderer:renderCat1,summaryType:"sum"},{header:"Cat 2",width:10,dataIndex:"mediumCount",sortable:!0,align:"right",renderer:renderCat23,summaryType:"sum"},{header:"Cat 3",width:10,dataIndex:"lowCount",sortable:!0,align:"right",renderer:renderCat23,summaryType:"sum"}],loadMask:!0,stripeRows:!0,view:new Ext.grid.GroupingView({enableGrouping:!0,hideGroupedColumn:!0,forceFit:!0,emptyText:"No records found.",groupTextTpl:'{[SM.he(values.text)]} ({[values.rs.length]} {[values.text.split(":")[0] == "Asset" ? "checklist" : "asset"]}{[values.rs.length > 1 ? "s assigned" : " assigned"]})',getRowClass:function(t,e,i,s){if("!! NO STIG ASSIGNMENTS !!"==t.data.stigTitle)return"sm-grid3-row-black"}}),sm:new Ext.grid.RowSelectionModel({}),listeners:{rowdblclick:{fn:function(t,e,i){var s=t.getStore().getAt(e);"!! NO STIG ASSIGNMENTS !!"!=s.get("stigTitle")&&(Ext.getCmp("main-tabs").setActiveTab("tab-reviews"),t=new Object,(e=new Object).report="review",e.assetId=s.get("assetId"),e.assetName=s.get("assetName"),e.benchmarkId=s.get("benchmarkId"),e.stigName=s.get("benchmarkId"),e.revId=s.get("revId"),t.attributes=e,reviewsTreeClick(t))}}},tbar:new Ext.Toolbar({items:[{xtype:"buttongroup",title:"Grouping",items:[{xtype:"tbbutton",icon:"img/security_firewall_on.png",tooltip:"Group by STIG",toggleGroup:"completionGrid-groupBy"+e,enableToggle:!0,allowDepress:!1,width:20,handler:function(t){t.pressed?(Ext.getCmp("completionGrid-expandButton"+e).enable(),Ext.getCmp("completionGrid-collapseButton"+e).enable(),o.getStore().groupBy("benchmarkId")):(Ext.getCmp("completionGrid-expandButton"+e).disable(),Ext.getCmp("completionGrid-collapseButton"+e).disable(),o.getStore().clearGrouping())}},{xtype:"tbbutton",icon:"img/accuracy-16.png",tooltip:"Group by asset",toggleGroup:"completionGrid-groupBy"+e,enableToggle:!0,allowDepress:!1,pressed:!0,width:20,handler:function(t){t.pressed?(Ext.getCmp("completionGrid-expandButton"+e).enable(),Ext.getCmp("completionGrid-collapseButton"+e).enable(),o.getStore().groupBy("assetName")):(Ext.getCmp("completionGrid-expandButton"+e).disable(),Ext.getCmp("completionGrid-collapseButton"+e).disable(),o.getStore().clearGrouping())}},{xtype:"tbseparator"},{xtype:"tbbutton",icon:"img/minus-grey.png",id:"completionGrid-collapseButton"+e,tooltip:"Collapse all groups",width:20,handler:function(t){o.getView().collapseAllGroups()}},{xtype:"tbbutton",icon:"img/plus-grey.png",id:"completionGrid-expandButton"+e,tooltip:"Expand all groups",width:20,handler:function(t){o.getView().expandAllGroups()}}]}]}),bbar:new Ext.Toolbar({items:[{xtype:"tbbutton",iconCls:"icon-refresh",tooltip:"Reload this grid",width:20,handler:function(t){o.getStore().reload()}},{xtype:"tbseparator"},{xtype:"exportbutton",hasMenu:!1,exportType:"store",storeBasename:i+"-Status",iconCls:"sm-export-icon",text:"CSV"},{xtype:"tbfill"},{xtype:"tbseparator"},t]})});let a=new Ext.Panel({id:"completionTab-"+e,collectionId:e,collectionName:i,iconCls:"sm-report-icon",title:"",closable:!0,layout:"border",sm_tabMode:"ephemeral",sm_treePath:s,items:[o]});a.updateTitle=function(){a.setTitle(("ephemeral"===a.sm_tabMode?"<i>":"")+SM.he(a.collectionName)+" / Status"+("ephemeral"===a.sm_tabMode?"</i>":""))},a.makePermanent=function(){a.sm_tabMode="permanent",a.updateTitle()};let l=Ext.getCmp("main-tab-panel");r=l.items.findIndex("sm_tabMode","ephemeral");let d;d=-1!==r?(t=l.items.itemAt(r),l.remove(t),l.insert(r,a)):l.add(a),d.updateTitle.call(d),d.show(),o.getStore().load()}function renderGrey(t,e,i,s,n,r){return e.css="sm-cell-grey",t}function renderDays(t,e,i,s,n,r){return e.css="sm-cell-grey",isNaN(t)?"-":0==t?"Today":1==t?t+" day":t+" days"}function renderCat1(t,e,i,s,n,r){return e.css=0<t?"sm-cell-red":"sm-cell-green",t}function renderCat23(t,e,i,s,n,r){return e.css=0<t?"sm-cell-orange":"sm-cell-green",t}function renderUndone(t,e,i,s,n,r){return e.css=0==t?"sm-cell-green":"sm-cell-red",t}function renderDone(t,e,i,s,n,r){return t==i.data.totalCheckCount?e.css="sm-cell-green":e.css="sm-cell-red",t}function renderChecklist(t,e,i,s,n,r){return e.css="sm-cell-checklist",t}function renderAsset(t,e,i,s,n,r){return e.css="sm-cell-asset",t}function addFindingsSummary(t){var{collectionId:e,collectionName:i,treePath:t}=t;const s=new SM.FindingsPanel({collectionId:e,aggregator:"groupId"}),n=new Ext.Panel({id:"findingsTab-"+e,collectionId:e,collectionName:i,iconCls:"sm-report-icon",title:"",closable:!0,layout:"fit",sm_tabMode:"ephemeral",sm_treePath:t,items:[s]});n.updateTitle=function(){n.setTitle(("ephemeral"===n.sm_tabMode?"<i>":"")+SM.he(n.collectionName)+" / Findings"+("ephemeral"===n.sm_tabMode?"</i>":""))},n.makePermanent=function(){n.sm_tabMode="permanent",n.updateTitle.call(n)};let r=Ext.getCmp("main-tab-panel");i=r.items.findIndex("sm_tabMode","ephemeral");let o;o=-1!==i?(t=r.items.itemAt(i),r.remove(t),r.insert(i,n)):r.add(n),o.updateTitle.call(o),o.show(),s.parent.getStore().load({params:{aggregator:"groupId"}})}async function addReview(t){let{leaf:a,selectedRule:s,selectedResource:e,treePath:i}=t;var n=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/collections/"+a.collectionId,method:"GET"});let r=JSON.parse(n.response.responseText),o=r.metadata.fieldSettings?JSON.parse(r.metadata.fieldSettings):{detailEnabled:"always",detailRequired:"always",commentEnabled:"findings",commentRequired:"findings"};a.stigRevStr&&(E=a.stigRevStr.match(/V(\d+)R(\d+)/),a.revId=`${a.benchmarkId}-${E[1]}-`+E[2]);var d="-"+a.assetId+"-"+a.benchmarkId.replace(".","_"),l="You have modified your review. Would you like to save your changes?",t=Ext.data.Record.create([{name:"assetId"},{name:"groupId",type:"string",sortType:sortGroupId},{name:"ruleId",type:"string",sortType:sortRuleId},{name:"groupTitle",type:"string"},{name:"ruleTitle",type:"string"},{name:"severity",type:"string",sortType:sortSeverity},{name:"result",type:"string"},{name:"status",type:"string"},{name:"hasAttach",type:"boolean"},{name:"autoResult",type:"boolean"},{name:"reviewComplete",type:"boolean"},{name:"autoCheckAvailable",type:"boolean"}]),h=new Ext.data.JsonStore({proxy:new Ext.data.HttpProxy({url:`${STIGMAN.Env.apiBase}/assets/${a.assetId}/checklists/${a.benchmarkId}/latest`,method:"GET"}),root:"",storeId:"groupStore"+d,fields:t,idProperty:"ruleId",sortInfo:{field:"ruleId",direction:"ASC"},listeners:{load:function(t,e){var i;void 0!==s?(i=ourGrid.getStore().find("ruleId",s),p.getSelectionModel().selectRow(i),ourGrid.getView().getRow(i).scrollIntoView()):p.getSelectionModel().selectFirstRow(),p.totalText.setText(u(t))},clear:function(){p.totalText.setText("0 rules")},update:function(t){p.totalText.setText(u(t))},datachanged:function(t){p.totalText.setText(u(t))},exception:function(t){var e=p.getView(),t=t.events.exception.listeners[1].fn.arguments[4];0!=t.status?e.emptyText="Load failed: "+t.responseText:e.emptyText="HTTP Server Error: "+t.statusText,e.refresh()}}}),c=new Ext.menu.Menu({id:"groupChecklistMenu"+d,items:[{text:"Group/Rule display",hideOnClick:!1,menu:{items:[{id:"groupFileMenu-title-groupItem"+d,text:"Group ID and title",checked:!1,group:"titleType"+d,handler:function(t,e){var i=p.getColumnModel(),s=i.findColumnIndex("groupTitle"),n=i.findColumnIndex("ruleTitle"),r=i.findColumnIndex("groupId"),o=i.findColumnIndex("ruleId"),a=i.getColumnWidth(n),l=i.getColumnWidth(o);i.setColumnWidth(s,a),i.setColumnWidth(r,l),x(),i.setHidden(n,!0),i.setHidden(o,!0),i.setHidden(s,!1),i.setHidden(r,!1),p.autoExpandColumn="groupTitle"+d}},{id:"groupFileMenu-title-ruleItem"+d,text:"Rule ID and title",checked:!0,group:"titleType"+d,handler:function(t,e){var i=p.getColumnModel(),s=i.findColumnIndex("groupTitle"),n=i.findColumnIndex("ruleTitle"),r=i.findColumnIndex("groupId"),o=i.findColumnIndex("ruleId"),a=i.getColumnWidth(s),l=i.getColumnWidth(r);i.setColumnWidth(n,a),i.setColumnWidth(o,l),x(),i.setHidden(s,!0),i.setHidden(r,!0),i.setHidden(n,!1),i.setHidden(o,!1),p.autoExpandColumn="ruleTitle"+d}}]}},"-",{text:"Export CKL",iconCls:"sm-export-icon",tooltip:"Download this checklist in DISA STIG Viewer format",handler:async function(t,e){try{document.body.style.cursor="wait";var i=await t.getCkl(a);t.downloadBlob(i.blob,i.filename),document.body.style.cursor="default"}catch(t){alert(t.message)}},getCkl:function(n){return new Promise(async(e,i)=>{var s=new XMLHttpRequest,t=`${STIGMAN.Env.apiBase}/assets/${n.assetId}/checklists/${p.sm_benchmarkId}/${p.sm_revisionStr}?format=ckl`;s.open("GET",t),s.responseType="blob",await window.oidcProvider.updateToken(10),s.setRequestHeader("Authorization","Bearer "+window.oidcProvider.token),s.onload=function(){var t;200<=this.status&&this.status<300?(t=this.getResponseHeader("Content-Disposition").match(/filename\*?=['"]?(?:UTF-\d['"]*)?([^;\r\n"']*)['"]?;?/)[1],e({blob:s.response,filename:t})):i({status:this.status,message:s.statusText})},s.onerror=function(){i({status:this.status,message:s.responseText})},s.send()})},downloadBlob:function(t,e){let i=document.createElement("a");i.style.display="none";t=window.URL.createObjectURL(t);i.href=t,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(t)}},{text:"Import Results...",iconCls:"sm-import-icon",handler:function(){showImportResultFile({...a,revisionStr:p.sm_revisionStr,store:h,fieldSettings:o})}}]}),u=function(t){var e=t.getCount(),s=0,n=0,r=0,o=0;return t.data.each(function(t,e,i){switch(t.data.result){case"fail":s++;break;case"pass":n++;break;case"notapplicable":r++;break;default:o++}}),e+" checks ("+s+" Open, "+n+" NF, "+r+" NA, "+o+" NR/Other )"},n=new Ext.ux.ExportButton({hasMenu:!1,exportType:"grid",gridBasename:a.assetName+"-"+a.benchmarkId,iconCls:"sm-export-icon",text:"CSV"});const f=new SM.ColumnFilters.GridView({forceFit:!1,emptyText:"No checks to display",holdPosition:!0,deferEmptyText:!1,lastHide:new Date,getRowClass:function(t,e){if(!0===t.get("autoCheckAvailable"))return"sm-scap-grid-item"},listeners:{filterschanged:function(t,e,i){h.filter(t.getFilterFns())}}});var p=new Ext.grid.GridPanel({cls:"sm-round-panel",margins:{top:SM.Margin.top,right:SM.Margin.adjacent,bottom:SM.Margin.bottom,left:SM.Margin.edge},border:!1,region:"west",id:"groupGrid"+d,sm_benchmarkId:a.benchmarkId,sm_revisionStr:"latest",width:"35%",minWidth:340,hideMode:"offsets",enableColumnMove:!1,title:"Checklist",split:!0,store:h,stripeRows:!0,listeners:{beforehide:{fn:function(t){}},beforeshow:{fn:function(t){}}},sm:new Ext.grid.RowSelectionModel({singleSelect:!0,listeners:{beforerowselect:function(s,n,t,e){if(S.groupGridRecord==e)return!0;var i=S.reviewChanged(),e=S.getForm().isValid();return!(i&&e&&S.isLoaded)||(Ext.Msg.show({title:"Save Changes?",msg:l,buttons:{yes:"Save",no:"Discard",cancel:"Cancel"},fn:function(t,e,i){switch(t){case"yes":D({source:"selectGroup",sm:s,index:n,type:"save"}),S.isLoaded=!1;break;case"no":S.isLoaded=!1,s.selectRow(n)}}}),!1)},rowselect:{fn:function(t,e,i){!async function(s,n,r,o,a){try{var l=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+`/stigs/${o}/revisions/${a}/rules/`+s.data.ruleId,method:"GET",params:{projection:["detail","ccis","checks","fixes"]}}),d=JSON.parse(l.response.responseText);I.contentPanel.update(d),I.contentPanel.setTitle("Rule for Group "+SM.he(s.data.groupId));var h=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+`/collections/${n}/reviews`,method:"GET",params:{rules:"all",ruleId:s.data.ruleId}});let t=Ext.util.JSON.decode(h.response.responseText);var c=t.filter(t=>t.assetId==r)[0]||{},u=t.filter(t=>t.assetId!=r);let e=S.getForm();e.reset(),S.isLoaded=!1,S.groupGridRecord=s,S.loadValues(c),S.isLoaded=!0,y.getStore().loadData(u);var f,p=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+`/collections/${n}/reviews/${r}/`+s.data.ruleId,method:"GET",params:{projection:["history","metadata"]}});let i=Ext.util.JSON.decode(p.response.responseText);i||(w.store.removeAll(),b.getStore().removeAll()),i.history&&(f={comment:i.comment,autoResult:i.autoResult,rejectText:i.rejectText,result:i.result,detail:i.detail,status:i.status,ts:i.ts,touchTs:i.touchTs,userId:i.userId,username:i.username},i.history.push(f),w.store.loadData(i.history)),C.statusTextPanel.update(i.status?.text),b.ruleId=s.data.ruleId,b.loadArtifacts(),S.setReviewFormItemStates()}catch(t){t.response?alert(t.response.responseText):alert(t)}}(i,a.collectionId,a.assetId,p.sm_benchmarkId,p.sm_revisionStr)}}}}),view:f,columns:[{id:"severity"+d,header:"CAT",fixed:!0,width:48,align:"left",dataIndex:"severity",sortable:!0,renderer:renderSeverity,filter:{type:"values",renderer:renderSeverity,comparer:SM.ColumnFilters.CompareFns.severity}},{id:"groupId"+d,header:"Group",width:95,dataIndex:"groupId",sortable:!0,hidden:!0,align:"left",filter:{type:"string"}},{id:"ruleId"+d,header:"Rule Id",width:100,dataIndex:"ruleId",hidden:!1,sortable:!0,align:"left",filter:{type:"string"}},{id:"groupTitle"+d,header:"Group Title",width:80,hidden:!0,dataIndex:"groupTitle",renderer:columnWrap,sortable:!0,filter:{type:"string"}},{id:"ruleTitle"+d,header:"Rule Title",width:80,hidden:!1,dataIndex:"ruleTitle",renderer:columnWrap,sortable:!0,filter:{type:"string"}},{id:"result"+d,header:'<span exportvalue="Result">&#160;</span>',width:32,fixed:!0,dataIndex:"result",sortable:!0,renderer:renderResult,filter:{type:"values",renderer:SM.ColumnFilters.Renderers.result}},{id:"status"+d,header:"Status",fixed:!0,width:44,align:"center",dataIndex:"status",sortable:!0,renderer:renderStatuses,filter:{type:"values",renderer:SM.ColumnFilters.Renderers.status}}],autoExpandColumn:"ruleTitle"+d,loadMask:!0,tbar:new Ext.Toolbar({items:[{xtype:"tbbutton",iconCls:"sm-checklist-icon",text:"Checklist",menu:c},"->",{xtype:"tbitem",html:'<div class="sm-toolbar-legend-box sm-scap-grid-item"></div>'},{xtype:"tbtext",text:" SCAP available",style:"margin-right: 15px;"}]}),bbar:[{xtype:"tbbutton",iconCls:"icon-refresh",tooltip:"Reload this grid",width:20,handler:function(t){p.getStore().reload()}},{xtype:"tbseparator"},n,{xtype:"tbseparator"},{xtype:"tbtext",ref:"../totalText",id:"groupGrid-totalText"+d,text:"0 rules",width:80}]}),m=function(t,e){let i=p.getStore();i.proxy.setUrl(`${STIGMAN.Env.apiBase}/assets/${a.assetId}/checklists/${a.benchmarkId}/`+t.revisionStr,!0),i.load(),g(a.benchmarkId,t.revisionStr,d),p.sm_revisionStr=t.revisionStr};async function g(t,e,i){try{var s=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+`/stigs/${t}/revisions`,method:"GET"}),n=function(s,n,r){let o={};for(var a={id:"revision-menuItem"+r,ref:"revisionMenuItem",text:"Revisions",hideOnClick:false,menu:{items:[]}},l=0;l<s.length;l++){let t=s[l];let e=new Date(t.benchmarkDate);let i={id:`revision-submenu${t.benchmarkId}-${t.version}-${t.release}${r}`,text:SM.he(`Version ${t.version} Release ${t.release} (${e.format("j M Y")})`),revisionStr:t.revisionStr,group:"revision-submenu-group"+r,handler:m};if(i.revisionStr==n||n==="latest"&&l===0){i.checked=true;p.sm_revisionStr=i.revisionStr;o.activeRevisionLabel=i.text}else i.checked=false;a.menu.items.push(i)}return o.menu=a,o}(JSON.parse(s.response.responseText),e,i);void 0===c.revisionMenuItem&&c.addItem(n.menu),p.setTitle(SM.he(n.activeRevisionLabel))}catch(t){alert(t.message)}}function x(){h.filter(f.getFilterFns())}var E=SM.RuleContentTpl,t=Ext.data.Record.create([{name:"assetName",type:"string"},{name:"status",type:"string",mapping:"status.label"},{name:"result",type:"string"},{name:"autoResult",type:"boolean"},{name:"username",type:"string"},{name:"detail",type:"string"},{name:"comment",type:"string"},{name:"reviewId",type:"int"}]),v=new Ext.data.JsonStore({root:"",id:"otherStore"+d,fields:t,sortInfo:{field:"assetName",direction:"ASC"},listeners:{exception:function(t){y.getView();var t=t.events.exception.listeners[1].fn.arguments[4];t=0!=t.status?"Load failed: "+t.responseText:"HTTP Server Error: "+t.statusText,y.getEl().mask(t)}},idProperty:"reviewId"}),n=new Ext.ux.grid.RowExpander({tpl:new Ext.XTemplate('<tpl if="detail">',"<p><b>Detail:</b> {[SM.he(values.detail)]}</p>","</tpl>",'<tpl if="comment">',"<p><b>Comment:</b> {[SM.he(values.comment)]}</p>","</tpl>")}),t=new Ext.ux.ExportButton({hasMenu:!1,exportType:"grid",gridBasename:"Other-Reviews",iconCls:"sm-export-icon",text:"CSV"}),y=new Ext.grid.GridPanel({enableDragDrop:!0,ddGroup:"gridDDGroup",plugins:n,layout:"fit",height:350,border:!1,id:"otherGrid"+d,store:v,stripeRows:!0,sm:new Ext.grid.RowSelectionModel({singleSelect:!0}),view:new SM.ColumnFilters.GridView({forceFit:!0,emptyText:"No other assets to display.",deferEmptyText:!1,listeners:{filterschanged:function(t,e,i){v.filter(t.getFilterFns())}}}),tbar:new Ext.Toolbar({items:[]}),bbar:new Ext.Toolbar({items:[t,"->",new SM.RowCountTextItem({store:v})]}),columns:[n,{id:"target"+d,header:"Asset",width:120,dataIndex:"assetName",sortable:!0,align:"left",renderer:function(t,e,i,s,n,r){return e.css+=" sm-cell-asset",t},filter:{type:"string"}},{header:"Status",width:50,fixed:!0,dataIndex:"status",sortable:!0,renderer:function(t,e,i,s,n,r){return renderStatuses(t,e,i,s,n,r)},filter:{type:"values",renderer:SM.ColumnFilters.Renderers.status}},{id:"state"+d,header:"Result",width:50,fixed:!0,dataIndex:"result",sortable:!0,renderer:renderResult,filter:{type:"values",renderer:SM.ColumnFilters.Renderers.result}},{header:"User",width:50,dataIndex:"username",sortable:!0,filter:{type:"values"}}],loadMask:!0,autoExpandColumn:"target"+d,emptyText:"No other assets to display"});const b=new SM.Attachments.Grid({id:"attachmentsGrid"+d,title:"Attachments",collectionId:a.collectionId,assetId:a.assetId});var w=new Sm_HistoryData(d),C=new Ext.Panel({cls:"sm-round-panel",margins:{top:SM.Margin.top,right:SM.Margin.edge,bottom:SM.Margin.adjacent,left:SM.Margin.adjacent},border:!1,region:"center",title:"Review Resources",layout:"fit",items:[{xtype:"tabpanel",border:!1,deferredRender:!1,id:"resources-tabs"+d,activeTab:void 0!==e?e:"other-tab"+d,listeners:{beforerender:function(t){}},items:[{title:"Other Assets",border:!1,layout:"fit",id:"other-tab"+d,items:y},b,{title:"Status Text",ref:"../statusTextPanel",padding:10,autoScroll:!0},{title:"History",layout:"fit",id:"history-tab"+d,items:w.grid}]}]});const S=new SM.Review.Form.Panel({cls:"sm-round-panel",bodyCssClass:"sm-review-form",border:!1,margins:{top:SM.Margin.adjacent,right:SM.Margin.edge,bottom:SM.Margin.bottom,left:SM.Margin.adjacent},region:"south",split:!0,height:"65%",minHeight:320,id:"reviewForm"+d,title:"Review on "+SM.he(a.assetName),padding:10,labelWidth:54,fieldSettings:o,btnHandler:function(t){console.log(t),D({source:"form",type:t.actionType})}});function T(t,e){t===r.collectionId&&(S.fieldSettings=e,S.setReviewFormItemStates(),S.setReviewFormTips())}SM.Dispatcher.addListener("fieldsettingschanged",T);n=[p,{cls:"sm-round-panel",margins:{top:SM.Margin.top,right:SM.Margin.adjacent,bottom:SM.Margin.bottom,left:SM.Margin.adjacent},border:!1,region:"center",xtype:"panel",split:!0,collapsible:!1,padding:20,autoScroll:!0,id:"content-panel"+d,ref:"contentPanel",title:"Rule",tpl:E},{region:"east",layout:"border",width:"35%",minWidth:340,border:!1,split:!0,collapsible:!1,id:"east-panel"+d,items:[C,S]}];let I=new Ext.Panel({id:"reviewTab"+d,border:!1,collectionId:a.collectionId,collectionName:r.name,assetName:a.assetName,stigName:a.stigName,iconCls:"sm-stig-icon",title:" ",closable:!0,layout:"border",sm_tabMode:"ephemeral",sm_treePath:i,sm_TabType:"asset_review",sm_GroupGridView:p.getView(),items:n,listeners:{beforedestroy:()=>{SM.Dispatcher.removeListener("fieldsettingschanged",T)},beforeclose:function(s){var t=S.reviewChanged(),e=S.getForm().isValid();return!t||!e||(Ext.Msg.show({title:"Save Changes?",msg:l,buttons:Ext.Msg.YESNOCANCEL,fn:function(t,e,i){switch(t){case"yes":D({source:"closeTab",type:"save"});break;case"no":s.ownerCt.remove(s)}}}),!1)}}});I.updateTitle=function(){I.setTitle(("ephemeral"===this.sm_tabMode?"<i>":"")+SM.he(this.collectionName)+` / ${SM.he(this.assetName)} / `+SM.he(this.stigName)+("ephemeral"===this.sm_tabMode?"</i>":""))},I.makePermanent=function(){I.sm_tabMode="permanent",I.updateTitle.call(I)};let k=Ext.getCmp("main-tab-panel");E=k.items.findIndex("sm_tabMode","ephemeral");let M;async function D(s){let n;try{n=S,n.getEl().mask("Saving...");var r=n.getForm().getFieldValues(!1,!1);let t={result:r.result,detail:r.detail||null,comment:r.comment||null,autoResult:r.autoResult},e,i;switch(s.type){case"submit":case"unsubmit":e=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${a.collectionId}/reviews/${a.assetId}/`+n.groupGridRecord.data.ruleId,method:"PATCH",params:{projection:"history"},headers:{"Content-Type":"application/json;charset=utf-8"},jsonData:{status:"submit"==s.type?"submitted":"saved"}}),i=JSON.parse(e.response.responseText);break;case"save and unsubmit":t.status="saved",e=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${a.collectionId}/reviews/${a.assetId}/`+n.groupGridRecord.data.ruleId,method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},params:{projection:"history"},jsonData:t}),i=JSON.parse(e.response.responseText);break;case"save and submit":t.status="submitted",e=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${a.collectionId}/reviews/${a.assetId}/`+n.groupGridRecord.data.ruleId,method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},params:{projection:"history"},jsonData:t}),i=JSON.parse(e.response.responseText);break;case"save":t.status="saved",e=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${a.collectionId}/reviews/${a.assetId}/`+n.groupGridRecord.data.ruleId,method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},params:{projection:"history"},jsonData:t}),i=JSON.parse(e.response.responseText)}n.groupGridRecord.data.result=i.result,n.groupGridRecord.data.reviewComplete=i.reviewComplete,n.groupGridRecord.data.status=i.status.label,n.groupGridRecord.data.autoResult=i.autoResult,n.groupGridRecord.commit(),x(),S.loadValues(i),C.statusTextPanel.update(i.status?.text);var o={comment:i.comment,autoResult:i.autoResult,rejectText:i.rejectText,result:i.result,detail:i.detail,status:i.status,ts:i.ts,touchTs:i.touchTs,userId:i.userId,username:i.username};i.history.push(o),w.store.loadData(i.history),"closeTab"==s.source?Ext.getCmp("main-tab-panel").remove("reviewTab"+d):"selectGroup"==s.source&&s.sm.selectRow(s.index),S.setReviewFormItemStates(S)}catch(t){Ext.Msg.alert("Fail",`Failed to update review.
`+t.message)}finally{n.getEl().unmask()}}M=-1!==E?(n=k.items.itemAt(E),k.remove(n),k.insert(E,I)):k.add(I),M.updateTitle.call(M),M.show(),p.getStore().load(),g(a.benchmarkId,"latest",d)}async function addCollectionReview(t){let{leaf:u,selectedRule:a,selectedAsset:f,treePath:p}=t;try{var g="-"+u.collectionId+"-"+u.benchmarkId.replace(".","_"),m=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/collections/"+u.collectionId,method:"GET"});let d=JSON.parse(m.response.responseText),r=d.metadata.fieldSettings?JSON.parse(d.metadata.fieldSettings):{detailEnabled:"always",detailRequired:"always",commentEnabled:"findings",commentRequired:"findings"},s=d.metadata.statusSettings?JSON.parse(d.metadata.statusSettings):{canAccept:!0,minGrant:3};m=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${u.collectionId}/stigs/${u.benchmarkId}/assets`,method:"GET"});let h=JSON.parse(m.response.responseText),c=h.map(t=>({assetId:t.assetId,assetName:t.name,result:null,detail:null,comment:null,autoResult:null,userId:null,username:null,ts:null,status:null}));var x=Ext.data.Record.create([{name:"oCnt",type:"int",mapping:"counts.results.fail"},{name:"nfCnt",type:"int",mapping:"counts.results.pass"},{name:"naCnt",type:"int",mapping:"counts.results.notapplicable"},{name:"nrCnt",type:"int",mapping:"counts.results.notchecked"},{name:"approveCnt",type:"int",mapping:"counts.statuses.accepted"},{name:"rejectCnt",type:"int",mapping:"counts.statuses.rejected"},{name:"readyCnt",type:"int",mapping:"counts.statuses.submitted"},{name:"groupId",type:"string",sortType:sortGroupId},{name:"ruleId",type:"string"},{name:"groupTitle",type:"string"},{name:"ruleTitle",type:"string"},{name:"severity",type:"string"},{name:"autoCheckAvailable",type:"boolean"}]),E=new Ext.data.JsonStore({proxy:new Ext.data.HttpProxy({url:`${STIGMAN.Env.apiBase}/collections/${u.collectionId}/checklists/${u.benchmarkId}/latest`,method:"GET"}),root:"",fields:x,idProperty:"ruleId",sortInfo:{field:"groupId",direction:"ASC"},listeners:{load:function(t,e,i){var s=w;void 0!==i.preselect&&void 0!==i.preselect.ruleId?(i=t.find("ruleId",i.preselect.ruleId),s.getSelectionModel().selectRow(i),s.getView().focusRow(i)):s.getSelectionModel().selectFirstRow(),T(),Ext.getCmp("groupGrid-totalText"+g).setText(y(t))},clear:function(){Ext.getCmp("groupGrid-totalText"+g).setText("0 checks")},update:function(t){Ext.getCmp("groupGrid-totalText"+g).setText(y(t))},datachanged:function(t){Ext.getCmp("groupGrid-totalText"+g).setText(y(t))},exception:function(t){var e=w.getView(),t=t.events.exception.listeners[1].fn.arguments[4];0!=t.status?e.emptyText="Load failed: "+t.responseText:e.emptyText="HTTP Server Error: "+t.statusText,e.refresh()}}}),v=new Ext.menu.Menu({id:"groupChecklistMenu"+g,items:[{text:"Displayed title",hideOnClick:!1,menu:{items:[{id:"groupFileMenu-title-groupItem"+g,text:"Group ID and title",checked:!1,group:"titleType"+g,handler:function(t,e){var i=w.getColumnModel(),s=i.findColumnIndex("groupTitle"),n=i.findColumnIndex("ruleTitle"),r=i.findColumnIndex("groupId"),o=i.findColumnIndex("ruleId"),a=i.getColumnWidth(n),l=i.getColumnWidth(o);i.setColumnWidth(s,a),i.setColumnWidth(r,l),w.titleColumnDataIndex="groupTitle",T(),i.setHidden(n,!0),i.setHidden(o,!0),i.setHidden(s,!1),i.setHidden(r,!1),w.autoExpandColumn="groupTitle"+g}},{id:"groupFileMenu-title-ruleItem"+g,text:"Rule ID and title",checked:!0,group:"titleType"+g,handler:function(t,e){var i=w.getColumnModel(),s=i.findColumnIndex("groupTitle"),n=i.findColumnIndex("ruleTitle"),r=i.findColumnIndex("groupId"),o=i.findColumnIndex("ruleId"),a=i.getColumnWidth(s),l=i.getColumnWidth(r);i.setColumnWidth(n,a),i.setColumnWidth(o,l),w.titleColumnDataIndex="ruleTitle",T(),i.setHidden(s,!0),i.setHidden(r,!0),i.setHidden(n,!1),i.setHidden(o,!1),w.autoExpandColumn="ruleTitle"+g}}]}},{text:"Export Results",disabled:!1,iconCls:"sm-export-icon",hideOnClick:!1,menu:{items:[{text:"CKL (Zip archive)",iconCls:"sm-export-icon",tooltip:"Download an archive with a checklist in DISA STIG Viewer format for each asset in the collection",handler:async function(){try{const o=new JSZip;initProgress("Exporting checklists","Initializing...");let e=0;var i=h.length;for(const a of h){updateProgress(e/i,"Fetching CKL for "+a.name),updateStatusText(`Fetching checklist for ${a.name}: `,!0),await window.oidcProvider.updateToken(10);var s=`${STIGMAN.Env.apiBase}/assets/${a.assetId}/checklists/${u.benchmarkId}/${w.sm_revisionStr}?format=ckl`;let t=await fetch(s,{method:"GET",headers:new Headers({Authorization:"Bearer "+window.oidcProvider.token})});const l=t.headers.get("content-disposition");var n=l.match(/filename\*?=['"]?(?:UTF-\d['"]*)?([^;\r\n"']*)['"]?;?/)[1];console.log(n);var r=await t.blob();updateStatusText("Fetched "+n),e++,o.file(n,r)}updateProgress(1,"Generating Zip archive..."),updateStatusText("Generating Zip archive...");var t=await o.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}},t=>{updateProgress(t.percent/100,"Compressing "+t.currentFile)});updateProgress(1,"Done"),updateStatusText("Done"),saveAs(t,`${d.name}-${u.benchmarkId}.zip`)}catch(t){alert(t.message+`
`+t.stack)}}}]}},"-"]});var y=function(t){var e=h.length,i=t.getCount(),s=0,n=0;t.data.each(function(t,e,i){switch(t.data.autoCheckAvailable){case!1:s++;break;case!0:n++}});t=" checks";return e+(1==e?" asset":" assets")+" assigned "+i+(t=1==i?" check":t)+" ("+s+" Manual, "+n+" SCAP)"},b=new Ext.ux.ExportButton({hasMenu:!1,exportType:"grid",gridBasename:""+u.benchmarkId,iconCls:"sm-export-icon",text:"CSV"}),w=new Ext.grid.GridPanel({cls:"sm-round-panel",margins:{top:SM.Margin.top,right:SM.Margin.adjacent,bottom:SM.Margin.adjacent,left:SM.Margin.edge},border:!1,region:"north",sm_benchmarkId:u.benchmarkId,sm_revisionStr:"latest",filterState:"All",title:"Checklist",split:!0,titleColumnDataIndex:"ruleTitle",store:E,stripeRows:!0,listeners:{afterrender:{fn:function(t){}}},sm:new Ext.grid.RowSelectionModel({singleSelect:!0,listeners:{rowselect:{fn:function(t,e,i){var s,n,r;s=i,n=u,r=w.sm_benchmarkId,i=w.sm_revisionStr,async function(e,i,s,n){try{let t=Ext.getCmp("content-panel"+g);var r=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+`/stigs/${e}/revisions/${i}/rules/`+s,method:"GET",params:{projection:["detail","ccis","checks","fixes"]}}),o=JSON.parse(r.response.responseText);t.update(o),t.setTitle("Rule for Group "+SM.he(n))}catch(t){alert(t.message)}}(r,i,s.data.ruleId,s.data.groupId),async function(i,s){try{let t=Ext.getCmp("reviewsGrid"+g);var n=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+`/collections/${i}/reviews`,method:"GET",params:{rules:"all",ruleId:s.data.ruleId}}),r=JSON.parse(n.response.responseText);let e={};for(const a of r)e[a.assetId]=a;var o=c.map(t=>e[t.assetId]?{...t,...e[t.assetId]}:{...t,ruleId:s.data.ruleId});t.getStore().loadData(o),t.setTitle("Reviews of "+SM.he(s.data.ruleId)),t.currentChecklistRecord=s,q.gridBasename=u.benchmarkId+"-"+s.data.ruleId}catch(t){alert(t.message)}}(n.collectionId,s),A.getSelectionModel().clearSelections()}}}}),view:new SM.ColumnFilters.GridView({forceFit:!1,emptyText:"",holdPosition:!0,lastHide:new Date,deferEmptyText:!1,listeners:{filterschanged:function(t,e,i){E.filter(t.getFilterFns())}},getRowClass:function(t,e){if(!0===t.get("autoCheckAvailable"))return"sm-scap-grid-item"}}),columns:[{id:"cat"+g,header:"CAT",width:48,align:"left",dataIndex:"severity",fixed:!0,sortable:!0,renderer:renderSeverity,filter:{type:"values",comparer:SM.ColumnFilters.CompareFns.severity,renderer:SM.ColumnFilters.Renderers.severity}},{id:"groupId"+g,header:"Group",width:95,dataIndex:"groupId",sortable:!0,hidden:!0,hideable:!1,align:"left",filter:{type:"string"}},{id:"ruleId"+g,header:"Rule Id",width:95,dataIndex:"ruleId",sortable:!0,hideable:!1,align:"left",filter:{type:"string"}},{id:"groupTitle"+g,header:"Group Title",width:80,dataIndex:"groupTitle",renderer:columnWrap,hidden:!0,hideable:!1,sortable:!0,filter:{type:"string"}},{id:"ruleTitle"+g,header:"Rule Title",width:80,dataIndex:"ruleTitle",renderer:columnWrap,hideable:!1,sortable:!0,filter:{type:"string"}},{id:"oCnt"+g,header:'<div style="color:red;font-weight:bolder;" exportvalue="O">O</div>',width:32,align:"center",dataIndex:"oCnt",renderer:renderOpen,fixed:!0,sortable:!0},{id:"nfCnt"+g,header:'<div style="color:green;font-weight:bolder;" exportvalue="NF">NF</div>',width:32,align:"center",renderer:renderCounts,dataIndex:"nfCnt",fixed:!0,sortable:!0},{id:"naCnt"+g,header:'<div style="color:grey;font-weight:bolder;" exportvalue="NA">NA</div>',width:32,align:"center",renderer:renderCounts,dataIndex:"naCnt",fixed:!0,sortable:!0},{id:"nrCnt"+g,header:"NR",width:32,align:"center",renderer:renderOpen,dataIndex:"nrCnt",fixed:!0,sortable:!0},{id:"readyCnt"+g,header:'<img src=img/ready-16.png width=12 height=12 exportvalue="Submitted">',width:32,align:"center",dataIndex:"readyCnt",fixed:!0,renderer:renderStatusCounts,sortable:!0},{id:"rejectCnt"+g,header:'<img src=img/rejected-16.png width=12 height=12 exportvalue="Rejected">',width:32,align:"center",dataIndex:"rejectCnt",fixed:!0,renderer:renderStatusCounts,sortable:!0},{id:"approveCnt"+g,header:'<img src=img/star.svg width=12 height=12 exportvalue="Approved">',width:32,align:"center",dataIndex:"approveCnt",fixed:!0,renderer:renderStatusCounts,sortable:!0}],autoExpandColumn:"ruleTitle"+g,height:"50%",loadMask:!0,tbar:new Ext.Toolbar({items:[{xtype:"tbbutton",iconCls:"sm-checklist-icon",text:"Checklist",menu:v},"->",{xtype:"tbitem",html:'<div class="sm-toolbar-legend-box sm-scap-grid-item"></div>'},{xtype:"tbtext",text:" SCAP available",style:"margin-right: 15px;"}]}),bbar:new Ext.Toolbar({items:[{xtype:"tbbutton",iconCls:"icon-refresh",tooltip:"Reload this grid",width:20,handler:function(t){w.getStore().reload(),Ext.getCmp("content-panel"+g).update(""),A.getStore().removeAll(!0),A.getView().refresh()}},{xtype:"tbseparator"},b,{xtype:"tbseparator"},{xtype:"tbtext",id:"groupGrid-totalText"+g,text:"",width:80}]})}),C=function(t,e){let i=w.getStore();i.proxy.setUrl(`${STIGMAN.Env.apiBase}/collections/${u.collectionId}/checklists/${u.benchmarkId}/`+t.revisionStr,!0),i.load(),S(u.benchmarkId,t.revisionStr,g),w.sm_revisionStr=t.revisionStr};async function S(t,e,i){try{var s=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+`/stigs/${t}/revisions`,method:"GET"}),n=JSON.parse(s.response.responseText),r=o(n,e,i);void 0===Ext.getCmp("revision-menuItem"+i)&&Ext.getCmp("groupChecklistMenu"+i).addItem(r.menu),w.setTitle(SM.he(r.activeRevisionLabel))}catch(t){alert(t.message)}}let o=function(i,s,n){let r={};for(var o={id:"revision-menuItem"+n,text:"Revisions",hideOnClick:!1,menu:{items:[]}},a=0;a<i.length;a++){var l=i[a];let t=new Date(l.benchmarkDate),e={id:`revision-submenu${l.benchmarkId}-${l.version}-`+l.release+n,text:SM.he(`Version ${l.version} Release ${l.release} (${t.format("j M Y")})`),revisionStr:l.revisionStr,group:"revision-submenu-group"+n,handler:C};e.revisionStr==s||"latest"===s&&0===a?(e.checked=!0,r.activeRevisionLabel=e.text):e.checked=!1,o.menu.items.push(e)}return r.menu=o,r};function T(){E.filter(w.getView().getFilterFns())}var I=Ext.data.Record.create([{name:"assetId",type:"string"},,{name:"assetName",type:"string"},{name:"ruleId",type:"string"},{name:"result",type:"string"},{name:"detail",type:"string"},{name:"comment",type:"string"},,{name:"autoResult",type:"boolean"},{name:"userId",type:"string"},{name:"username",type:"string"},{name:"ts",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"status",type:"string",mapping:"status?.label"}]),k=new Ext.data.JsonStore({storeId:"reviewsStore"+g,sortInfo:{field:"assetName",direction:"ASC"},root:"",fields:I,listeners:{save:function(t,e,i){Ext.getCmp("reviewsGrid"+g);P(),Ext.getBody().unmask()}},idProperty:"assetId"}),M=(new Ext.ux.grid.RowEditor({saveText:"Update",height:200,listeners:{beforeedit:function(t,e){}}}),new Ext.grid.ColumnModel({columns:[{id:"status"+g,header:"Status",width:50,fixed:!0,dataIndex:"status",sortable:!0,renderer:renderStatuses,filter:{type:"values",renderer:SM.ColumnFilters.Renderers.status}},{id:"target"+g,header:"Asset",width:50,dataIndex:"assetName",sortable:!0,align:"left",filter:{type:"string"}},{id:"Result"+g,header:'<span exportvalue="Result">Result<i class= "fa fa-question-circle sm-question-circle"></i></span>',width:70,fixed:!0,dataIndex:"result",editor:new Ext.form.ComboBox({id:"reviewsGrid-editor-resultCombo"+g,mode:"local",forceSelection:!0,autoSelect:!0,editable:!1,store:new Ext.data.SimpleStore({fields:["result","resultStr"],data:[["pass","NF"],["notapplicable","NA"],["fail","O"]]}),valueField:"result",displayField:"resultStr",monitorValid:!1,listeners:{select:function(t,e,i){t.startValue!==t.value?t.fireEvent("blur"):console.log("No Change")}},triggerAction:"all"}),renderer:function(t){let e;switch(t){case"informational":e='<div style="color:red;font-weight:bolder;text-align:center">I</div>';break;case"fail":e='<div style="color:red;font-weight:bolder;text-align:center">O</div>';break;case"pass":e='<div style="color:green;font-weight:bolder;text-align:center">NF</div>';break;case"notapplicable":e='<div style="color:grey;font-weight:bolder;text-align:center">NA</div>'}return SM.styledEmptyRenderer(e)},sortable:!0,filter:{type:"values",renderer:SM.ColumnFilters.Renderers.result}},{id:"Detail"+g,header:'<span exportvalue="Detail">Detail<i class= "fa fa-question-circle sm-question-circle"></i></span>',width:100,dataIndex:"detail",renderer:function(t){return columnWrap(SM.styledEmptyRenderer(t))},sortable:!0,filter:{type:"string"},editor:new Ext.form.TextArea({id:"reviewsGrid-editor-detail"+g,grow:!0,listeners:{focus:function(t){A.getEl().set({onselectstart:"return true;"})},blur:function(t){A.getEl().set({onselectstart:"return false;"})}}})},{id:"Comment"+g,header:'<span exportvalue="Comment">Comment<i class= "fa fa-question-circle sm-question-circle"></i></span>',width:100,dataIndex:"comment",renderer:function(t){return columnWrap(SM.styledEmptyRenderer(t))},filter:{type:"string"},editor:new Ext.form.TextArea({id:"reviewsGrid-editor-comment"+g,grow:!0,listeners:{focus:function(t){A.getEl().set({onselectstart:"return true;"})},blur:function(t){A.getEl().set({onselectstart:"return false;"})}}}),sortable:!0},{id:"userName"+g,header:"User",width:100,dataIndex:"username",fixed:50,sortable:!0,filter:{type:"values"}}],isCellEditable:function(t,e){var i=k.getAt(e);if(!i.data.result&&"result"!==this.getDataIndex(t))return!1;switch(this.getDataIndex(t)){case"result":return!0;case"detail":if("always"===r.detailEnabled)return!0;if("findings"===r.detailEnabled)return"fail"===i.data.result;case"comment":if("always"===r.commentEnabled)return!0;if("findings"===r.commentEnabled)return"fail"===i.data.result}return Ext.grid.ColumnModel.prototype.isCellEditable.call(this,t,e)}}));function D(){var t=u.collectionGrant>=s.minGrant,e=s.canAccept;return t&&e}const q=new Ext.ux.ExportButton({hasMenu:!1,exportType:"grid",gridBasename:u.benchmarkId+"-Rule",iconCls:"sm-export-icon",text:"CSV"});var A=new Ext.grid.EditorGridPanel({cls:"sm-round-panel",margins:{top:SM.Margin.top,right:SM.Margin.edge,bottom:SM.Margin.adjacent,left:SM.Margin.adjacent},border:!1,region:"center",layout:"fit",id:"reviewsGrid"+g,title:"Reviews",store:k,stripeRows:!0,colModel:M,updateGroupStore:function(t){var e=t.getStore().getRange();let i=t.currentChecklistRecord,s={oCnt:0,nfCnt:0,naCnt:0,nrCnt:0,approveCnt:0,rejectCnt:0,readyCnt:0};for(const n of e){switch(n.data.result){case"pass":s.nfCnt++;break;case"fail":s.oCnt++;break;case"notapplicable":s.naCnt++;break;default:s.nrCnt++}switch(n.data.status){case"submitted":s.readyCnt++;break;case"accepted":s.approveCnt++;break;case"rejected":s.rejectCnt++}}for(const r of Object.keys(s))i.data[r]=s[r];i.commit()},sm:new Ext.grid.RowSelectionModel({singleSelect:!1,id:"reviewsSm"+g,listeners:{rowselect:function(t,e,i){1==t.getCount()?(_.grid.enable(),B(i)):(_.store.removeAll(),_.grid.disable(),G()),P()},rowdeselect:function(t,e,i){1==t.getCount()?(selectedRecord=t.getSelected(),_.grid.enable(),B(selectedRecord)):(_.store.removeAll(),_.grid.disable(),G()),P()}}}),listeners:{afterrender:function(t){t.getEl().set({onselectstart:"return false;"})},afteredit:async function(i){try{let t={},e;e=i.record.data.status?(t[i.field]=i.value,i.record.data.autoResult&&i.originalValue!==i.value&&(t.autoResult=!1),await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${u.collectionId}/reviews/${i.record.data.assetId}/`+i.record.data.ruleId,method:"PATCH",jsonData:t})):(t={result:i.record.data.result,detail:null,comment:null,autoResult:!1,status:"saved"},await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${u.collectionId}/reviews/${i.record.data.assetId}/`+i.record.data.ruleId,method:"PUT",jsonData:t}));var s=JSON.parse(e.response.responseText),n=i.grid.store.reader.recordType.prototype.fields,r=n.items,o=n.length,a=i.grid.store.reader.extractValues(s,r,o);i.record.data=a,i.record.commit(),i.grid.getSelectionModel().onRefresh(),B(i.grid.getStore().getById(s.assetId)),P(),i.grid.updateGroupStore(i.grid)}catch(i){alert(i.message)}}},view:new SM.ColumnFilters.GridView({forceFit:!0,holdPosition:!0,autoFill:!0,emptyText:"No data to display.",deferEmptyText:!1,listeners:{filterschanged:function(t,e,i){k.filter(t.getFilterFns())},refresh:function(e){const i=e.grid.getColumnModel().columns;for(let t=0;t<i.length;t++){var s,n=e.getHeaderCell(t).getElementsByClassName("fa")[0];n&&(s=i[t].id.split("-")[0],new Ext.ToolTip({target:n,showDelay:0,dismissDelay:0,autoWidth:!0,tpl:SM[s+"TipTpl"],data:r}))}}}}),tbar:new Ext.Toolbar({items:[{xtype:"tbbutton",disabled:!0,iconCls:"sm-star-icon-16",id:"reviewsGrid-approveButton"+g,text:"Accept",hidden:!D(),handler:function(t){var e=A.getSelectionModel();O(A,e,"accepted")}},{xtype:"tbseparator",hidden:!D()},{xtype:"tbbutton",disabled:!0,icon:"img/ready-16.png",id:"reviewsGrid-submitButton"+g,text:"Submit",handler:function(t){var e=A.getSelectionModel();O(A,e,"submitted")}},{xtype:"tbseparator"},{xtype:"tbbutton",disabled:!0,icon:"img/disk-16.png",id:"reviewsGrid-unsubmitButton"+g,text:"Unsubmit",handler:function(t){var e=A.getSelectionModel();O(A,e,"saved")}}]}),bbar:new Ext.Toolbar({items:[q,"->",new SM.RowCountTextItem({store:k})]}),loadMask:!0,emptyText:"No data to display"});function R(t,e){t===d.collectionId&&(r=e,P())}function N(t,e){t===d.collectionId&&(apStatusSettings=e,P())}function F(t,e,i){return t&&(("always"!==r.detailRequired||e)&&(("findings"!==r.detailRequired||"fail"!==t||e)&&(("always"!==r.commentRequired||i)&&!("findings"===r.commentRequired&&"fail"===t&&!i))))}function P(){const t=A.getSelectionModel(),e=Ext.getCmp("reviewsGrid-approveButton"+g),s=Ext.getCmp("reviewsGrid-submitButton"+g),n=Ext.getCmp("reviewsGrid-unsubmitButton"+g),r=Ext.getCmp("feedback-panel"+g),o=Ext.getCmp("resources-tab-panel"+g);var a=t.getSelections(),l=a.length;let d=!0,h=!0,c=!0,u=!0;if(0===l)d=!1,h=!1,c=!1,u=!1;else if(1===l){var f=a[0];if(f.data.status)switch(f.data.status){case"saved":approveBtnDisabled=!0,u=(c=(h=F(f.data.result,f.data.detail,f.data.comment)?!(d=!1):d=!1,!1),!1);break;case"submitted":d=!0,h=!1,c=!0,u=!0;break;case"rejected":d=!0,h=!0,c=!0,u=!0;break;case"accepted":d=!1,h=!1,c=!0,u=!1}else d=!1,h=!1,c=!1,u=!1}else{const m={unsaved:0,savedComplete:0,saved:0,submitted:0,rejected:0,accepted:0};for(i=0;i<a.length;i++){if(!a[i].data.status){m.unsaved++;break}var p=a[i].data.status;"saved"===p?F(a[i].data.result,a[i].data.detail,a[i].data.comment)?m.savedComplete++:m.saved++:m[p]++}d=(m.submitted||m.rejected)&&!m.unsaved&&!m.saved&&!m.savedComplete&&m.accepted!==l,h=(m.savedComplete||m.submitted||m.accepted||m.rejected)&&!m.unsaved&&!m.saved&&m.submitted!==l,c=(m.submitted||m.accepted||m.rejected)&&!m.unsaved&&!m.saved,u=m.submitted&&!m.unsaved&&!m.saved&&!m.savedComplete&&!m.accepted&&!m.rejected}e.setDisabled(!d),s.setDisabled(!h),n.setDisabled(!c),r.setDisabled(!u);l=o.getActiveTab();u||"reject"!==l.itemId||o.setActiveTab("history")}async function O(i,s,n){try{const a=s.getSelections(),l=[];let t,e;for(t=0,e=a.length;t<e;t++){var r=a[t];Ext.getBody().mask(`Updating ${t+1}/${e} Reviews`);try{var o=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${u.collectionId}/reviews/${r.data.assetId}/`+r.data.ruleId,method:"PATCH",jsonData:{status:n}});l.push({success:!0,result:o})}catch(t){l.push({success:!1,result:t})}}for(t=0,e=a.length;t<e;t++)l[t].success&&(a[t].data.status=n,a[t].commit());1===a.length&&B(a[0]),i.updateGroupStore(i),P()}catch(t){alert(t.message)}finally{Ext.getBody().unmask()}}A.on("beforeedit",function(t){"result"==t.field&&(t.grid.getColumnModel().getCellEditor(t.column,t.row).gridRecord=t.record)},this),SM.Dispatcher.addListener("statussettingschanged",N),SM.Dispatcher.addListener("fieldsettingschanged",R);var L=SM.RuleContentTpl;async function B(t){let e;try{e=Ext.getCmp("resources-tab-panel"+g).getActiveTab();const n=Ext.getCmp("attachmentsGrid"+g);n.assetId=t.data.assetId,n.ruleId=t.data.ruleId;var i=await Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${u.collectionId}/reviews/${t.data.assetId}/`+t.data.ruleId,method:"GET",params:{projection:["history","metadata"]}});if(200===i.response.status){let t=JSON.parse(i.response.responseText);var s={comment:t.comment,autoResult:t.autoResult,rejectText:t.rejectText,result:t.result,detail:t.detail,status:t.status,ts:t.ts,touchTs:t.touchTs,userId:t.userId,username:t.username};t.history.push(s),Ext.getCmp("historyGrid"+g).getStore().loadData(t.history);const r=Ext.getCmp("rejectFormPanel"+g);r.getForm().setValues(t),G(),n.loadArtifacts()}}catch(t){alert(t.message)}finally{e.getEl().unmask()}}var _=new Sm_HistoryData(g),H=new SM.Attachments.Grid({id:"attachmentsGrid"+g,title:"Attachments",collectionId:u.collectionId}),z=new Ext.Panel({layout:"fit",id:"rejectOtherPanel"+g,title:"Rejected review feedback",bodyCssClass:"sm-background-blue",padding:"5",flex:50,items:[{xtype:"textarea",id:"rejectTextArea"+g,enableKeyEvents:!0,emptyText:"Provide feedback explaining this rejection.",name:"rejectText",listeners:{keyup:G}}]}),V=new Ext.form.FormPanel({baseCls:"x-plain",id:"rejectFormPanel"+g,cls:"sm-background-blue",labelWidth:95,monitorValid:!1,items:[{layout:"hbox",anchor:"100% -1",padding:"10",baseCls:"x-plain",border:!1,layoutConfig:{align:"stretch"},items:[z]}],buttons:[{text:"Reject review with this feedback",disabled:!0,id:"rejectSubmitButton"+g,iconCls:"sm-rejected-icon",reviewsGrid:A,hidden:!D(),handler:async function(){try{Ext.getBody().mask("Rejecting");var t=V.getForm().getFieldValues();const s=A.getSelectionModel().getSelections(),n=[];for(const r of s)n.push(Ext.Ajax.requestPromise({url:`${STIGMAN.Env.apiBase}/collections/${u.collectionId}/reviews/${r.data.assetId}/`+r.data.ruleId,method:"PATCH",jsonData:{status:{label:"rejected",text:t.rejectText}}}));var e=await Promise.allSettled(n);for(i=0,l=s.length;i<l;i++)"fulfilled"===e[i].status&&(s[i].data.status="rejected",s[i].commit());A.updateGroupStore(A),P(),Ext.getBody().unmask()}catch(t){alert(t.message)}}}]});function G(){var t=Ext.getCmp("rejectSubmitButton"+g),e=Ext.getCmp("rejectTextArea"+g),i=A.getSelectionModel().getCount();1<i?t.setText("Reject "+i+" reviews with this feedback"):t.setText("Reject review with this feedback"),e.getValue()?t.enable():t.disable()}var W=[{region:"west",layout:"border",width:"40%",minWidth:330,border:!1,split:!0,collapsible:!1,id:"west-panel"+g,items:[w,{region:"center",xtype:"panel",cls:"sm-round-panel",margins:{top:SM.Margin.adjacent,right:SM.Margin.adjacent,bottom:SM.Margin.bottom,left:SM.Margin.edge},border:!1,split:!0,collapsible:!1,padding:20,autoScroll:!0,id:"content-panel"+g,title:"Rule",tpl:L}]},{region:"center",layout:"border",border:!1,split:!0,collapsible:!1,id:"center-panel"+g,items:[A,{region:"south",xtype:"tabpanel",cls:"sm-round-panel",style:{"background-color":"#eeeeee"},margins:{top:SM.Margin.adjacent,right:SM.Margin.edge,bottom:SM.Margin.bottom,left:SM.Margin.adjacent},border:!0,id:"resources-tab-panel"+g,height:"33%",split:!0,collapsible:!1,activeTab:"history",items:[{title:"History",itemId:"history",layout:"fit",id:"history-tab"+g,items:_.grid},{title:"Attachments",id:"attachment-panel"+g,layout:"fit",items:H},{title:"Reject",itemId:"reject",iconCls:"sm-rejected-icon",disabled:!0,id:"feedback-panel"+g,layout:"fit",items:V}]}]}];let t=new Ext.Panel({id:"collection-review-tab"+g,iconCls:"sm-collection-tab-icon",title:"",collectionId:u.collectionId,benchmarkId:u.benchmarkId,collectionName:d.name,stigName:u.benchmarkId,closable:!0,layout:"border",border:!1,items:W,sm_TabType:"asset_review",sm_tabMode:"ephemeral",sm_treePath:p,listeners:{beforedestroy:()=>{SM.Dispatcher.removeListener("fieldsettingschanged",R),SM.Dispatcher.removeListener("statussettingschanged",N)}}});t.updateTitle=function(){t.setTitle(("ephemeral"===this.sm_tabMode?"<i>":"")+SM.he(this.collectionName)+" / "+SM.he(this.stigName)+("ephemeral"===this.sm_tabMode?"</i>":""))},t.makePermanent=function(){t.sm_tabMode="permanent",t.updateTitle.call(t)};let e=Ext.getCmp("main-tab-panel");var j,U=e.items.findIndex("sm_tabMode","ephemeral");let n;n=-1!==U?(j=e.items.itemAt(U),e.remove(j),e.insert(U,t)):e.add(t),n.updateTitle.call(n),n.show(),w.getStore().load({preselect:{ruleId:a,assetId:f}}),S(u.benchmarkId,"latest",g)}catch(t){alert(t.message)}}function renderOpen(t,e,i,s,n,r){var o=t;return 0<t?e.css="sm-cell-red":(o="-",e.css="sm-cell-green"),o}function renderCounts(t,e,i,s,n,r){t=0==t?"-":t;return e.css="sm-cell-grey",t}function renderStatusCounts(t,e,i,s,n,r){t=0==t?"-":t;return e.css="sm-cell-status",t}Ext.ux.ExportButton=Ext.extend(Ext.Button,{constructor:function(t){1==t.hasMenu&&Ext.applyIf(t,{menu:new Ext.menu.Menu({items:[{text:"Grid data (.csv)",iconCls:"sm-table-icon",exportType:"grid",exportFormat:"csv",href:"#"},{text:"Store data (.csv)",iconCls:"sm-database-icon",exportType:"store",exportFormat:"csv",href:"#"}]})}),this.gridBasename=t.gridBasename||"grid_export",this.gridSource=t.grid||void 0,this.storeBasename=t.storeBasename||"store_export",this.storeSource=t.store||void 0,this.exportType=t.exportType||"grid",this.exportFormat=t.exportFormat||"csv",Ext.ux.ExportButton.superclass.constructor.call(this,t),this.menu?(this.menu.addListener("itemclick",this.menuItemClick,this),this.menu.addListener("beforeshow",this.menuBeforeShow,this)):this.addListener("click",this.buttonClick,this)},onRender:function(t,e){null==this.gridSource&&(this.gridSource=this.findParentByType("grid")),null==this.storeSource&&null!=this.gridSource&&(this.storeSource=this.gridSource.store),Ext.ux.ExportButton.superclass.onRender.call(this,t,e)},buttonClick:function(e,t){let i="\ufeff",s="";"csv"==e.exportFormat&&("grid"==e.exportType?(i+=this.gridToCsv(this.gridSource),s=this.gridBasename+".csv"):"store"==e.exportType&&(i+=this.storeToCsv(this.storeSource),s=this.storeBasename+".csv"));e=new Blob([i],{type:"text/csv;charset=utf-8"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(e,s);else{let t=window.document.createElement("a");t.style.display="none",t.href=window.URL.createObjectURL(e),t.download=s,document.body.appendChild(t),t.click(),document.body.removeChild(t)}},menuBeforeShow:function(t){t.items.each(function(t){switch(t.exportType){case"grid":t.setDisabled(null==this.gridSource);break;case"store":t.setDisabled(null==this.storeSource)}},this)},menuItemClick:function(t){let e="\ufeff",i="";var s;"csv"==t.exportFormat&&("grid"==t.exportType?(e+=this.gridToCsv(this.gridSource),i=this.gridBasename+".csv"):"store"==t.exportType&&(e+=this.storeToCsv(this.storeSource),i=this.storeBasename+".csv")),window.navigator.msSaveOrOpenBlob?(s=new Blob([e],{type:"text/csv;charset=utf-8"}),navigator.msSaveOrOpenBlob(s,i)):(t.el.dom.setAttribute("download",i),s=encodeURI("data:text/csv;charset=utf-8,"+e),t.el.dom.setAttribute("href",s),t.el.dom.setAttribute("target","_self"))},gridToCsv:function(t){let e="",n=t.getView(),i=t.store;var s=t.getColumnModel().getColumnsBy(function(t){return!0});let r=["Marking"],o=[];for(let i=0;i<s.length;i++){var a=s[i];if(""!=a.dataIndex&&""!=a.header&&!a.hidden){let t=document.createElement("html");t.innerHTML=a.header;let e=t.querySelector("[exportvalue]");null!=e?r.push('"'+e.getAttribute("exportvalue")+'"'):r.push('"'+a.header+'"'),o.push(i)}}e+=r.join(",")+"\n";var l,d=i.getCount();for(let t=0;t<d;t++){let i=n.getRow(t).getElementsByTagName("tr")[0].cells,s=[`(${appConfig.classification})`];for(let e=0;e<o.length;e++){let t=i[o[e]].querySelector("[exportvalue]");null!=t?s.push('"'+t.getAttribute("exportvalue")+'"'):(l='"'+i[o[e]].firstChild.textContent.replace(/"/g,'""')+'"',s.push(l))}e+=s.join(",")+"\n"}return e},storeToCsv:function(t){let e="",i=[],r=[];return t.fields.each(function(t){i.push('"'+t.name+'"'),r.push(t.name)}),e+=i.join(",")+"\n",t.each(function(i){let s=[];for(let e=0;e<r.length;e++){var n=r[e];let t="";switch(Object.prototype.toString.call(i.data[n])){case"[object String]":t='"'+i.data[n]+'"';break;case"[object Number]":t=i.data[n];break;case"[object Date]":t=i.data[n].format("Y-m-d H:i:s");break;default:t=i.data[n]}s.push(t)}e+=s.join(",")+"\n"}),e}}),Ext.reg("exportbutton",Ext.ux.ExportButton),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).JSZip=t()}(function(){return function s(n,r,o){function a(e,t){if(!r[e]){if(!n[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(l)return l(e,!0);i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}i=r[e]={exports:{}};n[e][0].call(i.exports,function(t){return a(n[e][1][t]||t)},i,i.exports,s,n,r,o)}return r[e].exports}for(var l="function"==typeof require&&require,t=0;t<o.length;t++)a(o[t]);return a}({1:[function(t,e,i){var c=t("./utils"),h=t("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(t){for(var e,i,s,n,r,o,a=[],l=0,d=t.length,h="string"!==c.getTypeOf(t);l<t.length;)o=d-l,r=h?(e=t[l++],i=l<d?t[l++]:0,l<d?t[l++]:0):(e=t.charCodeAt(l++),i=l<d?t.charCodeAt(l++):0,l<d?t.charCodeAt(l++):0),s=(3&e)<<4|i>>4,n=1<o?(15&i)<<2|r>>6:64,r=2<o?63&r:64,a.push(u.charAt(e>>2)+u.charAt(s)+u.charAt(n)+u.charAt(r));return a.join("")},i.decode=function(t){var e,i,s,n,r,o=0,a=0;if("data:"===t.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var l,d=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===u.charAt(64)&&d--,t.charAt(t.length-2)===u.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=new(h.uint8array?Uint8Array:Array)(0|d);o<t.length;)e=u.indexOf(t.charAt(o++))<<2|(s=u.indexOf(t.charAt(o++)))>>4,i=(15&s)<<4|(n=u.indexOf(t.charAt(o++)))>>2,s=(3&n)<<6|(r=u.indexOf(t.charAt(o++))),l[a++]=e,64!==n&&(l[a++]=i),64!==r&&(l[a++]=s);return l}},{"./support":30,"./utils":32}],2:[function(t,e,i){var s=t("./external"),n=t("./stream/DataWorker"),r=t("./stream/DataLengthProbe"),o=t("./stream/Crc32Probe");function a(t,e,i,s,n){this.compressedSize=t,this.uncompressedSize=e,this.crc32=i,this.compression=s,this.compressedContent=n}r=t("./stream/DataLengthProbe"),a.prototype={getContentWorker:function(){var t=new n(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new r("data_length")),e=this;return t.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),t},getCompressedWorker:function(){return new n(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,e,i){return t.pipe(new o).pipe(new r("uncompressedSize")).pipe(e.compressWorker(i)).pipe(new r("compressedSize")).withStreamInfo("compression",e)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,i){var s=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(t){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,i){var s=t("./utils"),o=function(){for(var t=[],e=0;e<256;e++){for(var i=e,s=0;s<8;s++)i=1&i?3988292384^i>>>1:i>>>1;t[e]=i}return t}();e.exports=function(t,e){return void 0!==t&&t.length?("string"!==s.getTypeOf(t)?function(t,e,i){var s=o,n=0+i;t^=-1;for(var r=0;r<n;r++)t=t>>>8^s[255&(t^e[r])];return-1^t}:function(t,e,i){var s=o,n=0+i;t^=-1;for(var r=0;r<n;r++)t=t>>>8^s[255&(t^e.charCodeAt(r))];return-1^t})(0|e,t,t.length):0}},{"./utils":32}],5:[function(t,e,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,e,i){t="undefined"!=typeof Promise?Promise:t("lie");e.exports={Promise:t}},{lie:37}],7:[function(t,e,i){var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=t("pako"),r=t("./utils"),o=t("./stream/GenericWorker"),a=s?"uint8array":"array";function l(t,e){o.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}i.magic="\b\0",r.inherits(l,o),l.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(r.transformTo(a,t.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},i.compressWorker=function(t){return new l("Deflate",t)},i.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,i){function v(t,e){for(var i="",s=0;s<e;s++)i+=String.fromCharCode(255&t),t>>>=8;return i}function s(t,e,i,s,n,r){var o=t.file,a=t.compression,l=r!==b.utf8encode,d=y.transformTo("string",r(o.name)),h=y.transformTo("string",b.utf8encode(o.name)),c=o.comment,u=y.transformTo("string",r(c)),f=y.transformTo("string",b.utf8encode(c)),p=h.length!==o.name.length,m=f.length!==c.length,g="",x=o.dir,r=o.date,c={crc32:0,compressedSize:0,uncompressedSize:0};e&&!i||(c.crc32=t.crc32,c.compressedSize=t.compressedSize,c.uncompressedSize=t.uncompressedSize);t=0;e&&(t|=8),l||!p&&!m||(t|=2048);e=0,l=0;x&&(e|=16),"UNIX"===n?(l=798,e|=(65535&((n=o.unixPermissions)?n:x?16893:33204))<<16):(l=20,e|=63&(o.dosPermissions||0)),x=r.getUTCHours(),x<<=6,x|=r.getUTCMinutes(),x<<=5,x|=r.getUTCSeconds()/2,o=r.getUTCFullYear()-1980,o<<=4,o|=r.getUTCMonth()+1,o<<=5,o|=r.getUTCDate(),p&&(h=v(1,1)+v(w(d),4)+h,g+="up"+v(h.length,2)+h),m&&(E=v(1,1)+v(w(u),4)+f,g+="uc"+v(E.length,2)+E);var E="";return E+="\n\0",E+=v(t,2),E+=a.magic,E+=v(x,2),E+=v(o,2),E+=v(c.crc32,4),E+=v(c.compressedSize,4),E+=v(c.uncompressedSize,4),E+=v(d.length,2),E+=v(g.length,2),{fileRecord:C.LOCAL_FILE_HEADER+E+d+g,dirRecord:C.CENTRAL_FILE_HEADER+v(l,2)+E+v(u.length,2)+"\0\0\0\0"+v(e,4)+v(s,4)+d+g+u}}var y=t("../utils"),n=t("../stream/GenericWorker"),b=t("../utf8"),w=t("../crc32"),C=t("../signature");function r(t,e,i,s){n.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=i,this.encodeFileName=s,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}y.inherits(r,n),r.prototype.push=function(t){var e=t.meta.percent||0,i=this.entriesCount,s=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,n.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:i?(e+100*(i-s-1))/i:100}}))},r.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;e?(e=s(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName),this.push({data:e.fileRecord,meta:{percent:0}})):this.accumulate=!0},r.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,i=s(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),e)this.push({data:(t=t,C.DATA_DESCRIPTOR+v(t.crc32,4)+v(t.compressedSize,4)+v(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},r.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var i=this.bytesWritten-t,t=function(t,e,i,s,n){s=y.transformTo("string",n(s));return C.CENTRAL_DIRECTORY_END+"\0\0\0\0"+v(t,2)+v(t,2)+v(e,4)+v(i,4)+v(s.length,2)+s}(this.dirRecords.length,i,t,this.zipComment,this.encodeFileName);this.push({data:t,meta:{percent:100}})},r.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},r.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()}),t.on("error",function(t){e.error(t)}),this},r.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},r.prototype.error=function(t){var e=this._sources;if(!n.prototype.error.call(this,t))return!1;for(var i=0;i<e.length;i++)try{e[i].error(t)}catch(t){}return!0},r.prototype.lock=function(){n.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=r},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,i){var d=t("../compressions"),s=t("./ZipFileWorker");i.generateWorker=function(t,o,e){var a=new s(o.streamFiles,e,o.platform,o.encodeFileName),l=0;try{t.forEach(function(t,e){l++;var i=function(t,e){t=t||e,e=d[t];if(!e)throw new Error(t+" is not a valid compression method !");return e}(e.options.compression,o.compression),s=e.options.compressionOptions||o.compressionOptions||{},n=e.dir,r=e.date;e._compressWorker(i,s).withStreamInfo("file",{name:t,dir:n,date:r,comment:e.comment||"",unixPermissions:e.unixPermissions,dosPermissions:e.dosPermissions}).pipe(a)}),a.entriesCount=l}catch(t){a.error(t)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t,e=new s;for(t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.2.0",s.loadAsync=function(t,e){return(new s).loadAsync(t,e)},s.external=t("./external"),e.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,i){var s=t("./utils"),o=t("./external"),a=t("./utf8"),l=(s=t("./utils"),t("./zipEntries")),d=t("./stream/Crc32Probe"),h=t("./nodejsUtils");e.exports=function(t,n){var r=this;return n=s.extend(n||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),h.isNode&&h.isStream(t)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",t,!0,n.optimizedBinaryString,n.base64).then(function(t){var e=new l(n);return e.load(t),e}).then(function(t){var e=[o.Promise.resolve(t)],i=t.files;if(n.checkCRC32)for(var s=0;s<i.length;s++)e.push(function(s){return new o.Promise(function(t,e){var i=s.decompressed.getContentWorker().pipe(new d);i.on("error",function(t){e(t)}).on("end",function(){i.streamInfo.crc32!==s.decompressed.crc32?e(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}(i[s]));return o.Promise.all(e)}).then(function(t){for(var t=t.shift(),e=t.files,i=0;i<e.length;i++){var s=e[i];r.file(s.fileNameStr,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:n.createFolders})}return t.zipComment.length&&(r.comment=t.zipComment),r})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,i){var s=t("../utils"),n=t("../stream/GenericWorker");function r(t,e){n.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}s.inherits(r,n),r.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",function(t){e.push({data:t,meta:{percent:0}})}).on("error",function(t){e.isPaused?this.generatedError=t:e.error(t)}).on("end",function(){e.isPaused?e._upstreamEnded=!0:e.end()})},r.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,i){var n=t("readable-stream").Readable;function s(t,e,i){n.call(this,e),this._helper=t;var s=this;t.on("data",function(t,e){s.push(t)||s._helper.pause(),i&&i(e)}).on("error",function(t){s.emit("error",t)}).on("end",function(){s.push(null)})}t("../utils").inherits(s,n),s.prototype._read=function(){this._helper.resume()},e.exports=s},{"../utils":32,"readable-stream":16}],14:[function(t,e,i){e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);t=new Buffer(t);return t.fill(0),t},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,i){function n(t,e,i){var s,n=l.getTypeOf(e),r=l.extend(i||{},c);r.date=r.date||new Date,null!==r.compression&&(r.compression=r.compression.toUpperCase()),"string"==typeof r.unixPermissions&&(r.unixPermissions=parseInt(r.unixPermissions,8)),r.unixPermissions&&16384&r.unixPermissions&&(r.dir=!0),r.dosPermissions&&16&r.dosPermissions&&(r.dir=!0),r.dir&&(t=x(t)),r.createFolders&&(s=o(t))&&a.call(this,s,!0);n="string"===n&&!1===r.binary&&!1===r.base64;i&&void 0!==i.binary||(r.binary=!n),(e instanceof u&&0===e.uncompressedSize||r.dir||!e||0===e.length)&&(r.base64=!1,r.binary=!0,e="",r.compression="STORE");e=e instanceof u||e instanceof d?e:m.isNode&&m.isStream(e)?new g(t,e):l.prepareContent(t,e,r.binary,r.optimizedBinaryString,r.base64),r=new f(t,e,r);this.files[t]=r}function o(t){var e=(t="/"===t.slice(-1)?t.substring(0,t.length-1):t).lastIndexOf("/");return 0<e?t.substring(0,e):""}function a(t,e){return e=void 0!==e?e:c.createFolders,t=x(t),this.files[t]||n.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]}var r=t("./utf8"),l=t("./utils"),d=t("./stream/GenericWorker"),h=t("./stream/StreamHelper"),c=t("./defaults"),u=t("./compressedObject"),f=t("./zipObject"),p=t("./generate"),m=t("./nodejsUtils"),g=t("./nodejs/NodejsStreamInputAdapter"),x=function(t){return"/"!==t.slice(-1)&&(t+="/"),t};function E(t){return"[object RegExp]"===Object.prototype.toString.call(t)}e.exports={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,i,s;for(e in this.files)this.files.hasOwnProperty(e)&&(s=this.files[e],(i=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(i,s))},filter:function(i){var s=[];return this.forEach(function(t,e){i(t,e)&&s.push(e)}),s},file:function(t,e,i){if(1!==arguments.length)return t=this.root+t,n.call(this,t,e,i),this;if(E(t)){var s=t;return this.filter(function(t,e){return!e.dir&&s.test(t)})}t=this.files[this.root+t];return t&&!t.dir?t:null},folder:function(i){if(!i)return this;if(E(i))return this.filter(function(t,e){return e.dir&&i.test(t)});var t=this.root+i,e=a.call(this,t),t=this.clone();return t.root=e.name,t},remove:function(i){i=this.root+i;var t=this.files[i];if(t||("/"!==i.slice(-1)&&(i+="/"),t=this.files[i]),t&&!t.dir)delete this.files[i];else for(var e=this.filter(function(t,e){return e.name.slice(0,i.length)===i}),s=0;s<e.length;s++)delete this.files[e[s].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e={};try{if((e=l.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=e.type.toLowerCase(),e.compression=e.compression.toUpperCase(),"binarystring"===e.type&&(e.type="string"),!e.type)throw new Error("No output type specified.");l.checkSupport(e.type),"darwin"!==e.platform&&"freebsd"!==e.platform&&"linux"!==e.platform&&"sunos"!==e.platform||(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var i=e.comment||this.comment||"",s=p.generateWorker(this,e,i)}catch(t){(s=new d("error")).error(t)}return new h(s,e.type||"string",e.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}}},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,i){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,i){var s=t("./DataReader");function n(t){s.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(n,s),n.prototype.byteAt=function(t){return this.data[this.zero+t]},n.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),i=t.charCodeAt(1),s=t.charCodeAt(2),n=t.charCodeAt(3),r=this.length-4;0<=r;--r)if(this.data[r]===e&&this.data[r+1]===i&&this.data[r+2]===s&&this.data[r+3]===n)return r-this.zero;return-1},n.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),i=t.charCodeAt(1),s=t.charCodeAt(2),n=t.charCodeAt(3),t=this.readData(4);return e===t[0]&&i===t[1]&&s===t[2]&&n===t[3]},n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"../utils":32,"./DataReader":18}],18:[function(t,e,i){var s=t("../utils");function n(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,i=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)i=(i<<8)+this.byteAt(e);return this.index+=t,i},readString:function(t){return s.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=n},{"../utils":32}],19:[function(t,e,i){var s=t("./Uint8ArrayReader");function n(t){s.call(this,t)}t("../utils").inherits(n,s),n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,i){var s=t("./DataReader");function n(t){s.call(this,t)}t("../utils").inherits(n,s),n.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},n.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},n.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"../utils":32,"./DataReader":18}],21:[function(t,e,i){var s=t("./ArrayReader");function n(t){s.call(this,t)}t("../utils").inherits(n,s),n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,i){var s=t("../utils"),n=t("../support"),r=t("./ArrayReader"),o=t("./StringReader"),a=t("./NodeBufferReader"),l=t("./Uint8ArrayReader");e.exports=function(t){var e=s.getTypeOf(t);return s.checkSupport(e),"string"!==e||n.uint8array?"nodebuffer"===e?new a(t):n.uint8array?new l(s.transformTo("uint8array",t)):new r(s.transformTo("array",t)):new o(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,i){var s=t("./GenericWorker"),n=t("../utils");function r(t){s.call(this,"ConvertWorker to "+t),this.destType=t}n.inherits(r,s),r.prototype.processChunk=function(t){this.push({data:n.transformTo(this.destType,t.data),meta:t.meta})},e.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,i){var s=t("./GenericWorker"),n=t("../crc32");function r(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(r,s),r.prototype.processChunk=function(t){this.streamInfo.crc32=n(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,i){var s=t("../utils"),n=t("./GenericWorker");function r(t){n.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}s.inherits(r,n),r.prototype.processChunk=function(t){var e;t&&(e=this.streamInfo[this.propName]||0,this.streamInfo[this.propName]=e+t.data.length),n.prototype.processChunk.call(this,t)},e.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,i){var s=t("../utils"),n=t("./GenericWorker");function r(t){n.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then(function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=s.getTypeOf(t),e.isPaused||e._tickAndRepeat()},function(t){e.error(t)})}s.inherits(r,n),r.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,i){function s(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var i=0;i<this._listeners[t].length;i++)this._listeners[t][i].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.end()}),t.on("error",function(t){e.error(t)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=s},{}],29:[function(t,e,i){var d=t("../utils"),n=t("./ConvertWorker"),r=t("./GenericWorker"),h=t("../base64"),s=t("../support"),o=t("../external"),a=null;if(s.nodestream)try{a=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function l(t,e,i){var s=e;switch(e){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=e,this._mimeType=i,d.checkSupport(s),this._worker=t.pipe(new n(s)),t.lock()}catch(t){this._worker=new r("error"),this._worker.error(t)}}l.prototype={accumulate:function(t){return a=this,l=t,new o.Promise(function(e,i){var s=[],n=a._internalType,r=a._outputType,o=a._mimeType;a.on("data",function(t,e){s.push(t),l&&l(e)}).on("error",function(t){s=[],i(t)}).on("end",function(){try{var t=function(t,e,i){switch(t){case"blob":return d.newBlob(d.transformTo("arraybuffer",e),i);case"base64":return h.encode(e);default:return d.transformTo(t,e)}}(r,function(t,e){for(var i=0,s=null,n=0,r=0;r<e.length;r++)n+=e[r].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(s=new Uint8Array(n),r=0;r<e.length;r++)s.set(e[r],i),i+=e[r].length;return s;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(n,s),o);e(t)}catch(t){i(t)}s=[]}).resume()});var a,l},on:function(t,e){var i=this;return"data"===t?this._worker.on(t,function(t){e.call(i,t.data,t.meta)}):this._worker.on(t,function(){d.delay(e,arguments,i)}),this},resume:function(){return d.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(d.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new a(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof Buffer,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=0===new Blob([s],{type:"application/zip"}).size}catch(t){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(s),i.blob=0===n.getBlob("application/zip").size}catch(t){i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch(t){i.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,n){for(var a=t("./utils"),l=t("./support"),i=t("./nodejsUtils"),s=t("./stream/GenericWorker"),d=new Array(256),r=0;r<256;r++)d[r]=252<=r?6:248<=r?5:240<=r?4:224<=r?3:192<=r?2:1;function o(){s.call(this,"utf-8 decode"),this.leftOver=null}function h(){s.call(this,"utf-8 encode")}d[254]=d[254]=1,n.utf8encode=function(t){return l.nodebuffer?i.newBufferFrom(t,"utf-8"):function(t){for(var e,i,s,n,r=t.length,o=0,a=0;a<r;a++)55296==(64512&(i=t.charCodeAt(a)))&&a+1<r&&56320==(64512&(s=t.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(s-56320),a++),o+=i<128?1:i<2048?2:i<65536?3:4;for(e=new(l.uint8array?Uint8Array:Array)(o),a=n=0;n<o;a++)55296==(64512&(i=t.charCodeAt(a)))&&a+1<r&&56320==(64512&(s=t.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(s-56320),a++),i<128?e[n++]=i:(i<2048?e[n++]=192|i>>>6:(i<65536?e[n++]=224|i>>>12:(e[n++]=240|i>>>18,e[n++]=128|i>>>12&63),e[n++]=128|i>>>6&63),e[n++]=128|63&i);return e}(t)},n.utf8decode=function(t){return l.nodebuffer?a.transformTo("nodebuffer",t).toString("utf-8"):function(t){for(var e,i,s,n=t.length,r=new Array(2*n),o=e=0;o<n;)if((i=t[o++])<128)r[e++]=i;else if(4<(s=d[i]))r[e++]=65533,o+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&o<n;)i=i<<6|63&t[o++],s--;1<s?r[e++]=65533:i<65536?r[e++]=i:(i-=65536,r[e++]=55296|i>>10&1023,r[e++]=56320|1023&i)}return r.length!==e&&(r.subarray?r=r.subarray(0,e):r.length=e),a.applyFromCharCode(r)}(t=a.transformTo(l.uint8array?"uint8array":"array",t))},a.inherits(o,s),o.prototype.processChunk=function(t){var e=a.transformTo(l.uint8array?"uint8array":"array",t.data);this.leftOver&&this.leftOver.length&&(l.uint8array?(s=e,(e=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),e.set(s,this.leftOver.length)):e=this.leftOver.concat(e),this.leftOver=null);var i=function(t,e){for(var i=(e=(e=e||t.length)>t.length?t.length:e)-1;0<=i&&128==(192&t[i]);)i--;return!(i<0)&&0!==i&&i+d[t[i]]>e?i:e}(e),s=e;i!==e.length&&(l.uint8array?(s=e.subarray(0,i),this.leftOver=e.subarray(i,e.length)):(s=e.slice(0,i),this.leftOver=e.slice(i,e.length))),this.push({data:n.utf8decode(s),meta:t.meta})},o.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=o,a.inherits(h,s),h.prototype.processChunk=function(t){this.push({data:n.utf8encode(t.data),meta:t.meta})},n.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,o){var a=t("./support"),l=t("./base64"),i=t("./nodejsUtils"),s=t("set-immediate-shim"),d=t("./external");function n(t){return t}function h(t,e){for(var i=0;i<t.length;++i)e[i]=255&t.charCodeAt(i);return e}o.newBlob=function(e,i){o.checkSupport("blob");try{return new Blob([e],{type:i})}catch(t){try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return s.append(e),s.getBlob(i)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var r={stringifyByChunk:function(t,e,i){var s=[],n=0,r=t.length;if(r<=i)return String.fromCharCode.apply(null,t);for(;n<r;)"array"===e||"nodebuffer"===e?s.push(String.fromCharCode.apply(null,t.slice(n,Math.min(n+i,r)))):s.push(String.fromCharCode.apply(null,t.subarray(n,Math.min(n+i,r)))),n+=i;return s.join("")},stringifyByChar:function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&1===String.fromCharCode.apply(null,i.allocBuffer(1)).length}catch(t){return!1}}()}};function c(t){var e=65536,i=o.getTypeOf(t),s=!0;if("uint8array"===i?s=r.applyCanBeUsed.uint8array:"nodebuffer"===i&&(s=r.applyCanBeUsed.nodebuffer),s)for(;1<e;)try{return r.stringifyByChunk(t,i,e)}catch(t){e=Math.floor(e/2)}return r.stringifyByChar(t)}function u(t,e){for(var i=0;i<t.length;i++)e[i]=t[i];return e}o.applyFromCharCode=c;var f={};f.string={string:n,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return f.string.uint8array(t).buffer},uint8array:function(t){return h(t,new Uint8Array(t.length))},nodebuffer:function(t){return h(t,i.allocBuffer(t.length))}},f.array={string:c,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return i.newBufferFrom(t)}},f.arraybuffer={string:function(t){return c(new Uint8Array(t))},array:function(t){return u(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return i.newBufferFrom(new Uint8Array(t))}},f.uint8array={string:c,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return i.newBufferFrom(t)}},f.nodebuffer={string:c,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return f.nodebuffer.uint8array(t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))},nodebuffer:n},o.transformTo=function(t,e){if(e=e||"",!t)return e;o.checkSupport(t);var i=o.getTypeOf(e);return f[i][t](e)},o.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":a.nodebuffer&&i.isBuffer(t)?"nodebuffer":a.uint8array&&t instanceof Uint8Array?"uint8array":a.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(t){if(!a[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(t){for(var e,i="",s=0;s<(t||"").length;s++)i+="\\x"+((e=t.charCodeAt(s))<16?"0":"")+e.toString(16).toUpperCase();return i},o.delay=function(t,e,i){s(function(){t.apply(i||null,e||[])})},o.inherits=function(t,e){function i(){}i.prototype=e.prototype,t.prototype=new i},o.extend=function(){for(var t,e={},i=0;i<arguments.length;i++)for(t in arguments[i])arguments[i].hasOwnProperty(t)&&void 0===e[t]&&(e[t]=arguments[i][t]);return e},o.prepareContent=function(i,t,s,n,r){return d.Promise.resolve(t).then(function(s){return a.blob&&(s instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(s)))&&"undefined"!=typeof FileReader?new d.Promise(function(e,i){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.onerror=function(t){i(t.target.error)},t.readAsArrayBuffer(s)}):s}).then(function(t){var e=o.getTypeOf(t);return e?("arraybuffer"===e?t=o.transformTo("uint8array",t):"string"===e&&(r?t=l.decode(t):s&&!0!==n&&(t=h(e=t,new(a.uint8array?Uint8Array:Array)(e.length)))),t):d.Promise.reject(new Error("Can't read the data of '"+i+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,i){var s=t("./reader/readerFor"),n=t("./utils"),r=t("./signature"),o=t("./zipEntry"),a=(t("./utf8"),t("./support"));function l(t){this.files=[],this.loadOptions=t}l.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(e)+", expected "+n.pretty(t)+")")}},isSignature:function(t,e){var i=this.reader.index;this.reader.setIndex(t);e=this.reader.readString(4)===e;return this.reader.setIndex(i),e},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=a.uint8array?"uint8array":"array",t=n.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,i,s=this.zip64EndOfCentralSize-44;0<s;)t=this.reader.readInt(2),e=this.reader.readInt(4),i=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){for(var t,e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(t=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}t=this.centralDirOffset+this.centralDirSize;this.zip64&&(t+=20,t+=12+this.zip64EndOfCentralSize);t=e-t;if(0<t)this.isSignature(e,r.CENTRAL_FILE_HEADER)||(this.reader.zero=t);else if(t<0)throw new Error("Corrupted zip: missing "+Math.abs(t)+" bytes.")},prepareReader:function(t){this.reader=s(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,i){var s=t("./reader/readerFor"),n=t("./utils"),r=t("./compressedObject"),o=t("./crc32"),a=t("./utf8"),l=t("./compressions"),d=t("./support");function h(t,e){this.options=t,this.loadOptions=e}h.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e;if(t.skip(22),this.fileNameLength=t.readInt(2),e=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(e),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in l)if(l.hasOwnProperty(e)&&l[e].magic===t)return l[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){var e;this.extraFields[1]&&(e=s(this.extraFields[1].value),this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4)))},readExtraFields:function(t){var e,i,s,n=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<n;)e=t.readInt(2),i=t.readInt(2),s=t.readData(i),this.extraFields[e]={id:e,length:i,value:s}},handleUTF8:function(){var t,e,i=d.uint8array?"uint8array":"array";this.useUTF8()?(this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment)):(null!==(t=this.findExtraFieldUnicodePath())?this.fileNameStr=t:(e=n.transformTo(i,this.fileName),this.fileNameStr=this.loadOptions.decodeFileName(e)),null!==(e=this.findExtraFieldUnicodeComment())?this.fileCommentStr=e:(i=n.transformTo(i,this.fileComment),this.fileCommentStr=this.loadOptions.decodeFileName(i)))},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=s(t.value);return 1!==e.readInt(1)||o(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=s(t.value);return 1!==e.readInt(1)||o(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},e.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,i){function s(t,e,i){this.name=t,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=e,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}}var r=t("./stream/StreamHelper"),n=t("./stream/DataWorker"),o=t("./utf8"),a=t("./compressedObject"),l=t("./stream/GenericWorker");s.prototype={internalStream:function(t){var e=null,i="string";try{if(!t)throw new Error("No output type specified.");var s="string"===(i=t.toLowerCase())||"text"===i;"binarystring"!==i&&"text"!==i||(i="string");var e=this._decompressWorker(),n=!this._dataBinary;n&&!s&&(e=e.pipe(new o.Utf8EncodeWorker)),!n&&s&&(e=e.pipe(new o.Utf8DecodeWorker))}catch(t){(e=new l("error")).error(t)}return new r(e,i,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(i,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new n(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<d.length;c++)s.prototype[d[c]]=h;e.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,d,e){!function(e){var s,t,i,n,r=e.MutationObserver||e.WebKitMutationObserver,o=r?(t=0,r=new r(l),i=e.document.createTextNode(""),r.observe(i,{characterData:!0}),function(){i.data=t=++t%2}):e.setImmediate||void 0===e.MessageChannel?"document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)}:((n=new e.MessageChannel).port1.onmessage=l,function(){n.port2.postMessage(0)}),a=[];function l(){var t,e;s=!0;for(var i=a.length;i;){for(e=a,a=[],t=-1;++t<i;)e[t]();i=a.length}s=!1}d.exports=function(t){1!==a.push(t)||s||o()}}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,i){var n=t("immediate");function l(){}var d={},r=["REJECTED"],o=["FULFILLED"],s=["PENDING"];function a(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,t!==l&&f(this,t)}function h(t,e,i){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function c(e,i,s){n(function(){var t;try{t=i(s)}catch(t){return d.reject(e,t)}t===e?d.reject(e,new TypeError("Cannot resolve promise with itself")):d.resolve(e,t)})}function u(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(e,t){var i=!1;function s(t){i||(i=!0,d.reject(e,t))}function n(t){i||(i=!0,d.resolve(e,t))}var r=p(function(){t(n,s)});"error"===r.status&&s(r.value)}function p(t,e){var i={};try{i.value=t(e),i.status="success"}catch(t){i.status="error",i.value=t}return i}(e.exports=a).prototype.finally=function(e){if("function"!=typeof e)return this;var i=this.constructor;return this.then(function(t){return i.resolve(e()).then(function(){return t})},function(t){return i.resolve(e()).then(function(){throw t})})},a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){if("function"!=typeof t&&this.state===o||"function"!=typeof e&&this.state===r)return this;var i=new this.constructor(l);return this.state!==s?c(i,this.state===o?t:e,this.outcome):this.queue.push(new h(i,t,e)),i},h.prototype.callFulfilled=function(t){d.resolve(this.promise,t)},h.prototype.otherCallFulfilled=function(t){c(this.promise,this.onFulfilled,t)},h.prototype.callRejected=function(t){d.reject(this.promise,t)},h.prototype.otherCallRejected=function(t){c(this.promise,this.onRejected,t)},d.resolve=function(t,e){var i=p(u,e);if("error"===i.status)return d.reject(t,i.value);i=i.value;if(i)f(t,i);else{t.state=o,t.outcome=e;for(var s=-1,n=t.queue.length;++s<n;)t.queue[s].callFulfilled(e)}return t},d.reject=function(t,e){t.state=r,t.outcome=e;for(var i=-1,s=t.queue.length;++i<s;)t.queue[i].callRejected(e);return t},a.resolve=function(t){return t instanceof this?t:d.resolve(new this(l),t)},a.reject=function(t){var e=new this(l);return d.reject(e,t)},a.all=function(t){var i=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var s=t.length,n=!1;if(!s)return this.resolve([]);for(var r=new Array(s),o=0,e=-1,a=new this(l);++e<s;)!function(t,e){i.resolve(t).then(function(t){r[e]=t,++o!==s||n||(n=!0,d.resolve(a,r))},function(t){n||(n=!0,d.reject(a,t))})}(t[e],e);return a},a.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,i=!1;if(!e)return this.resolve([]);for(var s,n=-1,r=new this(l);++n<e;)s=t[n],this.resolve(s).then(function(t){i||(i=!0,d.resolve(r,t))},function(t){i||(i=!0,d.reject(r,t))});return r}},{immediate:36}],38:[function(t,e,i){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,i){var o=t("./zlib/deflate"),a=t("./utils/common"),l=t("./utils/strings"),s=t("./zlib/messages"),n=t("./zlib/zstream"),d=Object.prototype.toString;function r(t){if(!(this instanceof r))return new r(t);this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;t=o.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==t)throw new Error(s[t]);if(e.header&&o.deflateSetHeader(this.strm,e.header),e.dictionary){e="string"==typeof e.dictionary?l.string2buf(e.dictionary):"[object ArrayBuffer]"===d.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary;if(0!==(t=o.deflateSetDictionary(this.strm,e)))throw new Error(s[t]);this._dict_set=!0}}function h(t,e){e=new r(e);if(e.push(t,!0),e.err)throw e.msg||s[e.err];return e.result}r.prototype.push=function(t,e){var i,s,n=this.strm,r=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?n.input=l.string2buf(t):"[object ArrayBuffer]"===d.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new a.Buf8(r),n.next_out=0,n.avail_out=r),1!==(i=o.deflate(n,s))&&0!==i)return this.onEnd(i),!(this.ended=!0)}while(0!==n.avail_out&&(0!==n.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(l.buf2binstring(a.shrinkBuf(n.output,n.next_out))):this.onData(a.shrinkBuf(n.output,n.next_out))),(0<n.avail_in||0===n.avail_out)&&1!==i);return 4===s?(i=o.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i):2!==s||(this.onEnd(0),!(n.avail_out=0))},r.prototype.onData=function(t){this.chunks.push(t)},r.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Deflate=r,i.deflate=h,i.deflateRaw=function(t,e){return(e=e||{}).raw=!0,h(t,e)},i.gzip=function(t,e){return(e=e||{}).gzip=!0,h(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,i){var c=t("./zlib/inflate"),u=t("./utils/common"),f=t("./utils/strings"),p=t("./zlib/constants"),s=t("./zlib/messages"),n=t("./zlib/zstream"),r=t("./zlib/gzheader"),m=Object.prototype.toString;function o(t){if(!(this instanceof o))return new o(t);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;e=c.inflateInit2(this.strm,e.windowBits);if(e!==p.Z_OK)throw new Error(s[e]);this.header=new r,c.inflateGetHeader(this.strm,this.header)}function a(t,e){e=new o(e);if(e.push(t,!0),e.err)throw e.msg||s[e.err];return e.result}o.prototype.push=function(t,e){var i,s,n,r,o,a=this.strm,l=this.options.chunkSize,d=this.options.dictionary,h=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?p.Z_FINISH:p.Z_NO_FLUSH,"string"==typeof t?a.input=f.binstring2buf(t):"[object ArrayBuffer]"===m.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new u.Buf8(l),a.next_out=0,a.avail_out=l),(i=c.inflate(a,p.Z_NO_FLUSH))===p.Z_NEED_DICT&&d&&(o="string"==typeof d?f.string2buf(d):"[object ArrayBuffer]"===m.call(d)?new Uint8Array(d):d,i=c.inflateSetDictionary(this.strm,o)),i===p.Z_BUF_ERROR&&!0===h&&(i=p.Z_OK,h=!1),i!==p.Z_STREAM_END&&i!==p.Z_OK)return this.onEnd(i),!(this.ended=!0)}while(a.next_out&&(0!==a.avail_out&&i!==p.Z_STREAM_END&&(0!==a.avail_in||s!==p.Z_FINISH&&s!==p.Z_SYNC_FLUSH)||("string"===this.options.to?(n=f.utf8border(a.output,a.next_out),r=a.next_out-n,o=f.buf2string(a.output,n),a.next_out=r,a.avail_out=l-r,r&&u.arraySet(a.output,a.output,n,r,0),this.onData(o)):this.onData(u.shrinkBuf(a.output,a.next_out)))),0===a.avail_in&&0===a.avail_out&&(h=!0),(0<a.avail_in||0===a.avail_out)&&i!==p.Z_STREAM_END);return(s=i===p.Z_STREAM_END?p.Z_FINISH:s)===p.Z_FINISH?(i=c.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===p.Z_OK):s!==p.Z_SYNC_FLUSH||(this.onEnd(p.Z_OK),!(a.avail_out=0))},o.prototype.onData=function(t){this.chunks.push(t)},o.prototype.onEnd=function(t){t===p.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Inflate=o,i.inflate=a,i.inflateRaw=function(t,e){return(e=e||{}).raw=!0,a(t,e)},i.ungzip=a},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,i){var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,i,s,n){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+s),n);else for(var r=0;r<s;r++)t[n+r]=e[i+r]},flattenChunks:function(t){for(var e,i,s,n,r=e=0,o=t.length;r<o;r++)e+=t[r].length;for(n=new Uint8Array(e),r=i=0,o=t.length;r<o;r++)s=t[r],n.set(s,i),i+=s.length;return n}},r={arraySet:function(t,e,i,s,n){for(var r=0;r<s;r++)t[n+r]=e[i+r]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,r))},i.setTyped(s)},{}],42:[function(t,e,i){var l=t("./common"),n=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(t){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){r=!1}for(var d=new l.Buf8(256),s=0;s<256;s++)d[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function h(t,e){if(e<65537&&(t.subarray&&r||!t.subarray&&n))return String.fromCharCode.apply(null,l.shrinkBuf(t,e));for(var i="",s=0;s<e;s++)i+=String.fromCharCode(t[s]);return i}d[254]=d[254]=1,i.string2buf=function(t){for(var e,i,s,n,r=t.length,o=0,a=0;a<r;a++)55296==(64512&(i=t.charCodeAt(a)))&&a+1<r&&56320==(64512&(s=t.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(s-56320),a++),o+=i<128?1:i<2048?2:i<65536?3:4;for(e=new l.Buf8(o),a=n=0;n<o;a++)55296==(64512&(i=t.charCodeAt(a)))&&a+1<r&&56320==(64512&(s=t.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(s-56320),a++),i<128?e[n++]=i:(i<2048?e[n++]=192|i>>>6:(i<65536?e[n++]=224|i>>>12:(e[n++]=240|i>>>18,e[n++]=128|i>>>12&63),e[n++]=128|i>>>6&63),e[n++]=128|63&i);return e},i.buf2binstring=function(t){return h(t,t.length)},i.binstring2buf=function(t){for(var e=new l.Buf8(t.length),i=0,s=e.length;i<s;i++)e[i]=t.charCodeAt(i);return e},i.buf2string=function(t,e){for(var i,s,n,r=e||t.length,o=new Array(2*r),a=i=0;a<r;)if((s=t[a++])<128)o[i++]=s;else if(4<(n=d[s]))o[i++]=65533,a+=n-1;else{for(s&=2===n?31:3===n?15:7;1<n&&a<r;)s=s<<6|63&t[a++],n--;1<n?o[i++]=65533:s<65536?o[i++]=s:(s-=65536,o[i++]=55296|s>>10&1023,o[i++]=56320|1023&s)}return h(o,i)},i.utf8border=function(t,e){for(var i=(e=(e=e||t.length)>t.length?t.length:e)-1;0<=i&&128==(192&t[i]);)i--;return!(i<0)&&0!==i&&i+d[t[i]]>e?i:e}},{"./common":41}],43:[function(t,e,i){e.exports=function(t,e,i,s){for(var n=65535&t|0,r=t>>>16&65535|0,o=0;0!==i;){for(i-=o=2e3<i?2e3:i;r=r+(n=n+e[s++]|0)|0,--o;);n%=65521,r%=65521}return n|r<<16|0}},{}],44:[function(t,e,i){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,i){var a=function(){for(var t=[],e=0;e<256;e++){for(var i=e,s=0;s<8;s++)i=1&i?3988292384^i>>>1:i>>>1;t[e]=i}return t}();e.exports=function(t,e,i,s){var n=a,r=s+i;t^=-1;for(var o=s;o<r;o++)t=t>>>8^n[255&(t^e[o])];return-1^t}},{}],46:[function(t,e,i){var a,c=t("../utils/common"),l=t("./trees"),u=t("./adler32"),f=t("./crc32"),s=t("./messages"),d=0,h=0,p=-2,n=2,m=8,r=286,o=30,g=19,x=2*r+1,E=15,v=3,y=258,b=y+v+1,w=42,C=113;function S(t,e){return t.msg=s[e],e}function T(t){return(t<<1)-(4<t?9:0)}function I(t){for(var e=t.length;0<=--e;)t[e]=0}function k(t){var e=t.state,i=e.pending;0!==(i=i>t.avail_out?t.avail_out:i)&&(c.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function M(t,e){l._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,k(t.strm)}function D(t,e){t.pending_buf[t.pending++]=e}function A(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function R(t,e){var i,s,n=t.max_chain_length,r=t.strstart,o=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-b?t.strstart-(t.w_size-b):0,d=t.window,h=t.w_mask,c=t.prev,u=t.strstart+y,f=d[r+o-1],p=d[r+o];t.prev_length>=t.good_match&&(n>>=2),a>t.lookahead&&(a=t.lookahead);do{if(d[(i=e)+o]===p&&d[i+o-1]===f&&d[i]===d[r]&&d[++i]===d[r+1]){for(r+=2,i++;d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&r<u;);if(s=y-(u-r),r=u-y,o<s){if(t.match_start=e,a<=(o=s))break;f=d[r+o-1],p=d[r+o]}}}while((e=c[e&h])>l&&0!=--n);return o<=t.lookahead?o:t.lookahead}function N(t){var e,i,s,n,r,o,a,l,d,h=t.w_size;do{if(l=t.window_size-t.lookahead-t.strstart,t.strstart>=h+(h-b)){for(c.arraySet(t.window,t.window,h,h,0),t.match_start-=h,t.strstart-=h,t.block_start-=h,e=i=t.hash_size;s=t.head[--e],t.head[e]=h<=s?s-h:0,--i;);for(e=i=h;s=t.prev[--e],t.prev[e]=h<=s?s-h:0,--i;);l+=h}if(0===t.strm.avail_in)break;if(r=t.strm,o=t.window,a=t.strstart+t.lookahead,d=void 0,i=0===(d=(l=l)<(d=r.avail_in)?l:d)?0:(r.avail_in-=d,c.arraySet(o,r.input,r.next_in,d,a),1===r.state.wrap?r.adler=u(r.adler,o,d,a):2===r.state.wrap&&(r.adler=f(r.adler,o,d,a)),r.next_in+=d,r.total_in+=d,d),t.lookahead+=i,t.lookahead+t.insert>=v)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+v-1])&t.hash_mask,t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<v)););}while(t.lookahead<b&&0!==t.strm.avail_in)}function F(t,e){for(var i,s;;){if(t.lookahead<b){if(N(t),t.lookahead<b&&e===d)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=v&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+v-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-b&&(t.match_length=R(t,i)),t.match_length>=v)if(s=l._tr_tally(t,t.strstart-t.match_start,t.match_length-v),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=v){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+v-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else s=l._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(s&&(M(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<v-1?t.strstart:v-1,4===e?(M(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?1:2}function P(t,e){for(var i,s,n;;){if(t.lookahead<b){if(N(t),t.lookahead<b&&e===d)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=v&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+v-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=v-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-b&&(t.match_length=R(t,i),t.match_length<=5&&(1===t.strategy||t.match_length===v&&4096<t.strstart-t.match_start)&&(t.match_length=v-1)),t.prev_length>=v&&t.match_length<=t.prev_length){for(n=t.strstart+t.lookahead-v,s=l._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-v),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+v-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=v-1,t.strstart++,s&&(M(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((s=l._tr_tally(t,0,t.window[t.strstart-1]))&&M(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(s=l._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<v-1?t.strstart:v-1,4===e?(M(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?1:2}function O(t,e,i,s,n){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=s,this.func=n}function L(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*x),this.dyn_dtree=new c.Buf16(2*(2*o+1)),this.bl_tree=new c.Buf16(2*(2*g+1)),I(this.dyn_ltree),I(this.dyn_dtree),I(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(E+1),this.heap=new c.Buf16(2*r+1),I(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*r+1),I(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function B(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=n,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?w:C,t.adler=2===e.wrap?0:1,e.last_flush=d,l._tr_init(e),h):S(t,p)}function _(t){var e=B(t);return e===h&&((t=t.state).window_size=2*t.w_size,I(t.head),t.max_lazy_match=a[t.level].max_lazy,t.good_match=a[t.level].good_length,t.nice_match=a[t.level].nice_length,t.max_chain_length=a[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=v-1,t.match_available=0,t.ins_h=0),e}function H(t,e,i,s,n,r){if(!t)return p;var o=1;if(-1===e&&(e=6),s<0?(o=0,s=-s):15<s&&(o=2,s-=16),n<1||9<n||i!==m||s<8||15<s||e<0||9<e||r<0||4<r)return S(t,p);8===s&&(s=9);var a=new L;return(t.state=a).strm=t,a.wrap=o,a.gzhead=null,a.w_bits=s,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=n+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+v-1)/v),a.window=new c.Buf8(2*a.w_size),a.head=new c.Buf16(a.hash_size),a.prev=new c.Buf16(a.w_size),a.lit_bufsize=1<<n+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new c.Buf8(a.pending_buf_size),a.d_buf=+a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=r,a.method=i,_(t)}a=[new O(0,0,0,0,function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(N(t),0===t.lookahead&&e===d)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var s=t.block_start+i;if((0===t.strstart||t.strstart>=s)&&(t.lookahead=t.strstart-s,t.strstart=s,M(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-b&&(M(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(M(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(M(t,!1),t.strm.avail_out),1)}),new O(4,4,8,4,F),new O(4,5,16,8,F),new O(4,6,32,32,F),new O(4,4,16,16,P),new O(8,16,32,32,P),new O(8,16,128,128,P),new O(8,32,128,256,P),new O(32,128,258,1024,P),new O(32,258,258,4096,P)],i.deflateInit=function(t,e){return H(t,e,m,15,8,0)},i.deflateInit2=H,i.deflateReset=_,i.deflateResetKeep=B,i.deflateSetHeader=function(t,e){return!t||!t.state||2!==t.state.wrap?p:(t.state.gzhead=e,h)},i.deflate=function(t,e){var i,s,n,r;if(!t||!t.state||5<e||e<0)return t?S(t,p):p;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return S(t,0===t.avail_out?-5:p);if(i.strm=t,o=i.last_flush,i.last_flush=e,i.status===w&&(2===i.wrap?(t.adler=0,D(i,31),D(i,139),D(i,8),i.gzhead?(D(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),D(i,255&i.gzhead.time),D(i,i.gzhead.time>>8&255),D(i,i.gzhead.time>>16&255),D(i,i.gzhead.time>>24&255),D(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),D(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(D(i,255&i.gzhead.extra.length),D(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=f(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(D(i,0),D(i,0),D(i,0),D(i,0),D(i,0),D(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),D(i,3),i.status=C)):(r=m+(i.w_bits-8<<4)<<8,r|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(r|=32),r+=31-r%31,i.status=C,A(i,r),0!==i.strstart&&(A(i,t.adler>>>16),A(i,65535&t.adler)),t.adler=1)),69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(t.adler=f(t.adler,i.pending_buf,i.pending-s,s)),k(t),s=i.pending,i.pending!==i.pending_buf_size));)D(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(t.adler=f(t.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=f(t.adler,i.pending_buf,i.pending-s,s)),k(t),s=i.pending,i.pending===i.pending_buf_size)){n=1;break}}while(n=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,D(i,n),0!==n);i.gzhead.hcrc&&i.pending>s&&(t.adler=f(t.adler,i.pending_buf,i.pending-s,s)),0===n&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=f(t.adler,i.pending_buf,i.pending-s,s)),k(t),s=i.pending,i.pending===i.pending_buf_size)){n=1;break}}while(n=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,D(i,n),0!==n);i.gzhead.hcrc&&i.pending>s&&(t.adler=f(t.adler,i.pending_buf,i.pending-s,s)),0===n&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&k(t),i.pending+2<=i.pending_buf_size&&(D(i,255&t.adler),D(i,t.adler>>8&255),t.adler=0,i.status=C)):i.status=C),0!==i.pending){if(k(t),0===t.avail_out)return i.last_flush=-1,h}else if(0===t.avail_in&&T(e)<=T(o)&&4!==e)return S(t,-5);if(666===i.status&&0!==t.avail_in)return S(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==d&&666!==i.status){var o=2===i.strategy?function(t,e){for(var i;;){if(0===t.lookahead&&(N(t),0===t.lookahead)){if(e===d)return 1;break}if(t.match_length=0,i=l._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(M(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(M(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var i,s,n,r,o=t.window;;){if(t.lookahead<=y){if(N(t),t.lookahead<=y&&e===d)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=v&&0<t.strstart&&(s=o[n=t.strstart-1])===o[++n]&&s===o[++n]&&s===o[++n]){for(r=t.strstart+y;s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&n<r;);t.match_length=y-(r-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=v?(i=l._tr_tally(t,1,t.match_length-v),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=l._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(M(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(M(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?1:2}(i,e):a[i.level].func(i,e);if(3!==o&&4!==o||(i.status=666),1===o||3===o)return 0===t.avail_out&&(i.last_flush=-1),h;if(2===o&&(1===e?l._tr_align(i):5!==e&&(l._tr_stored_block(i,0,0,!1),3===e&&(I(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),k(t),0===t.avail_out))return i.last_flush=-1,h}return 4!==e?h:i.wrap<=0?1:(2===i.wrap?(D(i,255&t.adler),D(i,t.adler>>8&255),D(i,t.adler>>16&255),D(i,t.adler>>24&255),D(i,255&t.total_in),D(i,t.total_in>>8&255),D(i,t.total_in>>16&255),D(i,t.total_in>>24&255)):(A(i,t.adler>>>16),A(i,65535&t.adler)),k(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?h:1)},i.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==w&&69!==e&&73!==e&&91!==e&&103!==e&&e!==C&&666!==e?S(t,p):(t.state=null,e===C?S(t,-3):h):p},i.deflateSetDictionary=function(t,e){var i,s,n,r,o,a,l,d=e.length;if(!t||!t.state)return p;if(2===(r=(i=t.state).wrap)||1===r&&i.status!==w||i.lookahead)return p;for(1===r&&(t.adler=u(t.adler,e,d,0)),i.wrap=0,d>=i.w_size&&(0===r&&(I(i.head),i.strstart=0,i.block_start=0,i.insert=0),l=new c.Buf8(i.w_size),c.arraySet(l,e,d-i.w_size,i.w_size,0),e=l,d=i.w_size),o=t.avail_in,a=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,N(i);i.lookahead>=v;){for(s=i.strstart,n=i.lookahead-(v-1);i.ins_h=(i.ins_h<<i.hash_shift^i.window[s+v-1])&i.hash_mask,i.prev[s&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=s,s++,--n;);i.strstart=s,i.lookahead=v-1,N(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=v-1,i.match_available=0,t.next_in=a,t.input=l,t.avail_in=o,i.wrap=r,h},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,i){e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,i){e.exports=function(t,e){var i,s,n,r,o,a,l=t.state,d=t.next_in,h=t.input,c=d+(t.avail_in-5),u=t.next_out,f=t.output,p=u-(e-t.avail_out),m=u+(t.avail_out-257),g=l.dmax,x=l.wsize,E=l.whave,v=l.wnext,y=l.window,b=l.hold,w=l.bits,C=l.lencode,S=l.distcode,T=(1<<l.lenbits)-1,I=(1<<l.distbits)-1;t:do{for(w<15&&(b+=h[d++]<<w,w+=8,b+=h[d++]<<w,w+=8),i=C[b&T];;){if(b>>>=s=i>>>24,w-=s,0==(s=i>>>16&255))f[u++]=65535&i;else{if(!(16&s)){if(0==(64&s)){i=C[(65535&i)+(b&(1<<s)-1)];continue}if(32&s){l.mode=12;break t}t.msg="invalid literal/length code",l.mode=30;break t}for(n=65535&i,(s&=15)&&(w<s&&(b+=h[d++]<<w,w+=8),n+=b&(1<<s)-1,b>>>=s,w-=s),w<15&&(b+=h[d++]<<w,w+=8,b+=h[d++]<<w,w+=8),i=S[b&I];;){if(b>>>=s=i>>>24,w-=s,!(16&(s=i>>>16&255))){if(0==(64&s)){i=S[(65535&i)+(b&(1<<s)-1)];continue}t.msg="invalid distance code",l.mode=30;break t}if(r=65535&i,w<(s&=15)&&(b+=h[d++]<<w,(w+=8)<s&&(b+=h[d++]<<w,w+=8)),g<(r+=b&(1<<s)-1)){t.msg="invalid distance too far back",l.mode=30;break t}if(b>>>=s,w-=s,(s=u-p)<r){if(E<(s=r-s)&&l.sane){t.msg="invalid distance too far back",l.mode=30;break t}if(a=y,(o=0)===v){if(o+=x-s,s<n){for(n-=s;f[u++]=y[o++],--s;);o=u-r,a=f}}else if(v<s){if(o+=x+v-s,(s-=v)<n){for(n-=s;f[u++]=y[o++],--s;);if(o=0,v<n){for(n-=s=v;f[u++]=y[o++],--s;);o=u-r,a=f}}}else if(o+=v-s,s<n){for(n-=s;f[u++]=y[o++],--s;);o=u-r,a=f}for(;2<n;)f[u++]=a[o++],f[u++]=a[o++],f[u++]=a[o++],n-=3;n&&(f[u++]=a[o++],1<n&&(f[u++]=a[o++]))}else{for(o=u-r;f[u++]=f[o++],f[u++]=f[o++],f[u++]=f[o++],2<(n-=3););n&&(f[u++]=f[o++],1<n&&(f[u++]=f[o++]))}break}}break}}while(d<c&&u<m);d-=n=w>>3,b&=(1<<(w-=n<<3))-1,t.next_in=d,t.next_out=u,t.avail_in=d<c?c-d+5:5-(d-c),t.avail_out=u<m?m-u+257:257-(u-m),l.hold=b,l.bits=w}},{}],49:[function(t,e,i){var D=t("../utils/common"),A=t("./adler32"),R=t("./crc32"),N=t("./inffast"),F=t("./inftrees"),P=0,O=-2,L=1,s=852,n=592;function B(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new D.Buf16(320),this.work=new D.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=L,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new D.Buf32(s),e.distcode=e.distdyn=new D.Buf32(n),e.sane=1,e.back=-1,P):O}function a(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,o(t)):O}function l(t,e){var i,s;return t&&t.state?(s=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?O:(null!==s.window&&s.wbits!==e&&(s.window=null),s.wrap=i,s.wbits=e,a(t))):O}function d(t,e){var i;return t?(i=new r,(t.state=i).window=null,(e=l(t,e))!==P&&(t.state=null),e):O}var _,H,z=!0;function V(t,e,i,s){var n=t.state;return null===n.window&&(n.wsize=1<<n.wbits,n.wnext=0,n.whave=0,n.window=new D.Buf8(n.wsize)),s>=n.wsize?(D.arraySet(n.window,e,i-n.wsize,n.wsize,0),n.wnext=0,n.whave=n.wsize):(s<(t=n.wsize-n.wnext)&&(t=s),D.arraySet(n.window,e,i-s,t,n.wnext),(s-=t)?(D.arraySet(n.window,e,i-s,s,0),n.wnext=s,n.whave=n.wsize):(n.wnext+=t,n.wnext===n.wsize&&(n.wnext=0),n.whave<n.wsize&&(n.whave+=t))),0}i.inflateReset=a,i.inflateReset2=l,i.inflateResetKeep=o,i.inflateInit=function(t){return d(t,15)},i.inflateInit2=d,i.inflate=function(t,e){var i,s,n,r,o,a,l,d,h,c,u,f,p,m,g,x,E,v,y,b,w,C,S,T,I=0,k=new D.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return O;12===(i=t.state).mode&&(i.mode=13),o=t.next_out,n=t.output,l=t.avail_out,r=t.next_in,s=t.input,a=t.avail_in,d=i.hold,h=i.bits,c=a,u=l,C=P;t:for(;;)switch(i.mode){case L:if(0===i.wrap){i.mode=13;break}for(;h<16;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}if(2&i.wrap&&35615===d){k[i.check=0]=255&d,k[1]=d>>>8&255,i.check=R(i.check,k,2,0),h=d=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&d)<<8)+(d>>8))%31){t.msg="incorrect header check",i.mode=30;break}if(8!=(15&d)){t.msg="unknown compression method",i.mode=30;break}if(h-=4,w=8+(15&(d>>>=4)),0===i.wbits)i.wbits=w;else if(w>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<w,t.adler=i.check=1,i.mode=512&d?10:12,h=d=0;break;case 2:for(;h<16;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}if(i.flags=d,8!=(255&i.flags)){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=d>>8&1),512&i.flags&&(k[0]=255&d,k[1]=d>>>8&255,i.check=R(i.check,k,2,0)),h=d=0,i.mode=3;case 3:for(;h<32;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}i.head&&(i.head.time=d),512&i.flags&&(k[0]=255&d,k[1]=d>>>8&255,k[2]=d>>>16&255,k[3]=d>>>24&255,i.check=R(i.check,k,4,0)),h=d=0,i.mode=4;case 4:for(;h<16;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}i.head&&(i.head.xflags=255&d,i.head.os=d>>8),512&i.flags&&(k[0]=255&d,k[1]=d>>>8&255,i.check=R(i.check,k,2,0)),h=d=0,i.mode=5;case 5:if(1024&i.flags){for(;h<16;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}i.length=d,i.head&&(i.head.extra_len=d),512&i.flags&&(k[0]=255&d,k[1]=d>>>8&255,i.check=R(i.check,k,2,0)),h=d=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((f=a<(f=i.length)?a:f)&&(i.head&&(w=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),D.arraySet(i.head.extra,s,r,f,w)),512&i.flags&&(i.check=R(i.check,s,f,r)),a-=f,r+=f,i.length-=f),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===a)break t;for(f=0;w=s[r+f++],i.head&&w&&i.length<65536&&(i.head.name+=String.fromCharCode(w)),w&&f<a;);if(512&i.flags&&(i.check=R(i.check,s,f,r)),a-=f,r+=f,w)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===a)break t;for(f=0;w=s[r+f++],i.head&&w&&i.length<65536&&(i.head.comment+=String.fromCharCode(w)),w&&f<a;);if(512&i.flags&&(i.check=R(i.check,s,f,r)),a-=f,r+=f,w)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;h<16;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}if(d!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}h=d=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;h<32;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}t.adler=i.check=B(d),h=d=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=o,t.avail_out=l,t.next_in=r,t.avail_in=a,i.hold=d,i.bits=h,2;t.adler=i.check=1,i.mode=12;case 12:if(5===e||6===e)break t;case 13:if(i.last){d>>>=7&h,h-=7&h,i.mode=27;break}for(;h<3;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}switch(i.last=1&d,--h,3&(d>>>=1)){case 0:i.mode=14;break;case 1:if(function(t){if(z){var e;for(_=new D.Buf32(512),H=new D.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(F(1,t.lens,0,288,_,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;F(2,t.lens,0,32,H,0,t.work,{bits:5}),z=!1}t.lencode=_,t.lenbits=9,t.distcode=H,t.distbits=5}(i),i.mode=20,6!==e)break;d>>>=2,h-=2;break t;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}d>>>=2,h-=2;break;case 14:for(d>>>=7&h,h-=7&h;h<32;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}if((65535&d)!=(d>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&d,h=d=0,i.mode=15,6===e)break t;case 15:i.mode=16;case 16:if(f=i.length){if(0===(f=l<(f=a<f?a:f)?l:f))break t;D.arraySet(n,s,r,f,o),a-=f,r+=f,l-=f,o+=f,i.length-=f;break}i.mode=12;break;case 17:for(;h<14;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}if(i.nlen=257+(31&d),d>>>=5,h-=5,i.ndist=1+(31&d),d>>>=5,h-=5,i.ncode=4+(15&d),d>>>=4,h-=4,286<i.nlen||30<i.ndist){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;h<3;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}i.lens[M[i.have++]]=7&d,d>>>=3,h-=3}for(;i.have<19;)i.lens[M[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,S={bits:i.lenbits},C=F(0,i.lens,0,19,i.lencode,0,i.work,S),i.lenbits=S.bits,C){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;x=(I=i.lencode[d&(1<<i.lenbits)-1])>>>16&255,E=65535&I,!((g=I>>>24)<=h);){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}if(E<16)d>>>=g,h-=g,i.lens[i.have++]=E;else{if(16===E){for(T=g+2;h<T;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}if(d>>>=g,h-=g,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}w=i.lens[i.have-1],f=3+(3&d),d>>>=2,h-=2}else if(17===E){for(T=g+3;h<T;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}h-=g,w=0,f=3+(7&(d>>>=g)),d>>>=3,h-=3}else{for(T=g+7;h<T;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}h-=g,w=0,f=11+(127&(d>>>=g)),d>>>=7,h-=7}if(i.have+f>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;f--;)i.lens[i.have++]=w}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,S={bits:i.lenbits},C=F(1,i.lens,0,i.nlen,i.lencode,0,i.work,S),i.lenbits=S.bits,C){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,S={bits:i.distbits},C=F(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,S),i.distbits=S.bits,C){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===e)break t;case 20:i.mode=21;case 21:if(6<=a&&258<=l){t.next_out=o,t.avail_out=l,t.next_in=r,t.avail_in=a,i.hold=d,i.bits=h,N(t,u),o=t.next_out,n=t.output,l=t.avail_out,r=t.next_in,s=t.input,a=t.avail_in,d=i.hold,h=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;x=(I=i.lencode[d&(1<<i.lenbits)-1])>>>16&255,E=65535&I,!((g=I>>>24)<=h);){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}if(x&&0==(240&x)){for(v=g,y=x,b=E;x=(I=i.lencode[b+((d&(1<<v+y)-1)>>v)])>>>16&255,E=65535&I,!(v+(g=I>>>24)<=h);){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}d>>>=v,h-=v,i.back+=v}if(d>>>=g,h-=g,i.back+=g,i.length=E,0===x){i.mode=26;break}if(32&x){i.back=-1,i.mode=12;break}if(64&x){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&x,i.mode=22;case 22:if(i.extra){for(T=i.extra;h<T;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}i.length+=d&(1<<i.extra)-1,d>>>=i.extra,h-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;x=(I=i.distcode[d&(1<<i.distbits)-1])>>>16&255,E=65535&I,!((g=I>>>24)<=h);){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}if(0==(240&x)){for(v=g,y=x,b=E;x=(I=i.distcode[b+((d&(1<<v+y)-1)>>v)])>>>16&255,E=65535&I,!(v+(g=I>>>24)<=h);){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}d>>>=v,h-=v,i.back+=v}if(d>>>=g,h-=g,i.back+=g,64&x){t.msg="invalid distance code",i.mode=30;break}i.offset=E,i.extra=15&x,i.mode=24;case 24:if(i.extra){for(T=i.extra;h<T;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}i.offset+=d&(1<<i.extra)-1,d>>>=i.extra,h-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===l)break t;if(i.offset>(f=u-l)){if((f=i.offset-f)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}p=f>i.wnext?(f-=i.wnext,i.wsize-f):i.wnext-f,f>i.length&&(f=i.length),m=i.window}else m=n,p=o-i.offset,f=i.length;for(l-=f=l<f?l:f,i.length-=f;n[o++]=m[p++],--f;);0===i.length&&(i.mode=21);break;case 26:if(0===l)break t;n[o++]=i.length,l--,i.mode=21;break;case 27:if(i.wrap){for(;h<32;){if(0===a)break t;a--,d|=s[r++]<<h,h+=8}if(u-=l,t.total_out+=u,i.total+=u,u&&(t.adler=i.check=(i.flags?R:A)(i.check,n,u,o-u)),u=l,(i.flags?d:B(d))!==i.check){t.msg="incorrect data check",i.mode=30;break}h=d=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;h<32;){if(0===a)break t;a--,d+=s[r++]<<h,h+=8}if(d!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}h=d=0}i.mode=29;case 29:C=1;break t;case 30:C=-3;break t;case 31:return-4;default:return O}return t.next_out=o,t.avail_out=l,t.next_in=r,t.avail_in=a,i.hold=d,i.bits=h,(i.wsize||u!==t.avail_out&&i.mode<30&&(i.mode<27||4!==e))&&V(t,t.output,t.next_out,u-t.avail_out)?(i.mode=31,-4):(c-=t.avail_in,u-=t.avail_out,t.total_in+=c,t.total_out+=u,i.total+=u,i.wrap&&u&&(t.adler=i.check=(i.flags?R:A)(i.check,n,u,t.next_out-u)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),C=(0==c&&0===u||4===e)&&C===P?-5:C)},i.inflateEnd=function(t){if(!t||!t.state)return O;var e=t.state;return e.window&&(e.window=null),t.state=null,P},i.inflateGetHeader=function(t,e){var i;return!t||!t.state||0==(2&(i=t.state).wrap)?O:((i.head=e).done=!1,P)},i.inflateSetDictionary=function(t,e){var i,s=e.length;return!t||!t.state||0!==(i=t.state).wrap&&11!==i.mode?O:11===i.mode&&A(1,e,s,0)!==i.check?-3:V(t,e,s,s)?(i.mode=31,-4):(i.havedict=1,P)},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,i){var P=t("../utils/common"),O=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],L=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],B=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,i,s,n,r,o,a){for(var l,d,h,c,u,f,p,m,g,x=a.bits,E=0,v=0,y=0,b=0,w=0,C=0,S=0,T=0,I=0,k=0,M=null,D=0,A=new P.Buf16(16),R=new P.Buf16(16),N=null,F=0,E=0;E<=15;E++)A[E]=0;for(v=0;v<s;v++)A[e[i+v]]++;for(w=x,b=15;1<=b&&0===A[b];b--);if(b<w&&(w=b),0===b)return n[r++]=20971520,n[r++]=20971520,a.bits=1,0;for(y=1;y<b&&0===A[y];y++);for(w<y&&(w=y),E=T=1;E<=15;E++)if(T<<=1,(T-=A[E])<0)return-1;if(0<T&&(0===t||1!==b))return-1;for(R[1]=0,E=1;E<15;E++)R[E+1]=R[E]+A[E];for(v=0;v<s;v++)0!==e[i+v]&&(o[R[e[i+v]]++]=v);if(f=0===t?(M=N=o,19):1===t?(M=O,D-=257,N=L,F-=257,256):(M=B,N=_,-1),E=y,u=r,S=v=k=0,h=-1,c=(I=1<<(C=w))-1,1===t&&852<I||2===t&&592<I)return 1;for(;;){for(g=o[v]<f?(m=0,o[v]):o[v]>f?(m=N[F+o[v]],M[D+o[v]]):(m=96,0),l=1<<(p=E-S),y=d=1<<C;n[u+(k>>S)+(d-=l)]=p<<24|m<<16|g|0,0!==d;);for(l=1<<E-1;k&l;)l>>=1;if(0!==l?(k&=l-1,k+=l):k=0,v++,0==--A[E]){if(E===b)break;E=e[i+o[v]]}if(w<E&&(k&c)!==h){for(u+=y,T=1<<(C=E-(S=0===S?w:S));C+S<b&&!((T-=A[C+S])<=0);)C++,T<<=1;if(I+=1<<C,1===t&&852<I||2===t&&592<I)return 1;n[h=k&c]=w<<24|C<<16|u-r|0}}return 0!==k&&(n[u+k]=E-S<<24|64<<16|0),a.bits=w,0}},{"../utils/common":41}],51:[function(t,e,i){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,i){var n=t("../utils/common");function s(t){for(var e=t.length;0<=--e;)t[e]=0}var r=16,l=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],d=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],a=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=new Array(576);s(h);var c=new Array(60);s(c);var u=new Array(512);s(u);var f=new Array(256);s(f);var p=new Array(29);s(p);var m,g,x,E=new Array(30);function v(t,e,i,s,n){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=s,this.max_length=n,this.has_stree=t&&t.length}function y(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function b(t){return t<256?u[t]:u[256+(t>>>7)]}function w(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function C(t,e,i){t.bi_valid>r-i?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>r-t.bi_valid,t.bi_valid+=i-r):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function S(t,e,i){C(t,i[2*e],i[2*e+1])}function T(t,e){for(var i=0;i|=1&t,t>>>=1,i<<=1,0<--e;);return i>>>1}function I(t,e,i){for(var s,n=new Array(16),r=0,o=1;o<=15;o++)n[o]=r=r+i[o-1]<<1;for(s=0;s<=e;s++){var a=t[2*s+1];0!==a&&(t[2*s]=T(n[a]++,a))}}function k(t){for(var e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function M(t){8<t.bi_valid?w(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function D(t,e,i,s){var n=2*e,r=2*i;return t[n]<t[r]||t[n]===t[r]&&s[e]<=s[i]}function A(t,e,i){for(var s=t.heap[i],n=i<<1;n<=t.heap_len&&(n<t.heap_len&&D(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!D(e,s,t.heap[n],t.depth));)t.heap[i]=t.heap[n],i=n,n<<=1;t.heap[i]=s}function R(t,e,i){var s,n,r,o,a=0;if(0!==t.last_lit)for(;s=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],n=t.pending_buf[t.l_buf+a],a++,0==s?S(t,n,e):(S(t,(r=f[n])+256+1,e),0!==(o=l[r])&&C(t,n-=p[r],o),S(t,r=b(--s),i),0!==(o=d[r])&&C(t,s-=E[r],o)),a<t.last_lit;);S(t,256,e)}function N(t,m){var e,i,s,n=m.dyn_tree,r=m.stat_desc.static_tree,o=m.stat_desc.has_stree,a=m.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,e=0;e<a;e++)0!==n[2*e]?(t.heap[++t.heap_len]=l=e,t.depth[e]=0):n[2*e+1]=0;for(;t.heap_len<2;)n[2*(s=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[s]=0,t.opt_len--,o&&(t.static_len-=r[2*s+1]);for(m.max_code=l,e=t.heap_len>>1;1<=e;e--)A(t,n,e);for(s=a;e=t.heap[1],t.heap[1]=t.heap[t.heap_len--],A(t,n,1),i=t.heap[1],t.heap[--t.heap_max]=e,t.heap[--t.heap_max]=i,n[2*s]=n[2*e]+n[2*i],t.depth[s]=(t.depth[e]>=t.depth[i]?t.depth[e]:t.depth[i])+1,n[2*e+1]=n[2*i+1]=s,t.heap[1]=s++,A(t,n,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t){for(var e,i,s,n,r,o=m.dyn_tree,a=m.max_code,l=m.stat_desc.static_tree,d=m.stat_desc.has_stree,h=m.stat_desc.extra_bits,c=m.stat_desc.extra_base,u=m.stat_desc.max_length,f=0,p=0;p<=15;p++)t.bl_count[p]=0;for(o[2*t.heap[t.heap_max]+1]=0,e=t.heap_max+1;e<573;e++)u<(p=o[2*o[2*(i=t.heap[e])+1]+1]+1)&&(p=u,f++),o[2*i+1]=p,a<i||(t.bl_count[p]++,n=0,c<=i&&(n=h[i-c]),r=o[2*i],t.opt_len+=r*(p+n),d&&(t.static_len+=r*(l[2*i+1]+n)));if(0!==f){do{for(p=u-1;0===t.bl_count[p];)p--}while(t.bl_count[p]--,t.bl_count[p+1]+=2,t.bl_count[u]--,0<(f-=2));for(p=u;0!==p;p--)for(i=t.bl_count[p];0!==i;)a<(s=t.heap[--e])||(o[2*s+1]!==p&&(t.opt_len+=(p-o[2*s+1])*o[2*s],o[2*s+1]=p),i--)}}(t),I(n,l,t.bl_count)}function F(t,e,i){var s,n,r=-1,o=e[1],a=0,l=7,d=4;for(0===o&&(l=138,d=3),e[2*(i+1)+1]=65535,s=0;s<=i;s++)n=o,o=e[2*(s+1)+1],++a<l&&n===o||(a<d?t.bl_tree[2*n]+=a:0!==n?(n!==r&&t.bl_tree[2*n]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,r=n,d=(a=0)===o?(l=138,3):n===o?(l=6,3):(l=7,4))}function P(t,e,i){var s,n,r=-1,o=e[1],a=0,l=7,d=4;for(0===o&&(l=138,d=3),s=0;s<=i;s++)if(n=o,o=e[2*(s+1)+1],!(++a<l&&n===o)){if(a<d)for(;S(t,n,t.bl_tree),0!=--a;);else 0!==n?(n!==r&&(S(t,n,t.bl_tree),a--),S(t,16,t.bl_tree),C(t,a-3,2)):a<=10?(S(t,17,t.bl_tree),C(t,a-3,3)):(S(t,18,t.bl_tree),C(t,a-11,7));r=n,d=(a=0)===o?(l=138,3):n===o?(l=6,3):(l=7,4)}}s(E);var O=!1;function L(t,e,i,s){C(t,0+(s?1:0),3),e=e,i=i,M(t=t),w(t,i),w(t,~i),n.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}i._tr_init=function(t){O||(function(){for(var t,e,i,s,n=new Array(16),r=i=0;r<28;r++)for(p[r]=i,t=0;t<1<<l[r];t++)f[i++]=r;for(f[i-1]=r,r=s=0;r<16;r++)for(E[r]=s,t=0;t<1<<d[r];t++)u[s++]=r;for(s>>=7;r<30;r++)for(E[r]=s<<7,t=0;t<1<<d[r]-7;t++)u[256+s++]=r;for(e=0;e<=15;e++)n[e]=0;for(t=0;t<=143;)h[2*t+1]=8,t++,n[8]++;for(;t<=255;)h[2*t+1]=9,t++,n[9]++;for(;t<=279;)h[2*t+1]=7,t++,n[7]++;for(;t<=287;)h[2*t+1]=8,t++,n[8]++;for(I(h,287,n),t=0;t<30;t++)c[2*t+1]=5,c[2*t]=T(t,5);m=new v(h,l,257,286,15),g=new v(c,d,0,30,15),x=new v(new Array(0),o,0,19,7)}(),O=!0),t.l_desc=new y(t.dyn_ltree,m),t.d_desc=new y(t.dyn_dtree,g),t.bl_desc=new y(t.bl_tree,x),t.bi_buf=0,t.bi_valid=0,k(t)},i._tr_stored_block=L,i._tr_flush_block=function(t,e,i,s){var n,r,o=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){for(var e=4093624447,i=0;i<=31;i++,e>>>=1)if(1&e&&0!==t.dyn_ltree[2*i])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(i=32;i<256;i++)if(0!==t.dyn_ltree[2*i])return 1;return 0}(t)),N(t,t.l_desc),N(t,t.d_desc),o=function(t){var e;for(F(t,t.dyn_ltree,t.l_desc.max_code),F(t,t.dyn_dtree,t.d_desc.max_code),N(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*a[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(r=t.static_len+3+7>>>3)<=n&&(n=r)):n=r=i+5,i+4<=n&&-1!==e?L(t,e,i,s):4===t.strategy||r===n?(C(t,2+(s?1:0),3),R(t,h,c)):(C(t,4+(s?1:0),3),function(t,e,i,s){var n;for(C(t,e-257,5),C(t,i-1,5),C(t,s-4,4),n=0;n<s;n++)C(t,t.bl_tree[2*a[n]+1],3);P(t,t.dyn_ltree,e-1),P(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),R(t,t.dyn_ltree,t.dyn_dtree)),k(t),s&&M(t)},i._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(f[i]+256+1)]++,t.dyn_dtree[2*b(e)]++),t.last_lit===t.lit_bufsize-1},i._tr_align=function(t){C(t,2,3),S(t,256,h),16===(t=t).bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":41}],53:[function(t,e,i){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,i){e.exports="function"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)}),function(t,e){"function"==typeof define&&define.amd?define([],e):"undefined"!=typeof exports?e():(e(),t.FileSaver={})}(this,function(){var l="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0;function d(t,e,i){var s=new XMLHttpRequest;s.open("GET",t),s.responseType="blob",s.onload=function(){n(s.response,e,i)},s.onerror=function(){console.error("could not download file")},s.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&e.status<=299}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(i)}}var h=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),n=l.saveAs||("object"!=typeof window||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!h?function(t,e,i){var s=l.URL||l.webkitURL,n=document.createElement("a");e=e||t.name||"download",n.download=e,n.rel="noopener","string"==typeof t?(n.href=t,n.origin!==location.origin?r(n.href)?d(t,e,i):o(n,n.target="_blank"):o(n)):(n.href=s.createObjectURL(t),setTimeout(function(){s.revokeObjectURL(n.href)},4e4),setTimeout(function(){o(n)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,i){var s;e=e||t.name||"download","string"==typeof t?r(t)?d(t,e,i):((s=document.createElement("a")).href=t,s.target="_blank",setTimeout(function(){o(s)})):navigator.msSaveOrOpenBlob((t=t,void 0===(i=i)?i={autoBom:!1}:"object"!=typeof i&&(console.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t),e)}:function(t,e,i,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return d(t,e,i);var n,r,o,e="application/octet-stream"===t.type,i=/constructor/i.test(l.HTMLElement)||l.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);(a||e&&i||h)&&"undefined"!=typeof FileReader?((n=new FileReader).onloadend=function(){var t=n.result,t=a?t:t.replace(/^data:[^;]*;/,"data:attachment/file;");s?s.location.href=t:location=t,s=null},n.readAsDataURL(t)):(r=l.URL||l.webkitURL,o=r.createObjectURL(t),s?s.location=o:location.href=o,s=null,setTimeout(function(){r.revokeObjectURL(o)},4e4))});l.saveAs=n.saveAs=n,"undefined"!=typeof module&&(module.exports=n)});var parser=function(i){var s={};function n(t){if(s[t])return s[t].exports;var e=s[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=s,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,i){var s="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",n=new RegExp("^"+s+"$");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,i){if(e)for(var s=Object.keys(e),n=s.length,r=0;r<n;r++)t[s[r]]="strict"===i?[e[s[r]]]:e[s[r]]},e.getValue=function(t){return e.isExist(t)?t:""},e.buildOptions=function(t,e,i){var s={};if(!t)return e;for(var n=0;n<i.length;n++)void 0!==t[i[n]]?s[i[n]]=t[i[n]]:s[i[n]]=e[i[n]];return s},e.isName=function(t){return!(null==n.exec(t))},e.getAllMatches=function(t,e){for(var i=[],s=e.exec(t);s;){for(var n=[],r=s.length,o=0;o<r;o++)n.push(s[o]);i.push(n),s=e.exec(t)}return i},e.nameRegexp=s},function(t,e,i){var m=i(0),g=i(0).buildOptions,x=i(4);"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,m.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var E={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(t,e){return t},attrValueProcessor:function(t,e){return t},stopNodes:[]};e.defaultOptions=E;var v=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function y(t,e,i){return e&&(i.trimValues&&(e=e.trim()),e=a(e=i.tagValueProcessor(e,t),i.parseNodeValue,i.parseTrueNumberOnly)),e}function a(t,e,i){var s;return e&&"string"==typeof t?(""===t.trim()||isNaN(t)?s="true"===t||"false"!==t&&t:(-1!==t.indexOf("0x")?s=Number.parseInt(t,16):-1!==t.indexOf(".")?(s=Number.parseFloat(t),t=t.replace(/\.?0+$/,"")):s=Number.parseInt(t,10),i&&(s=String(s)===t?s:t)),s):m.isExist(t)?t:""}e.props=v;var l=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function b(t,e){if(!e.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");for(var i=m.getAllMatches(t,l),s=i.length,n={},r=0;r<s;r++){var o=function(t,e){if(e.ignoreNameSpace){var i=t.split(":"),e="/"===t.charAt(0)?"/":"";if("xmlns"===i[0])return"";2===i.length&&(t=e+i[1])}return t}(i[r][1],e);o.length&&(void 0!==i[r][4]?(e.trimValues&&(i[r][4]=i[r][4].trim()),i[r][4]=e.attrValueProcessor(i[r][4],o),n[e.attributeNamePrefix+o]=a(i[r][4],e.parseAttributeValue,e.parseTrueNumberOnly)):e.allowBooleanAttributes&&(n[e.attributeNamePrefix+o]=!0))}if(Object.keys(n).length){if(e.attrNodeName){t={};return t[e.attrNodeName]=n,t}return n}}}function w(t,e,i,s){i=t.indexOf(e,i);if(-1===i)throw new Error(s);return i+e.length-1}e.getTraversalObj=function(t,e){t=t.replace(/(\r\n)|\n/," "),e=g(e,E,v);for(var i,s,n,r,o,a,l,d,h,c=new x("!xml"),u=c,f="",p=0;p<t.length;p++)"<"===t[p]?p="/"===t[p+1]?(i=w(t,">",p,"Closing Tag is not closed."),s=t.substring(p+2,i).trim(),!e.ignoreNameSpace||-1!==(n=s.indexOf(":"))&&(s=s.substr(n+1)),u&&(u.val?u.val=m.getValue(u.val)+""+y(s,f,e):u.val=y(s,f,e)),e.stopNodes.length&&e.stopNodes.includes(u.tagname)&&(u.child=[],null==u.attrsMap&&(u.attrsMap={}),u.val=t.substr(u.startIndex+1,p-u.startIndex-1)),u=u.parent,f="",i):"?"===t[p+1]?w(t,"?>",p,"Pi Tag is not closed."):"!--"===t.substr(p+1,3)?w(t,"--\x3e",p,"Comment is not closed."):"!D"===t.substr(p+1,2)?(a=w(t,">",p,"DOCTYPE is not closed."),0<=t.substring(p,a).indexOf("[")?t.indexOf("]>",p)+1:a):"!["===t.substr(p+1,2)?(o=w(t,"]]>",p,"CDATA is not closed.")-2,r=t.substring(p+9,o),f&&(u.val=m.getValue(u.val)+""+y(u.tagname,f,e),f=""),e.cdataTagName?(d=new x(e.cdataTagName,u,r),u.addChild(d),u.val=m.getValue(u.val)+e.cdataPositionChar,r&&(d.val=r)):u.val=(u.val||"")+(r||""),2+o):(d=(a=function(t,e){for(var i,s="",n=e;n<t.length;n++){var r=t[n];if(i)r===i&&(i="");else if('"'===r||"'"===r)i=r;else{if(">"===r)return{data:s,index:n};"\t"===r&&(r=" ")}s+=r}}(t,p+1)).data,r=a.index,o=d.indexOf(" "),a=d,-1!==o&&(a=d.substr(0,o).trimRight(),d=d.substr(o+1)),e.ignoreNameSpace&&-1!==(l=a.indexOf(":"))&&(a=a.substr(l+1)),u&&f&&"!xml"!==u.tagname&&(u.val=m.getValue(u.val)+""+y(u.tagname,f,e)),0<d.length&&d.lastIndexOf("/")===d.length-1?(d="/"===a[a.length-1]?a=a.substr(0,a.length-1):d.substr(0,d.length-1),h=new x(a,u,""),a!==d&&(h.attrsMap=b(d,e)),u.addChild(h)):(h=new x(a,u),e.stopNodes.length&&e.stopNodes.includes(h.tagname)&&(h.startIndex=r),a!==d&&(h.attrsMap=b(d,e)),u.addChild(h),u=h),f="",r):f+=t[p];return c}},function(t,s,e){var n=e(3),r=e(1),o=e(1),a=e(0).buildOptions,l=e(5);s.parse=function(t,e,i){if(i){i=l.validate(t,i=!0===i?{}:i);if(!0!==i)throw Error(i.err.msg)}e=a(e,o.defaultOptions,o.props);t=r.getTraversalObj(t,e);return n.convertToJson(t,e)},s.convertTonimn=e(6).convert2nimn,s.getTraversalObj=r.getTraversalObj,s.convertToJson=n.convertToJson,s.convertToJsonString=e(7).convertToJsonString,s.validate=l.validate,s.j2xParser=e(8),s.parseToNimn=function(t,e,i){return s.convertTonimn(s.getTraversalObj(t,i),e,i)}},function(t,e,i){var d=i(0);e.convertToJson=function t(e,i){var s={};if(!(e.child&&!d.isEmptyObject(e.child)||e.attrsMap&&!d.isEmptyObject(e.attrsMap)))return d.isExist(e.val)?e.val:"";d.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==i.cdataPositionChar)&&("strict"===i.arrayMode?s[i.textNodeName]=[e.val]:s[i.textNodeName]=e.val),d.merge(s,e.attrsMap,i.arrayMode);for(var n=Object.keys(e.child),r=0;r<n.length;r++){var o,a=n[r];if(e.child[a]&&1<e.child[a].length)for(var l in s[a]=[],e.child[a])s[a].push(t(e.child[a][l],i));else!0===i.arrayMode?(o=t(e.child[a][0],i),s[a]="object"==typeof o?[o]:o):"strict"===i.arrayMode?s[a]=[t(e.child[a][0],i)]:s[a]=t(e.child[a][0],i)}return s}},function(t,e,i){t.exports=function(t,e,i){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.val=i,this.addChild=function(t){Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}}},function(t,e,i){var f=i(0),p={allowBooleanAttributes:!1},m=["allowBooleanAttributes"];function g(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){var i=1;for(e+=8;e<t.length;e++)if("<"===t[e])i++;else if(">"===t[e]&&0==--i)break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}e.validate=function(t,e){e=f.buildOptions(e,p,m);var i=[],s=!1,n=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(var r=0;r<t.length;r++){if("<"!==t[r]){if(" "===t[r]||"\t"===t[r]||"\n"===t[r]||"\r"===t[r])continue;return E("InvalidChar","char '"+t[r]+"' is not expected.",v(t,r))}if("?"===t[++r]){if((r=function(t,e){for(var i=e;e<t.length;e++)if("?"==t[e]||" "==t[e]){var s=t.substr(i,e-i);if(5<e&&"xml"===s)return E("InvalidXml","XML declaration allowed only at the start of the document.",v(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}(t,++r)).err)return r}else if("!"!==t[r]){var o=!1;"/"===t[r]&&(o=!0,r++);for(var a="";r<t.length&&">"!==t[r]&&" "!==t[r]&&"\t"!==t[r]&&"\n"!==t[r]&&"\r"!==t[r];r++)a+=t[r];if("/"===(a=a.trim())[a.length-1]&&(a=a.substring(0,a.length-1),r--),h=a,!f.isName(h))return E("InvalidTag",0===a.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+a+"' is an invalid name.",v(t,r));var l=function(t,e){for(var i="",s="",n=!1;e<t.length;e++){if('"'===t[e]||"'"===t[e])if(""===s)s=t[e];else{if(s!==t[e])continue;s=""}else if(">"===t[e]&&""===s){n=!0;break}i+=t[e]}return""===s&&{value:i,index:e,tagClosed:n}}(t,r);if(!1===l)return E("InvalidAttr","Attributes for '"+a+"' have open quote.",v(t,r));var d=l.value,r=l.index;if("/"===d[d.length-1]){var h=x(d=d.substring(0,d.length-1),e);if(!0!==h)return E(h.err.code,h.err.msg,v(t,r-d.length+h.err.line));s=!0}else if(o){if(!l.tagClosed)return E("InvalidTag","Closing tag '"+a+"' doesn't have proper closing.",v(t,r));if(0<d.trim().length)return E("InvalidTag","Closing tag '"+a+"' can't have attributes or invalid starting.",v(t,r));var c=i.pop();if(a!==c)return E("InvalidTag","Closing tag '"+c+"' is expected inplace of '"+a+"'.",v(t,r));0==i.length&&(n=!0)}else{c=x(d,e);if(!0!==c)return E(c.err.code,c.err.msg,v(t,r-d.length+c.err.line));if(!0===n)return E("InvalidXml","Multiple possible root nodes found.",v(t,r));i.push(a),s=!0}for(r++;r<t.length;r++)if("<"!==t[r]){if("&"===t[r]){var u=function(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){var i=/\d/;for("x"===t[e]&&(e++,i=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(i))break}return-1}(t,++e);for(var i=0;e<t.length;e++,i++)if(!(t[e].match(/\w/)&&i<20)){if(";"===t[e])break;return-1}return e}(t,r);if(-1==u)return E("InvalidChar","char '&' is not expected.",v(t,r));r=u}}else{if("!"!==t[r+1])break;r=g(t,++r)}"<"===t[r]&&r--}else r=g(t,r)}return s?!(0<i.length)||E("InvalidXml","Invalid '"+JSON.stringify(i,null,4).replace(/\r?\n/g,"")+"' found.",1):E("InvalidXml","Start tag expected.",1)};var o=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function x(t,e){for(var i=f.getAllMatches(t,o),s={},n=0;n<i.length;n++){if(0===i[n][1].length)return E("InvalidAttr","Attribute '"+i[n][2]+"' has no space in starting.",a(t,i[n][0]));if(void 0===i[n][3]&&!e.allowBooleanAttributes)return E("InvalidAttr","boolean attribute '"+i[n][2]+"' is not allowed.",a(t,i[n][0]));var r=i[n][2];if(!f.isName(r))return E("InvalidAttr","Attribute '"+r+"' is an invalid name.",a(t,i[n][0]));if(s.hasOwnProperty(r))return E("InvalidAttr","Attribute '"+r+"' is repeated.",a(t,i[n][0]));s[r]=1}return!0}function E(t,e,i){return{err:{code:t,msg:e,line:i}}}function v(t,e){return t.substring(0,e).split(/\r?\n/).length}function a(t,e){return t.indexOf(e)+e.length}},function(t,e,i){function s(t){return String.fromCharCode(t)}function p(t,e,i){if("string"==typeof e)return t&&t[0]&&void 0!==t[0].val?m(t[0].val):m(t);var s=void 0===(s=t)?x.missingChar:null===s?x.nilChar:!(s.child&&0===Object.keys(s.child).length&&(!s.attrsMap||0===Object.keys(s.attrsMap).length))||x.emptyChar;if(!0!==s)return s;var n="";if(Array.isArray(e)){n+=x.arrStart;var r=e[0],o=t.length;if("string"==typeof r)for(var a=0;a<o;a++)var l=m(t[a].val),n=g(n,l);else for(var d=0;d<o;d++){var h=p(t[d],r,i);n=g(n,h)}n+=x.arrayEnd}else{n+=x.objStart;var c,u=Object.keys(e);for(c in Array.isArray(t)&&(t=t[0]),u){var f=u[c],f=!i.ignoreAttributes&&t.attrsMap&&t.attrsMap[f]?p(t.attrsMap[f],e[f],i):f===i.textNodeName?p(t.val,e[f],i):p(t.child[f],e[f],i);n=g(n,f)}}return n}function m(t){switch(t){case void 0:return x.missingPremitive;case null:return x.nilPremitive;case"":return x.emptyValue;default:return t}}function g(t,e){return r(e[0])||r(t[t.length-1])||(t+=x.boundryChar),t+e}var x={nilChar:s(176),missingChar:s(201),nilPremitive:s(175),missingPremitive:s(200),emptyChar:s(178),emptyValue:s(177),boundryChar:s(179),objStart:s(198),arrStart:s(204),arrayEnd:s(185)},n=[x.nilChar,x.nilPremitive,x.missingChar,x.missingPremitive,x.boundryChar,x.emptyChar,x.emptyValue,x.arrayEnd,x.objStart,x.arrStart],r=function(t){return-1!==n.indexOf(t)},o=i(1),a=i(0).buildOptions;e.convert2nimn=function(t,e,i){return i=a(i,o.defaultOptions,o.props),p(t,e,i)}},function(t,e,i){function d(t,e,i){for(var s,n="{",r=Object.keys(t.child),o=0;o<r.length;o++){var a=r[o];if(t.child[a]&&1<t.child[a].length){for(var l in n+='"'+a+'" : [ ',t.child[a])n+=d(t.child[a][l],e)+" , ";n=n.substr(0,n.length-1)+" ] "}else n+='"'+a+'" : '+d(t.child[a][0],e)+" ,"}return h.merge(n,t.attrsMap),h.isEmptyObject(n)?h.isExist(t.val)?t.val:"":(h.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)&&(n+='"'+e.textNodeName+'" : '+(!0!==(s=t.val)&&!1!==s&&isNaN(s)?'"'+s+'"':s)),(n=","===n[n.length-1]?n.substr(0,n.length-2):n)+"}")}var h=i(0),s=i(0).buildOptions,n=i(1);e.convertToJsonString=function(t,e){return(e=s(e,n.defaultOptions,n.props)).indentBy=e.indentBy||"",d(t,e)}},function(t,e,i){var s=i(0).buildOptions,n={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t}},r=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function o(t){this.options=s(t,n,r),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=p),this.options.cdataTagName?this.isCDATA=m:this.isCDATA=function(){return!1},this.replaceCDATAstr=a,this.replaceCDATAarr=l,this.options.format?(this.indentate=f,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=u,this.buildObjNode=h):(this.buildTextNode=c,this.buildObjNode=d),this.buildTextValNode=c,this.buildObjectNode=d}function a(t,e){return t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t?t+"<![CDATA["+e+"]]"+this.tagEndChar:t.replace(this.options.cdataPositionChar,"<![CDATA["+e+"]]"+this.tagEndChar)}function l(t,e){if(t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t)return t+"<![CDATA["+e.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(var i in e)t=t.replace(this.options.cdataPositionChar,"<![CDATA["+e[i]+"]]>");return t+this.newLine}function d(t,e,i,s){return i&&!t.includes("<")?this.indentate(s)+"<"+e+i+">"+t+"</"+e+this.tagEndChar:this.indentate(s)+"<"+e+i+this.tagEndChar+t+this.indentate(s)+"</"+e+this.tagEndChar}function h(t,e,i,s){return""!==t?this.buildObjectNode(t,e,i,s):this.indentate(s)+"<"+e+i+"/"+this.tagEndChar}function c(t,e,i,s){return this.indentate(s)+"<"+e+i+">"+this.options.tagValueProcessor(t)+"</"+e+this.tagEndChar}function u(t,e,i,s){return""!==t?this.buildTextValNode(t,e,i,s):this.indentate(s)+"<"+e+i+"/"+this.tagEndChar}function f(t){return this.options.indentBy.repeat(t)}function p(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}function m(t){return t===this.options.cdataTagName}o.prototype.parse=function(t){return this.j2x(t,0).val},o.prototype.j2x=function(t,e){for(var i="",s="",n=Object.keys(t),r=n.length,o=0;o<r;o++){var a=n[o];if(void 0!==t[a])if(null===t[a])s+=this.indentate(e)+"<"+a+"/"+this.tagEndChar;else if(t[a]instanceof Date)s+=this.buildTextNode(t[a],a,"",e);else if("object"!=typeof t[a]){var l=this.isAttribute(a);l?i+=" "+l+'="'+this.options.attrValueProcessor(""+t[a])+'"':this.isCDATA(a)?t[this.options.textNodeName]?s+=this.replaceCDATAstr(t[this.options.textNodeName],t[a]):s+=this.replaceCDATAstr("",t[a]):a===this.options.textNodeName?t[this.options.cdataTagName]||(s+=this.options.tagValueProcessor(""+t[a])):s+=this.buildTextNode(t[a],a,"",e)}else if(Array.isArray(t[a]))if(this.isCDATA(a))s+=this.indentate(e),t[this.options.textNodeName]?s+=this.replaceCDATAarr(t[this.options.textNodeName],t[a]):s+=this.replaceCDATAarr("",t[a]);else for(var d=t[a].length,h=0;h<d;h++){var c,u=t[a][h];void 0===u||(null===u?s+=this.indentate(e)+"<"+a+"/"+this.tagEndChar:"object"==typeof u?(c=this.j2x(u,e+1),s+=this.buildObjNode(c.val,a,c.attrStr,e)):s+=this.buildTextNode(u,a,"",e))}else if(this.options.attrNodeName&&a===this.options.attrNodeName)for(var f=Object.keys(t[a]),p=f.length,m=0;m<p;m++)i+=" "+f[m]+'="'+this.options.attrValueProcessor(""+t[a][f[m]])+'"';else{l=this.j2x(t[a],e+1);s+=this.buildObjNode(l.val,a,l.attrStr,e)}}return{attrStr:i,val:s}},t.exports=o}]),JsonView=function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(t){0<t.children.length&&((t=t.el.querySelector(".sms"))&&t.classList.replace("sm-caret-right","sm-caret-down"))}function i(t){0<t.children.length&&((t=t.el.querySelector(".sms"))&&t.classList.replace("sm-caret-down","sm-caret-right"))}function n(t){t.isExpanded?(t.isExpanded=!1,i(t),function e(t){t.children.forEach(function(t){t.el.classList.add("hide"),t.isExpanded&&e(t)})}(t)):(t.isExpanded=!0,e(t),function e(t){t.children.forEach(function(t){t.el.classList.remove("hide"),t.isExpanded&&e(t)})}(t))}function o(t){var e,i,s=document.createElement("div");0<t.children.length?(s.innerHTML=function(t){var t=(e=0<arguments.length&&void 0!==t?t:{}).key,e=e.size;return'\n    <div class="line">\n      <div class="caret-icon"><i class="sms sm-caret-right"></i></div>\n      <div class="json-key">'.concat(t,'</div>\n      <div class="json-size">').concat(e,"</div>\n    </div>\n  ")}({key:t.key,size:(i=(e=t).children.length,"array"===e.type?"[".concat(i,"]"):"object"===e.type?"{".concat(i,"}"):null)}),s.querySelector(".caret-icon").addEventListener("click",function(){n(t)})):s.innerHTML=function(t){var e=(i=0<arguments.length&&void 0!==t?t:{}).key,t=i.value,i=i.type;return'\n    <div class="line">\n      <div class="empty-icon"></div>\n      <div class="json-key">'.concat(e,'</div>\n      <div class="json-separator">:</div>\n      <div class="json-value json-').concat(i,'">').concat(t,"</div>\n    </div>\n  ")}({key:t.key,value:t.value,type:r(t.value)});s=s.children[0];return null!==t.parent&&s.classList.add("hide"),s.style="margin-left: "+18*t.depth+"px;",s}function a(t){var e=r(t);return Array.isArray(t)&&(e="array"),t instanceof Date&&!isNaN(t)&&(e="date"),e=null===t?"null":e}function l(t,e){e(t),0<t.children.length&&t.children.forEach(function(t){l(t,e)})}function d(t){t=0<arguments.length&&void 0!==t?t:{};return{key:t.key||null,parent:t.parent||null,value:t.hasOwnProperty("value")?t.value:null,isExpanded:t.isExpanded||!1,type:t.type||null,children:t.children||[],el:t.el||null,depth:t.depth||0}}function s(t){var e="string"==typeof t?JSON.parse(t):t,t=d({value:e,key:a(e),type:a(e)});return function t(e,i){if("object"===r(e)&&"date"!==i.type)for(var s in e){var n=d({value:e[s],key:s,depth:i.depth+1,type:a(e[s]),parent:i});i.children.push(n),t(e[s],n)}}(e,t),t}function h(t,e){var i,s=((i=document.createElement("div")).className="json-container",i);l(t,function(t){t.el=o(t),s.appendChild(t.el)}),e.appendChild(s)}return t.collapseChildren=function(e){l(e,function(t){t.isExpanded=!1,t.depth>e.depth&&t.el.classList.add("hide"),i(t)})},t.createTree=s,t.expandChildren=function(t){l(t,function(t){t.el.classList.remove("hide"),t.isExpanded=!0,e(t)})},t.render=h,t.renderJSON=function(t,e){return h(t=s("string"==typeof t?JSON.parse(t):t),e),t},t.traverseTree=l,t}({});function GetXmlHttpObject(){return window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null}function myContextMenu(t,e,i){if(!Ext.fly(t.getTarget()).hasClass("x-form-textarea"))return t.preventDefault(),!1}async function start(){let e;try{e=setTimeout(()=>{Ext.get("loading-text").dom.innerHTML="Getting configuration..."},250),await SM.GetUserObject(),void 0!==curUser.username?(clearTimeout(e),loadApp()):Ext.get("loading-text").dom.innerHTML="No account for "+window.oidcProvider.token}catch(t){clearTimeout(e),Ext.get("loading-text").dom.innerHTML=t.message}}async function loadApp(){try{Ext.isReady=!0,Ext.BLANK_IMAGE_URL=Ext.isIE6||Ext.isIE7||Ext.isAir?"/ext/resources/images/default/s.gif":"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",Ext.getBody().on("contextmenu",myContextMenu),Ext.QuickTips.init(),Ext.apply(Ext.QuickTips.getQuickTip(),{maxWidth:200,minWidth:10,showDelay:500,trackMouse:!1});var i=await Ext.Ajax.requestPromise({url:STIGMAN.Env.apiBase+"/op/configuration",method:"GET"});appConfig=JSON.parse(i.response.responseText);var s=new SM.AppNavTree({id:"app-nav-tree",cls:"sm-round-panel",margins:{top:10,right:5,bottom:10,left:10},border:!1,region:"west"});const d=new SM.MainTabPanel({id:"main-tab-panel",region:"center",margins:{top:5,right:10,bottom:10,left:5},border:!1});STIGMAN.Env.commit.branch,STIGMAN.Env.commit.sha,STIGMAN.Env.commit.describe;Ext.QuickTips.register({target:"sm-home-version-sprite",title:"Commit info",text:`branch: ${STIGMAN.Env.commit.branch}&lt;br/&gt;sha: ${STIGMAN.Env.commit.sha}&lt;br/&gt;describe: `+STIGMAN.Env.commit.describe,width:200,dismissDelay:0});var n=`<div class='sm-home-title'>
		STIG Manager<span id='sm-home-oss-sprite'>OSS</span><span id='sm-home-version-sprite'>${STIGMAN.Env.version}</span></div>`,r=new SM.HomeTab({border:!1,region:"center",layout:"table",layoutConfig:{tableAttrs:{style:{width:"100%",padding:"20px","table-layout":"fixed"}},columns:3},items:[{html:n,colspan:3,border:!1},{xtype:"sm-home-widget-welcome"},{xtype:"sm-home-widget-doc"},{xtype:"sm-home-widget-resources"}]});d.add({layout:"border",border:!1,title:"Home",iconCls:"sm-stig-icon",items:[{region:"center",cls:"sm-round-panel",border:!1,margins:{top:SM.Margin.top,right:SM.Margin.edge,bottom:SM.Margin.bottom,left:SM.Margin.edge},layout:"fit",items:r}]});let t={id:"app-viewport",layout:"border",items:[]};var o,a,l=new Classification(appConfig.classification);let e;l.showBanner?(e=new Ext.Panel({region:"center",layout:"border",border:!1,items:[s,d]}),o=new Ext.XTemplate("<div class=sm-banner-{classificationCls}>","<div class='sm-banner-body-text'>{classificationText}</div>"),a=new Ext.Panel({region:"north",height:20,border:!1,tpl:o,data:{classificationCls:l.classificationCls,classificationText:l.classificationText}}),t.items.push(a,e)):t.items.push(s,d),new Ext.Viewport(t),e&&(SM.contentEl=e.getEl()),Ext.get("loading").remove(),Ext.get("loading-mask").fadeOut({duration:.5,remove:!0}),Ext.QuickTips.register({target:"sm-home-version-sprite",title:"Commit info",text:`branch: ${STIGMAN.Env.commit.branch}<br/>sha: ${STIGMAN.Env.commit.sha}<br/>describe: `+STIGMAN.Env.commit.describe,width:200,dismissDelay:6e4})}catch(t){Ext.get("indicator").dom.innerHTML=t.message}}function showAbout(){alert(copyrightStr+"\n\n"+licenseStr)}Ext.Ajax.timeout=3e7,Ext.Msg.minWidth=300,Ext.Ajax.disableCaching=!1,start();
